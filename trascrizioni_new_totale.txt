-----------------
VIDEOLEZIONE 01 :
-----------------

buongiorno a tutti buongiorno buongiorno buongiorno buongiorno

allora siamo 11 milite più o meno sapete quanti dovremmo essere? è giusto per regolarci possiamo già iniziare vogliamo aspettare qualcuno

buongiorno Alessandra ciao buongiorno buongiorno Alessandra

Ciao buongiorno

Buongiorno

Ti sei sdoppiata

Vedo due Alessandra

Sì oggi con Teams

Non la posso fare

Non capisco perché

Mi si riega da connettersi

La F

Mi chiede se non so Adesso poi come avviamo magari provo a fare un riavvio.

Ale, l'altro nostro mi sembra che ci siamo tutti, vero? Stavo facendo la conta adesso.

Sì, sì, sì, sì, possiamo iniziare. Sì, sì, vedo anche Rosario e quindi sì, sì, assolutamente, anche Marco Grecchi, quindi l'ATRT siamo a posto.

Perfetto, allora iniziamo. Grazie a te.

Allora, condivido lo schermo. Io ho fatto venerdì il corso per la compilazione ambienti GBF, MCHR, poi so che avete fatto anche altri corsi ovviamente di compilazione anche con altri colleghi.

Tra i partecipanti più o meno avete tutti quindi un ambiente in questo momento di sviluppo configurato sul vostro PC o ancora c'è qualcuno che non ha un ambiente simile?

Allora io sono riuscito a compilare ma non sono riuscito a farlo partire sotto Tomcat,

non ho sicuramente capito se è un modulo che mi viene tirato su e basta, però è tutto completamente configurato.

Ok, c'è qualcuno che proprio non ha il workspace

non ha Eclipse, non ha niente?

oppure tutti

io ho Eclipse con il workspace

Tomcat, insomma la partito anche

poi siamo tutti con qualcosa

guarda, nel suo tempo sto sentendo, scusatemi

il collega Igor Campos

che dovrebbe essere in sala d'attesa

io non lo vedo

non vorrei che

sia stato un altro evento

perché ci sta un evento per la mattina

e un evento per il pomeriggio

ora glielo dico

lo chiamo e glielo dico

eccolo qua

perfetto

adesso ci siamo

va bene

chiedevo questo perché adesso

iniziamo con la presentazione con le le slide eccetera, però la mia idea era magari dividere un po' la giornata in realtà,

La mattinata intera, insomma, faccio vedere la presentazione, parlo, insomma, ma magari durante le slide vedete che ci sono degli esercizi, quindi sicuramente nella mattinata gli esercizi li farò io, quindi poi evitate, insomma, di riprodurre gli esercizi sul vostro PC, meglio che seguite me, perché poi magari nel pomeriggio invece ci riserviamo magari, poi vediamo quanto, se magari tutto il pomeriggio, se magari un paio d'ore nel pomeriggio,

per voi che semplicemente vi rifate gli esercizi che abbiamo fatto nella mattina sul vostro PC, così insomma mettete mano un po' al codice, d'accordo? Per quello che chiedevo, però mi pare di capire che abbiamo tutti quanti un eclipse e un workspace, quindi non dovrebbero esserci problemi.

quindi non dovrebbero esserci problemi.

Ok, allora, iniziamo con la prima parte introduttiva. Io la faccio sempre, perché non so magari se già ve l'ho fatta ad alcuni di voi,

sicuramente nel dubbio la rifaccio, tanto è una cosa molto veloce,

alla peggio è soltanto l'ennesimo ripasso.

soltanto l'ennesimo ripasso.

Parlando di Arias,

tanto questo ormai penso che è consolidato,

che è un ERP web,

scritto interamente in Java,

quindi come tutti gli ERP ha il compito di fornire tutta una serie

di servizi e funzionalità

per portare avanti

i servizi di business di un'azienda.

Arias è diviso concettualmente, quindi a livello logico, non fisico, di progetti Java,

a livello logico in quattro aree applicative,

l'AMC che rappresenta l'amministrativo contabile, l'HR le risorse umane,

l'ospedaliero e il territoriale.

Cascuna area applicativa è indivisa invece in moduli fisici, reali, tangibili

e all'interno del vostro workspace li vedete declinati nei progetti Java che avete

quindi avrete ad esempio, perché hai fatto il corso con me, avrà nel proprio workspace

il progettino acquisti che corrisponde al modulo di acquisti

che cosa fa quel modulo lì?

prende carico di un subset

di funzionalità dell'area applicativa

dell'AMC, cioè gestire

ordini, gestire contratti

avrete anche il modulo

della contabilità

Il progetto contabilità, che è un modulo dell'area applicativa sempre dell'AMC che si occupa di tutta la parte di fatturazione.

Stessa cosa potete vedere sull'HR con i moduli del stipendio, per i cedolini e così via dicendo.

Per chi ha fatto invece, non so se sono già stati fatti i corsi di compilazione per la parte sanitaria,

probabilmente alcuni di voi avranno il modulo del, ad esempio, pronto soccorso, che appartiene all'area dell'applicativa dell'ospedaliero, oppure qualche prodotto dell'area applicativa del territoriale.

Arias e nel vostro caso, essendo programmatori, quando deployate un modulo sul vostro Eclipse,

quello che avviene è che si rende fruibile all'utente le applicazioni e i punti di menu di quel modulo.

Quindi ciascun modulo fornisce i propri servizi e le proprie funzionalità attraverso dei punti di menu. Quindi di menu che l'utente può accedere e con cui può interagire.

Allora, andiamo un attimo, ci vediamo un attimo.

Ah, scusatemi, scollego un attimo perché devo collegarmi in VPN Sardegna.

Interrompo un attimo condivisione così mi collego in VPN.

Allora, adesso ci colleghiamo un secondino sulle maschere.

Ripeto, per chi ho già fatto questa introduzione è un ripasso, per chi è nuovo è nuovo. Allora, ok, ricondivido.

ok questa è la pagina di login di Arias

mi logo con delle credenziali

quindi inserisco le mie username e la mia password

ok

queste che vedete qui a sinistra

sono appunto le applicazioni

ad esempio qui abbiamo installato il modulo delle anagrafiche che tradotto nei progetti che trovate nel vostro workspace corrisponde al progetto Java Sianc.

Cosa fa quando si fa partire questo progetto Sianc? Viene resa disponibile l'applicazione, quindi questi tastoni che vedete, i tastoni anagrafiche e

di conseguenza cliccando qui vediamo i punti

di menu, ok?

messi a disposizione dall'applicativo anagrafiche.

Esempio che faccio sempre

è questo qui, De Comuni, ma perché lo

faccio? Perché

rappresenta il 99

9,9 per cento

forse un po' di 98 per cento

diciamo così, non saprei

però la stragrandissima maggioranza

delle pagine che troverete

su tutta Arias

perché tutte le pagine

di Arias sono strutturate

secondo

il modo da permettere le operazioni

le tipiche operazioni crad

quindi si parte

con la prima

pagina che viene sempre aperta, la pagina di

ricerca

con la possibilità per l'utente

di inserire dei filtri in maschera

l'utente inserirà dei filtri

e potrà premere il tasto

ricerca

a questo punto

l'utente vedrà che cosa, si va sulla pagina

dei risultati di ricerca, quindi i risultati che hanno una corrispondenza con i filtri che ha inserito l'utente.

Quello che potrà fare l'utente è prendere in gestione o diciamo anche andare in edit di uno dei record del risultato, quindi tramite il bottone qua, seleziono un record fondamentalmente e qui può aggiornare, ok?

adesso il mio utente non è abilitato

ok, però qua va in edit

prendo una suda, prendo un'altra gestione

perché qua non sono abilitato

andiamo qua, neanche

ok, ad esempio ho preso le province, ok?

ho preso un altro punto di minuto, ma tanto è uguale

ho aperto il punto di minuto delle province e parto dalla maschera di ricerca

quindi posso mettere i filtri faccio ricerca, ved, ma tanto è uguale. Ho aperto il punto di minuto delle province e parto dalla maschera di ricerca, quindi posso mettere i filtri, faccio ricerca, vedete sempre uguale,

vedo i risultati, prendo in gestione un record, questo record io lo posso modificare, ok?

Oppure, quindi sono in pagina di edit e posso aggiornarlo, oppure posso andare in inserimento

tramite il tasto nuovo e quindi qui inserisco un record quindi sono tutte maschere

progettate in modo da permettere

le operazioni CRUD sul database

ok?

quindi praticamente

il flusso è questo

ok?

punto di menu, pagina dei filtri

clicco sul bottone di ricerca

vado sulla pagina dei risultati la pagina dei risultati posso fare in realtà anche sulla pagina dei filtri, clicco sul bottone di ricerca, vado sulla pagina dei risultati,

pagina dei risultati posso fare in realtà anche sulla pagina di ricerca, posso cliccare

direttamente sul nuovo, anzi in tutte le pagine praticamente, pagina di ricerca c'è un tasto

nuovo, pagina dei risultati c'è anche un tasto nuovo, la pagina di modifica c'è un

tasto nuovo, in tutti i casi vado sempre a finire sulla mia pagina di inserimento,

oppure semplicemente alla pagina dei risultati,

seleziono un record e vado nella modalità di edit.

Ok?

Queste sono le pagine standard.

Velocemente anche l'architettura di Arias.

Questa qui è l'architettura base, diciamo minima,

ma che anche rispecchia al 100% la vostra architettura

che avete praticamente

sul vostro ambiente di sviluppo, ok?

Perché? Che cosa avete sul vostro ambiente di sviluppo?

Un'application server

che deve essere una patch.com

e la versione 8x

quindi qualsiasi cosa successiva

8.1, 8.2, 8.5, va bene, non va bene Tomcat 9, non va bene Tomcat 7, Tomcat 8.

Un database oracle, ok, è la versione, e qui questa slide non l'ha aggiornata, adesso la correggiamo, versione 11, 12 o 19.

Vi mando le slide, 11, 12, 19.

Vi mando le slide. 11, 12, 19. Quindi l'application server si collega al nome di web app, e in ultimo il tutto viene al netto ovviamente il nostro Eclipse,

dove facciamo tutte queste operazioni manualmente, in ambienti di produzione il tutto avviene tramite,

viene installato tramite un tool dedicato che si chiama ABF Installer.

dedicato che si chiama abf installer. Questa è la struttura di un URL, anche qui penso serva dirlo, comunque la prima parte identifica l'host della porta del nostro application server, questa parte qui Arias è il nome della web app o anche il nome del contesto, questo invece serve dirlo, l'una parte finale, mailogin.do, noi la chiamiamo mapping, altro non è

che il nome della risorsa

che si sta richiedendo all'interno di Arias

in questo caso si sta richiedendo la risorsa

della pagina di login, che è quella che abbiamo

visto prima quando mi hanno chiesto

username

e password

più nel

come dire nella vita di tutti i i giorni nella realtà insomma l'architettura

un po più complessa quindi non avrò una base dati è un application server avrò n database ok davanti

insomma ci sono n anche application server tutto bilanciato da un load balancer. Load balancer non ha importanza quale tipologia,

può essere IS, può essere Apache,

solitamente è una Apache,

e quindi poi l'URL ovviamente diventerà qualcosa di simile,

quindi non troveremo più lo stella porta,

ma troveremo i riferimenti verso il bilanciatore,

il resto rimane identico.

Development kit, questo anche l'abbiamo affrontato nel corso compilazione, lo riassumiamo.

Cosa abbiamo bisogno per sviluppare in Arias?

Questi sei punti, una Java JDK alla 1.8, solo 1.8, 1.9, 9, 10, 1.1.1.1.1.8,

il cui però update

minimo è il 161

almeno 161

Apache Tomcat

8x, questo l'abbiamo detto

qui in realtà è stato gestito 33 ma

in realtà qualsiasi 8x

va bene, ok? Questo è a tempi della

slider all 833 all'ultima un idee eclipse non ha assolutamente importanza la la versione quindi

se avete già un vostro eclipse va benissimo se non ce l'avete potete scaricare l'ultimo un plugin svn

all'interno del vostro eclipse questo lo installate anche qui suggerito subversive semplicemente

perché quello che conosco però in realtà avete libertà di scaricare quello che riuscite a trovare nel marketplace di Eclipse.

Quindi andate sul marketplace di Eclipse, cercate svn e scegliete il plugin che volete.

Un Oracle JDBC driver, quindi un driver Oracle JDBC che andrà caricato all'interno del Tomcat, che servirà ovviamente all'applicativo per collegarsi al DB.

che andrà caricato all'interno del Tomcat,

che servirà ovviamente all'applicativo per collegarsi al DB.

E in ultimo, un SQL Divioper,

che non serve tanto per programmare lato Java, ovviamente,

però ovviamente la base dati comunque è parte integrante della parte di sviluppo,

e quindi comunque avremo bisogno di un qualsiasi ID SQL

che ci permetta di lavorare con Oracle.

Quindi, SQL Divioper, anche qui, quello che conosco,

ma anche TOD va bene ma anche Todd va bene,

Dbiver va bene, e così via dicendo.

Tutti i software qui elencati,

32-bit, 64-bit, non ha importanza.

Guardate.

Non ha importanza se 32-bit o 64-bit,

l'importante è che siano

o tutto a 32 o tutto a 64

cioè se la java è 32

anche l'eclipse per intenderci deve essere a 32

non bisogna fare un fritto

misto

d'accordo?

giusto un attimo così ho voluto fare una carrellata

per assicurarmi che partiamo tutti

dallo stesso punto di partenza

va bene? sono andato troppo veloce? Ci siamo?

Ci sono domande fino adesso?

No, nessuna.

Nulla.

Perfetto.

Nessuna, però ti pregherei, se non l'hai già fatto, di condividere queste slide,

perché purtroppo per un disbito mi sono perso le prime.

Sì, va bene, guarda, allora intanto facciamo che...

Allora, interrompo un attimo condivisione, intanto esporto...

Intanto esporto quella che ho appena detto, ok?

Grazie.

Meno a mano che le completiamo, le carichiamo.

Allora, queste... Secondino... appena detto ok diciamo meno a meno che le completiamo le carichiamo allora queste secondino quasi teams

ok

ok caricate lo trovi sotto la sezione file materiale didattico

grazie

allora

allora allora allora

li condivido Allora, allora, allora.

Li condivido.

E adesso andiamo al succo.

Andiamo al succo.

Allora, cosa vedremo in queste prime slide?

Innanzitutto il modello architetturale che sta dietro Arias, poi in realtà tutte le cose più di dettaglio, quindi appunto come programmare, quindi qua ci sono elencati un po' di punti, su questa gestione testata dettaglio Quindi oltre alle slide, poi alla fine, ma in realtà anche durante,

vi condividerò due allegati che poi sono linkati all'interno di queste slide.

Sono due PDF, uno contenente gli esercizi,

con tanto di mock-up, di quello che andremo a fare,

e uno invece con degli snippet di codice, pronti all'uso, quindi diciamo pronti al copia e incolla,

per poter svolgere gli esercizi.

Quindi tutte le cose più operative a livello di codice le affronteremo con questi esercizi.

Le slide invece affrontiamo la parte un pochettino più filosofica di chiacchiera e quindi il modello architetturale che c'è dietro Arias.

Arias utilizza un semplice standard MVC per disegnare tutte le pagine web e le sue funzionalità.

Questa è il diagramma che abbiamo visto poco anzi, quindi il flusso con la view, ad esempio preme il tasto bottone, la view notifica l'azione dell'utente al controller che poi si occupa di manipolare in maniera opportuna il modello sottostante. Il modello a sua volta è quello collegato direttamente

alla base dati. Al termine, lui, il modello, aggiorna la view che poi viene restituita in output all'utente.

Ecco, all'interno di Arias vedremo come, ovviamente, vedremo come fare la view, vedremo come

come fare il controllo, vedremo come fare il modello,

rispettiamo queste tre componenti.

Quindi abbiamo una view, un controllo e un model.

Ok.

Come iniziamo dal principio, ok?

Quindi, innanzitutto, come si crea un modello,

quindi adesso dobbiamo vedere come si fa il modello,

come si fa la view, come si fa il controller all'interno di ARIAS.

Iniziamo dal modello. In ARIAS un model è un semplice Java bin pojo, plain, quindi qui ad esempio, no?

Una classica classe Java come so qui, quindi con la lista delle proprietà, dei get e dei set. Quindi si parte da un pogio, che però implementa anche alcune particolari interfacce Java,

che vedremo, per gestire il layer di persistenza e anche altre informazioni addizionali.

Il modello e il layer di persistenza sono strettamente collegati,

Il modello e il layer di persistenza sono strettamente collegati, quindi responsabilità intera del modello quella di rendersi persistente all'interno della base dati, quindi poi vedremo che il modello ha il compito, la responsabilità di salvarsi sulla base dati, di eliminarsi sulla base dati, di caricarsi dalla base dati un bin quindi a volte magari diremo bin

una volta diremo modello

in ogni caso parliamo sempre della stessa cosa

un bin

rappresenta praticamente

un record

di una tabella

di tutta la base dati

quindi questo vuol dire che

il modello

questo modello

è

è

utilizzato

ok

nel caso delle

nelle casi della pagina

di edit e di insert

perché in edit io sto modificando

l'abbiamo visto no?

prima poco fa

quindi quando sono in edit prima stavoificando l'abbiamo visto no? prima, poco fa quindi quando sono in edit

prima stavo aggiornando una provincia

ok in edit

sto modificando quella provincia

sto modificando un record della base dati

se io clicco nuovo

che cosa sto facendo?

sto inserendo un record

all'interno della base dati

ok?

quindi

questo bil, java bin

bene si

è un tipo di modello che bene si applica in questi due contesti, edit page, insert page.

poggia su un framework completamente proprietario, quindi su

questo framework

non troverete nulla, non vi aspettate

cose tipo Hibernet

Spring, Straz

non c'è, è tutto

proprietario, quindi anche il layer di persistenza

ok, che adesso andremo a vedere

è completamente

completamente proprietario e quindi segue delle sue specifiche,

dei suoi formalismi e così via dicendo.

Comunque non è nulla di trascendentale, un po' ricalca quello di altri framework più famosi.

Più nello specifico, andando nel dettaglio quindi,

questo model, per fare un model in area, abbiamo bisogno di seguire questi punti.

Prima di tutto bisogna avere un pogio bin, un bin con getter e setter.

il cui compito è quello di mappare, quindi un XML che si pone a fianco al bin, che ha il compito di fare il mapping di tutti gli attributi delle proprietà del mio pojo verso i campi e le colonne della tabella all'interfaccia persistent, l'interfaccia di questo framework,

ok, del framework di Arias,

in modo da poter implementare questi tre metodi.

Come vi dicevo, è il bin, il model,

che ha la responsabilità di tutta la parte di persistenza.

Quindi avrà tre metodi, retrieve, store, remove.

Retrieve verrà invocato dal framework, ok?

Per caricare un singolo record all'interno della base dati,

quindi per intenderci, quando prima eravamo sui risultati di ricerca, no?

E abbiamo deciso di prendere in gestione un risultato di ricerca,

di andare in edit di un risultato di ricerca,

siamo andati in edit e quindi il framework cosa avrà fatto?

Avrà detto al modello,ello ok caricati dalla base dati

store è invocato invece in fase di insert o update

new record quindi sempre tornando

ad esempio alla pagina che abbiamo navigato prima

se sono in edit e premo conferma

verrà invocato il metodo store

se faccio nuovo vado sulla pagina di inserimento

anche lì avrà un tasto conferma

quindi vado in inserimento e anche qui invoco comunque il metodo store.

In ultimo il remove, non l'abbiamo visto, però ogni record può essere cancellato tramite il tasto elimina.

Il Poggio, inoltre, deve anche implementare l'interfaccia Valideable Interface.

È un'interfaccia che ha un solo metodo, che si chiama validate, da rimplementare, eventualmente da rimplementare, non obbligatorio, solitamente però si fa, ed è invocato prima del metodo store ed è utile per implementare tutte quelle logiche di controllo necessarie per validare il bin prima del salvataggio, ok? Quindi, insomma,

vedere se lo stato del bin, lo stato del

nostro oggetto è consistente e pronto per

essere salvato sul base dati. Quindi qui

dentro poi possiamo introdurre le nostre

logiche di validazione per

per cui possiamo decidere se tornare, se fare il salvataggio e basta,

oppure se salvare ma tornare un warning, un'avvertenza,

oppure se bloccare, quindi tornare un messaggio d'errore,

se bloccare del tutto il flusso e quindi non fare il salvataggio.

Ultima interfaccia da implementare è la interfaccia Dynamic Info Interface.

Ha un solo metodo, anche questa, getObjectInfo,

ed è un metodo utilizzato che dà l'opportunità, poi questo lo vedremo con gli esercizi più avanti, però per adesso ci metiamo a dire che comunque sia è un metodo che dà l'opportunità è il framework, potrà, utilizzerà questo getobjetinfo per chiedere al bin delle informazioni, tante, poi alcune le vedremo.

Ad esempio, una, il framework chiederà al bin, mi dici quali sono le tue proprietà obbligatorie?

Mi dici quali sono le tue proprietà non invitabili?

Che sono tutte cose che ad esempio queste qui serviranno al framework per capire come disegnare la maschera, la view, poi lo vedremo dopo. Però ci sono anche

altre, ce ne sono anche ad esempio anche banalmente per sapere qual è la lunghezza dei campi,

se il formato numerico, poi dopo li vedremo. Comunque la cosa importante è che GetObject

Info è un metodo che permette al BIN di descriversi, di descrivere il suo interno.

GetObjectInfo è un metodo che permette al bin di descriversi, di descrivere il suo interno.

Tutto chiaro finora?

Sì.

Sì.

Perfect.

Allora, incominciamo con il primo esercizio. Quindi adesso queste componenti, model, view, controller, eccetera, le facciamo step by step, piano piano.

Poi dopo ovviamente le mettiamo tutte quante insieme e facciamo la gestione.

Allora, interrompo un attimo la condivisione, mi apro un attimo il mio Eclipse.

In realtà è già aperto, però devo un attimo chiudere un po' di cosine. Grazie. ok

Allora, ricondivido.

Allora, come vi dicevo, poi vi fornirò anche degli allegati con gli esercizi, anche con gli snippet di codice.

Anzi, secondo anche i cosnippet, ok, perfetto.

Ok, poi li vediamo adesso piano piano.

Allora, iniziamo a scrivere un po' di codice, quindi. Incominciamo dall'esercizio 1.

Vogliamo modellare un corso scolastico e vogliamo quindi creare una serie di pagine standard

per cercare, inserire e modificare un corso, simile a quello che abbiamo visto prima

quando ero sulla maschera delle province, quindi nulla di trascendentale.

Ogni singolo corso avrà le seguenti proprietà. Un codice, che è un identificativo univoco del corso,

un'alfa numerico di 10 caratteri, una descrizione, che è una breve descrizione di cosa tratta il corso,

sempre alfanumerico, 256 caratteri,

e un campo unico, ok?

Dove mettiamo il nome completo dell'insegnante, ok?

Quindi nome e cognome tutti insieme,

un unico campo che sarà alfanumerico di 128 caratteri.

In ultimo ci sarà un campo di start un campo di end che sarebbe quando il

corso dovrebbe iniziare quando il corso dovrebbe finire quindi il primo step ovviamente è lavorare la struttura ok? ora

in fondo a questo documento

credo di avere anche inserito

una serie di convention

name convention

ora non è obbligatorio seguirle in realtà

questo è quello che troverete già

sulla base dati

già si seguirà questa convention

quindi può aver senso continuareare proseguirla comunque quando si

crea una tabella la sintassi solitamente questa il nome della tabella che faccia intendere insomma il

contenuto e un prefisso questo previsto prefisso cambia in base al modulo

di competenza

ok quindi vedrete che

le tabelle ad esempio

voi avete il progetto

ad esempio PSG Lib

sul vostro workspace

vedete che tutte le tabelle che utilizzo

da PSGlib incominciano con si underscore

sul progetto si anche tutte le tabelle

di si anche incominciano con sa underscore

però in realtà poi questo

non è

un obbligo però questo è quello che

noi facciamo per di maniera

che con un colpo d'occhio si riesce a capire di chi

è quella tabella

le colonne

invece il nome della

colonna per far capire che cosa, e poi un prefisso che in realtà deve rappresentare in qualche modo il nome della tabella.

Quindi se qua ad esempio student mi sono inventato il prefisso st, giusto per rendere più univoche all'interno della base dati le colonne.

colonne. Per specificare una chiave primaria,

la chiave primaria è il nome della tabella con il prefisso fisso, sempre quello, PK.

Quindi adesso me le copio.

facciamo

siamo la miglioriamo con la nostra tabella per il corso ok per l'esercizio

create e ball in realtà lo chiamerò posso chiamarlo è sempre s.a. però voglio fare anche

posso chiamarlo è sempre sa però voglio fare anche

sardegna corso

ok, sard corso

giusto per metter

per

darmi una differenza mia

quindi poi

questo è il nome della mia tabella

qui incomincio a elencare

le colonne che mi vengono richieste

quindi adesso me le copio per comodità

su SQL Developer abbiamo detto che le colonne che mi vengono richieste quindi adesso me le copio per comodità su sicul di viro per

abbiamo detto che abbiamo bisogno di un codice cr dato del corso cr underscore

cod è un bar char 2 di

2 di un certo cr description

non

256

cr teacher

arciar 2 teacher, archar, 2, 128, poi cr, start, date, che è un date, e cr, end, date.

Allora, questi sono i miei campi che prevedo perché come dire l'analisi dice questo ok quindi questi sono i campi di cui

ha bisogno la tabella per poter gestire quanto richiede questo esercizio ok però però tutte le

tabelle sono

A prescindere tutte le tabelle, devono avere anche altri quattro campi, che sono i campi di controllo. CRUTINS, CRDTINS, CRUTVAR, CRDTVAR.

Che sono questi campi?

Sono i campi che conterranno l'utente che ha inserito il record, la data di inserimento del record,

l'ultimo utente che ha variato il record

la data dell'ultima variazione del record

ok?

l'utins dovrà essere un var char 2 di 30

e la stessa cosa anche l'utivar

andrà a finire praticamente la username dell'utente

il login dell'utente

e dtins invece d privare sono dei campi

e o

e vuol creato tutto chiaro fino adesso sì sì perfetto last but not least specifichiamo la chiave primaria quindi abbiamo detto che la

chiave primaria nel nostro caso è codice quindi alter table sa hard corso pk sa tard corso e il

campo acr od

Sard corso e il campo ACR.

Abbiamo creato tabella, abbiamo creato le prove primarie.

Tanto ci basta per andare avanti.

Quindi abbiamo la nostra struttura dati pronta.

Allora, andiamo quindi quindi su lato Java. properties a cosa serve quindi mi tolgo un po di applicazioni parto con le mico e le minime così è

più facile e più veloce start e stop perfetto ok quindi faccio partire lavoro su si anche quindi

e anche il debug properties, la build properties, psglib, si anche, mi tolgo questi, imp, imp,

e via

va bene

allora

quindi abbiamo detto che lavoriamo su siank

source

siank, questo è il package principale

qui dentro creiamo

un nuovo package dove andremo a ficcare

tutti i nostri esercizi

quindi siank.sysar

e lo facciamo anche un altro sottopackage

che è quello dell'esercizio

quindi adesso qua lavoriamo

qua ci mettiamo dentro il package seesar

quindi magari fatelo anche voi dopo

quando facciamo nel pomeriggio un po' di esercizi

lo farete anche voi insomma

fate un package seesar e dentro ci mettiamo tutti gli esercizi il primo esercizi, lo farete anche voi insomma, fate un package, dentro ci mettiamo tutti gli esercizi.

Il primo esercizio è sul corso, quindi faccio siyank.cors.

E qui dentro iniziamo a creare il nostro model, il nostro bin, d'accordo?

Quindi, class, class, corso.

Allora, il primo step, come dicevamo, anzi, adesso, andando a vedere il code snippet,

qui ci sono i code snippet, trovate tutto quello che vi serve.

Quindi, come fare il design di un model?

Step 1, scrivere tutte le proprietà del nostro pogio.

Abbiamo fatto i campi sulla tabella, li riportiamo come proprietà del nostro pogio.

Quindi abbiamo detto che abbiamo un private string code, il codice,

description, teacher, date, e poi abbiamo start date ed end date.

Java util date.

Attendere prego, eccolo qua, Java util date.

End date.

Non bisogna codificare i campi di controllo, ok? Non bisogna codificare i campi di controllo, ok?

Qua, soltanto le proprietà reali

che ci interessa gestire all'interno

del nostro model, va bene?

Source,

generate getter and setter

e buttiamo giù tutti i get and set.

Bene.

Quindi step one, fatto. Abb abbiamo creato il nostro poge

2, implementare le interfacce che avevamo visto nelle slide

quindi persistent, validable interface e dynamic info interface

ok

Facciamo implement.

Persistent, eccolo qua.

Ovviamente, come dire, quando cercate Persistent,

ci sta il mondo, ok?

Un po' di tutto, tra librerie, eccetera.

Quelle che ci interessano sono quelle,

questa qui, che incomincia con PSG Library, ok?

questa qui che incomincia con PSG Library ok

questa qui giusto anche per intenderci

come sono suddivisi i progetti

ok

se voi andate qui dentro

ok

qui appena è aperta la bella interfaccia

dove siamo andati a finire

siamo andati a finire nel progetto

PSG Lib

quindi PSG Lib

poi dopo

questo mi sembrava l'avevo accennato

al corso di compilazione

la nomenclatura è spesse volte

una stessa cosa viene chiamata

in modi diversi ma è sempre la stessa

quindi JBF, ABF

PSG-Lib, PSG-Ext

sempre questa roba a cui stiamo parlando

sempre di questo progettino

stiamo parlando del framework questo progettino stiamo parlando del framework

ok quindi quando fate l'impline l'import degli sconati importe l'implementazione delle interfacce

tra le mille mille interfacce che troverete quelle che vi interessa è quella del vostro

progetto psg lib la stessa cosa anche quando fate adesso io devo implementare quindi anche la validable interface questa

prescinde da tutto l'altro corresso che trovo

psg library utile

l'ultima

dynamic

dynamic

info interface

.1

implementiamo i metodi

burro boom

ok?

quindi con una volta sola adesso ci siamo

rimplementati i nostri metodi

che abbiamo visto nelle slides

il nostro retrieve, remove, validate

getObjectInfo

step 3

dichiarare il memento e la info delle gate.

Info delle gate in realtà è dichiarata qua, quindi dichiarare il memento,

memento proprio,

quindi dobbiamo dichiarare il memento,

ok?

Cos'è il memento?

Nando ce lo copriamo, CTRL C, su Eclipse ci mettiamo qui sotto e ce lo incolliamo.

Facciamo anche tutti gli import.

il memento

e vediamo che roba è

allora il memento

descrive

in parte

la tabella

descrive la tabella

a cui stiamo

su cui andiamo a lavorare

quindi cosa dobbiamo il memento in realtà poi vedremo e scrive la tabella su cui andiamo a lavorare.

Il memento in realtà poi vedremo che ha il compito praticamente,

vedremo quando implementiamo gli altri metodi,

ha il compito di mantenere lo stato della tabella, lo stato intendo dire i propri valori delle colonne

che vanno a finire sul db

quindi qui è il compito del memento

che è questo oggetto qua

questo oggetto avrà il compito

di mantenersi in memoria

lo stato del record sul db

poi lo vediamo

però questo memento per poterlo fare

ha bisogno di un definition

quindi abbiamo quest'altro oggetto memdef

in definizione

quindi del momento dobbiamo indicarli tre informazioni principali. La prima, il nome della prima di chi quindi il mio caso era un descorco e poi il nome dei campi di controllo

quindi nel mio caso sono lascio qui il 15 di 15 su tv ar di pilar però nel mio caso sono con questo prefisso quindi c'è

routine cr di pincere utivar cr di var ok step 4plementare adesso i metodi store, retrieve e remove.

Per comodità, quindi, sempre da qui faccio CTRL C,

vado sul mio clips e mi rimpiazzo i miei metodi vuoti.

Fine.

Però, andando a vedere che cosa fanno

il metodo store, come dicevamo

deve salvare

il

il bin

ok?

quindi la prima cosa che fa

è pulire

il memento, quindi questo oggettino che vi dicevo

che in qualche modo è il ponte

verso la base dati

che mi rappresenta il record all'interno della mia tabella

lo pulisce

lo ricarica

con i dati che leggo dal mio bin

quindi allo stato del mio bin

quindi lo ricarica dalle proprietà che

ha il mio bin

e quindi lo salva

quindi in questo modo il memento salverà

sulla base dati

lo stato del mio bin

perché i valori

delle proprietà del mio bin le riverso

prima in questo memento

e poi procedo al

salvataggio

poi magari cosa fa più nel dettaglio

questo persistent handler lo vediamo

verso la fine del corso quando abbiamo acquisito

un po' più di competenze

per adesso ci limitiamo a sapere che insomma

qua dentro c'è una magia per cui

poi il memento diventa una

insert into

bla bla bla oppure update

bla bla bla eccetera quindi diventa lo statement SQL

che fa la persistent

che scrive sul DB.

Allo stesso modo, invece è un po' diverso la retrieve, quindi io devo recuperare un record alla base dati, quindi faccio sempre una pulizia del memento vabbè poi qui in realtà questo sarà anche più chiaro

dopo mi dico popolami il memento a partire dal bin ma non da tutto il bin dalla chiave primaria

del bin perché questo perché poi il memento quindi avrà all'interno solo la primary key nel nostro

caso ad esempio il campo cr code del corso, il codice del corso,

farà la retrieve, quindi all'interno del momento a quel punto recupererà tutte le colonne del DB,

di quel record, e poi fa praticamente l'inverso dello store.

Qua farà save to bin, quindi tutto quello che c'è all'interno dell'oggetto momento,

buru bum, lo ribalta all'interno del bin.

Lo ritrovo qui nelle mie proprietà. burro boom lo ribalta all'interno del bin

trovo qui nelle mie proprietà giustamente retri quindi in senso opposto ultima la remove molto simile alla reti nel senso che ricarica il momento a

partire dall'id del bin dalla chiave primaria e però poi fa soltanto remove

non ci interessa altro devo cancellare cancelliamo il record

ultimo ultimi due scusi quando tu parli di cancellazione parli di cancellazione, parliamo di cancellazione fisica, non con... Sì, di lit, di lit, di lit.

Ok, perfetto, grazie.

Prego.

Allora, poi magari lo vediamo... Allora, l'oggetto del corso non è soltanto codice, ma anche vedere un po' le funzionalità in generale.

Quindi farò vedere anche, ad esempio, le maschere di alcuni moduli.

ad esempio le maschere di

alcuni moduli, cioè lavoreremo

un po' di diciamo tra virgolette, una parte sarà

un po' tra virgolette corso

tipo quello che ho fatto

i giorni precedenti agli specialisti, per intenderci

ok, simile, ok

ovviamente andremo un po' più nel dettaglio

tecnico, però in qualche modo insomma vedremo le

maschere vedremo le funzionalità e vedremo che

alcune maschere, che ad esempio

quella principe è

quella dei pazienti, quella che

gestisce le anagrafiche dei pazienti,

dove lì non è permessa la cancellazione fisica.

Quindi per

intenderci a livello di codice

vuol dire che il metodo remove

non è implementato, cioè vuoto.

Ovviamente non è

solo questo, è anche bloccato il tasto, eccetera.

Comunque perché un paziente non può essere mai cancellato,

quello che si può fare però sul paziente, come dici tu,

è una cancellazione logica,

che praticamente c'è un flag che dice

se il paziente è attivo, il paziente è disattivo,

se è disattivo in qualche modo è cancellato logicamente,

ma sul DB rimane.

In quel caso però quando si fa una cancellazione logica,

che vuol dire?

Vuol dire che alla fine l'unica cosa su cui bisogna lavorare è il metodo store. Perché a quel punto diventa semplicemente sempre un salvataggio, marcando magari un flag, che mi fa questa sorta di disattivazione logica.

Chiarissimo.

Prego.

Ok. Allora.

Step 5. allora step 5 implementare la gate object info

e dichiarare

la info delle gate

quindi anche qui io mi faccio un copia

incolla

mi riemplemento

mi cancello le mie gate fa oggetti infoi faccio incolla

faccio gli import e vediamo che cosa di cosa stiamo parlando

allora qua ce ne stanno due di bianamick info utils quello giusto

è quello che non vi da errore di compilazione ok? quindi era psg library utile

ok, fatto

questo qui

qui devo mettere il nome del mio bin

quindi il nome del mio bin in questo caso è corso

corso

punto class, quindi se stesso

ok?

un secondo me voglio

controllare la ctrl shift f un nego della formattazione allora Allora, come dicevamo, la GetObjectInfo poi più avanti negli esercizi

l'affronteremo perché è un metodo che permette al BIN di descriversi,

di tornare delle informazioni al framework, utili per fare determinate cose che poi vedremo nei successi più avanti.

Per adesso ci limitiamo soltanto a implementarlo così, perché quello che facciamo con queste righe di codice è l'implementazione minima,

che serve a dire al framework, guarda, le informazioni che tu cerchi non le chiedere a me, vattele a prendere da che cosa?

dal passo 6, l'xml descriptor,

vi avevo accennato nelle slide che ogni bin deve essere associato un xml,

che fa il mapping delle problematiche,

proprietà verso il database.

E quell'XML ha un po' di informazioni, insomma.

Quindi la cosa minima è qua dentro,

e stiamo dicendo al framework, guarda, non mi scocciare,

vattela a pescare dall'XML, questo in soldoni,

quello che fanno queste righe di codice qui.

Quindi tramite questo oggetto, info delegate.

Però poi in realtà lo vedremo,

che l'XML non contiene tutte le possibili informazioni,

e quindi alcune cose poi le dovremo andare a personalizzare

e agiremo qui dentro.

Quindi il passo dopo, sempre nella stesso, a fianco deve essere, quindi fratello della mia classe Java,

quindi non può stare in qualche altra parte, qui dentro deve stare, sempre dentro lo stesso package io creo new other xml file e si deve chiamare allo stesso modo quindi

corso java e questo sarà corso xml allora adesso io potete fare copia incolla di questo e riportarvelo qui, oppure come ho fatto io, poi su Eclipse avete la possibilità di definirvelo come template, questo XML, tanto è lo stesso, vedete faccio incolla, è lo stesso.

Ve lo riportate o perché fate copia e incolla qui, oppure perché ve lo importate come template di Eclipse, questo come preferite.

E fondamentalmente poi bisogna sostituire quello che trovate

scritto qui dentro. Quindi, allora... Allora, scusate, faccio le pause, il mio quinto giorno

di corso e la voce incomincia a farsi sentire, la gola incomincia un po' a fare fatica.

un po' a fare fatica.

Allora, il primo step è una descrizione,

una descrizione generica.

Poi magari lo vedremo dove va a finire questa descrizione.

C'è una funzionalità di Arias che permette di stampare,

si chiama registro metadati, l'ho fatto vedere ai vostri colleghi, gli specialisti nei giorni scorsi,

che permette di stampare un documento, un PDF, che descrive un oggetto di Aries, quindi un BIN.

Quindi supponiamo che noi abbiamo sviluppato la nostra pagina per gestire questi corsi scolastici, poi ci sarà un punto di menu che mi dice

ok, mi fai vedere questa pagina di corsi scolastici, il BIN sotto, che campi ha, che campi non ha, che lunghezza sono i campi, ok?

Quindi crea un PDF dinamico. In questo PDF viene scritto anche, ad esempio, il titolo.

Quindi magari una descrizione, tipo corso bin per gestire un corso scolastico.

scolastico bin name

è il nome del nostro

bin

sianc.corso

punto corso

enable name è il nome della nostra tabella

dobbiamo ripeterlo qui dentro

che quindi è

abbiamo detto

hard corso

key name ci dobbiamo riportare

la chiave primaria ma dobbiamo riportarci

la proprietà

che rappresenta il campo

chiave della tabella ok quindi lato tabella la prima di chierre code malato bin cr code io lo

vorrò mappare sono vita code quindi ho qua ci metto code scritto in minuscolo perché si è scritto sul bin

qua è sbagliato, si anche punto

sisar

punto corso

ok, poi

qui abbiamo tutta una serie di

property, ok, quindi all'interno

del tag property si infiliamo

un tag property per ogni proprietà del nostro bin.

Quindi 1, 2, 3, 4, 5 property avremo.

Per adesso quindi me li copio in collo.

Ok, poi dopo...

Vabbè, vabbè, si è andato me li copio.

Ok, quindi incominciamo dalla prima.

Incominciamo con la prima proprietà che è code, no?

Allora, come la descrivo?

Name il nome della proprietà, quindi un', come la descrivo? name, il nome

della proprietà, quindi un'altra volta qua ci metto code

minuscolo

una caption qui

che fa scopo diciamo con quello che abbiamo messo qui per la descrizione

ok? quindi una cosa un po' più

parlante per l'utente

ok? per esempio quella pdf

che vi dicevo, quella stampa

che si può fare

quindi io qua ci metto no scusate, mi sono saltato un pezzo, scusate,

i field, prima di tutto field, quindi ho messo la proprietà,

poi field, quindi il nome invece qua del campo sul DB,

quindi il mio campo sul DB è cr underscore code, giusto?

cr underscore code, poi qui appunto la caption che vi dicevo,

quindi una cosa del tipo codice del corso,

e il tipo di classe Java, quindi ad esempio nel nostro caso questa qui è una stringa, e quindi qua sarà Java Lang String.

In ultimo, una info sulle lunghezze della colonna sulla base dati.

E l'abbiamo fatta di 11, quindi length 11.

Quindi andando avanti, descrivo adesso la proprietà description quindi name description

ed

descrizione del corso

classe è sempre anche qua java lang string

lunghezza 256

next teacher e c'è un ricordo

e c'è

e

la stringa

28 mi pare la stringa

28 di fare

poi stat dei tendenti tolla su sarvi tende c'è una differenza rispetto a

funziona uguale quindi proprietà start date il campo è cr art underscore date data inizio

percorso class name in questo caso è una data quindi abbiamo abbiamo detto che è una java.util.date.

Qui sul length in realtà appunto la date non c'è una length, però si mette la length per fare una sintassi di questa maniera qui.

Quindi si mette 4, 5, 6, 7, 8, 9, 10. Quindi qua scriviamo length 10.

Quindi fare una sintassi giorno giorno

mese mese, anno anno anno anno

stessa cosa l'end date fine

the end

non c'è altro.

Quindi

abbiamo modellato

il nostro corso.

Simone, scusa.

Come no?

Su XML, i file.

Sì.

C'era tipo

anche un campo mandatory, giusto?

Ah, sì si bravissimo

allora

mandatori

si se qua tu metti uno

vuol dire che il campo è mandatorio

non lo mettete

perché poi dopo

avanti nei corsi

vediamo come gestire

l'obbligatorietà

allora si

se mettete uno

quello diventa obbligatorio

però la cosa migliore

gestire il mandatorio

il non editabile, invisibile, eccetera

a livello di bin

quindi poi vedremo quella get object info

di cui vi parlavo

perché questo? Perché mentre quello quando qua mettete

se mettete qua mandatorio 1

sarà sempre per sempre mandatorio

non potete schiudarlo di lì

ok?

è fisso, è statico, un xml

invece solitamente la seconda maggioranza

dei casi in in realtà,

il mandatorio è

in base a, ok?

Quindi vi da una maggiore libertà, ok?

Tutto qui.

Ok, ok, grazie.

Prego.

Scusa, Simo, un'altra domanda.

Riga 2 è il campo name dell'XML.

Riga 2 è il campo name, sì.

Esatto, deve essere, diciamo,

è una convenzione che ha messo

package.class

possiamo mettere anche esempio il nome della classe basta

mi sembra che puoi mettere anche il nome della classe basta

questa cosa qui in realtà

come vi dicevo va a finire

semplicemente in stampa

di un pdf

poi alla fine quando abbiamo finito tutta la gestione la vediamo

ve la posso magari anticipare

prendendo un bin che già esiste,

ad esempio quello che ho fatto vedere ieri ai colleghi,

è questo, è un punto di menu che sta sotto,

configurazione avanzate, stampa, registro, metadati,

mi è scaduta la sessione, mi riloggo,

bin,

mi cerco il bin del paziente,

ad esempio, che è quello più cicciotto per tempo scritto pazienti pazienti senco paziente bin

no sbagliato a cliccare tac conferma conferma

lui ci pensa va a finire qua quello che andate a scrivere lì

va a finire qui

si scrive il nome completo

di solito si scrive il nome completo però va a finire qui, ok? Quindi si scrive il nome completo, quindi di solito si scrive il nome completo,

però va a finire qui, quindi nella descrizione,

se ci scrivete Pippo, va a finire scritto lì Pippo.

E qui poi vi fa anche la list...

No, dico, ok, no, chiaro.

Quindi il mapping, diciamo, tra la classe di XML

viene fatto solamente in base al nome dell'XML.

Esatto, bravissimo, sì.

Il collegamento viene fatto in base a due cose, al nome

che deve essere uguale

e il momento in cui viene caricato l'XML

è questa riga qui

quindi dice di tal framework

di caricami quello l'XML

che corrisponde al bin corso

poi qui vedete che ci sono scritte

etichetta, codice

tutte queste cose qui

questa è la proprietà e questa è l'etichetta

vedete, hanno tipo la proprietà eccetera

e altro non sono che

queste cose qui

caption, class, capito?

semplicemente

quello diciamo che è obbligatorio quello che è obbligatorio ai fini del funzionamento è specificare il campo chiave e dire questo è la proprietà, questa è la tabella, questa è la proprietà, questa è la tabella, tutto il resto è tutta roba descrittiva. Quindi caption, description, ok?

Tutta roba descrittiva, insomma, per poi produrre questo documento.

Ma non è obbligatorio, in realtà, però, ovviamente, già che fa l'XML lo scrive in un certo modo, ecco.

Però non è che è obbligatorio produrre quel PDF.

Va bene.

Ci sono altre domande

ok allora

quindi abbiamo finito quindi dicevamo abbiamo finito abbiamo modellato il nostro model. momento abbiamo implementato queste interfacce e abbiamo popolato senza fatta per la validetta

perché la vedremo più avanti tutti i metodi store 3 premove eccetera a fianco gli abbiamo

messo il nostro bellissimo xml come vi dici come ci dicevamo il model il bin ok sta andando a fare il mapping che mi rappresenta ok un record

di una tabella del mio database però

però

a sulle di se i guambini sconetti tu un record ok quindi un bin un record della base dati e quindi ricapitoliamo sottolineiamo ricordiamocelo serve soltanto in fase di edit e di insert ma quando

noi cerchiamo qualcosa sulla nostra pagina di ricerca ok quindi giusto un attimo per rivedercelo, io sono su

una grafiche, base

provincia, stavamo, quindi secondo io sono invece

sulla pagina di

ricerca, e vedete i risultati sono n

cioè non ha un record, se io vado qui

in edit e lo seleziono, ok qua sono in edit

e quindi entra in gioco il mio bin

che abbiamo appena visto

o faccio nuovo

qui in realtà ho n record

anzi o meglio

io prima qua ho i miei filtri

di ricerca

e poi qui quando cerco

ho i miei risultati di ricerca

quindi in qualche modo adesso

dobbiamo modellare

la parte

delle interfacce delle pagine standard che si occupano di avere il modello che abbiamo sotto le pagine di ricerca e le pagine di risultati di ricerca.

Quindi come dice qua, dobbiamo modellare una lista di record che sono i risultati di ricerca e non soltanto un record.

di record, che sono i risultati di ricerca e non soltanto un record.

Per farlo introduciamo il concetto,

un altro concetto,

che appartiene sempre, come dire, al mondo model,

che si chiama query class.

Lo scopo di questa classe Java

è quella di costruire lo statement SQL

che sarà eseguito all'interno della base dati.

Il risultato della query è poi parcheggiato all'interno di un array list in memoria.

Più nel particolare, per realizzare una query class in Ares abbiamo bisogno di,

questo è più semplice rispetto al model, dobbiamo semplicemente creare una classe Java

e estendere la classe astratta custom query profile.

Questa custom query profile implementerà,

questa classe implementerà un metodo che si chiama getCustomSqlString,

che è invocato al framework quando l'utente preme il tasto ricerca.

All'interno di questo metodo qui, guest custom SQL string, avremo la possibilità di invocare

il metodo getFilterValue.

Questo metodo ci permetterà di accedere ai filtri e ai criteri di ricerca che ha impostato

l'utente all'interno della pagina di ricerca.

In output a questo metodo dobbiamo tornare l'SQL che successivamente sarà eseguito dal framework. Quindi adesso

ci spostiamo nella parte alta sempre di questo grafichetto, quindi abbiamo visto l'insert

edit page, adesso facciamo un passo indietro e vediamo la search page e la result page.

Quindi vediamo come modellare questa classe di query.

Allora, qui avete sempre il snippet code, però in qualche modo ci dobbiamo aiutare anche con l'esercizio, quindi noi ci siamo fermati qui perché ci interessava soltanto la parte di BIN, ma andiamo avanti nell'esercizio, quindi sosteniamo sempre l'esercizio per fare tutti i test, le prove di codice.

In search page l'utente sarà in grado di ricercare un corso usando uno o più dei seguenti filtri.

Codice, il sistema dovrà estrarre solo i corsi che hanno una corrispondenza esatta del codice.

sistema estrarrà tutti i corsi che hanno parte della descrizione in accordo a quello che inseriamo qui, quindi sarà una ricerca in like e allo stesso modo la stessa cosa lo farà qui per il filtro

questo qui teacher full name, quindi quello andiamo a mettere qui diventerà una ricerca in like, quindi codice ricerca esatta,

descrizione e teacher stanno a ricerca in like. Questa sarà la nostra pagina dei filtri, no?

Quando l'utente preme ricerca ci spostiamo sulla pagina dei risultati di ricerca. Per ogni risultato il sistema dovrà mostrare due colonne,

code and description, come in questo modo qui. Questo è quello che dobbiamo ottenere come risultato

finale, quindi una pagina di filtri con tre filtri e una pagina di risultati con queste due colonne,

codice e descrizione, tutto qui. Adesso vediamo come ottenere questo lato modello, quindi implementando questa classe di query.

Ok, lo step 1 è sempre quello di creare la classe Java, quindi qui sempre dentro la mia package stisar corso faccio new class corso query

bisogna estendere la classe astratta custom query profile

...dall'implementing methods e lui ci chiede di implementare questo metodo,

getCustomSQLString, e va bene.

Dichiarare, passo due, dichiarare i filtri e i campi e le caption all'interno del costruttore.

Che cosa significa? Adesso me lo copio così com'è e poi lo vediamo.

Quindi definiamo un costruttore di corso query che inizializza al suo interno tre variabili. Formal filter sono praticamente dei nomi, comma separated, che creano una corrispondenza verso i filtri in pagina.

Io qua avrò tre campi di testo nella mia view, code, description, teacher, full name.

che sono i filtri che potrà inserire l'utente.

Siamo in un pattern MVC, quindi in qualche modo, lato modello,

io devo modellare anche questi tre filtri per raccoglierli,

quindi non basta semplicemente mettere il mio campo di testo sulla view,

quel valore che sta nella mia pagina HTML in qualche modo ci deve andare a finire

all'interno del mio modello.

I filtri vengono modellati con una mappa di filtri,

cioè tutto quello che mette l'utente qui dentro,

vengono riportati in una mappa, in un hash map,

hash map Java.

Però, quindi con codice e valore, valore e valore del filtro,

però il codice qual è?

È il codice, quindi la chi in quella mappa è quello

che mettiamo qui quindi ad esempio supponiamo che vorrà avere che un code filter description

il che teacher filter

Quindi qui definisco a livello di modello i miei tre filtri, che poi andrò a creare in maschera.

Field name e field caption, queste due cose vanno a braccetto insieme, e invece servono per decidere i risultati di ricerca, cioè quali field, quali campi io voglio mostrare nel risultato di ricerca.

Abbiamo detto che vogliamo mostrare code e description.

Quindi io qui metto i nomi dei campi, sempre comma separated,

però i nomi dei campi dopo del DB.

Quindi nel mio caso voglio mostrare cr underscore code,

cr underscore description.

cr underscore code, cr underscore description.

Filled caption semplicemente serve per decidere la caption,

quindi l'intestazione che devo scrivere qui sopra.

Quindi voglio scrivere sempre comma separated, devo scrivere codice, virgola, descrizione. Poi qui sulla caption, però vediamo

più avanti, a volte può aver senso che io ho un field name, lo dichiaro, però non voglio

farlo vedere, e quindi c'è la possibilità di nascondere una caption anteponendo la tilde,

poi lo vediamo in un esercizio, un caso in cui ci serve fare questo.

Per adesso vogliamo mostrare entrambi, quindi codice,

CR code, CR description e queste sono le varie intestazioni.

Qui ci siamo?

Simone, scusa?

Sì

quindi sono i campi adb

formal filter sarebbero i label

che si vedono sulla

no formal filter

allora formal filter

allora poi magari quando facciamo

un esercizio si capisce meglio

allora come dicevo

noi poi

andremo a fare

anche a disegnare la pagina web

e quindi metteremo nella nostra pagina

HTML, anzi la benna GSP

metteremo tre input text

code description e teacher full name

dato che siamo in un pattern

mvc, quella view

i campi che metto nella view in qualche modo devono essere

mantenuti a

livello di modello come dicevo i filtri il framework di base di default salva i filtri che l'utente

mette in maschera all'interno di un hash map quindi una mappa chiave valore del valore del filtro, quindi identificativo del filtro e valore del filtro.

Come faccio a dire al framework che il codice me lo deve scrivere con un certo identificativo filtro?

Che cosa ci mette come chiave del filtro?

E glielo dico in questa maniera qua.

Quindi io dichiaro i filtri,

i codici dei filtri che prevedo di avere nella mia maschera di ricerca.

Facciamo anche le SQL-Sync,

così forse è anche più chiaro.

E poi dopo dimmi se ancora c'è qualche dubbio.

Allora, quindi,

qui ho definito i filtri che voglio avere, qui ho definito le colonne che voglio mostrare nel risultato di ricerca.

L'ultimo step è implementare il mio metodo guest custom SQL string dove dovevo tornare lo statement SQL che voglio eseguire sulla base dati.

Quindi io me lo copio, me lo incollo e vediamo.

Allora, iniziamo con select get field name, quindi questi qui,

select crco, description from, il nome della mia tabella,

che quindi è from sasard course where 1 uguale a 1.

Adesso qui che cosa faccio?

Io posso già eseguire soltanto queste SQL,

che farà queste SQL?

Torna tutti quanti i corsi.

Però in realtà io voglio tornare i corsi in base...

Questo me lo tengo, però me lo commento,

così lo rifacciamo insieme, però voglio tornare ai corsi in base ai filtri di ricerca che ha inserito l'utente.

quindi io contemplerò un filtro sul codice un filtro sulla descrizione, un filtro sul teacher

poi io potrei chiamarlo code filter

pippo, qualsiasi cosa

ho chiamato code filter per far capire

che è un filtro

proprio per questo, potrebbe essere

qualsiasi nome, quindi cosa faccio?

abbiamo detto che dall'analisi

ci diceva che

iniziamo col primo filtro, quello sul campo codice

quindi su questo qui

l'analisi ci diceva che deve fare una ricerca

esatta, un match esatto

cosa farò?

dico

if

is filter present

o the filter

vedi che come adesso

vedi come adesso riuso

il filtro che ho dichiarato qui sopra, quindi dico se l'utente mi ha valorizzato questo campo qui, quindi mi ha valorizzato il filtro sul codice, quindi se ho definito questo filtro, allora cosa faccio? Mi recupero il valore di questo filtro, at filter value, in modo che lo ottengo dalla maschera, quindi dico dammi il valore che ha messo l'utente in maschera per questo filtro e concatenalo e creaci una condomma di where. Quindi farò and cr underscore code, perché lo so che il campo è quello, uguale,

uguale qua ci metto filter value, poi spiego un'altra cosa. Ecco il filter value, capito? Quindi,

faccio adesso un po' più chiaro. Quindi qua dico quali sono i filtri che mi aspetto e che quindi io contemplerò in

fase di costruzione del mio sql quindi dico se l'utente mi ha valorizzato qui nella maschera

un code filter dammi il valore del campo di testo dammi il valore in maniera che ci costruisco

continua a costruire la mia sql quindi ci aggiungo la condizione end CRCode uguale,

perché voglio le exact, il filter value.

Un po' più chiaro lo scopo?

Sì, come se fossero variabili locali che sono associate a qui.

Bravissimo, come se fossero variabili, esatto.

Poi dopo, quando facciamo la view

vediamo come le due cose le uniamo.

Ora una piccola attenzione

su filter value in realtà

è sbagliato farlo direttamente così

perché così noi siamo soggetti

ovviamente ad esempio

sicure in action o cose di questo genere,

perché qua praticamente ci torna il valore in maschera, d'accordo?

Quindi bisogna sempre fare questa cosa qui anche per sanitarizzare il dato.

C'è questa classe,

sì, questa qui,

Object to SQL, ok? Quindi dobbiamo

fare, non concateniamo

le SQL direttamente al valore

ma facciamo SQL

più jbcdata ma per object to SQL

filter value, ok?

tutto qui

in questo non fa altro, se ci vedete

dentro fa tutta una serie di ragionamenti comunque fondamentalmente qui noi aggiungiamo il valore

in realtà più in generale poi serve lo vediamo quando facciamo sempre filtri sulle date eccetera

fa già automaticamente il to date è molto comodo è una classe di utilità molto comodo fa una serie

di cose ok adesso vediamo gli altri due filtri così come dire entriamo più nel concetto quindi ad esempio per la descrizione sarà is filter present

e mi ha messo anche il filtro sulla descrizione ok allora io prendo il valore

del filtro description filter e lo concateno

description filter e lo concateno

la mia classe di

alla mia al mio al mio sql abbiamo detto vogliamo fare una ricerca in like quindi farò and cr description

like like più ma per filter value

banalmente potrebbe essere così

oppure in realtà

qui

questo è giusto per farvi vedere

banalmente come code filter

quindi leggo il valore

del filtro e lo concateno per costruirci la mia

query poi in realtà per quanto riguarda gli statement voi avete anche delle classi delle

classi sono dei metodi di utilità quindi ad esempio avete se fate control contro lo spazio addor oppure ci avete like statement

non so già il like

eq statement

lt statement, gt statement

e così via dicendo, ok?

qui ad esempio qui il like, quindi potremmo usare

like statement

il campo

ci chiede qual è il campo e qual è il filtro

quindi il campo è questo, il filtro quindi il campo è questo

il filtro abbiamo detto

è questo qui

internamente che cosa fa lui?

costruisce

costruisce la like

ok?

quindi qua ci dobbiamo limitare a fare

seql più uguale

and like statement, ok?

Giusto così uno può

vediamo pure questi metodi di utilità.

Scusa Simone,

e dimetti il fatto la i su crdescription.

Come da la colonna.

Ah, grande, grande, perfetto.

Yes.

Ok. E qua in realtà non serve neanche il filter value come dalla colonna.

preferisco fare così

comunque insomma c'ha tutta una serie di metodi

di utilità per fare la costruzione

dell'SQL

addirittura uno potrebbe anche evitarsi di fare

AND così

perché c'ha pure appunto

AD

AND

e fa' così

comunque dopo dipende anche

dalla complessità

insomma di quello che dovete fare

come adesso queste perché sono cose abbastanza semplici

equals like, no?

poi ci possono essere magari delle condizioni di wear

più complesse e in quel caso

dovete scriverlo magari a manina così

va bene

quindi facciamo anche l'ultimo

ed è praticamente copia speculare.

Guardate, faccio proprio ctrl-c, ctrl-v,

perché tanto l'unica cosa che cambierà

è dirgli che il filter present teacher filter

ha della X statement su cr teacher di teacher filter.

Ok?

Sono domande?

no ok, perfetto

finito

sono solo tre passi, la query è molto molto semplice

quindi il framework

quando l'utente premerà ricerca

valorizzerà questi campi di testo

in una mappa di filtri

che vengono poi passati

alla classe di query

che ci costruisce l'SQ

lo restituisce al framework

il framework esegue lo statement SQL

e poi

salva il risultato di ricerca cioè salva, tra virgolette conserva il risultato di ricerca all'interno di una realist in memoria per mostrarlo all'utente.

Abbiamo terminato il primo step all'interno del pattern MVvc che è il model quindi abbiamo visto il model in

tutte le sue declinazioni sulle pagine di ricerca o di insert e di edit

passiamo alla view

allora le view in areas

sono realizzate usando

delle semplici pagine

gsp

quindi non si fa uso di angular

react

framework

css

cara e vecchia gsp

html e javascript

base, c'è caricato in realtà jQuery, è importato a jQuery come libreria cara e vecchia GSP, HTML e JavaScript base.

C'è caricato in realtà a jQuery, è importato a jQuery come libreria,

però non è usata a meno che...

cioè è più lì come class, come utility, ok?

Per fare magari, che ne so, per uspottare la ricerca di seri.

E' lì, però non è importante ai fini dell'utilizzo della creazione di una view all'interno di Arias, perché è soltanto una semplice GSP.

La find.gsp e la edit.gsp.

Infatti sempre per ogni gestione, per ogni maschera che già esiste, vedete sempre che dichiara sempre find o edit.

Non dichiara altro. Perché? Perché la pagina di find è la gsp che avrà il compito di mostrare la nostra pagina dei filtri.

L'edit GSP è la pagina che, scusate allora,

Find appunto disegna la pagina dei filtri,

la result page in realtà è, per quanto noi la potremmo creare,

una result page, quindi la pagina dove mostra i risultati di ricerca, in realtà non si fa mai

perché viene generata automaticamente

dal framework

in base a quello che abbiamo

dichiarato nella classe di query

quindi in base, semplicemente

in base alle colonne che abbiamo dichiarato qui

in base alla caption che abbiamo dichiarato qui

e lui costruisce da solo la pagina di risultato di ricerca

quindi non si realizza mai

e l'edit gsp

è la pagina anche a sua volta

che viene fatta soltanto

l'edit gsp perché solitamente

e qua dico

solitamente il 99,9% dei casi

viene

utilizzata la stessa pagina sia per fare

l'edit che per fare l'insert vedrete che poi alla

fin fine l'edit e l'insert sono speculari sono uguali quindi con una paura solo gsp si gestisce

sia la pagina di edit sia la pagina di insert comunque nulla vieta poi vedremo come si fa anche

di chi dichiarare una insert page che è diverso dall'edit però di solito appunto noi si implementa

soltanto due GSP, find per i filtri

edit per gestire sia edit

che insert

ok?

cioè così che senza che condivido così

cioè senza che metto schermo intero così

è più facile passare da una parte all'altra

e-binding

ok? quindi il collegamento tra view e modello,

è garantito da un set di Java Tag Library customizzati.

Quindi il fatto di riuscire a collegare in soldoni

un campo della mia maschera, ad esempio mettiamo qua, ci sta l'edit, ok, ad esempio questa sarà la pagina di edit del corso, il fatto che io quello che metto sul campo teacher full name,

nella mia view, va a finire nella proprietà teacher del mio bin, il binding viene fatto tramite un tag java tag library customizzato nostro. che adesso vedremo come funziona però intanto bisogna sapere questo

quindi noi disegneremo

la nostra pagina HTML

semplice, pura

quindi metteremo il nostro input text

poi quell'input text

tramite un tag library lo colleghiamo

al nostro

modello

all'interno di queste

tag library quindi tutto quello che trovate praticamente asterisco.tld, ce ne sono diverse, non sono poche, quindi nei tagline, nei tld troverete che ci sono diversi, scusatemi, mi sono perso la slide diversi tag utili

alcuni li vedremo

e quelli più importanti ovviamente li vedremo insieme

che servono non soltanto a creare questi binding

ma anche ad esempio a implementare delle condizioni

quindi a fare degli if all'interno della mia gsp

oppure a fare dei loop

ok?

nulla di trascendentale

ci sono già tag library più famosi che fanno questo.

Questi però sono tag library sempre proprietari, ok?

Sempre di questo framework.

Quindi, per impretare condizioni, loop,

o anche disegnare dei widget un po' più avanzati,

quindi non solo il campo di testo, il checkbox e il radio,

ma magari delle griglie, delle dualiste e così via dicendo.

L'iterazione poi tra il client, view, e il server, controller,

è gestito dall'invocazione di specifiche funzioni JavaScript.

Qua è in realtà un argomento anticipato,

però lo vedremo poi nell'ultimo esercizio che abbiamo nel documento, come questa cosa qui delle due action. deve interagire con il controller e lo fa tramite invocazioni di funzioni JavaScript.

Quindi la view invoca una funzione JavaScript che si chiama doAction, per ora ci basta per questo,

e questa doAction manda una richiesta al server, richiesta che viene processata dal controller,

che poi lavora sul model e così via dicendo, secondo il pattern che abbiamo visto prima.

abbiamo visto prima. Ok, quindi adesso continuiamo sempre con l'esercizio, però adesso andiamo a vedere come funziona, come fare la pagina di find e la pagina di edit. Allora, io direi

di fare tutte e due le cose

insieme, quindi senza interruzioni

quindi se avete domande

altrimenti facciamo una quindicina di minuti

di pausa, ci ribecchiamo alle 11 e rincominciamo

direttamente nel fare

le edgesp

va bene

ok

ciao ragazzi

ciao ciao ragazzi Grazie a tutti. Grazie Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Rieccoci.

Allora, diamo un minutino.

Tornano tutti e riprendiamo. Grazie a tutti. allora

ricondividiamo. Ok.

Allora, ci eravamo fermati qui, giusto?

Quindi dobbiamo vedere come si fanno le view all'interno di Arias.

Quindi dicevamo che ci sono due file GSP da implementare,

uno per la pagina di find, quindi per modellare i filtri e uno invece

per modellare la pagina di edit o anche la stessa pagina possiamo usare per la insert

Allora, partiamo dalla pagina di find, ok?

La pagina dei filtri, secondo l'esercizio, deve essere fatta in questa maniera qui.

Quindi abbiamo tre campi di testo, codice del corso, descrizione del corso e il campo un teacher full name come si fa allora

innanzitutto bisogna creare la gsp dove la creiamo questa gsp esempio qua sto lavorando nel progetto di siank quindi qui nel progetto si anche ho creato

ho creato il package si sar corso sempre dentro il progetto di siank ma in tutti i progetti in

realtà tutti i progetti troverete poi quindi questo è source folder no troverete poi una fu un folder semplice normale che si chiama gsp quindi qua

dentro dobbiamo mettere invece le nostre gsp quindi ad esempio maniera diciamo quasi speculare

cosa farò farò un folder dentro si agges psi anche lo chiamo quindi esaur corso vediamo un po se fa già folder da solo

ok si sa quindi 40 poi ci mettiamo dentro la subfolder field ci mettiamo i vari esercizi

quindi adesso siamo esercizio del corso quindi, quindi faccio Caesar Corso e qui dentro creo la mia pagina GSP.

Quindi faccio New Other GSP File.

Ora, la pagina si può chiamare come vogliamo.

Solitamente la chiamiamo come il nome del bin e poi come suffisso find quindi esempio corso find.gsp

ok adesso adesso andiamo sul qui

sul nostro

documento, ci copiamo

la pagina di

find

è bloccato tutto il pc

ho chiesto

ok, ho fatto

ok

allora

e sostituiamo un po' di cose

quindi questo è lo scheletro

che è lo scheletro principale di una pagina

di find

vengono importati i

ITLD, quindi i custom tag di cui vi parlavo, che adesso vediamo, incominciamo ad usare.

Poi qua viene importato un po' di altre cose, tipo esempio il CSS, sempre questo.

Top Info GSP sarebbe la top barra in alto, cioè questa cosettina qua che vedete, questa stricciolina qui con scritto il nome dell'utente, eccetera, ok?

Questa qui.

Questa top info, quindi include un'altra GSP che è quella.

E poi il resto in pratica crea la struttura di base

dove poi possiamo aggiungere, andare a disegnare la nostra GSP,

quindi la struttura, questi tab, eccetera. Questa struttura sia questa struttura a schede che abbiamo visto.

Noi dove dobbiamo andare a modificare?

Possiamo modificare da qui, all'interno di questo tag table.

Quindi all'interno di questo tag table, un attimo mi faccio una nuova login così

ci intendiamo che cosa intendiamo

col table

quindi diciamo che la struttura

mi crea tutto questo eccezione

fatta vedete questo rettangolo qui

tac tac quindi noi ci

limiteremo semplicemente a creare dei

tr o eventualmente

anche dei td insomma per andare a disegnare in maniera tabellare la maschera.

Questo rettangolo qui che vedete col bordo è quello che andremo a editare.

Tutto il resto della GSP è struttura a contorno.

In più viene fatto l'include della bottoniera di find, della bottoniera, ok, quindi, scusate, ecco, la bottoniera è questa qui, e inoltre find result gsp è quel pezzettino che vi dicevo che ci permette di non disegnare la pagina di result perché viene delegata al framework che costruirà la pagina dei risultati in base a quello che

abbiamo definito la nostra classe di query. Iniziamo innanzitutto, passiamo questi

placeholder, quindi window title è quello che appare qui in alto sulla

finestra del browser, page title è quello che mettiamo qui dentro, quindi window title ci mettiamo corso

formazione

Caesar, corso

ci mettiamo

page title, semplicemente corso

scusa

qui dentro

iniziamo a disegnare

la nostra pagina.

Allora solitamente si fa qualcosa, si fa un po' dopo questa fantasia,

nel senso come volete disegnare la pagina, se volete disegnarla in un modo o in un altro,

diciamo standard, di solito le facciamo tutte così,

è un tr per ogni campo poi un td per alle volunti di per il campo quindi ad esempio un tr

il primo è codice

il vol così e quali il campo di il campo html quindi nel nostro caso abbiamo detto che sarà

un input type uguale text

uguale text ok?

ecco

e poi la stessa cosa

ctrl c ctrl v e quindi farò che ne so

descrizione

poi sempre un

un campo di testo e così via dicendo

ok?

però

facendo così e sto facendo

insegnante

creando semplicemente sto buttando in maschera dei campi come abbiamo detto abbiamo bisogno di un modo per collegare il fatto che, scusatemi, questo la chiudo perché non ci serve,

per collegare questo campo di testo al mio modello. Siccome siamo in pagina di find, il mio modello è

la mappa dei filtri, quindi i filtri che riceverò nella mia classe di query e per creare questo legame, quindi questo binding

dobbiamo utilizzare un tag library

ovvero sia questo link property tag

me lo copio e poi vediamo che segni

quindi ad esempio lo metto qui, lo sostituisco al mio campo di testo.

O meglio, l'obiettivo è che circondo il mio widget HTML, quindi in questo caso il mio campo di testo, con questo link property.

Questo è il tag.

Link property vuole avere il nome della proprietà e se si tratta di un filtro o meno.

Perché questo? Perché l'improperty lo utilizzeremo poi anche nell'edit.

Perché questo? Perché l'improverty lo utilizzeremo poi anche nell'edit, ok?

È sempre un link property in generale, un tag che serve per creare un binding verso il server, ok? Tra la view e il modello, ok?

Sì.

Come?

Pronto?

È stato un errore?

Sì.

Ok, dicevo, per creare un legame verso il modello.

Quindi l'ISFILTER serve per dirgli, sì, ma in questo momento che tipo di modello è?

È un modello, perché sono in una fase di, è il modello della query, quindi mappellamente,

di filtri perché sto sulla pagina di ricerca oppure il modello bin il poggio che abbiamo visto perché

sono su edit insert quindi questo is filter y serve a dirgli questo siamo una pagina di find

dico guarda crea un binding però crea lo considerando che questo qui è un campo di

testo che andrà ad afferire un filtro d'accordo quindi filter yes property name qui dobbiamo

mettere il nome del nostro filtro,

cioè quello che adesso, così concludiamo, chiudiamo il cerchio,

quello che abbiamo definito qui dentro la nostra classe di query.

Nella nostra classe di query abbiamo detto che contempliamo un filtro che si chiama code filter,

quindi code filter, scritto così, lo riportiamo qui dentro, property name. Ok, adesso è chiaro questa cosa qui del code filtri

e così abbiamo chiuso il cerchio

quindi gli abbiamo detto

quello che l'utente ti mette sul campo di testo

buttamelo come filtro che si chiamerà code filtri nella mappa dei filtri

in maniera che qua sulla query dico ok se è presente nella mappa dei filtri il filtro code filter,

aggiungi questa condizione.

Ok?

Ok.

Poi, questo si aggiunge sempre, è un tag che serve eventualmente per mostrare degli errori di validazione.

Per ora lo aggiungiamo e basta, poi le validazioni le vediamo più avanti.

Però per adesso lo aggiungiamo, si deve sempre mettere all'interno del link property.

Questo è il modo con cui, se il nostro widget fosse stato un checkbox,

nulla cambiava, cosa sarebbe cambiato?

Che qui invece di input metteramo un checkbox, invece di input text metteramo un checkbox, nulla cambiava, cosa sarebbe cambiato? Che qui invece di input metteramo un checkbox, invece di input text metteramo

un checkbox, era una combo, metteramo una select e così via dicendo.

Quindi faccio la stessa cosa anche per gli altri.

Quindi per la descrizione, per l'insegnante, quindi descrizione, il filtro si chiamava description filter.

Per l'insegnante si chiamava teacher filter.

Salvo.

Anna. Salvo. Done.

Ultima cosa, questa non l'ho detta.

Viene sempre fatto anche l'import nello scheletro di questo JS.

Questo JS contiene quello che accennavo nella slide,

cioè tutta una serie di JavaScript che gestiscono poi l'interazione tra il client e il server poi quando facciamo

l'ultimo esercizio sarà

più chiaro che cosa fa

comunque

questa è la nostra pagina

del defined

del corso, ci sono

fino adesso no perfetto allora io mi sono sbagliato non so cosa ho cliccato o

ma da finire qua corso find non avevo esso cielo trascino

abbiamo detto che abbia fatto gespe si anche si sarà si sa al corsoso eccolo qua ok eccolo qua

poi fratello a questa

creiamo la pagina di edit

abbiamo detto che usili

utilizziamo anche per

per la insert

quindi anche qui posso mettere

perché devo selezionarlo giustamente

quindi abbiamo detto

gespy

sianc

Caesar Corso

quindi qua creiamo dicevo possiamo mettere qualsiasi cosa Gespy, Sianc, Caesar, Corso.

Quindi qua creiamo,

e dicevo, possiamo mettere qualsiasi cosa come il nome,

però di solito si fa sempre nome del bin, edit,

il corso edit di Gespy, di solito questo è la sintaxi.

Ok, anche qui partiamo da questo template.

Control C, control V.

Identico, senza che ci stiamo a guardare che cosa fa.

Comunque, ci mettiamo un nome, qua non l'ho rimpiazzato, e poi basta, questo è soltanto da implementare il titolo della pagina, mettiamo tipo modifica corso, giusto per capire, modifica inserimento corso.

Poi, allo stesso modo, insomma, qui nelle nostre td e tr dobbiamo andare ad implementare,

ad aggiungere, cioè bisogna disegnare la nostra pagina di edit.

Ora, la pagina di edit la vogliamo così, quindi tutte le proprietà, cioè al di là del layout, ok, questo là del layout, il mockup è per far intendere i filtri che vogliamo, poi magari possiamo pure organizzarli così.

Intanto mettiamo i campi, i campi che dobbiamo mettere sono tutti, quindi codice, descrizione, teacher, start date and date, quindi 1, 2, 3, 4, 5 campi, quindi cominciamo con il codice.

4, 5, 5 campi. Quindi cominciamo con il codice. Il codice è sempre un input text. Quindi l'input text, adesso ce l'abbiamo scoperto, lo mettiamomente nel senso sempre link property ok uguale faccio rivedere

scusate un attimo facciamo una cosa

vabbè volevo fare una cosa corrispondente 1 1 comunque se vedete qua link property link property

Però, siccome adesso lo stiamo usando nel contesto di edit, di insert, quindi il modello mi diventa il mio bin, il mio pogio,

e dobbiamo dire che usebininfo y, quindi è un po' l'equivalente speculare di quello che abbiamo fatto su isfilter, yes, sulla find.

Quindi il suo omologo, in caso di edit,, insert diventa usbininfo y.

E qua ci dobbiamo mettere che cosa?

Il nome della proprietà nel nostro bin.

Quindi esempio il codice noi lo mappiamo con la proprietà code.

Il resto insomma il nostro input text.

Quindi adesso faccio la stessa cosa anche per

faccio la stessa cosa anche per

descrizione

quindi la proprietà sul mio bin è description

quindi questa qua

ok per int mio bin è description, quindi questa qua, ok? Per intenderci è description.

Faccio poi la stessa cosa per insegnante e la mia proprietà è teacher.

Leggermente diverso per la data di inizio del corso, data di inizio perché magari vogliamo mostrare

essendo delle date, vogliamo mostrare

un calendario, ok?

Quindi qui è uguale, nel senso

è sempre il link property

che lo collego alla proprietà, che nel mio caso

quindi è start date.

Però il calendario il calendario lo trovate sempre qui

tu tu tu tu tu

faccio prima cercare calendar

creating calendar

ecco

nel link property per fare un calendario creating calendar, ecco,

nel link property,

per fare un calendarietto,

nel link property,

ci mettete queste due proprietà,

format, per dire il formato data,

e calendar y ok?

l'unica differenza, per il resto è comunque un campo di testo e poi in ultimo

data di fine corso

quindi mappato con la proprietà

end date

tutto chiaro? End date.

Tutto chiaro?

Ok.

Quindi fatta la pagina di find, fatta la pagina di insert edit.

abbiamo finito la view

ok questa è la view

abbiamo fatto già il model

bin e query

abbiamo fatto le view

find gsp, edit gsp

torniamo alle slide

ci rimane l'ultimo componente del nostro pattern mvc abbiamo fatto model view controller

fatto il controller possiamo poi fare il primo deploy partire e vedere un attimo che cosa abbiamo Allora, un secondo solo scusatemi.

Allora, un controller è implementato sempre tramite una classe Java e il suo compito, lo suo scopo è quello di occuparsi di tutte le azioni che l'utente può inviare al server attraverso la view.

Quindi il fatto che l'utente clicca conferma, che clicca elimina, che prende in gestione un record, che fa una ricerca, tutte queste azioni sono gestite poi dal controller. Più nello specifico, per realizzare un controller in arias abbiamo bisogno di creare una classe Java che estende la classe astratta V3ControllerPassistent.

Questa classe dovrà poi implementare un solo metodo che è il metodo init. Questo metodo è invocato

dal framework quando l'utente apre la nostra pagina, quindi cliccherà sul punto di menu

della nostra pagina e il framework la prima cosa che fa è inizializzare il controller metodo init, ok?

Alcune delle cose che dobbiamo inizializzare nel controller sono queste due, le cose più importanti sono queste due, sono dichiarare le nostre view, quindi dichiarare le nostre pagine di define e di edit che abbiamo appena creato utilizzando il metodo set return page

poi lo vediamo e dichiarare qual è la nostra classe di query tramite il metodo set find result builder

quindi insomma vediamo adesso andiamo all'esercizio per completare l'esercizio, per completare l'esercizio, vediamo come definire il nostro controller per il corso.

Poi, fatto questo, possiamo finalmente fare.

Ci avviciniamo al primo deploy.

Come si disegna il controller?

Anche qui avete gli snippet di codice, quindi molto semplice.

Comunque partiamo sempre dal creare la nostra classe java quindi qua dentro sisar.corso new class anche qui potete chiamare come preferite il controller di solito noi facciamo corso w3 quindi nome del bin w3 per fare il controller.

per fare il controller.

Abbiamo detto che il primo step è estendere la classe v3 controller persistent,

quindi facciamo

extends

v3 controller persistent,

ok, qua ce ne sono tanti,

ma quello solo persistent, ok?

Ignorate più il detail, l'info, eh?

Persistent.

E poi bisogna implementare il metodo init qua vi riporto

il metodo metodo init di base vediamo sempre quello che bisogna fare fate tutti quanti gli import ok, HTTP server request di JavaX

service result builder

fate tutti gli import

ok, perfetto

e iniziamo

primo step, inizializzare la query class

cioè dirgli qual è la classe di query

che deve usare questo controller

lo si fa in questo modo qui

le informazioni che dovete personalizzare

sono due.

La prima è il nome della classe di query.

Quindi nel nostro caso è questa qui, no?

Che abbiamo fatto stamattina, quindi è corsoquery.class.

Poi qui dovete mettere il nome

della proprietà sul bin

che è chiave primaria

quindi sul nostro bin

la proprietà che conterrà la chiave primaria

è questo, code

control c

il resto è standard

così si dice al controller

guarda questa è la classe

di query

prossimo step, dichiarare le view

ok? quindi incominciamo

esempio con la view

defined

dovete specificare il percorso

della nostra GSP la nostra Gsp nostra gsp abbiamo messa

sotto si anche si sar corso quindi partendo da gsp dobbiamo dichiarare

slash

si anche slash cos'era si sar corso corso fine quindi flash si è flash corso flash corso find punto

gespi

scusa simon la scuola detto user riga 16 ma di una serie

Perfetto, bravissimo, esatto. il controller padre è tutta una serie, c'è tutta una gerarchia quindi questa è l'ultima classe

che dobbiamo estendere, però lui a sua volta

estende un'altra classe

che implementa poi la serie di interfacce

però sì, l'utente se noi ce l'abbiamo

gratis, sarebbe l'utente logato

in quel momento

poi, la stessa cosa

lo stesso lavoro lo facciamo per la GSP di edit

poi come vi dicevo, qui eventualmente uno potrebbe anche

rimplementarsi ad esempio la GSP di insert

specificarne una particolare, o addirittura la GSP di view

poi lo vediamo magari quando faremo il ricorso sulla profilatura,

comunque perché magari un utente non è abilitato a fare l'edit di un elemento e quindi la pagina andrà automaticamente in modalità view.

Potremmo fare una pagina dedicata, una GSP dedicata soltanto per la visualizzazione in view,

però solitamente non si fa, solitamente sia per l dedicata soltanto per la visualizzazione in view, ok? Però solitamente

non si fa, solitamente sia per l'insert che sia per la view si specifica la stessa GSP

che poi semplicemente in questo caso nell'insert farà inserire, nel caso della view farà

vedere tutti i campi ingrigiti, ok? Però lo possiamo eventualmente anche creare. Poi

dobbiamo dirgli qual è la prima pagina che deve apparire,

e questa è sempre la stessa, perché come abbiamo visto,

tutte le pagine partono sempre dalla pagina di find.

Quindi queste due righe vanno in coppia.

Ultima cosa è dichiarare il bin inteso come modello questo qui, il pojo bin, che sarà questo.

Quindi corso Java, bisogna dichiarare questo.

Sì, anche SISAR corso.

Sì, anche sì, sarà corso. Fine, questo è il controller. Semplicemente nel metodo di init andiamo a dichiarare queste quattro cose. ultimo step per terminare

la dichiarazione di un controller

è dichiarare il cosiddetto

mapping

che cos'è il mapping

allora

allora

se ci fate caso

il controller in Aries

non è una servlet

noi semplicemente abbiamo creato una classe Java

che stendeva quella classe stratta

v3 controller persistent

questo significa che le richieste

dell'utente non sono direttamente

indirizzate al nostro controller

quindi non è che se l'utente

apre la pagina

la nostra pagina per gestire i corsi poi quelle azioni vanno direttamente al nostro controller.

In Arias infatti abbiamo un'unica servlet dichiarata, una sola, che fa da entry point per tutte le richieste di tutti gli utenti.

Questa servlet si chiama controller dispatcher, come tutte le servlette dichiarate all'interno del web XML e della web app.

Il compito del dispatcher è quello di ricevere le richieste degli utenti e di indirizzarle poi al giusto controller,

gestendo anche quel processo di inizializzazione di cui dicevamo con il metodo init che abbiamo appena visto.

Per poter identificare il giusto controller, tutti i controlli devono essere identificati da una cosa che si chiama mapping.

Avevamo introdotto un pochettino questa mattina.

Il mapping è il nome logico del controller e rappresenta come il controller verrà invocato tramite la urla. Quindi questa macchina abbiamo visto un esempio di urla,

questa è la host, questa è la porta, questo è il nome del contesto

e quest'ultima parte, punto do, è il mapping.

Scusate un attimo, prendo una caramella.

Un secondo, scusatemi. eccomi

allora

quindi

allora

quindi ad esempio

facendo l'esempio del maillogin.do

il maillogin.do è il mapping

del controller

responsabile per la pagina di login

l'associazione tra mapping e la corrispondente classe Java,

quindi la classe Java del mio controller,

viene realizzata attraverso un file di properties localizzato sotto ogni progetto.

Quindi per i controller di Sianc troverete un file di properties nel progetto di Sianc, per PSG Lib ne troverete uno dentro PSG Lib, per acquisti, in modo da MC troverete al suo interno un file di properties con tutta l'istia di sui controller e così via dicendo.

Comunque sono localizzati in ogni caso in tutti i progetti, lo troverete sotto la cartella jsp webinfcontrollers.

Ad esempio la mainlogin.du è dichiarata in un file che si chiama controller properties, che sta dentro qui, jsp webinfcontrollers, del progetto psglib.

del progetto psglib troverete quindi una rega

che si chiama mapping main login uguale

e questo è il path del mio controller

login2v3

il controller dispatcher

che abbiamo detto che è una servet

è configurata dentro il web.xml

per fargli il catch

quindi per intercettare tutte le url

che finiscono con la stringa.do

quindi solo quello

tutto il resto non passa per il controllo di dispatcher

cosa fa il controllo di dispatcher?

prende la parte di mapping dell'url

quindi main login

guarda all'interno di tutti i controller properties

di tutti i moduli che sono installati

e se esiste un mapping del simile.

Una volta che lo trova, come in questo caso,

trova che la classe si chiama login2v3,

allora lui istanzia la classe login2v3

e invoca il metodo init che abbiamo appena visto.

Questo è quello che fa.

MyMapping.2.2

il controllo di dispatcher recupera mymapping.2.2

la parte finale

va a vedere all'interno di tutta la lista di controlli che ha

se ce n'è uno identificato con quel mapping

se si lo prende lo istanzia

e invoca il metodo di init che abbiamo appena visto.

Chiaro?

Sì.

Perfetto.

Perfetto, quindi l'ultimo passo che abbiamo e poi possiamo fare il deploy, è quello di dichiarare il mapping del nostro controller.

Allora, come si fa? Qui sempre trovate lo snippet,

adesso però prima individuiamo il file di properties.

Allora abbiamo detto che io ho creato, sto lavorando sotto il progetto Sianc,

quindi dovrò aggiungerlo sui controller properties del progetto Sianc.

Abbiamo detto che i controller si trovano sotto gsp webinf controllers.

Qua trovate due properties, effettivamente qua potete avere anche 5-6 file di properties, ok? Valgono tutti.

Dopo lui il framework carica tutti i file di properties.

Qualsiasi cosa che trova dentro il folder controller. Lavoriamo qui dentro, sia in punto properties

che quello ufficiale. Come potete vedere ho già fatto il corso un po' di volte, vabbè, al di là di questo, ci

lo togliamo un po ok allora quindi qua trovate tutti i controller

ad esempio dichiarate all'interno del modulo si anche che sarebbe il modulo di

xmpi e quindi di anagrafiche, come si fa a dichiarare il mapping? Possiamo copiarcelo da qui,

così partiamo da un inizio, facciamo corso Caesar, mapping, il nome del vostro mapping,

quindi quello che mettiamo qui sarà come quello che andremo a inserire sulla barra degli indirizzi del browser. Quindi esempio potrebbe essere mapping.sysar.corso.

Quindi l'utente scriverà proprio così, scriverà,

http.barra.indirizzo.areas.csar.corso.du.

Qui mettiamo il path al nostro controller completo di package, quindi il nostro controller che è corsov3, quindi scriviamo controller, sianc.sysar.corso.v3, ok? Quindi questo riportiamo.

E qui dobbiamo riportare il nome del package del nostro bin.

Quindi, sianc.cesar.corso.corso.

Il nome del nostro bin.

Ci serve per fare un legame tra corso controller e corso pin.

Tutto chiaro fino adesso?

Sì, giusto una domanda.

Quello user service nel controller cosa si aveva?

Quello dovete metterlo sempre. comunque sia serve per far sì che lo vedremo nell'ultimo esercizio sarà chiaro che cosa cosa serve allora fammi pensare è più facile spiegartelo facciamo che ci torniamo

quando si spiega l'esercizio

l'ultimo esercizio

spiegarlo senza fare la prova è un po' complicato

comunque dovete metterlo sempre per quale motivo

in generale

perché ovviamente qua stiamo parlando di un framework

che risale più o meno al 2006

non è un'altra

un 2007, adesso non ricordo bene.

Quindi poi ha subito nel tempo, quindi abbastanza anche alla sua età,

ha subito nel tempo poi delle evoluzioni, dei miglioramenti.

Quindi ovviamente i controller, come lo stiamo programmando oggi,

magari all'inizio si programmava in maniera un pochettino leggermente diversa.

Poi sono state introdotte le novità, per cui si può utilizzare i servizi.

Anticipare i servizi. E' anticipare complicato.

Poi quando arriviamo all'ultimo esercizio,

anzi me lo segno così quando ci arriviamo ci ritorniamo indietro e te lo dico.

Ok?

Va bene, grazie.

Prego.

Allora, un attimo che me lo segno sul cellulare news service

ok

ok

allora

adesso

per il deploy effettivo

potrebbero esserci delle differenze tra come faccio il deploy e come lo fate voi, perché alcuni di voi hanno fatto il corso di compilazione con me, per la parte JBF, MC, HR, Rencam, venerdì scorso.

Quindi per i miei prodotti gli ho spiegato come faccio il deploy.

Altri di voi hanno fatto il corso di compilazione del sanitario, altri del CUP, così dicendo.

Quindi magari CUP e sanitario fanno un deploy in maniera diversa, d'accordo?

Quindi voi fatelo come ve l'hanno spiegato nel corso.

Adesso lo faccio nel modo in cui lo faccio per i miei moduli GBF, MC, eccetera,

e come l'ho spiegato anche nel corso di venerdì, lo faccio in quel modo lì.

Comunque, in soldoni, quello che adesso devo fare è far partire Ares.

Come faccio a partire Ares nel mio caso?

Devo lanciare il target ant, e io ho un target qui main

cosa fa questo target main?

ok, il target main

questo fa scopa con il file build properties

che va personalizzato

1, 2, 3 1, 2, 3

questo niente

tutto così facciamo una start up più veloce

ok

ok

che cosa fa il

cosa mi serve a Melant

per riportare in soldoni

le mie GSP

e

che sono qui dentro, all'interno del mio progetto web, che si chiama Arias.

Il progetto web Arias è quello che io di fatti deploy all'interno del mio Tomcat.

Questo lo sto dicendo, però chi ha fatto il corso con me sa di cosa sto parlando.

Gli altri gruppi non so come fanno la compilazione, mi sembra che la fanno leggermente diversa.

Comunque, al di là di questo, voi fate come vi avevo spiegato.

Mi sembra che la fanno leggermente diversa.

Comunque, al di là di questo, voi fate come vi avevo spiegato.

Io nel mio caso è questa qui, quindi io faccio il deploy, lancio il mio ant e questo ant mi va a copiare le leggi e spi che ho appena creato dentro il mio progetto Sian che me le va a portare nel mio progetto web, che è quello deployato all'interno del mio Tomcat.

Fatto questo, faccio partire il Tomcat.

E incrociamo il dito. Attendere, prego

Grazie. sto caricando sono collegato su un mio database locale

così faccio vedere tutto velocemente

allora partito

server startup quindi Facciamo vedere tutto velocemente. Allora, partito. Server Startup.

Quindi andrò su

l'host 8080, che è il mio indirizzo,

slash area, slash, qui mettiamo il nome del nostro mapping,

che abbiamo detto essere Caesar.Corso.

Caesar.Cor Caesar.corso. Caesar.corso.do

Questa è la mia pagina di...

ricerca.

E questa è la view che abbiamo fatto.

Quindi questo è il mio mapping,

ho aperto il mio controllo,

il mio controllo dichiara questa come

gsp iniziale e quindi questo è.

Adesso provo a fare ricerca,

nessun elemento trovato,

la tabella è vuota, proviamo a fare nuovo.

Adesso provo a fare ricerca, nessun elemento trovato, a tabella è vuota, proviamo a fare nuovo.

Ok, e qui vediamo i nostri campi, proviamo a inserire qualcosa, vediamo se funziona tutto, insomma.

C1, codice, primo corso, insegnante, non mi sono presentato, scusatemi, mi chiamo Simone, ok?

Vabbè, quindi... Non mi chiedete di presentarmi perché l'ho presentato ieri.

Va bene, quindi, dato inizio corsa, vedete che qua abbiamo specificato il fatto che questi campi sono dei calendari,

e quindi mi esce fuori il calendarietto

1 gennaio

1 aprile

conferma

ora la pagina l'abbiamo fatta molto semplice

quindi è poco comprensibile

però ho fatto conferma

adesso siamo andati in edit

perché siamo andati in edit?

Lo capisco dal fatto che la bottoniera adesso ha un elimina, quindi per cancellare.

Difatti, se io adesso faccio esci, eccolo qua, sono tornato sul risultato di ricerca,

io vedo un record, che è il mio corso

se io clicco qui per prendere in gestione

eccolo qui

vedete

ora

se io vado qui sul corso

quindi sul corso scolastico

su questo tab e faccio ricerca

trovo questo unico record

inseriamone anche un altro

inseriamo per esempio un corso C2

secondo corso

Pippo

inizio

conferma

ok adesso ho due corsi no?

quindi se io faccio ricerca

se io faccio ricerca, vedo questi due record e vedo perché vedo codice e descrizione.

Vi ricordate perché lo abbiamo dichiarato qui, sulla nostra classe di query.

Sulla nostra classe di query noi abbiamo dichiarato che i campi sono questi due e che le caption sono codice e descrizione scritte in questa maniera.

Di fatto qui troviamo codice e descrizione scritta in questa maniera qui.

Ora proviamo i nostri filtri.

Ok?

Ad esempio, che ne so, facciamoci anche un altro corso, C3, primo corso BIS, e conferma.

vediamo un po'

allora vogliamo che se mettiamo C1 andiamo diretti

match esatto

quindi deve aprire il corso C1

vi faccio ricerca

e infatti ha funzionato

e per ugualianza

tac

proviamo l'altro filtro

questo va in like

scriviamo primo

dovrebbe trovarci due corsi

e infatti funziona ci trova primo corso primo corso biz Scriviamo primo, dovrebbe trovarci due corsi.

Infatti funziona, ci trova primo corso, primo corso Biz.

Il terzo è in like.

Abbiamo fatto Simone e Pippo, cerchiamo Pippo.

Ok, funziona perfettamente. Quindi quindi in pratica

quindi giusto anche per renderci conto

quando io metto

qui primo

e succederà

quello che metto qui come input text

quello che metto qui dentro l'input text

mi viene link tramite questo link property

collegato al description filter

ok?

quindi qua su quel ricorso query potrò fare

if description filter is present

allora aggiungi la condizione di like

ok?

così via dicendo

stessa cosa avviene poi

eh, fatto esci

stessa cosa avviene quando faccio nuovo quindi quando inserisco un oggetto.

Quindi questo campo qui è il link property con il bin, quindi quello che metto qua dentro andrà a finire sul campo, sulla proprietà code del bin, questo sulla proprietà description, questo insegnante e così via dicendo.

Tutto chiaro?

Sì.

Giusto una domanda.

Nella pagina GSP, visto che c'è

off string, on string.

Allora, off string, on string.

Ah, questo qui no,

semplicemente serve per fare

questa alternanza di colori che vedi

che fa un po' più chiaro, più scuro, più chiaro, più scuro

quindi semplicemente per rendere più distinguibili le righe

opzionali

quello che vi faccio vedere è insomma

adesso ho fatto una tabella molto stupida

insomma righe e colonne

però nulla vieta che voi fate

che ne so

con due td nello stesso tr quindi che ne so fate

invece di fare una riga una colonna una riga una colonna fate due colonne no potete fare quello che

potete sbizzarire poi qua dentro sempre considerando il fatto che comunque siete dentro una table quindi sbizzarire fino a

certa però insomma potete poi fare l'irrappegginazione che preferite tutta roba html insomma ok

altre domande tutto chiaro mazza sono contento di solito fanno migliaia di domande. Va bene, va bene.

Che domande ti fanno Simone di solito? Scusa.

Mi chiedo, non è mai...

Approfittiamo.

Di solito sul model, sul model.

Sul model non entra subito.

Se stai a leggere, lo andiamo a leggere.

Ok, allora poi magari lo rivediamo, dai.

Va bene, va bene. Comunque il modello in effetti poi lo andiamo a rivedere adesso negli esercizi.

Simone, posso un secondo me, forse una domanda un po' oltre quello che abbiamo fatto.

Nel risultato della ricerca abbiamo quei due campi che abbiamo dichiarato nel codice,

per questo valgono quelle personalizzazioni senza

dover aggiungere altre cose, quelle personalizzazioni

che abbiamo visto nei giorni scorsi

della lista dei campi

di ricerca, o dobbiamo

in questo caso per vedere

un'ulteriore colonna, dobbiamo

sempre modificare il codice

ah, tu dici le preferenze di ricerca, giusto?

sì, esatto

ah si si no quelle ce l'hai

automaticamente però

allora

ottima domanda

le preferenze di ricerca

vediamole con una gestione

così faccio vedere anche agli altri

così giusto per capire di cosa stiamo parlando.

Allora abbiamo visto su una pagina abbastanza complessa nel sensoso come il paziente, perché il paziente ha tante colonne,

abbiamo visto che c'era 247 di colonne sulla base dati.

Quindi, se io faccio una ricerca su questa maschera,

vedete che il layout è lo stesso, il funzionamento è lo stesso,

è sempre la stessa roba,

faccio ricerca, nei miei risultati di ricerca,

ho queste colonne

però

l'utente può

crearsi una preferenza di ricerca

tramite questo bottone qui

nuovo nuovo descrizione

ad esempio

preferenza

di ricerca

può definire

se questa preferenza di ricerca è di default, cosa

significa? Significa che non appena si apre la maschera viene subito applicata e che cosa

fa la preferenza di ricerca? Cattura la maschera dei filtri così come sono stati valorizzati.

Ora, sia filtri che ha messo esplicitamente l'utente, sia poi filtri che magari sono invisibili

dall'utente, come ad esempio la data di lavoro, anche la data di oggi è l'anno di lavoro.

Quindi fa una cattura alla maschera dei filtri.

Facciamo confirm e tra le cose che possiamo configurare sono i campi di risultato, quindi questo torniamo a quello che diceva il collega.

Il collega, insomma, noi abbiamo la possibilità di decidere quali colonne voglio vedere qui nel risultato di ricerca.

Per esempio, vedete che sono queste qui, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, qui, ok? Però in realtà ne ho diverse, quindi io potrei

scegliere di aggiungerne altre

o di rimuoverne alcune

faccio una prova giusto per vedere

quindi magari, che ne so, mi metto in pancia

mi lascio

questi qua, codice

cognome, nome, data di nascita

e mi aggiungo,

anche se dopo non è valorizzata, ci interessa poco,

ASL di emigrazione, ok?

Quello che sia.

Poi eventualmente posso anche decidere di quelle colonne

quali sono l'ordinamento, no?

Quindi ordinarle, che ne so, per una data di nascita,

quello che sia, l'avevamo visto con i colleghi.

Comunque, adesso se io vado a rifare una ricerca, uscendo e rientrando magari, ecco vedete,

appena sono entrato ho già riposizionato il filtro cognome.

Faccio ricerca, ecco vedete che ci sono codice, cognome, nome, da rinascita, asia di migrazione.

Ora, per rispondere alla domanda, quindi,

quindi, la preferenza di ricerca è un funzionamento standard che si ha su tutte le maschere, d'accordo?

Quindi tutte le maschere hanno la possibilità di fare le preferenze di ricerca.

Però, il fatto che io veda tutte queste colonne qui,

ok, predisponibili,

dipende da quello che voi andrete a dichiarare qui.

Comunque non è che si può avere, ad esempio se qua hai dichiarato codice di iscrizione non è che posso avere in questo caso il teacher, ecco il discorso è quello, quindi comunque dipende dalle colonne che dichiariamo nella in quella colonna lì.

Quello che potremmo fare sicuramente in questo

caso è dirgli magari

non mostrare

la

descrizione ad esempio, ok? Quindi possiamo andare

a togliere, oppure possiamo

andare a definire un ordinamento su quelle colonne, però quelle potenziali che uno può

andare a indicare devono essere tutte quante dichiarate su field name.

Ok, grazie.

Prego.

Allora, qui il tasto preferenze lo vedete spento, però perché non siamo loggati.

Questa è un'altra cosa importante, ma per lo sviluppatore.

In generale, ovviamente, l'applicativo in produzione qua, per agire con le maschere, dovete essere loggati.

Se non siete loggati, avete un errore.

Quando siete su un ambiente Eclipse, quindi quando fate girare il tutto in debug, vi viene creato un utente fittizio, quindi potete comunque accedere alle pagine,

però poi alcune cose non sono abilitate.

Quindi per avere tutto bisogna fare la login.

Poi dopo ci arriviamo, tanto uno degli esercizi richiede proprio obbligatoriamente l'utilizzo di un utente.

Va bene. va bene ok

finito la parte di slide

adesso le slide le possiamo mettere da parte

perché continuiamo come vi dicevo

con la parte di esercizi

quindi questo documento qui

quindi andiamo avanti

facciamo gli esercizi e mano a avanti facciamo gli esercizi

e mano a mano che facciamo gli esercizi

tocchiamo diversi argomenti

quindi qua vi ho messo il riferimento ai documenti

che dopo vi allego

in realtà saranno PDF

e

trovate quindi da una parte seguiremo

il PDF degli esercizi dall'altro quello dei code snippet per poter andare avanti nel vedere tutte le altre cose

in generale vedremo tutte queste cose qui

quindi innanzitutto la gestione testata dettaglio che significa, giusto anche per darci una terminologia

questa gestione qui viene chiamata gestione di testata dettaglio, che significa? giusto anche per darci una terminologia questa gestione qui

viene chiamata gestione di testata

vuol dire che

è la

è la tabella padre

semplicemente, quindi per farci

un esempio, poi andando avanti

a un corso gli associeremo

un dettaglio, che sono gli studenti

che partengono al corso

quindi da qui, gestione testata dettaglio che sono gli studenti che partengono partengono al corso quindi da qui gestione testata

dettaglio ok il corso è testata gli studenti sono un dettaglio normalmente questo collegati in foreign

banalmente vuol dire questo vedremo il funzionamento del look up quindi vedremo cos'è un look up

innanzitutto le tabelle generiche vedremo gli action

handler, quindi le modalità fine 2, fine 3

gestione attach

e poi service manager, e questo si

rilascia alla domanda che è stata fatta prima su use service

che roba è, e

l'utilizzo delle connessioni all'interno del sistema

ok?

Va bene, quindi ho qua le slide e le chiudo e continuiamo a seguire il nostro documento.

Vediamo un po' dove vogliamo arrivare, perché poi nel pomeriggio mi piacerebbe fare esercizi.

Aspettate, perché non carica? Esercizio 1, 2. Esercizio 1, 2. Esercizio

1, 2. Alla seconda ne riusciamo ad arrivare sicuramente all'esercizio 1-2, prima della pausa pranzo.

Ok, quindi abbiamo fatto l'insertellated page.

Esercizio 1-1.

Allora, vogliamo aggiungere una funzionalità alla nostra pagina di ricerca.

In particolare un nuovo filtro che si chiama course status è stato stato del corso

scusatemi stato del corso attraverso il quale l'utente sarà in grado di filtrare i corsi in

base al loro attivazione in particolare il filtro sarà una combo con queste opzioni

una combo con queste opzioni tutti i corsi dell'opzione default selezionando questa opzione sistema praticamente non applicherà alcun filtro addizionale solo i corsi attivi selezionando

questa opzione sistema mostrerà tutti i corsi che non hanno una data di fine corso ok vi ricordate

no che c'è start date and date, quindi che non

ha fine corso, solo i corsi disabilitati, selezionando questa opzione il sistema mostrerà

solo i corsi che hanno una data di disabilitazione. Sarà una cosa simile a questa. Allo stesso In questo modo vogliamo modificare la pagina dei risultati in modo da avere un'ulteriore colonna che si chiamerà stato che mostrerà lo stato del corso, se attivo o disattivo.

Quindi secondo le stesse logiche, molto semplicemente attivo se non ha data di fine corso, se non ha una data di fine, disattivo se ha una data di fine valorizzata.

D'accordo?

Quindi queste due step.

Allora, quindi dove dovremo andare a lavorare?

Allora, in entrambi i casi andremo ad agire soltanto su due delle componenti che abbiamo visto insieme, no?

Andremo a lavorare sulla pagina find gsp

e andremo a lavorare per gestire ovviamente l'inserimento del widget

e sulla classe, sull'oggetto course query

che è la nostra classe di query che gestisce

che dovrà gestire in maniera opportuna il filtro

e che dovrà aggiungere questa colonna.

Quindi view and model lavoriamo.

Sul controller non si fa nulla.

Come si fa?

Allora, partiamo dalla combo box che vogliamo mostrare

in pagina.

Ok, anzi no, sul controller comunque bisogna fare una cosa

cioè la combo

per mostrare le opzioni

possibili

le carica attraverso

un metodo che deve essere messo

inserito nel controller

cioè metodo che deve essere messo inserito nella controller cioè

supponiamo di creare

una cosa di questo genere

quindi adesso mi copio questo per comodità

vado sul controller

mi creo questo

java utilistno, e torno, che ne so, get corso stato option list,

ok, gli do questo nome qui, quindi è un metodo che si occupa di tornare che cosa? La lista delle possibili opzioni della combo che voglio mettere nella mia pagina di find. Come le torna? Le deve tornare in un appunto chiave valore virgola chiave valore virgola

chiave valore per ogni opzione e poi che invochiamo questa classe di utilità che la trasforma

in lista. Quindi nel nostro caso abbiamo detto che deve essere t tutti i corsi, a soloattivi, quindi facciamo A, P, tutti, A, attivi, D, attivi.

Bene, quindi qua definisco le opzioni possibili.

Il vantaggio di fare questo metodo, come potete immaginare,

è che adesso le option sono cablate.

Sono queste.

Però nulla vieta che magari le option io le carico facendo magari una query.

Poi dopo vedremo come si fanno le query.

Comunque, magari faccio delle query sul DB,

in base a quello che trovo sul DB mi carico delle opzioni,

per gestire la dinamicità delle opzioni che voglio creare, che voglio mostrare.

Controllo questo.

Step 2, aggiungiamo la combo all'interno della nostra GSP e quindi anche qui ci copiamo.

questo snippet, quindi corso find, ci aggiungiamo uno spazio appunto che è stato percorso, e ricopio qui vedete che link property nel caso della combo è leggermente diverso

lo riporto qui dentro

in particolare dobbiamo specificare la select il tag select però vuoto senza

specificare opzioni o quant'altro.

Quello che dovrò fare è, innanzitutto, qui siamo tornati pronto a prova ok

Ah, prova, sa, prova, ok.

Ok.

Allora, dicevo, qui sul link property cosa dobbiamo modificare?

Prima di tutto, anche qui sul property name, ok,

bisogna indicare il nome del filtro.

Ora, poi lo andiamo a definire, però sarà ad esempio una cosa, mi immagino, simile a questo, no?

Quindi sarà status filter. E quindi ricordiamoci anche di dover specificare

questo, il filter uguale a y

nel caso di filtri

poi

qui ci sono tre opzioni

tre attributi, scusatemi

tre attributi

il primo è

il nome

del metodo get da cui poter pescare la lista delle opzioni.

Quindi nel mio caso l'ho chiamato così, corso, stato, option, list, me lo copio e questo è quello che riporto qui dentro.

Con la prima c, minuscola, questa è la sintassi, quella, livello di proprietà.

Poi in automatico il framework sa che dovrà fare get, corso, stato, option list

con la C maiuscola

quindi così la riportiamo

e quindi qua dice

le opzioni che devi mettere nella combo

pescatele da questo metodo di get

le altre due

dicono se

allora, le opzioni vedete che le abbiamo scritte in una sintassi chiave descrizione, chiave descrizione.

Li dobbiamo dire se vogliamo mostrare anche la chiave nella lista delle opzioni, quindi scriverà una cosa del tipo T tutti, A attivi, D disattivi o no.

No, vogliamo mostrare soltanto la descrizione.

L'ultimo ci dice se vogliamo considerare l'opzione vuota.

Quindi se vogliamo mettere un'opzione vuota,

aggiungere in testa alle nostre opzioni.

No, però volendo uno può mettere,

sì, mi pare che qua ho scritto esatto,

S per Yes, no per no e via.

Ultima cosa, al solito dobbiamo aggiungere e contemplare

il filtro nella nostra classe di query

quindi che faremo?

mai l'abbiamo capito

il filter present

avevo detto che il filtro mi aspetto che si chiami...

Abbiamo detto che io il filtro mi aspetto che si chiami status filter, lo scrivo qui dentro, tra i formal filters, e lo contemplo qui dentro per fare quello che devo fare.

Mi prendo il valore del filtro.

Poi cosa devo fare? allora

abbiamo detto che se il filtro

è A

trovo tutti quelli che non hanno una data

di end valorizzata

se B invece tutti quei corsi

devo estrarre con una data di end valorizzata

quindi farò

se A equals status filter value, il filo del filtro, farò qualcosa. Perché ho messo a? Perché poi io qui ho deciso che l'opzione attivi è legata alla chiave a, quindi poi lato query mi arriverà la chiave, ok? Non mi arriverà la descrizione per la maschera lato query mi arriverà la chiave quindi dico se

lo status filter ea allora farò sql più uguale and cr and date date is null quelli che hanno la data di fine

non valorizzata

altrimenti

se vale

if

era d

i

equals filter value era d d equals

filter value

se vale d

la faremo sql

punto uguale

and

cr

end date

minus

is not null.

L'opzione T non la consideriamo tutti,

perché tutti vorrebbe dire non fare nulla.

Anche se ci viene passato come filtro,

probabilmente non dobbiamo aggiungere nulla, tutti.

Ok?

Tutto chiaro?

Sì.

Perfetto.

Ok.

Quindi adesso però ho modificato la GSP.

Allora, in generale, se modificate classi Java,

l'unica cosa che serve alla peggio è ravviare.

Perché alla peggio? Perché in realtà se modificate, ad esempio,

se lo sapete meglio di me, se modificate il corpo del metodo,

generalmente, a meno che non modificate lo scope delle variabili, non è che serve riavviare.

Qui in questo caso però ho aggiunto ad esempio un nuovo metodo, quindi sono costretto a riavviare il Tomcat.

Però comunque lato Java al massimo deve riavviare il Tomcat.

Quando però modificate le pagine GSP, però questo vale più che altro per chi ha fatto il corso con me di compilazione,

Più che altro per chi ha fatto il corso con me di compilazione, quindi per il resto, non mia GSP dentro il progetto web Arias che poi è deployato nel mio Tomcat.

Quindi lo lancio.

Infatti lui mi scrive su siank, copy in one file, perché è accorto che un file è cambiato del corso find.

E avviamo.

E attendiamo. Grazie. Perfetto.

Startup.

Quindi adesso torniamo sulla nostra maschera.

Quindi far corso.

Eccolo qua.

E abbiamo il nostro combo. Tutti attivi e disattivi, vediamo se funziona,

allora proviamo tutti, mi rimostra tutti, ah mi sono dimenticato la colonna, vabbè,

poi facciamo, tutti mi rimostra tutti e va bene, quindi alla fine...

il primo corso non ha una data fine

il secondo corso nemmeno

il terzo corso

manco, quindi lo mettiamo

qui, sul primo corso bis li mettiamo

una data di fine

così, la qualsiasi

conferma, esci

quindi adesso, tutti

mi mostra tutti

se ho metto solo attivi mi dovrà mostrare

primo corso, secondo corso

eccolo qua se ho metto dis attivi mi dovrà mostrare primo corso o secondo corso.

Eccolo qua.

Se io metto disattivi mi deve far vedere solo il primo corso BIS.

Eccolo qua.

Una cosa importante, non so se avete fatto caso,

che quando il risultato di ricerca è uno solo,

quando faccio una ricerca e il risultato è uno solo,

non vado sulla pagina di risultato di ricerca, ma Arias seleziona automaticamente quell'unico risultato, quindi si viene fiondati direttamente sulla pagina di edit.

Questo non succede quando c'è più di un record, in quel caso si atterra prima sulla pagina di risultati ovviamente ok perfetto mi sono dimenticato di questa parte qui

ok, questo è l'ultimo per completare

questo esercizio

cioè aggiunge, vogliamo dire

che vogliamo fare di

aggiungere una colonna status

che ci dice se il corso attivo

o disattivo, più o meno con la stessa logica del se il CRD is null, allora attivo, altrimenti disattivo.

Come si fa ad aggiungere la colonna?

Sappiamo che per aggiungere le colonne bisogna lavorare qui dentro.

Quindi su field name per aggiungere la colonna e field caption per marcare la caption di quella colonna.

Quindi questo esercizio serveva in realtà per capire cosa?

Che possiamo qui aggiungere non necessariamente nomi di colonne, ma anche possiamo mettere pezzi di SQL.

Perché questo? Perché poi eventualmente field name, vedete dove va a finire?

Va a finire qui.

Quindi tutto quello che mettiamo qua dentro semplicemente diventa parte integrante della query. Quindi nulla vieta che facciamo

decode

crendate

null

allora attivo

altrimenti disattivo.

Descrizione

status.

Ok? descrizione status ok e qua ci possiamo mettere anche

SQL, non necessariamente nomi di colonne

ok

e quella è la caption che gli va a fianco

Ora ad esempio in questo caso non dovrebbe servire il riavvio, l'unica cosa che dovremmo fare è quella di uscire dalla maschera e riaggiornare, vediamo, sì esatto l'ha presa già, perché ho modificato semplicemente il valore di due variabili all'interno del costruttore quindi quindi primo corso secondo corso non hanno un end date quindi

scritto attivo invece il terzo il primo corso bis è disattivo

perfetto

va bene andiamo allora prossimo

anche il prossimo esercizio.

Allora, vogliamo aggiungere una nuova proprietà all'interno del corso.

Quindi adesso ci spostiamo, invece di modificare la pagina di ricerca, modifichiamo quella di insert e di edit.

Questa proprietà sarà usata per

marcare un corso come corso remoto. Per questo motivo sarà un semplice checkbox mostrato come

in figura. Quindi questo esercizio serve per vedere come andiamo a modificare il bin per includere questa proprietà.

Allora, quindi il primo passo ovviamente al solito è quello di agire sulla base dati.

Adesso facciamo un alter table del nostro corso, la tabella dei corsi, aggiungendo un crremote.

Ora, la cosa importante è questa.

Il checkbox viene salvato come una stringa, che avrà valore S, proprio come una stringa

che avrà valore

come una stringa

poi dopo spiego

di default diciamo è S o N

quindi al momento che il lato

già insomma la tratteremo come stringa

S N anche sul nostro DB

sarà un varchar

2 di 1

quindi un flag

quindi primo step varchar 2 di 1, quindi un flag.

Quindi il primo step è questo, aggiungere la colonna.

Secondo step, quindi andiamo sul nostro bin,

ci creiamo la nostra nuova proprietà che gestirà il corso, il flag remote, quindi sarà private string remote.

Ci facciamo i get e set.

set remote, set remote.

E poi andiamo sul nostro XML

e andiamo a censire questa ulteriore proprietà.

Property name remote, proprietà property name

remote quindi come scritto qui sul nostro bin cr remote il nome della colonna

action

e torna a essere questa una java lang string

di

uno

un flag

quindi

varchar2 di uno e l'elent di uno

quindi lato model abbiamo finito

perché lato model

siamo sull'insertedit quindi lavoriamo soltanto

sul nostro

sul nostro bin

d'accordo?

ora dobbiamo fare una modifica però

sulla nostra

sulla nostra gsp

quindi bisogna includere questo checkbox

andiamo quindi

ci spostiamo su corso edit GSP.

Mi creo un nuovo spazio dove mettere corso remoto.

E qui il widget che andiamo a mettere. Lo troviamo nello snippet.

Eccolo qui.

Dobbiamo piazzare qui.

Quindi creiamo il nostro input type, che in questo caso sarà di tipo checkbox.

E il valore che avrà se selezionato.

Il valore che decidiamo è S, potrebbe essere Y.

Quindi decidiamo che vale S.

Quando vale S vuol dire che è cercato, qualsiasi altra cosa non è cercato.

Quando vale essere vuol dire che è cercato,

qualsiasi altra cosa non è cercato, questo è il discorso.

Vediamo un po' che cosa accade.

Ok, non c'è un altro nulla da fare, abbiamo modificato il model view, e quindi possiamo fermare il nostro Tomcat,

rilancio il mio ant perché ho modificato la gsp,

rilancio il mio ant perché ho modificato la gsp

un file modificato e faccio ripartire il tomcat

e

Grazie. finito

quindi torno qui quindi ricerco un corso ad esempio lo prendo in gestione

ecco qua è uscito fuori questo nuovo check corso remoto. Seleziono, conferma, esco, rientro, vediamo se l'ha salvato.

Ok, è rimasto.

Sul secondo corso confermo senza dare un valore.

Quindi adesso sulla nostra tabella,

adesso sulla nostra tabella start-corso

troviamo quindi

S perché è selezionato

null vuol dire che non è stato

selezionato il check

va bene nessuno domande? Va bene.

C'è domande?

No.

Ok.

Ok. Ok, allora facciamo così siccome il detail bin è tutto un altro mondo

ok

è anche un po' più complicato

questo lo affrontiamo senza interruzioni

di filato

quindi facciamo

completiamo tutti quanti gli esercizi

facciamo anche oltre agli esercizi 1-1

quindi 1-2 abbiamo fatto

facciamo anche questo altro esercizio

che ce la facciamo

nella mezz'ora

che ci manca

pausa pranzo

poi come vi dicevo

nel pomeriggio

rifacciamo

tutti questi esercizi

li fate voi

così

mettete un po' mano

sul codice

familiarizzate

con il codice

poi ecco

per chi pare di aver capito che alcuni

parte alcuni non parte vi posso

aiutare a far partire per chi ha fatto il

corso con me

e comunque in ogni caso anche per chi non

parte comunque magari può incominciare a creare

l'importante è che compila insomma così

incominciate a scrivere un po' di

codice poi per chi riesce a partire ancora meglio

può vedere insomma sul suo pc

tutto quello che abbiamo fatto

ok

ok mi vuoi che mette una domanda sì tutto quello che abbiamo fatto.

Mi volete metto una domanda.

La maschera di risultato della ricerca?

Qualsiasi colonna che aggiungiamo deve essere comunque un, recuperabile tramite query SQL. Ad esempio, la colonna status non era in realtà un vero dato dalla tabella,

ma è stata una colonna generata.

Quindi mi stavo chiedendo: è possibile inserire colonne

che non siano recuperabili tramite query SQL?

Ad esempio banale, se volevo mettere la data di oggi,

supponendo che non c'è la funzione su Oracle per visualizzare la data di oggi,

come si potrebbe fare? di oggi, supponendo che non c'è la funzione su Oracle per visualizzare la data di oggi,

come si potrebbe fare?

Allora, come potresti fare?

Allora, supponendo quindi che non c'hai, come dici tu, la variabile sysDate.

Allora, potresti fare, ad esempio, dichiararlo come literal, quindi fare, dichiararlo, adesso faccio una prova qui, così, giusto per, allora, 6 star from dual, quindi metterlo come 010, allora così, no?

Diciamo, mettiamo caso, lo facciamo con la data di oggi, no?

Esatto, così potresti fare,

brutale, una cosa del tipo

simple

simple

simple date format

ddmm1234 apice più formato.format newDate.

Sì.

Già ho avuto il date.

Una prova, vediamo.

Dovrebbe funzionare.

Quindi questo praticamente l'ho dichiarato come literal, con gli apici.

Data di oggi.

Esplosioni.

Ok, chiudiamo,ciamo e aggiorniamo

perché così ho scritto di d a m m maiuscolo mi pare giusto si salisse il mese

Yes, ok. Questo potrebbe essere un modo.

Alla fine lo dichiariamo come literal e quello va a finire.

Ok?

Ok, grazie.

Prego.

Ok, allora.

Gli esercizi 2 sono invece relativi alla visibilità, quindi torniamo, c'è stata prima una domanda sul fatto del mandato,

vediamo un attimo come gestire la visibilità dei campi.

Allora, iniziamo con il 2, che è più semplice, vabbè, sono tutte e due semplici, non è nulla di trascendentale.

Però vogliamo, in questo momento vedete che

sono tutti campi editabili,

cioè nel senso opzionali.

Se io faccio, non lo faccio,

però se faccio conferma il record me lo inserisce

con tutti i campi a null.

Non ho niente, l'obbligatorietà viene espressa

con i campi disegnati in giallo, ok?

Quindi io paradossalmente potrei inserire un record con il codice null.

Quindi invece voglio far sì che in fase di inserimento, ma anche in fase di modifica, insomma, il codice a descrizione siano due campi sempre presenti, quindi renderli obbligatori.

Come faccio?

Allora, sempre qui avete il bellissimo snippet, impostare la visibilità dei campi. Allora, bisogna aggiungere, il modo più semplice è questo, aggiungere sulla lista dell'interfaccia,

l'interfaccia si chiama, ho già scordato, Interactive Interface..........

...

...

...

..................

.........

......

...

.........

......

...... Tractive interface, questa qui, sempre dentro PSG library, tutte queste librerie qui, PSG library, PSG library, ok?

Vi chiederà di aggiungere un metodo che è questo getPropertyInfo.

Come funziona?

Allora, è simile al metodo getObjectInfo come principio

poi sulla getObjectInfo ci lavoriamo per fare cose un po' più complesse

anche sulla getObjectInfo possiamo direttamente lavorare per far tornare la visibilità

però è più facile lavorare sulla propertyInfo, adesso vediamo perché

Perché questa property info è specifica per la visibilità.

Quindi, cosa succede?

Il framework invocherà, supponiamo che l'utente apre la pagina di edit, ok?

Non appena apre la pagina di edit, cosa fa il framework?

Invoca la getpropertyinfo, ok?

Chiedendogli delle info per ogni proprietà.

Quindi ad esempio, le info che possono essere richieste,

cioè se la visibilità dei campi,

anzi rivediamo, mi pare che sono pochi,

Anzi, rivediamo, mi pare che sono pochi.

Esatto.

Chiede se il valore deve essere obbligatorio,

chiede qual è la lunghezza del campo,

chiede la scale nel caso dei numerici,

chiede qual è il tipo sul DB e chiede lo stato del valore.

Vabbè, quindi insomma chiede questi stati qui.

Quindi nel nostro caso,

lo stato del valore è quello che ci interessa a noi, quindi nel nostro caso cosa farà?

Invocherà questo metodo getpropertyinfo 5 volte, 5 volte per ogni proprietà.

Quindi chiederà proprietà codice, sei obbligatorio o no. Qual è il tuo lunghezza del campo? Qual è il tuo tipo? Questo. E così via dicendo. Poi, descrizione, sei obbligatorio? Sì, no. Qual è la tua lunghezza del campo? E così via dicendo. Chiede tutta questa serie di info n volte per ciascuna proprietà.

Per questo motivo noi qua abbiamo due parametri, property name e info. Quindi nel caso, così capiamo meglio, nel caso della visibilità,

noi dobbiamo semplicemente limitarci ad intercettare quando viene chiesta l'info, che si chiama

info status. Quando viene chiesta l'info status, quindi ci chiede, praticamente, la visibilità

dei campi, quindi cos'è, required, mandato, cioè un obbligatorio, visibile, non visibile, eccetera,

noi diciamo se ci stai chiedendo la visibilità della proprietà che si chiama code,

quindi così come è definita qui nel bin, allora ti dico che il valore è required,

oppure è possibile dirgli locked, quindi vuol dire che è bloccato, oppure wrong possibile dirli lock ed in quindi vuol dire che bloccato

oppure wrong errato ok queste qui sono le opzioni che ci sono

al required atto quindi saranno alla fine degli int ok

qui diciamo che obbligatorio.

Se ci chiedi per la descrizione, questo è l'esercizio,

uguale.

Se...

Value required. Se non è una di queste due proprietà, va a finire sul return 0.

Return 0 vuol dire genericamente valore di default, che nel caso della visibilità vuol dire semplicemente editabile.

Adesso qua riavvio perché ho aggiunto un metodo.

E vediamo cosa.

Quindi questa funzione qua va in override rispetto alle proprietà inserite in corso XML

il mandato li potremmo settarlo anche là

in realtà è il contrario

nel senso per questo infatti

dicevo che è meglio non mettere 0

perché se qua metti 1 è 1 per sempre

quindi se l'XML dice che è mandatorio

poi è sempre mandatorio

quindi come priorità viene

preso diciamo prima questo è successivamente questo metodo diciamo come priorità del cioè

ragione questo vai in override su questo del xml si però il discorso è che in realtà è l'xml

vale avvasì cioè viene interpellato per ultimo, quindi

l'XML è all'ultima parola, diciamolo così.

Quindi se qua l'XML è stabilito che è

mandatorio, a prescindere da quello che

torni qui, poi sarà mandatorio.

Quindi in realtà viene sempre gestito in

questa maniera qui, così uno può fare

pure più cose dinamicamente.

Ok, vediamo che è successo.

Faccio nuovo.

Eccolo qua, vedete che le proprietà sono diventate gialle,

quindi se io adesso provo a fare conferma,

mi dice di inserire il codice del corso e la descrizione del corso.

Perfetto.

Quindi, vabbè, C4, siamo arrivati.

Confirma.

Vado in edit, la logica rimane invariata,

quindi se in edit io sbianco, mi rimane comunque la validazione.

Esercizio successivo, identico, però per fare un po' di dinamicità, appunto, per vedere questa cosa dinamica.

un po' di dinamicità per vedere questa cosa dinamica, nel senso ad esempio, e questo è un caso d'uso particolarmente frequente, vogliamo rendere obbligatori anche campi start date e end date, ma in base al valore della

proprietà remote. Quindi se il remote è

selezionato, il check remote, allora

rendiamo obbligatori anche start date

e end date, altrimenti rimangono

semplicemente editabili. Quindi qua cosa

farò sempre nell'interno di info status?

Dico se mi chiedi la visibilità di la proprietà StartDate,

la proprietà StartDate, l'alito

tornerò se getremoted è s quindi se

ho sezionato il flag

abbiamo detto che avremo come nella stringa

avremo la valore s

se s allora

torna

value

required

altrimenti 0 editabile

quindi esco il nostro Altrimenti zero editabile.

Quindi esco, il nostro corso attivo era questo, ecco qua vedete c'è il check e quindi sono obbligatori.

Se prendo un altro che non ha il check non sono obbligatori. Questo di base, d'accordo? Quindi, faccio rivedere,

questo ha il check e sono obbligatori

dati inizi o data fine,

questo non è il check e non sono obbligatori.

Ora, se io metto corso remoto,

vedete, non è che questi diventano

automaticamente gialli, d'accordo?

Però se salvo, si accorge a quel punto che sono dati obbligatori e lo diventa, d'accordo?

Però c'è la possibilità ovviamente anche qui di aggiungere il fatto che debba, come dire, sincronizzarsi, d'accordo?

Quindi il motivo per cui non compare è perché fino a quando io faccio check e the check,

in realtà sto lavorando solo lato client, il server non lo sa

quindi non appena io faccio un'azione server

ok?

l'azione del server riallinea il modello che poi

fa scattare tutte le validazioni eccetera eccetera

e quindi si accorge che il corso è obbligatorio

quindi comunque la logica di business è salva

non è bellissimo dal punto di vista

della

della

della user interface. Quello che possiamo fare è sulla nostra GSP, quindi qui sul nostro checkbox, aggiungere

Questa istruzione JavaScript.

Istruzione JavaScript, per ora ve la dico così com'è,

poi dopo, quando arriviamo andando avanti con gli esercizi,

entriamo nel dettaglio tecnico di queste funzioni,

però invochiamo una funzione JavaScript che è contenuta dentro questo psgcommon.js

che vi dicevo questa mattina, contono i javascript per fare le interazioni

verso il server, ok?

Quindi io ci metto un onchange

do refresh, si chiama così la funzione.

Salvo.

Quindi al solito modificato a GSP, quindi stop il server.

Ant.

Restart. Ok. ok

facciamo aggiornamento vediamo un po

Vediamo un po'.

Ecco, vedete?

Scusa, si vede.

Quindi adesso l'ho ceccato, sono diventati gialli,

dececco, diventano bianchi.

In questo modo abbiamo dato anche una dinamicità lato pagina, altrimenti era poco user-friendly.

Però avete visto che a prescindere dal fatto

che poi l'interfaccia fosse

aggiornata in tempo reale o meno

è salva comunque la logica di business

per cui non potevo comunque andare a inserire

andare a modificare il corso

senza valorizzare le start date

fine

allora io direi

innanzitutto se ci sono domande

ok

quindi se non ci sono domande

io direi di fare così

ci ribecchiamo

tanto è inutile

questo

sui 15 minuti ce li regaliamo la pausa pranzo,

alle 2 ci ribecchiamo qui

e

facciamo l'esercizio sul vostro,

rifacciamo gli esercizi,

rifate gli esercizi

sul vostro pc,

esattamente questi qui, quindi

vi creare,

aiutandovi, adesso vi condivido sulla chat,

vi condivido

questi pdf, ok? PDF sul canale PIMS.

E quindi aiutandovi con gli snippet che trovate qui dentro, cercate di crearvi il vostro bin, le vostre view e il vostro controller.

D'accordo?

Ok, perfetto.

Ciao ragazzi, buon pranzo.

Grazie, buon pranzo a dopo.

Buon pranzo a tutti.

Buon pranzo a dopo. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti.


-----------------
VIDEOLEZIONE 02 : 
-----------------
Grazie a tutti. Ciao a tutti

eccoci

ciao

ciao

buongiorno

buongiorno

ciao

aspettiamo un po' gli altri

questa mattina non ricordo

mi pare che eravamo una decina, 11 mi pare, cose del genere.

Quindi aspettiamo troppo. Grazie.

Grazie a tutti. Grazie. ma in frattempo diciamo iniziamo iniziamo noi

Allora, io ho caricato, condivido lo schermo, ho caricato sotto file materiale didattico sia le slide che abbiamo visto insieme, quindi quelle che parlano di come viene implementato il pattern MVC all'interno di Agas, sia iiggio rifare gli esercizi, ognuno di voi magari rifare gli esercizi, quelli che abbiamo fatto insieme ovviamente, che sarebberousto per vedere in maniera tangibile come si crea una maschera di gestione da zero, quindi model, review, il controller e poi come si gestisce o gestisce.

la visibilità

va bene?

ok

e poi sono qui

per qualsiasi assistenza

c'è la registrazione

considerate questo, però se per voi non è un problema

potete anche condividere lo schermo

e poi vi aiuto

di voi qualcuno

non mi ricordo, era il corso con me

per la compilazione mchr?

si, io io? ah a dire con il tuo pc poi abbiamo fatto anche esattamente ok perfetto

buon pomeriggio Simone, posto? Pronto?

Mi hai chiamato?

Sì, eccoci No, chiedevo

C'è un problema con Eclipse che non si installa

O la JDK, Apache, Tom, Cut

E le Eclipse non parte

Dal link che era indicato nella slide

Ok, allora

Nel frattempo ragazzi

quindi

iniziate pure con gli esercizi, giusto per capire

quindi tutto avevamo un eclipse al di là adesso

di Rosario

giusto?

Eri tu a parlare giusto Rosario

perché non so

non ci parlavo prima

no Cristiano ah ok scusami Cristiano perché non so allora no Cristiano

ah ok scusami Cristiano perché non vedevo un attimo

ok non mi si accendeva

il cerchio blu intorno

ok Cristiano al netto di Cristiano

tutti voi avete un eclipse giusto funzionante

potete iniziare a fare esercizi giusto?

sì

allora

ok

allora intanto Cristiano

quindi mentre poi fate l'esercizio tu Crist Cristiano condividi pure lo schermo, vediamo magari insieme un attimo.

Simone, poi mi metto in coda dopo Cristianoganciare Eclipse a quello che ho scaricato da FTP.

Tutto qui.

Ok. Allora, intanto cerchiamo un attimo di vedere Cristiano.

Andiamo a uno sguardo.

Un attimo che mi prendo la pillola

ok stiamo dimmi pure che errore c'hai

se vuoi condividere

si ti condivido

ok ok

ma vedo che stai condividendo però non parte ancora nulla quindi forse un problema di rete

ok che ti dice

con notbino

assicura di di senso attiva se con un estona riceva ok no perché perché sono diverse penso che c'è problemi

tipo per uscire su internet su però puoi risolvere perché ci sono alcuni installer di Eclipse che hanno tutto offline e installer online che poi si scaricano i pacchetti.

Adesso ti trovo il link di quello che puoi scaricare. allora tu un Windows giusto?

un ultimo momento

non ho fatto caso

si Windows ok

si Windows 64 bit

si Grazie. ti scrivo in chat

tu la chat la vedi?

no

no

però se scrivi

nel senso puoi

condividere il tuo

e lo copio

però è lunghissimo

aspetta, ora provo a mettere un file

un file di testo

stupido

sotto sharepoint?

sotto file

punti

Ok, ce l'hai.

Appunti.

Sì, esatto, ho messo un link.

Ok. ok Grazie. ok invece parlava prima mario

sì simone scusa stava sta scaricando intanto poi diciamo la parte di mario mancherebbe pure a me quella di agganciare poi magari vi seguo pure io appena

installo i clips

ok

che cosa aspettiamo?

allora intanto

ti condivido la mia situazione

che è questa qua

io sono al secondo giorno di corso, quindi magari faccio delle domande.

Tranquillo. Ok, allora, io sono riuscito ad entrare qui, insomma, a collegarmi sul link che ci è stato fornito.

E da questa cartella, insomma, ho andato a prendere quello che mi sembrava la cosa più utile, Eclipse.

Me lo sto copiando ok e purtroppo avrà i suoi tempi si avrà i suoi tempi ora lì

dentro allora troverai anche già un eclipse c'è lì dentro c'hai sia un eclipse sia un workspace cioè pronto all'uso ah perfetto

allora mi installo quelle clips lì

o è già

è già installato nel senso che semplicemente se tu

devo semplicemente

scompatti

ti faccio avere una cartellina clips con dentro tutto il necessario

e poi è solo

anche la cartella workspace è solo da quando partirà ti dirà di devi cambiare

devi dargli il puntamento del workspace ovviamente perché poi quando fai la copia e basta fine

ah ok benissimo perché mi sono risparmiato una versione di eclipse

diciamo che ho usato tempo fa e volendo puoi avere anche la libertà

allora, volendo anche la libertà di usare lo stesso Eclipse

che hai, però comunque si, devi farlo puntare ad un workspace

come dire, già configurato, no?

nei corsi di compilazione che alla fine si è fatto

va benissimo per me utilizzare quello che c'è dentro

insomma

una cosa

immagino che

sia

utilizzato nella stessa versione

anche da altri

meglio usare gli stessi

Sì, ad esempio Federico

che ha fatto il corso

con me, ha fatto la stessa cosa

l'avevamo fatto poi insieme nel corso

Eclipse di compilazione di

venerdì quindi abbiamo scaduto questo e abbiamo fatto anche partire sul pc di federico quindi è

funzionante questo qui che trovi qui dentro è ok senti approfitto per fare un'altra domanda. Come ti dicevo, io ho iniziato ieri con un corso interessantissimo

che ci ha fatto una panoramica su tutto l'ambiente.

Io mi devo occupare di cupo.

Stamattina quando hai detto,

beh, chi deve fare la compilazione stile CUP

Avrà avuto le giuste informazioni

Io purtroppo informazioni su questa cosa non ne ho

No, però in realtà infatti adesso se tu sei CUP

Programmatore CUP, diciamo così

In realtà il workspace che sta installando

è quello di mchr

quindi secondo me quello che ti servirà

non so se la forse è sotto SIO

prova un po' ad andare sotto la cartella workspace

share SIO

SIO un attimo ci vedi qualcosa di indicato?

questo qua

aspetta provo un attimo così vedo meglio

allora com'era

10

10.3.67.189

10.3.67.189

Grazie. secondo me è questo quello che ti interessa

se io apache clips e se io vssvn

quindi su uno c'è un

loro hanno separato

quindi su uno su se io apache

anzi c'è anche un allegato

vediamo un po' che dice

i pdf però oddio si prende tutto il pc

ok

se questa copia è in corso

la interrompo, se non serve.

Sì, perché se tu devi lavorare nell'ambito...

Vabbè, ormai siamo così.

L'ambito sì io un attimo solo voglio vedere una cosa

sì tranquillo

ok Grazie. Grazie a tutti.

Grazie a tutti. Siete partecipato al corso, mi dicevi ieri? Sì. Allora sì, sì, marzo oggi è, giovedì 7, aspetta un po' il calendario.

Oh cavolo, stavo il calendario.

Sto aprendo la mia versione. ho partecipato a

QPAP01

presentazione

applicativa

AP01 HRMC

QPAP01

QPAP, questo qui?

Sì, sì.

Ah, ok, no, questo in realtà...

Allora, no, infatti quello del CUP di compilazione è quello del 20 aprile.

20 aprile.

Quello che ce l'hai a riga 25 ok

si

tu puoi anche scaricare quello

adesso se l'hai interrotto

no no l'ho lasciato

per fare il corso

puoi usare quello che trovi lì

quello che scarichi lì

la stessa cosa la potete fare anche

altri, eh? Se

chi ha guardato per

un ambiente

come dire, pronto all'uso

è quello che

trovate sotto

ricondivido

quello che stava proiettando

insomma. Io interrompo la condivisione, dai. Quindi questo qui.

Quindi rispetto alla cartella di share potete scaricare questo qui.

Questo in realtà è specifico per la HRLMC, però per fare gli esercizi e provare questo è già un po' pronto all'uso, l'unica cosa che vi serve è una Java e un Tomcat, quello è a parte, però l'Eclipse è già funzionante e il Workspace è già anche configurato e compila.

nel frattempo è entrato qualcuno

adesso non so chi è entrato

comunque in generale quello che abbiamo detto all'inizio

è di iniziare a fare gli esercizi

sulle vostre macchine

quindi sotto file

non qui

sotto file qui nel gruppo su materiale didattico trovate sia le slide in formato PDF che descrivono come viene implementato che sono i code snippet con i pezzettini di codice, che potete copiare e incollare, e gli esercizi da svolgere.

Riguardo gli esercizi, dovete svolgere quelli che abbiamo fatto insieme stamattina, ok?

Però sul vostro PC è da soli, poi sono qui ovviamente per tutte le difficoltà, problemi, per fare delle prove insieme, ok?

Sono qui ovviamente per tutte le difficoltà, problemi, per fare delle prove insieme, ok?

Che sono il main bin, esercizio 1, esercizio 1, 1, l'1, 2, esercizio 2, esercizio 2, 1.

Ok? Grazie. condividi lo schermo, farvi vedere, così a beneficio a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. come procede

esempio

Federico

sto facendo l'XML

solo che non mi ricordo i campi

e i nomi delle colonne che abbiamo utilizzato allora i nomi delle colonne

o la fantasia nel senso dovrei utilizzarmi a vero per l'utilizzata tabella si c'è ragione

allora lo metto però ho creato sul cammiamolo per siccome la chat non la vedono tutti

siccome la chat non la vedono tutti

sfruttiamo il file che ho creato

sotto materiale didattico appunti

così ci scambiamo

eccolo qua

i contenuti così, va bene?

quindi te lo ho messo lì. Ok. c'è qualcun altro? Se ci sono dubbi...

Sono qui, no? Grazie a tutti.

Grazie Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie. nell'XML le proprietà

utils

eccetera

quelle a quattro proprietà là

non devono essere definite

esatto non devono

nell'XML vanno definite solo le proprietà

necessarie al bin

quelli sono campi di controllo che dichiariamo nel memento

e vengono usate solo dal framework

ok perfetto Grazie a tutti.

Grazie a tutti. Grazie a tutti. Simone, scusami.

Sì, eccoci Ciao, una cosa

noi come db

di test nel progetto

abbiamo crass db test 1

Ok

Io immagino che test

invece l'hai canciato a un altro database

corretto?

Ah sì, per le tabelle

puoi ricreartele con lo script

posso creare tabella in questo

in CrestDB test 1?

mi mandi un attimo i riferimenti

me li condividi

un attimo

sì

però penso di sì, il test mi fa pensare

penso di sì, guarda il db è questo

vediamo se riesco a scriverlo nella chat

mi condividi un attimo

condivido lo schermo un attimino

qua non so se vedi la condivisione...

- Sì, vedo nero, quindi sta caricando...

- Ok, un attimo...

- Eh...

- Eh...

- Eh, sì...

- Aspetta un secondo...

- Non so se l'IP ti può tornare utile...

- No, faccio vedere...

- 10.367.155 Ti può tornare inutile. No, faccio il gioco.

10.367.155.

Ciao Simone, sono Alessio Engineering.

Se questo è l'ambiente di test attualmente vigente direi che la risposta è no, fin tanto che gli ambienti non saranno consegnati. Se i discenti hanno necessità di fare dei test, chiaramente lo devono fare in locale, fino a che non consegniamo tutti gli ambienti. Penso che questa sia la risposta corretta. Comunque mi riservo poi di farvi sapere se è differente ok ok grazie alessio perché siamo al nuovo space che ci hanno dato appunto questo

qua configurato ok facciamo così allora facciamo così.

Allora facciamo così.

Un secondo, datemi un minuto.

Allora facciamo così.

Allora facciamo così.

Allora, insieme abbiamo 10 giorni di corso, mi pare, più o meno.

Mi pare 10 giorni di corso.

Allora facciamo così.

Andiamo avanti con gli esercizi insieme, quindi come abbiamo fatto questa mattina, tanto ci avremo secondo me solo di esercizi almeno un'altra tre o quattro giorni.

Quindi magari poi vediamo quando sono con adesso, insomma, poi vediamo un attimo la questione degli ambienti.

D'accordo ragazzi?

Ci diamo un po' di tempo così, poi magari facciamo, invece di fare, la mia era fare esercizi la mattina, esercizi poi da soli il pomeriggio anche per la questione di riposare la voce, però facciamo tutti gli esercizi insieme e poi dopo rifarete tutti gli esercizi da soli.

ok va bene ok allora allora ricondivido lo schermo e ricominciamo dal mio pc perfetto

allora eravamo arrivati all'esercizio 2.1. Allora, questo è l'esercizio 3, dove introduciamo un nuovo argomento che sono i bin di dettaglio.

Ve l'ho detto questa mattina che quello che abbiamo fatto, il corso, viene definito bin di testata.

Quindi il bin padre, diciamo il padre.

Una testata può avere uno o n dettagli, n tipi di dettagli, d'accordo?

Una testata può avere uno o n dettagli, n tipi di dettagli, d'accordo? Quindi ad esempio in questo caso nell'esercizio quello che si vuole fare è aggiungere la lista degli esami pianificati per il corso.

Però poi vedremo che aggiungeremo addirittura anche un altro tipo di dettaglio che sono gli studenti e così dicendo. Quindi ogni testata può avere n tipologie di dettagli, ciascuna tipologia può avere poi n dettagli, quindi qui per il tipo di dettaglio che esami io ho esame 1, esame 2 e così via dicendo.

realizzare una gestione di dettaglio all'interno di Arias

anche in questo caso da cosa si parte innanzitutto?

io ho perso la tua condivisione video

non so se la cosa è generalizzata

provo a interrompere

e la rimando

aspetta dimmi se poi la vedi

la vedi adesso? Adesso c'è, grazie. La prima cosa, dicevo, è creare come sempre la parte di modello, quindi creiamo la tabella che ospiterà i nostri esami e ci creiamo sopra il nostro modello.

E poi vedremo dalla parte di view e poi anche dalla parte di controller cosa accade.

Questa è la parte un pochettino più complessa, tra virgolette, alla fine penso che riusciamo tranquillamente

a farla, però comunque è sicuramente più complessa rispetto alla parte di testata che

abbiamo visto questa mattina. Allora, iniziamo dalla tabella, passo passo.

Ciascun esame dovrà avere le seguenti proprietà. Una descrizione, una data, la data dell'esame, e il numero massimo di partecipanti ammessi.

concetto di una proprietà autogenerata, cioè nel corso la chiave primaria l'abbiamo fatta decidere all'utente, che è il codice del corso. In questo caso invece vogliamo che l'esame abbia

queste tre proprietà più una proprietà che non è decisa dall'utente, non l'avete l'utente, ma che è

la primary key. Questa primary key vogliamo che sia autogenerata tramite una sequence Oracle, quindi vediamo anche come gestire le sequence su Oracle

all'interno di Aries

comunque, primo

step

create

enable

sa hard

e avrà, abbiamo detto

un po' mi copio il testo così ce l'ho

e S è il prefisso che mi do, no?

per i campi in base a quello che è esame ES. Una data e un max, il massimo partecipanti, il massimo numero di studenti.

Questo è un number di 3, tanto più, quanti studenti vogliamo avere.

che è un number di Ibo 3, tanto più quanti studenti vogliamo avere. Oltre a questo sappiamo che dobbiamo sempre mettere i campi di controllo a prescindere quindi qui aggiungo i vari

es utins, es utins, es utvar, es utvar.

Inoltre abbiamo detto che vogliamo che la chiave primaria, quindi la rimetto qui in testa, sia una sequence. Intanto creiamo il campo, quindi creiamo un campo che sarà es id, un number di 11.

un number di 11.

Quindi questa insomma è la nostra tabella.

Un campo che sarà gestito tramite sequence,

i tre campi che sono richiesti dall'analisi,

descrizione, data, numero massimo di studi,

studenti e poi i campi di controllo.

Definisco la primary key.

Abbiamo detto che la primary key...

Scusa, una domanda.

Ma l'esame non è legato al corso

si scusa

bravissimo mi sono dimenticato il campo

perfetto

allora drop table

la cancelliamo

dopo ci servirà proprio quando andiamo a fare il bin

quindi qui

oltre appunto a questi campi qui

e oltre alla prima di chi esattamente

bisogna avere il campo che ospiterà

il corso quindi

ES corso ad esempio

che sarà in foreign key

con la SASAR

corso che quindi è un VARCHAR2

di 11

grazie mille con la SASARD corso che quindi è un VARCHAR2 di 11.

Grazie mille.

Quindi qui abbiamo la tabella.

Di nulla.

Qui definiamo la primary key con questa sintassi che ci siamo detti,

tempo SD, poi vediamo come farlo con la sequence,

come creiamo la primary key,

e adesso creiamo anche la foreign key.

La foreign key trovate sempre in una convenzione, poi dopo non è detto che si debba seguire,

comunque questa è la convenzione che troverete sulle tabelle esistenti, Poi dopo non è detto che si debba seguire.

Comunque questa è la convenzione che troverete sulle tabelle esistenti. Quindi la convenzione prevede che alter table, la nostra tabella dell'esame, add constraint, la foreign key prende il nome della tabella,

la forenkey prende il nome della tabella sasardesame

underscore fk1

la tabella, nel nostro caso, la colonna che contiene il corso

e la referenza, questo non è una convenzione, è la referenza verso la tabella corso. Quindi ogni volta che creiamo una for in key noi facciamo

SASAR d'esame, se ci fosse stata un'altra for in key sarebbe stata SASAR d'esame FK2, FK3, FK4 e così via dicendo.

L'ho fatta la primary key? Sì, l'ho fatta. Ok, perfetto. Quindi ci siamo creati la tabella,

ci siamo creati, definiti la chiave primaria, ci siamo definiti la forinchiesa,

che dalla colonna IS corso della mia tabella degli esami

ospiterà il codice del corso definito nella tabella SASAR di corso.

Step 2.

Andiamo a crearci intanto...

Anzi no, intanto... Ok, intanto mettiamoci la tabella, poi creiamo la sequence.

Quindi abbiamo creato la struttura, abbiamo creato la premia di key e la foreign key, adesso andiamo, spostiamoci a livello di codice.

Quindi andiamo a creare il modello che lavora sopra questa tabella.

Lavoriamo sempre all'interno dello stesso package,

se sar corso, anzi no, facciamo se sar,

no, sempre se sar corso, ok? Quindi facciamo il, come facciamo anche noi, noi facciamo il package di testata, ok?

Quindi poi ci sarà un esercizio dove creeremo un altro bin di testata, lì creeremo un altro package, ok?

Però esami non è un bin di testata, è un bin che vive e muore all'interno del corso, quindi facciamo sempre all'interno del package Sysar Corso.

del corso, quindi facciamo sempre all'interno del package Cesar Corso. Quindi qua dentro,

nuova classe, creiamo un bin che mi lavora sopra la tabella degli esami. Quindi esame,

al solito modelliamo le proprietà che abbiamo, che già mi sono dimenticato, me le copio. Quindi abbiamo un long, private long id, che sarà l'identificativo,

una string che sarà la proprietà che mi contiene il riferimento verso il corso,

poi abbiamo le proprietà specifiche dell'esame che sono private string description,

private string date, poi in ultimo max students

ok

no scusate

integer

ho anche sbagliato qui

date

java util date

string data

intero

generiamo i getter and setters

ho fatto

ho fatto

ho cliccato male

non lo posso vedere

ok perfetto

ctrl shift f

perfetto finito

ho fatto il pogio

ok quindi abbiamo le nostre proprietà

i nostri get and set

passo dopo

al solito è implementare

le interfacce che ci servono

che servono al framework

quindi abbiamo detto che ci serviranno.

Quello che abbiamo visto oggi è che trovate anche,

anzi lo riapro, nel file code snippet.

Quindi quando abbiamo visto design the mode,

stiamo ripetendo le stesse cose, quindi ci aiuta anche a ripassare.

Quindi implements, persistent,

Persistent, Lidable Interface, Dynamic Info Interface, importiamo i vari campi, mettiamo il nome della tabella, il nome della chiave primaria e il nome dei campi di controllo. poi implementiamo i metodi della getObjectInfo con il suo info, con la sua variabile info.delegate.

delegate quindi invece di mybin metteremo esame.class

perfetto

ultimo step

creiamo l'xml

quindi new

xml

esame.xml

Personalizziamo il tutto, quindi descrizione... ci riportiamo quello che già abbiamo visto

sa far d'esame

proprietà

allora il nome della mia proprietà

così facciamo insieme

il nome della mia proprietà

è il D Così facciamo insieme. Il nome della mia proprietà è id e poi qua incomincio a specificare le varie property.

Quindi la prima è l'id, il campo è ts underscore id, action negativo dell'esame.

Java class,

Java.lang.long,

length era 11.

Comincio con gli altri, quindi.

Vado sulla proprietà corsoso che sarà la mia foreign key

ps

corso

mi pare

corso

sì, s corso

codice del corso

java lang,

sempre d'undici,

abbiamo es deate

data del corso

che è un java util date

e qui su length come vi dicevo mettiamo per 10

considerando un formato standard giorno a giorno mese mese scusami simone non sarebbe data

dell'esame a bravissimo guardate ok ok data dell'esame giusto grazie prego poi ultima proprietà

Prego.

Poi, ultima proprietà, max student.

Max student è collegato al campo S, max student, numero massimo student.

Java lang integer length, abbiamo detto, 3.

Fine.

Ok, quindi long string, stay long... Eh no, mi sono dimenticato, mi sono dimenticato, description, quindi lo copiamo da qui, description, es, description, descrizione, esame

java lang string

lunghezza 256

perfetto

abbiamo tutte le proprietà

ok?

quindi fino a questo punto

insomma non c'è una differenza

tra modellare

un bin di testata e modellare un bin di dettaglio

quindi abbiamo creato la colonna

le tabelle, abbiamo creato i bin

il bin e abbiamo creato l'xml

nulla cambia

difatti sul snippet

del codice

snippet del codice

design, combo box, ecco, quando dice di creare un dettaglio, dice innanzitutto modellare il nuovo bin come al solito, includendo l'XML. quindi sul nostro bin dovremo fare delle piccole accorgimenti il primo è quello di includere nel

bin di dettaglio una referenza al padre ok e questo in realtà lo abbiamo già fatto perché

abbiamo incluso la proprietà la proprietà questo accorso che quindi questa sarà la nostra referenza

al padre allora copio il codice adesso lo vediamo che

succede spieghiamo un attimo che significa quindi dentro il bin di esame devo creare un costruttore

bocare un costruttore che riceve un object generico d d'accordo? Perché il framework andrà a cercare questo. Quando andrà il framework dovrà instanziare un bin di dettaglio, andrà a vedere sul bin di dettaglio se esiste un costruttore, a definizione di un costruttore che accetta un object qui ci verrà iniettato praticamente

il nostro bin padre

che in questo caso noi sappiamo essere corso

ok? quindi qui possiamo

fare, anzi questo qui ci torno dopo

quello che ci serve fare è lo che possiamo fare è prendere il parent castarlo a corso e recuperarci

l'id del parent quindi allora quindiusto per... facciamo così.

Quindi il nostro id parente in realtà non serve perché è corso.

Ok, l'abbiamo definito qui.

Quindi cosa dobbiamo fare?

Possiamo definirci, ma questo è una comodità, non è obbligatorio, potremmo fare tutto il cast in line.

Però come comodità solitamente una referenza al padre se la tira dietro, mettendola come trant.

Di solito quello che facciamo

però non è vincolante

definisco una proprietà trans

che è un riferimento al corso

al mio parent

così

qui quindi

mi assegno il parent

castandolo

al corso

a questo punto dico nella mia proprietà corso di esame, questa qui, dis.corso, valorizzala con il catcode del parent che è il nostro bin corso.

In questo modo io ricevo il riferimento del padre.

E me lo valorizzo sulla mia proprietà, che sarà poi quella che sarà in foreign key.

Step 2, quindi in questo modo abbiamo fatto conoscere a esame il fatto che ha una relazione con un BIN di testata che è corso. Ora una modifica simile, nel senso quello che bisogna fare è far conoscere a corso il fatto di avere dei dettagli di tipo esame.

Per far sapere al corso che ha dei dettagli le modifiche da fare sono queste. Dichiarare un array list che mi conterrà la lista di dettaglio quindi in questo

caso la lista di esami implement modificare il metodo retrieving ma in modo che il framework

carichi la lista degli esami quando viene caricato un corso e poi fare i get e set della proprietà per accedere a quella lista.

Ok?

Quindi mi sposto adesso sul bin di testata, corso, e facciamo...

Scusate un secondo.

Ok, perdonatemi.

Dicevamo, quindi definiamo innanzitutto la lista, la variabile che mi conterrà la lista degli esami, quindi facciamo private list esame, esami, ad esempio diamo un nome,ami mio array di java

utile

quindi poi di conseguenza

facciamo i vari

i vari

get

and set.

E in ultimo modifichiamo il metodo retrieve.

Quindi mi copio questa parte in giallo, che è il delta insomma che dobbiamo modificare a partire da quello che abbiamo adesso.

Quindi qui su corso nel metodo retrieve in fondo aggiungo questo pezzo di codice. Che ci dice questo pezzo di codice?

Allora, cosa dobbiamo dirgli? Innanzitutto questo è quello che carica il dettagli ha bisogno di tre informazioni. La prima, qual è il tipo di classe di dettaglio che dobbiamo caricare, che è un esame.

Indichiamo il nostro bin di dettaglio esame.

La seconda informazione che dobbiamo personalizzare è, questo pezzo è lo stesso,

è praticamente quello che dice che deve andare a cercare il nostro costruttore con object. Quindi l'altra cosa che bisogna personalizzare è il nome della variabile tipo lista che mi conterrà i miei esami, che è questa qui, esami.

e qui dobbiamo mettere il nome

del

del campo sul db

che è in foreign key con il padre

quindi qua per intenderci

quello che dobbiamo mettere è

es corso

ok quindi il nome della

della colonna sulla tabella di dettaglio che mi contiene la

primary key del padre quindi qua ci metto s corso ok quindi non devo mettere cr code mettere s corso

fine

fine

per quanto riguarda il modello fine

quindi ricapitolando

per creare un dettaglio cosa dobbiamo fare

creiamo la tabella

compramery key, foren key ecc

ok

lato java dobbiamo creare il bin

come se fosse un bin padre

normalmente quindi pojo, interf interfacce xml eccetera

poi sul bin di dettaglio dobbiamo implementare un costruttore in maniera che possa accogliere

il riferimento del padre e sul bin padre invece dobbiamo modificarlo in maniera da considerare una lista di dettaglio che mi conterrà tutti gli elementi, insomma in questo caso, tutti gli elementi di tipo esame.

Ok?

Ok.

Ultimo step.

I prossimi step sono innanzitutto creare, adesso dovremo creare una GSP nuova che servirà solo a gestire il dettaglio.

Un GSP che mi gestirà soltanto i dettagli, quindi per renderci conto guardando l'esercizio,

una GSP, ecco qua, una GSP ad hoc che mi farà una maschera simile a questa che vediamo nel

mockup, dobbiamo definire la GSP che gestire i dettagli. Poi dobbiamo modificare, bisogna

introdurre un nuovo controller, che è il controller di dettaglio, quindi la pagina di dettaglio avrà un suo controller dedicato.

E poi anche qui, simile a come abbiamo fatto per i bin, dovremo modificare il controller padre, diciamo, quindi quello che abbiamo appena creato, quello che abbiamo creato stamattina insieme, per fargli sapere che ha anche un dettaglio.

Incominciamo quindi dalla view, dalla vista, dalla GSP.

Le GSP le abbiamo messe tutte qui dentro,

sotto GSP, abbiamo messe tutte qui dentro, sotto GSP, Sianc Corso, New GSP, GSP, Sianc, Sizar Corso, esame detail.gsp

ricopiamo la gsp

che inizia

qui Questa cosa qui mi la fa fastidio.

La prendo da qui.

Ok, ci copiamo la GSP.

Control C, Control V.

Ok.

Le due cose che bisogna...

La prima cosa che bisogna personalizzare è...

Il nome e il titolo.

Il titolo può essere vista degli esami.

Poi quello che spesso si aggiunge, non è obbligatorio in realtà, però quello che spesso si aggiunge in un tab di dettaglio, in una maschera di dettaglio, in un gesto di dettaglio, è il riferimento al padre.

in una maschera di dettaglio, in una gespe di dettaglio, è il riferimento al padre.

Cioè, vediamo un attimo se cerco una pagina che magari di esempio, che già esiste. Grazie. Ok, ho buttato giù il Tomcat.

Vi faccio vedere se no su maschera mia in debug andiamo il locale da me comuni ad esempio prendo un comune vedete io adesso ho preso in gestione questo comune muros quando vado su questo

un dettaglio no vedete questo è la maschera di testate

ok qua addirittura hanno messo anche sulla maschera di testata però generale si può fare dappertutto

o non farlo per nulla comunque quello di solito si fa sul dettaglio che sono maschera di testata

vedo qual è il comune muros perfetto quando mi sposto e vado sul comune asl che è un dettaglio

qui mi viene scritto un riferimento che mi faccia capire qual è la testata su cui sto lavorando, d'accordo?

Perché per mantenermi questa informazione.

Quindi stessa cosa, ad esempio, qui sull'esercizio del corso.

Se io vedo il corso, leggo che il corso è il corso C1 di storia,

poi mi sposto su Exa, sugli esami,

non so più magari, che ne so, non ho più un riferimento di quale corso avevo aperto, ok? Quindi di solito quello che si fa è mettere magari all'inizio della GSP, quindi prima di fare la griglia, i bottoni, eccetera, questo riferimento qui, non c'è uno standard, quasi sempre uno colorato di blu, ok? Però ci sta, si usa usa mettere magari questa informazione un qualsiasi

riferimento quindi è quello che trovate in questa porzioncina qui in questa porzioncina quello che

dice mettiamo una label che ad esempio è codice del corso vogliamo fare una cosa del tipo codice

del corso due punti il codice del corso che abbiamo preso in gestione come fare qua scriviamo codice del corso, due punti, il codice del corso che abbiamo preso in gestione. Come fare?

Qua scriviamo codice del corso.

Di qui vedete che c'è un link property.

Link property, vi ricordate,

sono i tag che abbiamo visto insieme questa mattina,

che servono per creare,

ad esempio un ripreso corso edit,

che servono per creare un binding tra vista e modello. Quindi noi volevamo collegare il nostro campo di testo

che sta sulla vista alla nostra proprietà, ad esempio code che stava sul bin. Il link property

tag assume questo scopo nel momento in cui appunto al suo interno ci andiamo a mettere un campo di input,

che sia input, che sia una select, che sia una textarea, quello che sia.

Però anche un'altra potenzialità, ovvero sia, se noi scriviamo un link property, aprendolo e chiudendolo così,

link property, aprendolo e chiudendolo così,

quindi senza metterci nessun widget all'interno,

automaticamente il compito che fa è quello di stampare,

nella nostra gsp, quindi alla fine in HTML finale,

di stampare il valore della proprietà che andiamo a indicare qui dentro.

Quindi cosa possiamo fare?

Vogliamo stampare il codice del corso, quindi cosa possiamo fare? Diciamo stampami la proprietà code, però prendendo la sorrondazione,

usando come sorgente dati, diciamo così, il parent object.

Perché di default tutti i link property, come quelli che abbiamo visto questa mattina,

che sono così, dove c'è scritto property name,

lavorano come sorgente dati utilizzando il bin effettivo, attuale.

Però il bin effettivo attuale, in questo momento,

siamo sulla maschera di dettaglio degli esami,

il bin attuale sarà l'esame nel corso

quindi

vi diciamo di prendere il parent object

questo è proprio così

mentre il code, questo qui lo personalizziamo in base alla proprietà

questo è proprio un identificativo

si chiama proprio così

parent object è un modo con cui si

scrivendo parent object è un modo con cui diciamo al link property

utilizza il bin padre

ok

di default

invece è

main object, quindi non serve

specificarlo, però questa è un'altra sintassica

scriviamo source main object

invece utilizza il bin attuale, però è di

default e così quindi non serve metterlo

si può omettere

c'è anche una terza sorgente dati

che è

controller

finito, quindi sono main object che è anche

quello di default, parent object, server padre

controller, controller.

Controller vuol dire che lui andrà a cercare questa code all'interno del nostro controller, quindi sul controller andrà a cercare se c'è un metodo getCode.

Main object, parent object controller.

Il nostro caso è parent object, quindi praticamente lui, quando incontrerà questa riga, andrà a fare fare get code sul nostro bin dei corsi e lo stamperà a video così com'è.

E qui trovate tutta una serie di punti.

Allora, il resto l'abbiamo saltato perché è uguale, no?

Quindi come abbiamo visto stamattina, c'è l'import del TLD, del CSS, della barra in alto e così via dicendo.

E in fondo trovate anche le stesse cose, ad esempio l'inclusione del PSG Common JavaScript, che poi ci torniamo alla fine. Dove trovate invece Edit Start, quindi 1, 2 e 3, sono i punti all'interno di questa struttura, di questa sorta di template, i punti dove dovete andare a lavorare per poter disegnare che cosa? Questo qui.

Più o meno il look and feel sarà questo, effettivamente. Quindi avremo una griglia non evitabile di sola visualizzazione che visualizzerà

i dettagli. Fatta così. A destra la bottoniera per inserire, pulire, eliminare un dettaglio e poi sotto

dei campi di percorso.

per fare l'inserimento. Giusto per renderci conto del risultato finale,

qua è tornato, si è risvegliato, modo di dire ok successo Quale altro possiamo vedere?

Sono in locale quindi non posso farvi vedere i soggetti, i pazienti, però magari posso farvi vedere ad esempio i prodotti. no esatto

questo sarà un esempio

di dettaglio di come apparirà

quindi abbiamo qui

avremo la lista degli esami

quindi i dettagli sono qui in visualizzazione

per inserire un nuovo dettaglio come funzionano i detizzazione. Per inserire un nuovo dettaglio nella griglia,

io ho qua a disposizione i campi,

ok?

Campione, so, aggiungiamo 2021,

1 CLM, sono un ambiente di sviluppo mio, quindi,

e confermo.

Quindi al conferma vedete che viene inserito qui dentro.

Quindi c'è una parte superiore che è solo per visualizzare i dettagli che già esistono

e quella di sotto invece che serve per inserirne di nuovi tramite il tasso conferma.

Per eliminare un dettaglio si seleziona, o per modificarlo, si seleziona, modificare, conferma, si risalva oppure si fa elimina, o si cancella.

Questo è quello che dobbiamo ottenere sulla nostra GSP degli esami.

Quindi per questo i punti di intervento sono tre, perché dovremo nella nostra GSP decidere quali sono innanzitutto le colonne

quindi questa è la prima cosa, le colonne che vogliamo

mostrare nella nostra griglia

gestire il contenuto

della griglia

e disegnare i campi per fare

l'inserimento

Tutto chiaro?

Sì, Simone scusa, io non vedo più la condivisione, non so se è un problema solo mio.

No, guarda, perché è successo già, se si interrompe, fermatemi subito, non vi preoccupate, non c'è problema, non potete interrompere.

Adesso riprovo, dimmi se vedi.

Ma in generale, anche se avete domande, potete interrompere, poi dopo vediamo se è una cosa che posso rispondervi subito più tardi.

Vedi adesso?

Sì, sì, grazie.

Allora, questo come dicevo è comunque il risultato finale, quello che stavo mostrando è questo, quello che dobbiamo ottenere.

Quindi, ricopitolando, dobbiamo nella nostra GSP di dettaglio andare a personalizzare quali sono le colonne che vogliamo mostrare, inteso come label, e il contenuto della griglia inteso come dati che vogliamo mettereci, e disegnare i vari input text che poi mi permettono di inserire un nuovo dettaglio.

Quindi questi sono i tre punti che ritrovate scritti qui dentro e marcati con Edit Start.

Iniziamo col primo.

Lista delle colonne, quindi le caption. sono solo due, description e date.

Quindi qua ci metto descrizione e data di esame.

Description fatta.

Il secondo punto invece è per ciascuna delle colonne che ho stabilito, quindi per ciascuna colonna dovrò dire che il risultato ci deve stampare in maschera. Quindi dovrà stampare nella prima colonna la descrizione e nella seconda data esame.

E qui introduciamo un altro tag library custom, oltre al link property, scusate, un altro tag custom che è l'iterate. L'iterate in generale può fare farà un loop vogliamo che faccia un loop sulla lista di dettagli

del nostro che ha il nostro corso quindi deve fare un loop sulla nostra lista questa qui esami

vogliamo che faccia questo e per ciascun esame creare quindi una riga nella nostra griglia e stampare la descrizione e la data di esame.

Come funziona l'iterate? Bisogna specificarli un property name che torna a una lista, quindi in questo caso, nel nostro caso si chiama,

chiama esami. Poi ripeto, il source è opzionale se si vuole lavorare sul main object, ma in questo

caso si vuole lavorare sul parent e quindi si specifica parent object. E poi l'item target.

Item target cos'è? Praticamente qui andiamo a scrivere una variabile temporanea, ok? Va a creare. Una variabile temporanea che si chiama item.

Quindi ciascun iesimo elemento che ciclerà sulla lista esami

verrà parcheggiato sulla variabile item.

Perché? Perché questo poi ci permette di riusare il link property

nella stessa modalità che abbiamo accennato prima qui sopra, no?

Quindi soltanto per stampare a video il risultato.

Quindi adesso li posso dire, guarda, a ogni iterazione,

sul source item, quindi lo posso fare perché l'ho definito qui dentro,

quindi su quella variabile, questo fondamentalmente lo salva come page context.

Quindi, siccome abbiamo definito qui questa variabile item,

su questo item mettimi, stampami il description.

Il description. No, scusami, che dico? ok? il description

no scusami che dico

il

si ah il description anche qui su esami

ok il description di esami

ok?

perché la prima colonna è description

sulla seconda colonna vogliamo mettere la data di esami

quindi sul source item mettimi

proprietà date

abbiamo chiamato date

ok? Mettimi, proprietà date, abbiamo chiamato date.

Quindi lista di colonne, lista dei valori.

Fine della griglia. La griglia è fatta.

Quindi questa prima parte in alto l'è fatta, la visualizzazione.

Abbiamo definito le caption, abbiamo definito le varie colonne.

Bisogna fare la parte di relativa all'inserimento.

Quindi qua torniamo invece alla modalità di gestione che abbiamo già visto quando abbiamo fatto corso edit.gsp. Quindi qui vogliamo far inserire l'esame, vogliamo chiedergli di inserire una description, una date e il numero massimo di partecipanti.

Non li chiediamo, abbiamo detto l'id perché lo gestiremo tramite sequence, poi vediamo come, e non li chiediamo il codice del corso ovviamente perché lo prende implicitamente dal padre.

Quindi l'unica cosa che dovrà editare l'utente sono questi tre campi, descrizione, data e il numero

di partecipanti. Quindi incomincio a scrivere così come abbiamo fatto stamattina, quindi questo è un

questa mattina, quindi qua la label, quindi è descrizione, ci metterò,

lo copio da qui, da quello di stamattina proprio, quindi da qui ci metterò il mio link property che ha al suo interno il mio campo input text

che è collegato

alla proprietà description

di esame

infatti non gli specifico un source

perché qua deve prendere di esame

la riga

mettiamo quindi descrizione

l'altro è data esame quindi property name date

poi numero partecipanti

era student

salvo

un po'

finito

la modifica sulla

GSP

ok

ci sono domande? nulla ok e ultimo step finale è la modifica del controller come vi

dicevo questa gspi avrà un suo controller dedicato dovremmo creare un controllo

dettaglio poi dovremmo modificare il controller padre

per renderlo cosciente dell'esistenza di un dettaglio.

Quindi,

mi rimane più comodo seguire qui, eccolo qua.

Quindi, dobbiamo creare un nuovo controller che questa volta però estende v3 controller persistent detail e nel metodo init implementa queste cose qui, che adesso vediamo che cosa sono.

Quindi, primo step, torniamo nuovamente a parlare di Java, quindi torniamo qui, nostro package corso, new class e creiamo il nostro esame v3.

Come dicevo, i nomi potete inventarvi, non sono obbligatori, questo è il formalismo seguito fino ad oggi.

estende v3 controller persistent detail anche qui come per l'altro contro per il controller padre dobbiamo andare indicare valorizzare il metodo init facendo queste

operazioni vediamo cosa sono

importiamo, facciamo l'import http server tree

status interface

ok

allora il primo metodo serve per fare un link

ok, suo interno

quindi si va a realizzare una serie di variabili

su e interne

per creare un collegamento verso il controller padre

perché il controller padre poi vedremo che aprirà

il controllo di dettaglio e questo serve per creare un

legame. Qui

simile, sempre per crearsi questo

legame, però dobbiamo specificare

il nome

della proprietà di dettaglio

all'interno del nostro bin padre.

Quindi, praticamente

sta dicendo di dirci come si chiama la proprietà

l'arraylist che contiene

questi dettagli e noi l'abbiamo chiamato esami.

Questo è lo stesso modo, comunque serve sempre per creare un legame con il controller padre.

Questo a livello di tab, perché poi vedremo che ogni dettaglio sarà un tab a parte,

poi lo vedremo sul tab sul controller

padre che cosa significa in ultimo è simile a quello che abbiamo visto sul controller padre cioè

sul controller padre abbiamo poi dovuto specificare censire le nostre gsp anche qui possiamo

specificare volendo una gsp diversa per l'edit per l''insert, la view, si fa mai. Si fa di solito sempre la stessa

e poi che viene

duplicata.

Nel nostro caso

la GSP

era, si

aspetta, tu me la copio un attimo

dal

corso, dal padre, tanto è uguale, cambia

solo il nome finale.

La nostra GSP era

SiAnxysarCorso

Esame

Retail

GSP.

E qua, come per il padre, poi questo su user service ci torniamo,

su EnableProfile bisogna specificare il bin

di dettaglio

quindi il nostro caso è esame

.class.getName

fatta

fatto il

controllo di dettaglio

andiamo a modificare

il controller padre per farli

conoscere l'esistenza

per farli conoscere

l'esistenza

dei dettagli

quindi

ah scusatemi, prima ancora

questo è un controller di dettaglio, un controller

di tutti gli effetti e come tutti i controller

deve avere un suo mapping.

Quindi bisogna dichiarare il mapping, come abbiamo fatto oggi per il controller padre.

Quindi apriamo il nostro file di properties, ovvero sia quello che trovate sotto webinfcontrollers, ad esempio oggi lavoravamo qui.

e quindi molto uguale facciamo Caesar.esame, ad esempio,

che sarà collegato al nostro controller di dettaglio esame V3,

qui bin è, sì anche Caesar, corso, esame.

Più uguale a quello che abbiamo fatto stamattina,

però lo ripetiamo per il controller di dettaglio.

All'interno della classe esame V3 si può comunque definire la view status find?

Nel caso volessimo ricercare?

No, no, no, no.

Cioè l'unico che ha senso è status insert.

Qua in realtà lo puoi fare perché comunque sia la gerarchia

di VuteController Persistent Detail è la stessa, vedi,

che dopo lui estende controller persistent, quindi volendo,

non c'è un tutto questo, come dire, vincolo per cui il framework

ti impedisce di fare, tra virgolette, errori.

Quindi tecnicamente tu qua puoi fare status find, ok? Non ha mai senso

sui dettagli non ha mai senso

sui dettagli è sempre insert

ok? Status insert vuol dire che parte

così, come la vediamo adesso, cioè parte

con, ti mostro i dettagli

e qua sei pronto a poter

inserire un dettaglio nuovo, ok?

Ma nel caso volessimo anche creare una maschera

di ricerca, degli esami?

torniamo all'esempio che abbiamo fatto col corso V3 e col corso query.

Quindi dovresti fare poi l'esame query, vedi che qua ad esempio non abbiamo fatto infatti la classe di query,

in quel caso, come dici tu, dovresti fare poi l'esame query, fare la classe di query, la maschera di find e tutto il resto.

Sì, sì, lo puoi fare assolutamente, però deve essere un altro punto di menù.

Capito, grazie.

Prego.

Ci sono altre domande

ok quindi ok quindi abbiamo fatto finito la definizione del controller di dettaglio dicevamo che sul controller padre dobbiamo farli conoscere il nostro dettaglio e quindi torniamo a questa parte

qui modifate pare contro le tue show the details quindi modifichiamo il nostro metodo unit in coda

aggiungendo queste parti registrate in giallo vediamo che sono contro il c

con lui control c risolviamo tutti i vari import tab prendete quello psg library v3 utile come sempre diciamo

è facile quello che compila button executor interface

svegliato premere il tasto mannaggia i pescetti allora contro uno import ecco qua contro l'interface

mi suggerisce un solo import button interface ce ne sono due quello che interessa è questo, psg library v3 utile, button executor

exception, un solo import. Ok, e qua controller forward, abbiamo un solo import, perfetto.

Allora, praticamente, siccome introduciamo a questo punto dei dettagli,

che ripeto potrebbero essere uno, potrebbero essere due, tre, quattro, cinque, i dettagli

vengono mostrati con una visualizzazione a tab, quindi avremo un primo tab che è il

padre, un tab di dettaglio per gli esami, un altro tab di dettaglio per l'esame, un altro tab di dettaglio per altri dettagli e così via dicendo.

Quindi dobbiamo inizializzare questi tab, definendo innanzitutto il tab padre.

Quindi il tab padre è corso.

Poi dobbiamo creare un tab per ogni dettaglio c'è il suo,

e qui un'etichetta, ad esempio qua voglio la lista esami, questo sarà il nome del nostro tab.

Mentre per quello principale dobbiamo ottenere sempre tab main, potrebbe essere anche tab corso.

Ottimo, questa è un'ottima domanda.

Guarda, proviamoci perché secondo me puoi metterci qualsiasi cosa.

Ok, poi vediamo, un attimo, facciamo una prova.

Questo non me lo sono mai fatto come domanda, quindi lo scopriamo insieme.

Quindi, vediamo adesso in real time cosa succede.

Poi ogni tab deve essere aggiunta a questa action, questa è fissa, action tab.

Poi cos'è le action? Le capiamo nell'ultimo esercizio.

Ad un tab possiamo associare un button executor.

Un button executor fondamentalmente cos'è? Un'interfaccia all'interno del cui metodo execute facciamo delle azioni

nel nostro caso al click sul tab

quindi paradossalmente per far un esempio

al click sul tab noi qua potremmo eseguire

una query, un update ecc

in questo caso invece il nostro

Il nostro unico interesse è mandare, ridirigere l'utente verso il nostro controller di dettaglio che ci il corso, diciamo, propedeutico a tutti i corsi AP,

l'analista programmatore che farete da qui in avanti, no?

Quindi io vi sto spiegando praticamente il framework,

la parte core più, lo zoccolo duro, insomma,

la parte core, insomma, di tutta Arias, d'accordo?

Poi dopo ci saranno i vari corsi sempre con taglio

di analista programmatore però sui vari verticali

quindi sui moduli dell'AMC

sui moduli dell'HR

del CUP e così via dicendo

quindi poi continuerete con loro

a fare i corsi e troverete spesso

perché vi sto spiegando questo, perché tante delle cose che vi sto raccontando

è perché poi vi serviranno

anche per comprendere magari

gli altri successivi

corsi ovviamente, questo è proprio ideotico tutto ciò che faremo insieme in questi dieci giorni,

se la mia voce non mi abbandona prima. Troverete spesso questo oggetto che si chiama controller

forward, come può suggerire il nome, serve proprio per fare una redirect interna,

diciamo così per modo di dire, verso un altro controller.

Quindi noi qua siamo sul controller del corso, staremo.

Quando l'utente cliccherà sul tab che stiamo creando esami,

quello che vogliamo fare è spostati, fai un forward all'altro controller di dettaglio. Come facciamo?

Così, indicando qui il mapping con cui abbiamo

identificato il nostro controller di dettaglio, quindi Caesar.esame.do. Action insert, poi ripeto sull'action ci torniamo

in fondo, per adesso prendiamola così per buono

ok? quindi qua li stiamo dicendo

vammi

ad aprire il controller degli esami

e qua li dobbiamo specificare

poi un'istanza di se stesso

quindi di corso

di corso di corso 3

allora qua dopo dobbiamo dirgli qual è il primo tab principale che deve essere attivo quindi

tornando alla domanda che mi avete fatto secondo me quasi può mettere qualsiasi cosa la cosa

importante che se qua definiamo che il tab padre si chiama tab corso

secondo me tab active

quindi il primo tab attivo dobbiamo mettere

quindi appena si apre la maschera

tab corso

vediamo, scopriamo, secondo me funziona

fine

penso

abbiamo finito non ci sta esatto finito non c'è altro da fare abbiamo completato

a livello di codice come si fa una creazione di un dettaglio

tutto ok

se posso rimanere un file da cessioni mappi si ok dimmi tutto

no stavo andando

la chiave è il mapping

punto cesare punto esame

io non c'era bisogno di mettere il package

si anche punto cesare

punto corso

punto esame

questo mapping è un codice, no?

Quindi quello che noi andiamo a mettere qui.

Ad esempio questo è il mapping dei comuni.

Ok, quindi si ha un comuni.du.

Quindi questo, no, puoi mettere qualsiasi cosa.

Pippo, bluto.

Qua invece deve essere appunto collegato a questo mapping

che ha identificato qual è il path completo della classe,

del controller, e poi qua, bin. path completo della classe, del controller,

e poi qua bin.path completo della classe uguale path completo del bin.

Ok.

Allora ragazzi, facciamo così. Ho bisogno di una pausa voce. Abbiamo finito il codice. Facciamo che ci ribecchiamo magari alle 4 e 20 va bene?

e facciamo l'ultimo pezzettino

perché abbiamo detto che sull'esame

vogliamo gestire l'ID tramite sequence

ancora non l'abbiamo fatto, facciamo questo

poi deployamo e vediamo cosa abbiamo combinato

va bene?

ok

va bene

a dopo Grazie.

Grazie a tutti. Grazie. Grazie. Grazie.

Grazie. Grazie. Grazie.

Grazie. Grazie. Grazie.

Grazie. Grazie. Grazie.

Grazie. Grazie. Grazie.

Grazie. Grazie. Rieccoci.

Rieccoci. Rieccoci qui. Allora aspettiamo. Presente. Yes. Aspettiamo giusto un minuto e si rinizia. Grazie.

ammetti allora intanto scrivo un attimo una cosa Ok, allora, riprendiamo dove c'eravamo interrotti.

Come dicevamo, abbiamo fatto tutta la parte dei dettagli, però abbiamo saltato la definizione della sequence,

cioè come si fa a utilizzare, a sfruttare una sequence.

Se poi facciamo il deploy, ah non ho condiviso, non condivido, non va bene.

Allora, condividi.

Ok.

Quindi, vediamo un attimo come gestire tramite sequence il campo primary key sulla tabella esame, abbiamo detto che questo SD lo vogliamo calcolare come sequence, che poi è anche il caso reale, c'è sempre nel 99, io metto sempre quel percentuale giusto così di marginalità, però nella maggior parte dei casi il campo chiave primaria è sempre calcolato da una sequence,

non è il caso del corso dove si fa mettere direttamente il codice,

nella maggior parte dei casi, e poi ci sono le eccezioni.

Quindi ci interessa capire e sapere come si fa a gestire una sequence su Aries.

E poi facciamo il deploy e vediamo che cosa abbiamo combinato

nell'esercizio del dettaglio.

Allora, il primo step è semplicemente quello di dichiarare

la sequence su Oracle.

Anche qua abbiamo la nostra convenzione,

naming convention

che dice

sec underscore

nome della tabella su cui lavora la sequence

questa di solito è la convenzione

che utilizziamo per creare le sequence

commit

va bene

una volta definita la sequence

quindi questo è il nome

questo è il nome questo è il nome

dobbiamo aggiungerla

nella logica del nostro bin

che in questo caso esami

allora la proprietà noi l'abbiamo già dichiarata

che è questa qui

private long d

la proprietà già ce l'abbiamo

bisogna modificare il metodo store in modo che la proprietà id venga calcolata con la sequence

come si fa ci sono due parti in giallo che dobbiamo aggiungere una parte che viene fatta prima che venga

fatto l'effettivo salvataggio su db e una parte viene fatta subito dopo partiamo con la parte prima

subito dopo. Partiamo con la parte prima.

Metodo store, quindi, ricordate, puliamo il memento, il memento lo inizializziamo in base a quello che abbiamo sul bin e poi facciamo.

Se l'id è null, l'id è null in quando? Perché sto facendo un inserimento, quindi se l'id è diverso da null, l'id è null in quando? Perché sto facendo un inserimento, quindi se l'id è diverso da null vuol dire che l'identificativo è già stato staccato, quindi l'ho recuperato l'id in fase di retrieve,

quindi sono in modifica e quindi non devo fare niente. Ma se l'id è null e quindi vuol dire che sto

inserendo, allora la chiave, il campo chiave primaria, quindi es underscore id, calcolalo a partire da questa sequence, quindi ignora col sequence e qui gli passiamo il nome della sequence che abbiamo creato.

Quindi questa cosa qui serve per dire, guarda l'id non ce l'hai.

Quindi prima di vedere la storia lo stiamo istruendo il momento.

Il id, che sarebbe andato a finire all'interno della colonna sd, sappi che lo devi calcolare da questa sequence.

Poi lui fa il salvataggio e noi quindi a questo punto salvando avrà staccato l'id dalla sequence e quindi entra in gioco l'altra parte di codice che è, che cos'è?

Andiamo a recuperarci dal memento il valore del campo sd.

Quindi d è null, ok, diciamo sullaonna s e d mettici quello che sta nella sequence

ha salvato?

perfetto

dopo il salvataggio gli diciamo

ok dimmi un po'

alla fine su s e d

che numero ci è andato a finire

e lo riportiamo nella proprietà

in maniera da allineare

il bin

ok?

ok fatto questo ok? ok

fatto questo

non ci rimane che fare il deploy

e testare il tutto

tutto quello che abbiamo fatto fino adesso

quindi

allora

stop il server

faccio girare nuovamente il mio ant

deploy

Grazie. Ok.

Ok.

Adesso, quindi è partito, adesso noi andiamo sul nostro SISAR Corso, cerchiamo un corso.

questa roba qui poi vediamo

corso

esami

ok

quindi che cosa

abbiamo fatto su

ripetiamo un attimo quello che abbiamo fatto sulla GSP dei dettagli in base al risultato finale.

Qui troviamo codice del corso, che vi ricordate era quel riferimento che vogliamo creare, che abbiamo voluto creare sulla nostra GSP rispetto al padre, quindi questa cosa qui.

E quindi vedete che ci ha stampato il codice del corso.

Qui abbiamo la nostra griglia con le colonne che abbiamo deciso di avere

descrizioni date esame e qui abbiamo i campi,

non sono dimenticato di definirla come calendario, però vabbè.

Abbiamo i campi, descrizione, date esame e numero partecipanti. Proviamo ad inserire un esame.

Proviamo ad inserire un esame.

Esame primo trimestre.

01, 01, 22, numero partecipanti 10.

Conferma.

Ecco qui, vedete? È stato inserito.

Io posso continuare adesso così, quindi.

Esame secondo trimestre non voglio sapere

e vabbè

20, confermo e così via dicendo, perfetto, funziona.

Ok sul dettaglio? Ci siamo? Quindi questo è l'effetto finale.

Netto della paginazione, potevamo fare più colonne, meno colonne, però...

Questo è quanto. Ora, per quanto riguarda questo, magari potrebbe centrarci quello che avevamo detto prima.

Quindi magari potrebbe essere quel tab main. Stiamo a vedere.

Quindi qua mettiamo tab main. Grazie. Allora me lo assegno come cosa da approfondire, me lo approfondisco poi offline e poi domani ci ritorniamo, va bene?

Comunque questo è un tab fittizio che non so perché non si va via, comunque i tab sono corso ed esami, quindi cliccando su esami abbiamo un forward verso il controller degli esami, facendo su corso torniamo e facciamo un forward verso il controller

del padre

forse sulla

JSP c'è qualcosa di anomalo

sì, nella JSP ci sta

infatti quel corso scolastico l'avevamo scritto

nella JSP, però in teoria lui doveva

doveva accorparlo

adesso

vedo, magari è posizionata

in un punto sbagliato

del codice GSP

questo tab, poi dopo

lo vedo piano con calma senza che vi

tedio con debug

mi segno

sul cellulare

verificare

e poi domani vi faccio sapere

il risultato

verificare

ok e poi domani faccio sapere il risultato. Verificare il tab.

Ok, quindi no, direi che qua, per rispondere alla domanda che è stata fatta prima,

no, direi che qua è importante che abbia un suo identificativo

che poi va di pari passo con quello nominato come tab attivo.

Ok?

nominato come tab attivo.

Un'altra cosa che adesso possiamo introdurre, no, prima di tutto, aspettate, ok, quindi abbiamo creato i vari esami, vediamo un attimo sulla tabella che ci è andata a finire.

quindi vedete che la sequence viene calcolata quindi 1 2 nonostante maschera non l'abbiamo messa il corso anche in maschera non lo indichiamo ma viene ereditato dal controller dal bin padre e poi abbiamo scritto

data e massimo numero di studenti che invece sono quelli che

campi che inserisce l'utente

qui ancora non le avevamo visti però vedete che vengono valorizzati

automaticamente i campi di inserimento e dato inserimento

se io adesso voglio fare la variazione di un dettaglio che faccio

lo prendo in gestione così

lo cambio, conferma

ok, data di variazione e utente di variazione ovviamente l'ultima Confirma.

Data di variazione e utente di variazione.

Ovviamente l'ultima variazione.

Ci sono domande?

Allora, Fabio, un attimo.

I tabi di dettaglio comunque si rifiniscono sempre a dettagli dell'oggetto padre, quindi del corso?

Sì.

Poi è possibile avere anche dettagli dell'esame, per dire, dettagli di un dettaglio.

Ottima domanda.

Allora, diciamo che in generale i tab devono fare riferimento a un controller di dettaglio, per i dettagli di dettagli solitamente quello che facciamo, quindi ad esempio un dettaglio degli esesame, clicchiamo sul bottone e quel bottone fa il controller forward ad una gestione dedicata che ti mostrerà i dettagli dell'esame sono casistiche leggermente fuori standard ma che ci sono ci sono in effetti

e noi le gestiamo quindi così che magari

qui mettiamo quindi quando selezioniamo

un dettaglio

un esame qui compare un bottone

e al click che facciamo

un controller forward

verso un controller che si occupa

di gestire i dettagli dell'esame

non capito chiaro grazie questo non ce l'abbiamo tra gli esercizi verso un controller che si occupa di gestire i dettagli dell'esame.

L'ho capito, chiaro, grazie. Questo non ce l'abbiamo tra gli esercizi, però magari,

assumelo segno, lo possiamo vedere magari così,

guardando codice, altri casi che abbiamo magari sul codice.

Dettaglio, di dettaglio.

Scrivo sul cellulare. Alte domande? ok

allora

allora

questa modalità di video

visualizzazione solitamente

questa modalità di visualizzazione

ha senso nel momento in cui ho

tanti campi all'interno del mio

dettaglio, quindi magari ne so anche

decine di campi, quindi un dettaglio è

più o meno complesso, ha diverse

proprietà e quindi ho bisogno di una forma per poter inserire un dettaglio.

Non è il nostro caso degli esami, perché negli esami abbiamo soltanto una descrizione,

una data d'esame, numero partecipanti, tre proprietà in croce.

Allora, in questi casi qui, volendo, quando abbiamo poche proprietà,

potremmo passare a una visualizzazione in modalità, si dice griglia, per cui la griglia qui sopra non è soltanto una griglia di visualizzazione, ma diventa anche di editazione.

posso modificarli e posso inserirli tutto nella griglia senza dover scrivere qua confermare e riprendere in gestione modificare eccetera ok quindi una griglia editabile

quindi i dettagli potreste vederli o in questa modalità oppure una modalità griglia che adesso

siamo per vedere quindi in sostanza diventerà una cosa di questo genere

la maschera quindi una griglia dove ci sono direttamente dei campi di testo e dove possiamo

andare a indicare le nostre le nostre proprietà come si fa

come si fa

faccio prima crete detail quello che abbiamo appena fatto

crete del calendar crete detail in grid mode allora il passo 1 non lo rifacciamo perché praticamente sarebbe quello di fare tutto ciò

che serve fare un dettaglio ma noi l'abbiamo già fatto abbiamo un dettaglio che quello degli esami

abbiamo il controller e tutto quindi l'unica cosa che dovete dovremo andare a cambiare sono due, sono l'AGSP, bisogna creare un AGSP ad hoc che implementa la modalità a griglia

e poi bisogna modificare il controller di dettaglio per dirgli che deve lavorare utilizzando questa AGSP.

Ok?

Quindi, torno qui nella mia cartellina delle gespi

new other gespi

sì

gsp

corso detail grid.gsp

copio incollo.

La mia struttura.

Esami, titolo.

E qui è un po' simile a quello che abbiamo visto nell'Alta GSP, perché dobbiamo personalizzare due cose, non tre. Vi ricordate che nell'Alta GSP abbiamo dovuto disegnare, definire la caption, i valori da mostrare nella griglia e questa sezione per fare l'inserimento

di un dettaglio. In questo caso ovviamente ci mancherà questa parte qui, questa parte in fondo

che sto evidenziando adesso. Quindi ci dobbiamo concentrare sulla griglia. Che cosa bisogna fare

sulla griglia? Anche qui decidere le colonne. Quindi io avrò una colonna, abbiamo detto che vogliamo fare la descrizione data,

data, e questa è la parte di caption.

di caption

poi qui

ok torniamo la questione del link property quindi vi ricordate che nel link property nella modalità quindi anche qui abbiamo l'iterate come abbiamo visto

prima il tag iterate della lista di nella GSP di dettaglio che abbiamo fatto poco fa insieme, no?

Quindi qua abbiamo l'iterate, quindi qua dobbiamo personalizzarli

per dirgli che deve iterare sulla nostra lista che si chiama esami.

Ah no, scusatemi, perdonatemi ok, no nella modalità di tipo griglia

in realtà dobbiamo lasciare come property name di tail list

adesso spiego perché

e source vedete che controller

per qual motivo

allora, torniamo sul nostro controller di dettaglio, vi ricordate che ci stava questa

istruzione, link to parent detail, e qui abbiamo specificato il nome della proprietà esami,

il nome della proprietà di dettaglio.

che abbiamo sul bin padre, che si chiama nel nostro caso esami.

Quello che accade è che poi il controller, tramite questa chiamata qui,

si va a creare una sua lista, tra virgolette, parallela.

Questo oggetto qui di paylist, il controller.

È una lista parallela che

diciamo

arricchisce, mentre

la lista che andiamo a

trovare nel corso,

nel bin del corso, ok?

Esami. È

semplicemente una lista di bin,

di tipo esame, una lista di oggetti bin.

Di day list c'è un oggetto

un po' più complesso che oltre alla lista dei bin, per ciascun bin gli associa ad esempio uno stato inteso come banalmente dettaglio inserito, dettaglio modificato, dettaglio cancellato, eccetera.

L'unità di tail list viene creata sempre, però assume il suo senso nel momento in cui andiamo a lavorare in tipo griglia. Il perché lo vedremo quando utilizzeremo la griglia? Perché la griglia in realtà non è soltanto una serie di sulla lista di dettaglio direttamente, del parent

utilizziamo

questa detail list che è una sorta di

intermediario, ok?

quindi diciamo, cicla sulla proprietà

detail list che ha

il controller di dettaglio

ok?

già anche qui

quando fa item status

imindindex si capisce perché

quindi questo item

ha qualcosa in più

comunque al netto di questo

quando poi vediamo

come esce fuori la griglia capiamo

quindi cicliamo sul detail list

quindi questo lasciamo uguale

anche source diventa controller

perché questa lista

farà quindi un get detail list sul controller.

E per ogni iterazione valorizziamo la proprietà item, la variabile item.

A questo punto dobbiamo fare, dobbiamo creare i nostri input text.

dobbiamo creare i nostri input text, perché abbiamo detto che la grig è usb.info e source item, perché lo facciamo per ogni item.

Il secondo colonna invece è la propria td.

si chiama date sempre sul site m però qua vogliamo ricordo come si faceva però era

use calendar a y si forma te calendar a y dirlo come calendario è

fine

Fine.

Pensavo era più complicato.

Ok, tutto qui.

Adesso bisogna andare sul controller di dettaglio e modificare due cose. impostare in soldoni

adesso questo me lo copio tutto

il controller

questo lo commento, non lo tolgo del tutto

così lo vediamo

andiamo a mettere il controller in questa modalità che è specifica del controller di detail che si chiama grid. E gli diciamo quindi che...

Un secondo, mi sono perso un pezzettino, un secondo solo, voglio tornare indietro.

Un pezzettino qui sopra, quindi questo commento così, ok.

Quindi diciamo, qui dichiariamo la nostra, per lo status grid,

gli dichiariamo qual è la nostra GSP, che è esame, no scusate mi sono sbagliato, ho chiamato la GSP corso detail grid,

vabbè, la rinominiamo,

rename, esame detail grid, quindi qua è esameditailgrid.gsp,

stato, questo è l'impostato stato grid e poi valorizziamo tutti gli stati dicendo di usare la stessa GSP

e qui in questo caso però invece di fare

status insert, che nel caso della griglia

non avrebbe senso

non avrebbe in alcun senso

è di

dimostrare praticamente

la GSP della griglia, di mettersi in modalità

status grid e di

mostrare la corrispondente GSP della griglia, di mettersi in modalità status grid e di mostrare la corrispondente GSP.

Tutto il resto rimane identico. Vediamo che succede al nostro tab di dettaglio.

Rifacciamo sempre il main. Grazie. Ok.

Ok.

Corso. corso

cerca

un corso

esami eccolo qua vedete il risultato quindi io qua posso modificare direttamente i campi oppure inserirlo nuovo. Vedete questi fogliettini?

Questo serve perché, allora, il fogliettino, vedete che come lui gestisce in pratica gli stati

dei vari bin, perché se io, potrebbero vedere perché fornisce queste altre funzionalità

che non avevamo

sull'altra

modalità di dettaglio, per cui

ad esempio se noi cancellavamo, selezionavamo un dettaglio

e premavamo elimina, il dettaglio veniva eliminato

punto, qui ad esempio c'è la gestione

del rollback, per cui io posso

selezionare, marcare

un record come eliminato oppure selezion, fare rollback e ripristinarlo.

Per questo utilizza questa detail list sua interna che dicevamo prima, quindi per fornire questa serie di funzionalità.

Poi per il resto funziona allo stesso modo, quindi io qua inserisco, metto un calendario, conferma e così via dicendo.

Faccio nuovo e così via dicendo.

Marco come da eliminare e poi seleziono e posso rollbackare oppure confermare. Ok?

Ok.

no perfetto va bene va bene va bene va bene

Allora, finito la parte del corso, dei suoi dettagli, eccetera. Facciamo un esercizio 4. Questo lo facciamo molto velocemente. L'esercizio 4 in realtà ha lo scopo di essere una sorta di ripasso,

cioè vogliamo creare un'altra pagina quindi un altro bin di testata controlli

di testata un'altra serie di pagine standard che serviranno per cercare inserire o modificare uno

studente quindi una grafica parallela con quelli corsi una parte prima una grafica di corsi una

parte ma grafica degli studenti poi dopo vedremo come cercare di metterle insieme e questo ci introduce altri argomenti.

Quindi niente, lo rifacciamo insieme, è l'ennesimo ripasso e poi quello che facciamo con questa anagrafica degli studenti ci servirà per andare avanti invece con gli altri esercizi che introducono nuovi argomenti.

Allora, uno studente avrà un ID univoco autogenerato, quindi vediamo rifare un'altra volta una sequence,

il nome dello studente, il cognome dello studente e una data che rappresenta l'inizio della sua iscrizione e una data che rappresenta la fine della sua iscrizione.

Quindi iniziamo al solito, anzi prima di iniziare, in generale, a parte tutto rispetto a quello che abbiamo detto tutta questa mattina, ci sono dei dubbi, volete vedere qualcosa ok

allora

quindi questo è corsi.

Lo scrivo.

gli studenti

allora così memoria quindi facciamo una crietta table sard

student

poi

un'idea autogenerato quindi poi è SST ID number 11.

Adesso inizio a scrivere, in qualsiasi momento interrompetemi tranquillamente, non vi preoccupate.

Adesso è imballato la tastiera.

SP nome, car 2, 16, surname, ST

STDT

Start date

la possiamo chiamare anche

ST end date rispetto ai campi che ci servono

sono questi qui

e poi ci aggiungiamo al solito

i nostri campi di dettaglio

i campi di controllo

scusatemi

campi di controllo

quindi st st st var

creata la tabella dobbiamo anche definire la primary key

quindi sarà da studente

su questa tabella

quindi

pk underscore

il nome della tabella per convenzione, e la colonna chiave primaria, abbiamo messo il punto e virgola, ok, fatto.

E poi creiamo anche...

la sequence per gestirci questa con effettivo sequenziale quindi secondescore nome della tabella

Adesso, qui sul nostro package Caesar, creiamo a questo punto un package nuovo,

perché abbiamo detto una nuova gerarchia, nuova gestione per i cavoli suoi,

nella grafica degli studenti.

Quindi faccio Caesar.

E qui dentro, quindi qua chiudo tutto, qui dentro ci creo il mio bin studente. spesso poi a volte sì, a volte no, dopo di questo dipende

vedete che a volte i bin sono identificabili anche perché si chiamano studenti bin

ripeto, non è una cosa mandatoria

è una questione

però spesse volte vedete che tanti bin si chiamano proprio con il suffisso bin

quindi definiamo le nostre proprietà

long id

nome come start e il date daudit

source generate getter and setters select all ok fatto fatto ora implementiamo nostra interfaccia la la la

la la la la la la la la la la la la la la la la la la la la la la la

implementiamo tutti i metodi e poi possiamo anche

possiamo sempre riprenderci da qua

oppure fare anche copy in colla da ibin che è già a creare, abbiamo creato, è uguale tanto

quindi qua il memento

il memento il memento def

tabella studente

app std...elemento fatto.

...elementare, restore, retrieve, remove. Retriever Remove. Faccio. parapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapap Scriviamo adesso il nostro XML. Sì. sì

sì sì sì Sì, salvo.

Bene, qui io ci metto la proprietà sul bin, che è il mio identificativo e poi qui al solito inizio a censire le mie proprietà. Quindi iniziamo proprio con l'id legato al

campo STN score ID

identificativo

del paziente

Avalang Long

dallo studente, non del paziente

scusatemi

perché

è da un po' che faccio

così

perdonatemi

perdonatemi

scusate

allora identifivo dello studente

avalanglong

quindi 11

perché l'ho definito sul db 11

poi proprietà name

st name

il valore di length che impostiamo

viene utilizzato anche per la validazione

in fase di insert

bravissimo

ancora peggio

ti blocca proprio il campo

nel senso che se tu vai a vedere

poi non mi ricordo male campo nel senso che se tu vai a vedere poi

mi ricordo male

mi ricordavo male, forse quello era sui parametri, scusami, è un'altra cosa che poi vedremo però dovrebbe metterci anche la length in teoria da metterci non

mi ricordo male da 12 e 345

contro fatto Quanto l'ho fatto?

Quattro rivedo questa cosa qui perché in teoria sì, non so se dobbiamo fare anche...

Ah aspetta, ecco non ho capito perché allora questa è la pagina

corso edit

gsp

usb.info y

usb.info y usbininfo y

in questa qui dovrebbe fare

quella length la dovrebbe poi riusare

cioè stiamo dicendo

guarda utilizza le info del bin

quindi lui va a recuperarsi le informazioni del bin

quindi comincia a interrogarlo

a chiedergli se è obbligatorio

o non obbligatorio

la lunghezza anche

e quindi poi impostare di conseguenza anche la length, eccetera.

Questa è un'altra cosa che mi segna.

Ok, poi ti dico.

Allora.

comunque sì, serve a quello

comunque

ok grazie

se no pensavo che dovessimo utilizzare

magari il metodo

dentro dell'interfaccia

validable

no no no

il validate poi lo vediamo

magari per altre cose

per verificare la coerenza di dati

insomma per le logiche interne di business del bin

non per queste cose qui

ok quindi poi

nome dello studente

davalang

string

surname st surname,

st start date data in, fine iscrizione. Ok, quindi abbiamo fatto il primo step, quindi abbiamo fatto il modello.

Abbiamo fatto il primo step, quindi abbiamo fatto il modello.

Ora, dobbiamo creare la pagina di ricerca, di edit e il controller.

Allora, dalla pagina di ricerca vogliamo che sia possibile filtrare per l'id quindi ricerca esatta o da pa per parte di nome o cognome

quindi like

le stu'atri ricerca devono avere solo l'id

e il full name di ciascuno studente

quindi i campi saranno due

id e full name

un campo che deve concatenare

noi abbiamo due campi.

Noi abbiamo due campi separati, uno per il nome e uno per il cognome.

In fase di ricerca vogliamo mostrare un solo campo che li concatena.

In Edit Insert invece mostriamo tutti i campi

e l'ID però sarà bloccato.

Quindi vediamo anche un po' di altre cosette in realtà con questo esercizio

ok, quindi incominciamo con la pagina di ricerca

quindi facciamo Caesar

troviamo una nuova cartella

Studente.

File.

Sianc.

Sizar.

Studente.

Studente, find.

Find, cioè, laato, studente poi qui mettiamo

id

e

un campo di testo

per l'id Per esempio, il filter lo chiamiamo.

Siamo sulla classe di query.

Per sì.

Andiamo avanti per il cognome.

Il nome filter. Andiamo avanti per il cognome, il cognome filter, Td del cognome.

Quindi poi l'altro è per il nome.

Di nome.

Nomefilter.

nome filter.

GSP fatta, la gestiamo all'interno della classe di query. student query e stende

custom query

profile

e implementa quindi questo metodo qui

letcustomsql string

allora

innanzitutto ci ricordiamo

Ricordiamo che dobbiamo definire il costruttore dove inizializziamo i filtri che vogliamo gestire.

Abbiamo detto, già ce li siamo preparati qui nella GSP, abbiamo detto che gestiremo un filtro che si chiama IDFilter, uno che si chiama nome filter

va bene

le colonne che vogliamo mostrare

diceva l'esercizio che deve essere

l'id, quindi st-id

e la concatenazione di nome e cognome

quindi semplicemente

tanto l'abbiamo visto anche nell'esercizio di stamattina

qua possiamo metterci qualsiasi cosa

gli facciamo st-, pipe pipe st,

e concateniamo.

La caption sarà identificativo, anzi matricola,

nome completo.

Volendo fare i perfettini potremmo mettere anche uno spazio

assolutamente

assolutamente si hai ragione

quindi mettiamo uno spazio

giustamente

e ci colleghiamo anche il nome

perfetto

poi qui

ripartiamo da questa custom SQL string di esempio.

From, la tabella si chiamava saSardstudente,

e gestiamo i nostri filtri.

Quindi, puliamo un po', quindi idfilter, se è presente l'idfilter, mi prendo il valore e faccio una uguaglianza a secco sul valore indicato all'interno di idfilter.

se presente con il nome filter però and

ho visto oggi c'era il like statement anzi così non serve neanche che ok facciamo così la st surname o nome filter poi ci pensa tutto lui a creare la mia condizione di like così

copiamo incolliamo per il nome

quindi modello fatto ricerca fatta tra query e gsp

ultima gsp che è quella di edit

controller e abbiamo finito

quindi qui faccio new gespi

dente edit

copio la mia pagina di edit

e qui aggiungiamo i nostri campi che sono tutti con l'id lockato. limit di qua è

usb-info uguale

usb-info y

usb-info y

quindi poi dopo abbiamo detto cognome usb-ninfo-y usb-ninfo-y

ok

quindi poi dopo abbiamo detto

cognome

nome

non è cognome scusate

surname

la proprietà qui è name, poi abbiamo data inizio e data fine, quindi data inizio, matata mi pare che era

calendar

calendar y

poi riprendiamo un'altra GSP ad esempio qui

abbiamo un calendar

calendar y

calendar y

data inizio e data fine

è questa qui

and date E' questa qui.

End date.

La mia cosa, la GSP me l'ha creata qui, la riportiamo nella nostra cartella GSP studente.

ok, quindi ci siamo

abbiamo creato i nostri

campi

di edit id

surname, name, start date

end date, perfetto

lo diamo

e ultimo

passo è finalmente

il nostro controller, quindi dobbiamo creare

uno student 3.

Quindi dobbiamo estendere l'assistente. assistente e allora poi andiamo magari dal corso

v3.

E personalizziamo quello che ci serve, quindi dobbiamo personalizzare.

Abbiamo detto che bisogna definire nel controller qual è la nostra classe di query, che è in questo caso studente che sono quindi student find, student edit.

In ultimo specifichiamo il bin dello studente.

Fine. fine

file di properties

dimenticavo quindi adesso il controller

quindi controller stanno

quindi dentro

gesp webinf

controllers

creiamo

mapping.isart.studente

uguale

uguale siank.sysart.studente.studente v3. Qua poi associamo bin.sianc.sysar.studentev3 collegato al bin studente-studente. Finito, ci siamo?

Insomma abbiamo fatto un po' un ripasso generale di tutto quello di stamattina.

Main, così rinfresca e poi facciamo partire.

Stoppiamo il Tomcat. Ok. ok

qui

quindi adesso dovremmo avere un

lo stavamo chiamato

studente.2 mi pare

perfetto

ho sbagliato qualche cosa

nei tr, nei td

comunque al netto di questo

vediamo se funziona

no, però scusate

ci siamo dimenticati di far gestire l'ID tramite sequence

abbiamo creato la sequence ma non l'abbiamo fatta gestire

quindi questo non lo deve inserire l'utente

quindi

vi ricordate che bisogna modificare

il metodo store

per far gestire la sequence

quindi

prima

di Quindi prima di fare la store ICO al momento di valorizzare la mia colonna ID che si chiama std con il nome della mia sequence che si chiama

stack sa sard e alla fine subito dopo la store metterò id uguale mem.getpropertyaslong

gli std che invece mi dice ok dammi il valore che è staccato dalla sequence. Allo stesso modo siccome l'id appunto è autogenerato lo vogliamo mostrare in maschera ma non lo vogliamo rendere editabile come in questo momento ok in questo momento è editabile quindi cosa facciamo?

visto oggi implementiamo interfaccia interactive interface dentro psg library

implementiamo il metodo e qui diciamo.infostatus uguale uguale info

allora diciamo

if

.equals

property name

return

interactive interface

.value.locked return interactive interface.value locked.

Proviamo e buttiamo giù. Grazie. Ok. ok

e quindi qui

aggiorniamo

esatto, adesso vedete che l'id è ingrigito, mettiamo il cognome Simone, data fine, conferma,

ecco qua, vedete? Mi ha calcolato, sono andato in edit perché vedo il tasto elimina e che mi è stato assegnato l'id1.

Segniamoci un altro.

Ok, adesso abbiamo anche il nome completo che abbiamo detto.

Ok, perfetto.

Questa cosa l'abbiamo fatta.

il look up

questo look up è un mondo intero

non ce la facciamo sicuramente

in mezz'ora

allora

diciamo che per oggi

adesso vediamo magari qualcos'altro per arrivare a conclusione, però diciamo che per gli esercizi ci fermiamo qua, perché poi il quinto esercizio parla dell'Ucap, dell'Unga, quindi non è bene interromperlo a metà, quindi è meglio che lo affrontiamo direttamente domani. Comunque, siamo pronti per quell'esercizio.

Quindi ricapitolando, fare un recap tutti insieme di quello che abbiamo fatto oggi.

Concludiamo così.

Innanzitutto, domande non penso che ce ne sono.

quindi allora

la slide introduttiva e l'esalto

cos'è Arias l'abbiamo visto

facciamo un attimo magari

un recap

delle slide

cosa abbiamo fatto con gli esercizi

giusto per concludere la giornata

e poi domani mattina insomma riprendiamo

con gli esercizi affrontando

questo altro argomento. D'accordo?

Allora, abbiamo detto che Arias utilizza uno standard MWC al suo interno per riprodurre questa serie di pagine standard che rappresentano la sua quasi totalità,

che sono, quindi a partire da un punto di menu, l'apertura di una pagina di ricerca

dove l'utente può inserire i suoi filtri, i suoi criteri di ricerca,

può cliccare ricerca e va a terminare sulla pagina di risultato di ricerca

in qualsiasi momento, può premere il tasto nuovo per inserire la pagina.

ricerca in qualsiasi momento o premere il tasto nuovo per inserire la pagina. Prendendo in gestione il risultato di ricerca si accede alla pagina di edit. Questo è quello che andiamo a realizzare

in Arias, quindi l'utente che interagisce con la nostra view, che a sua volta notifica il controller dell'azione dell'utente che poi manipola il modello

e il modello una volta che interagisce con la base dati poi aggiorna in modo opportuno la vista che viene mostrata all'utente.

In Arias il modello si realizza definendo un semplice pojo, un java bin pojo, quindi semplici attributi con get and set,

e a questo pojo aggiungiamo una serie di interfacce che servono per gestire layer di persistenza.

Il modello e le layer di persistenza sono strettamente costruiti,

connessi e quindi il compito del bin e tutto il compito del bin è quello di recuperarsi, salvarsi, eliminarsi.

Il bin rappresenta un record di una tabella della mia base dati eionale dove si descrivono, dove si associano le proprietà del bin ai campi del database, l'implementazione di interfaccia persistent per gestire le opportuni metodi retrieve, store, remove, un'interfaccia valideable interface che per ora non abbiamo visto ma comunque è ben implementare, che ci permette di indicare nel metodo validate le nosticInfoInterface, che tramite GetObjectInfo, vedremo poi più nel dettaglio come fare, può descrivere maggiormente il BIN con una serie di informazioni a corredo.

Di default, di base, quello che abbiamo fatto oggi, è dirgli, guarda, le informazioni, vattele a pescare dall'XML.

Poi vediamo come la possiamo arricchire con altre cose.

Ok, abbiamo quindi fatto il modello dei corsi,

quindi abbiamo fatto il bin di testata dei corsi.

E poi l'altro modello è la classe di query,

perché abbiamo detto che un bin è collegato ad un solo record,

quindi va bene in fase di edit e di insert, ma in fase di ricerca, quindi nella nostra search page, in realtà dobbiamo gestire una serie di filtri che ha inserito l'utente e poi la lista dei record che sono i risultati della nostra ricerca. Tutto questo lo facciamo implementando una query class.

Lo scopo di questa query class è quella di costruire lo statement SQL che verrà poi eseguito sulla base dati.

Il risultato della query è poi parcheggiato all'interno di una playlist in memoria.

Più nel particolare la query class in areas è una classe Java che estende la classe stratta custom query profile. con cui io posso costruire il mio statement SQL che poi verrà eseguito dal framework

per recuperare la lista dei risultati.

Quindi lavoriamo in pratica su search page e result page.

La view, abbiamo visto che invece sono praticamente

delle semplici e pure...

pagine GSP, non ci sta nessun tipo di supporto di framework frontend o altro genere,

ma si utilizzano dei custom tag library per modificare un po' la GSP,

come ad esempio per creare i binding tra i campi che mettiamo in maschera nella view

e le proprietà che sono sul modello, oppure abbiamo visto anche ad esempio il tag iterate, che può fare un ciclo,

o anche abbiamo visto come lo stesso tag per creare i binding, oltre che per creare i binding,

il binding può essere utilizzato per semplicemente stampare un valore di una proprietà all'interno della nostra pagina.

Le GSP che vanno implementate in

maniera mandatoria, minime, sono la find

e l'edit. Potenzialmente, come abbiamo

visto, sul controller si possono definire

anche GSP diversi per la insert, per la

view, però solitamente si indicano

sempre le stesse. Questo lo vediamo

più avanti. L'iterazione tra client e

server è gestito tramite invocazioni di funzioni specifiche JavaScript.

In realtà ne abbiamo visto una, se vi ricordate, quando abbiamo fatto l'esercizio per indicare che un corso è remoto, abbiamo aggiunto lì una chiamata ad una funzione javascript su refresh

ok?

poi vediamo più nel dettaglio

in altri esercizi

comunque quella è un assaggio insomma di una delle

funzioni javascript che abbiamo a disposizione

per interagire con il controller

in quel caso l'interazione cos'era?

era dire alla pagina

fai un refresh, aggiorna

risincronizzati

ecco, forse più caratteri di cose

risincronizzati con il server.

In ultimo abbiamo visto il controller.

Abbiamo detto che il controller...

abbiamo visto che il controller è una semplice classe java il cui compito è quello di occuparsi di tutte le azioni che l'utente può eseguire dalla view

più nel particolare è una classe java che stende la classe strata del controller

per si stende di implementa il metodo in it per inizializzarsi inizializzarsi in due modi principali

poi dopo ne abbiamo visti altri ad esempio quando abbiamo introdotto i dettagli no però di base

quello che deve fare un controller minimo è definire e dichiarare quali sono le sue view, quindi le sue GSP, e dichiarare qual è la classe di query.

Poi abbiamo detto che ogni controller è associato un mapping, che è un po' il suo identificativo di quello che noi abbiamo.

andiamo ad inserire nella URL. Perché in realtà i controller non sono servlet direttamente

esposti, diciamo, verso l'utente, c'è una sola servlet dichiarata all'interno del web

XML della nostra web app, questa servlet si chiama controller dispatcher, intercetta,

il suo compito è intercettare tutte le chiamate che terminano con.do,

verificare se esiste tra i file, i properties che troviamo sotto WebInfControllers,

un controller che corrisponde a quel mapping, se sì, lo prende, lo istanzia, invoca il metodo init e poi mostra le view corrispondenti.

Quindi questo è quello che avviene.

Poi abbiamo fatto gli esercizi,

e gli esercizi abbiamo quindi visto come si fa un bin di testata da zero.

Abbiamo modellato un corso scolastico magine di ricerca pagina di risultati

insert edit abbiamo abbiamo aggiunto anche poi un altro filtro giusto per prendere confidenza con

la classe di query abbiamo visto anche come si fanno le combo, abbiamo visto come si può aggiungere una colonna ad un risultato di ricerca, abbiamo aggiunto un checkbox, quindi abbiamo visto come funziona la definizione di un campo che è gestito tramite check, quindi quel flag varchar2d1.

abbiamo visto come si gestisce la visibilità dei campi e come anche dinamicamente possiamo gestire la visibilità dei campi

a seconda di altri campi, no?

Quindi in quell'occasione abbiamo visto quel du refresh,

in base a come mettiamo il check sul flag remote,

rendavamo obbligatori o meno i campi start date and date.

rendavamo obbligatori o meno i campi start date and date.

Poi abbiamo visto come si crea un bin di dettaglio,

quindi abbiamo aggiunto al corso il dettaglio della lista di esami. Quindi qui abbiamo visto sia come si definisce un bin di dettaglio, come modifichiamo il bin parent per renderlo consapevole esistenza di dettagli e abbiamo visto come si definisce una GSP per gestire i dettagli.

per gestire i dettagli.

L'esercizio è stata anche l'occasione per vedere come gestiamo su Arias la valorizzazione di un campo tramite sequence.

Poi questa GSP l'abbiamo convertita in una griglia.

quindi abbiamo visto come è possibile anche gestire i dettagli non con questa visualizzazione

che comunque rappresenta la maggioranza non la stragrande maggioranza ma la maggioranza in questo

caso di di dettagli quindi come poi scusate un secondo ok come si può gestire i dettagli con questa modalità,

quindi qui inseriamo i valori, confermiamo e il record viene inserito come dettaglio all'interno della griglia,

che rimane qui sopra in maniera costante come visualizzazione.

E quindi l'abbiamo convertito in un sistema un pochettino più agile,

più agile in questo caso perché, ripeto, avevamo poche proprietà,

quindi effettivamente

sono gestibili direttamente in line, per cui noi potevamo inserire, modificare o cancellare

un record direttamente all'interno della griglia. In ultimo, che è quello che abbiamo appena

fatto, abbiamo ripetuto praticamente tutto ciò che abbiamo imparato in esercizi 1, 2 e 3

anzi 1 e 2 perché 3 è quello dei dettagli

1 e 2 e abbiamo ricreato una nuova gestione

per gestire una grafica degli studenti

quindi adesso noi abbiamo una grafica del corso

che è un BIM Parent tutto suo

e abbiamo adesso una grafica degli studenti, che ha anche lui un bin di testata.

Domani faremo altri esercizi, tra cui a quello di collegare le due cose, quindi far sì che gli studenti diventino da una parte, rimarranno e continueranno a essere una gestione di testata,

perché sarà una sua anagrafica, quindi avrò l'anagrafica dei corsi e l'anagrafica dei studenti.

Ma poi, quell'anagrafica degli studenti, l'utilizzerò per aggiungere un dettaglio sul corso,

che è la lista degli studenti, immaginiamoci una cosa di questo genere,

la lista degli studenti che seguono il corso.

Finito.

D'accordo? Ci siamo?

Sì.

Ci siamo.

Allora, se ci sono qualche domanda,

un generale, mentre spiegavo e mi stava venendo in mente, possiamo vedere sempre il controller dispatcher, quello che vi ho appena detto del mapping.

Allora, innanzitutto, sul WebXML, che è il WebXML, se cercate WebXML su Eclipse ne troverete un centinaio.

Quello che fa fede ovviamente è quello che è riportato nel progetto web, quindi di Arias.

E qui dentro, il WebXML di Arias...

c'è controller a c'è eccolo qui un fruscio di fondo quindi trovate qui la definizione del dispatcher. E qui sotto il fatto che è definito per intercettare tutto ciò che è.do.

Quindi questa è l'unica servlet per quanto riguarda le pagine web che viene esposta all'esterno.

Poi ci sono altre servlet in areas se le vedremo sempre durante il corso,

ad esempio una per gestire i servizi su op, per dire.

Però, quanto riguarda le pagine, questa è l'unica.

Vedete che, come dire, fa diverse cose, insomma, non è proprio una classettina snella,

comunque il cuore di tutto quello che fa è il metodo service, il metodo service della servlet.

Per cui nel concreto, eccolo qua, cosa fa? Si recupera il path della richiesta, si ricava il controller name, troncato dell'informazione.do, e con questo controller name, traccia le cose, vabbè, eccetera.

Eccolo qua.

Con questo controller name,

ecco qua.

Prima di tutto, in realtà,

allora, prima di tutto, uno step prima,

con questo controller name si ricava una cosa che viene definita

session key

perché? cos'è questo session key?

e lo vediamo quando inizializza il controller

anzi vediamo prima quando inizializza il controller

forse è più chiaro

così dopo ci torniamo

alla session key

lui che cosa fa?

supponiamo che è la prima volta che apriamo la pagina

cosa fa? inizializza il controller

quindi inizializzare il controller significa

banalmente istanziarlo, quindi fare

questa istanziate controller

in base ovviamente al mapping

quindi lui si ricava qual è

si ricava scusate un attimo, ora ci siamo saltati un pazzo, ecco qua,

devi stanziare il controller, si ricava dal controller name qual è la classe del controller,

andando a interrogare i file di properties che abbiamo editato, come ad esempio siankproperties, eccetera.

Una volta che individua l'istanza della classe, la istanzia, quindi fa un forname, un new instance,

e poi va a gestire, va a settare una serie di cose, ad esempio setta sul controller qual è il suo controller name,

setta l'utente che è collegato sul controller, eccolo qua, e fa invoca la init, cioè quel metodo che abbiamo visto oggi, quindi lo istanzia come classe Java e poi invoca il metodo init per fare quella parte che abbiamo visto oggi insieme.

quindi ha completato la fase di inizializzazione,

tornando su,

il controller il controller

eccolo qua, viene

no,

no, secondo ritrovo

viene messo in sessione comunque viene salvato nella sessione dell'utente

ok quindi ok poi lo ritroviamo

comunque il discorso è che viene salvato

all'interno della sessione HTTP

il controller ok quindi avremo

un'istanza del controller presente

sulla sessione questo perché? Perché tutto

area has stateful ok

quindi ad esempio quando

ci sarà poi una successiva richiesta

magari per lo stesso controller ok il controller dispatcher recupera nuovamente il controller name, quindi va a leggere il mapping.

e quindi di conseguenza più avanti poi va a verificare dalla sessione se esiste già un controller in sessione, se esiste non fa questa parte qui che abbiamo appena visto di inizializzazione del controller, quindi salta tutta questa parte, ma semplicemente manda al controller, all'istanza di controller che lui ha già in sessione, manda l'azione che ha compiuto l'utente d'accordo?

questo è per

poi ci sono altre cose

contro le spacer poi magari

le vediamo così quando vediamo un po' di classi

di esempio, sta nell'esercizio il controllo

di dispatcher, quindi ho soltanto voluto

un attimo fare una panoramica sul codice

di quello che abbiamo descritto nelle slide.

Però ci tenevo a dire

questa cosa qui dello stateful, quindi un controller

una volta che viene istanziato

va in sessione

e

si continua a lavorare su quella stessa istanza di controller,

tutti gli eventi che vengono fatti in maschera.

Va bene?

Ok. Perfetto. controller tutti gli eventi che vengono fatti in maschera va bene

ok perfetto ragazzi c'è qualche domanda

se non ci sono domande io direi anche secondo le minuti prima possiamo chiuderla qui e domani mattina alle 9 partiamo direttamente con quell'esercizio

che sarà abbastanza lunghetto.

Ok.

Va bene.

Va bene.

Ok.

Va bene.

Ok.

Allora, buona serata ragazzi.

Grazie mille.

Ciao domani.

Grazie a te.

Buona serata.

Ciao, buona serata.

Ciao, ciao. grazie mille ciao domani ciao buona serata


-----------------
VIDEOLEZIONE 03 :
-----------------

buongiorno a tutti signori buongiorno buongiorno buongiorno buongiorno buongiorno a tutti i signori buongiorno buongiorno buongiorno buongiorno buongiorno a tutti

allora direi che ci siamo anche già tutti perché più o meno mi pare che erano questi numeri, 12, 13 mi ricordo.

Buongiorno.

Buongiorno.

Allora, quindi direi che possiamo iniziare anche subitissimo.

Inizierei dai due appunti che mi sono fatto ieri.

Riapro un po' di documenti. Simone, mi approfitto per una richiesta.

Sì.

Ieri si parlava del database.

Noi abbiamo la possibilità in VPN di accedere al database con l'applicazione,

anche con l'applicazione locale, dovrebbe collegarsi, se non ho capito,

ma il database di formazione.

Sì.

Se dovessimo fare delle prove in autonomia

però quello non è per noi accessibile

quindi dovremmo lavorare in locale

ma se non ricordo male

lo schema non viene creato in avvio

quindi avremo bisogno, se è possibile

di un dump del database

per poterci lavorare

in locale

intanto lo scrivo al volo a Davide

così non me lo scordo

perfetto, grazie mille

Maurizio, Simone, grazie

mi sa che con questo rispondiamo

perché ieri infatti mi era arrivata una

richiesta da Roberto

sotto vostra

segnalazione

di non eseguire appunto di non fare esercitazioni

sul sull'ambiente di formazione abbiamo ricevuto nel mail ci diceva che non possiamo fare esercitazioni esatto, quindi così dovremmo risolvere? Sì, ok avrebbe il suo DB

sì

l'unica cosa

da chiarire un attimo con

sì, magari se riesci

a chiarire con Davide questa cosa

del db perché l'altra volta ha detto si può evitare gli accessi però effettivamente stavano

forse aspettando la settimana prossima però non so se si riesce magari a fare

Grazie. Allora, mi devo collegare VPN giustamente, altrimenti…

Mi scuso per una piccola nota di servizio io stamattina ho provato ad aprire

Eclipse e ad importare

i progetti

e il computer

ci sta ancora lavorando

insomma impegnando

al 100% la memoria

per cui

vi sto seguendo dal

telefonino

spero che vada

bene e che

il processo di eclipse

non sia così

impegnativo

infatti

è un virus mascherato da idei

potrebbe essere Ah, infatti. È un virus mascherato da idee.

Potrebbe essere.

O devo fare un rifornimento di memoria aggiuntiva.

Vabbè, comunque cerco di seguirvi lo stesso.

Va benissimo.

Allora, quindi dicevo, intanto rinanziamo dai due punti che mi ero segnato rispetto a ieri, che nel particolare erano il primo relativamente alla infolente, non mi ricordo adesso chi me l'aveva chiesto però praticamente avevamo visto che sull'XML sull'XML

dei nostri BIN

quindi ad esempio

corso XML

anzi qua mi servono farsi student XML

andiamo a

Andiamo a specificare per ciascuna proprietà qual è la length sul database, non mi era stata fatta la domanda se quella length si riflettesse poi su qualche validazione, controllo, eccetera.

La risposta era sì, però abbiamo visto che non funzionava.

Il motivo per cui non funzionava, adesso faccio vedere, innanzitutto dalla maschera.

Innanzitutto dalla maschera.

Ecco, vedete, adesso la mette, quindi ho fatto l'ispezione di questo campo e c'è adesso la max length 256, perché questo campo ha lunghezza 256.

Quello che mancava era, e adesso l'ho corretto anche nel documento di snippet

che vi ho dato

dopo vi rido la nuova versione

quello che mancava era qua

praticamente noi sappiamo che

abbiamo due metodi

di descrizione del bin

quello principale che ci siamo detti

che è la gate object info

e nel particolare nella gate object info

abbiamo detto che questa chiamata qui

questa qui diciamo

questo info delegate, questo oggetto e poi questa chiamata

delega

rifornire informazioni

al framework

alla lettura dell'XML

questa qui

è un metodo

più recente

in passato questo getObjectInfo non esisteva

esisteva solo la getProperedInfo

qui che succede?

che normalmente nel 90% del codice

si invoca sempre la getObjectInfo

però può esserci alcuni punti del codice

e questa è la maxLent, era una di quelli

che non è stato mai migrato

all'invocazione di quest'altro metodo

quindi continua a chiedere le informazioni a questa getPropertyInfo.

Quindi per poter delegare alcune informazioni, la visibilità, conviene sempre che la continuate a gestire così.

Però tutte le altre informazioni le potete delegare, che non sono visibilità, le potete delegare a getObjectInfo con queste piccole righe di codice, vedete, fa questo, io invoco praticamente me stesso, quindi dico tutto il resto, guarda, chiedilo al bin, quindi tra le cose che chiederà c'è proprio appunto la lunghezza del campo,

perché qua intercettiamo soltanto la parte visibilità,

che a quel punto deleghiamo la chitobjetinfo,

che a sua volta la delega all'info delegate,

perché abbiamo detto lo va ad attingere dall'XML.

Ok?

Questa era una prima cosa, quindi me la segno come smarcata. La seconda cosa invece era sul tab di edit del corso. Adesso è

È corretto, anche lì ci stava un errore sullo snippet, adesso l'ho corretto, era un copy e incolla tra la GSP defined e la GSP di edit, quindi adesso ho corretto la GSP di edit, nel riportarle ci avevo messo un pezzo della GSP defined, tutto qui, quindi ho corretto insomma la definizione che troverete qui, questa qui, la GSP, corretto.

Tutto qui, va bene?

Ok, benissimo.

Perfetto.

Allora, diciamo che possiamo proseguire con i nostri exercises.

Allora, questo non ci interessa, questo sì. Allora, anzi no, era già aperto,

allegato 2. Allora, allegato, ieri avevamo visto, ho fatto l'esercizio 1 per creare una maschera

di testata, l'1-1 per giocare un po' con i filtri risultati di ricerca, l'1-2 per lavorare un po' sulla maschera di

edit e poi con il 2-2-1 per giocare sulla visibilità dei campi obbligatori e non obbligatori,

esercizio 3 abbiamo visto come si aggiungono i dettagli, nel 3-1 abbiamo visto come trasformare quei dettagli in una griglia e poi abbiamo fatto l'ultimo esercizio che è semplicemente creare un'altra binditestata, quindi abbiamo fatto l'anagrafica dello studente.

Ci siamo fermati qui, siamo arrivati qui a parlare di look up, cioè non abbiamo parlato, dovevamo parlare di lookup.

Cioè, dovevamo parlare dei lookup.

Cosa sono i lookup?

Allora, i lookup non sono che dei widget, ok? Un po' più complessi, quindi non nel semplice campo di testo,

che hanno una serie di logiche.

Vediamoli dal vivo prima.

Vediamo un attimo come funzionano.

Vediamo se oggi...

Allora, innanzitutto vediamo se riesco a collegarmi a VPN.

A voi funziona la VPN?

Non ho ancora provato.

non ancora provato con il consumo che non mi sembra che non funziona non so se perché debbano avviare il mio pc

da me va sicuro allora può essere anche che troppo troppo tempo che ha acceso il mio pc noi utilizziamo la fortinet ah è vero

facciamo con

il mio db

locale

facciamo con il

mio db in locale, quindi avrò ad esempio, che ne so, sull'anagrafica dei soggetti, mi

creo un nuovo soggetto tutto nostro, al volo, qua sono sull'anagrafica dei soggetti, ok?

Quindi ho creato un soggetto, una persona, poi lo vedremo più avanti nei corsi che cosa sono i soggetti.

Comunque quello che mi interessa è, qua sono messo una persona fisica, ok?

Anzi, un Mario Rossi, ok? Per intenderci, d'accordo? Perfetto.

Qui, tra i vari campi che ci sono di testo, quindi d'apena di nascita, il sesso, il comune di nascita, eccetera,

anzi, proprio il comune di nascita,etera anzi proprio come di nascita ad esempio ci sono

appunto dei campi che sono fatti in questa maniera qua due campi di testo ravvicinati di un bottone

anche qui su cittadinanza ok questo genere di widget viene chiamato look up che cosa fa

praticamente permette di impostare un valore non in maniera libera ma selezionandolo tra una lista di possibili valori.

Ad esempio, qui ho la cittadinanza, invece di mettere un testo libero potrò scegliere tramite questo tastino qui, questo bottoncino qui, mi apro una lista valore e io potrò scegliere una delle possibili opzioni che ho all'interno di questa lista.

le possibili opzioni che ho all'interno di questa lista. Lo clicco, vedete, e me la seleziona,

quindi serve insomma per fornire un set di valori che l'utente può selezionare. Da dove attinge questo set di valori? Semplicemente in questo caso, perché su XMPI abbiamo, se vado sul menu

principale, base, abbiamo anche l'anagrafica delle cittadinanze. Eccola qua. Quindi il concetto cos'è? Io ho la mia

anagrafica delle cittadinanze, dove censisco tutte le mie cittadinanze, ho l'anagrafica dei soggetti

dove censisco le mie persone e per una persona li posso associare una cittadinanza pescata da uno dei record che ho censito nell'anagrafica delle cittadinanze.

Quindi, solitamente, adesso vediamo nel dettaglio come si fa questo look up,

un look up comunque a livello tecnico è composto da un campo codice e un campo descrizione.

Questo è importante, perché? Perché io, ad esempio, mettiamo caso,

supponiamo che conosco il codice, appunto, 301,

non sono costretto necessariamente ad aprire questo valore e selezionare il valore,

ma posso anche semplicemente scrivere 301,

l'on change, ok, detto detto HTML e ai 20

faccio un tab, quello che sia

e lui mi seleziona comunque quel valore

quindi mi prepopola la descrizione

quando vedo questo vuol dire che il valore è stato acquisito, preso

ok

lato

ehm

Quindi l'utente interagirà col codice di descrizione. Lato bin, diciamo, quello che arriverà sarà l'identificativo del record che è stato selezionato.

Se noi apriamo, andiamo sull'ispezione, ok, questo qui è il campo codice, vedete?

Quello che è selezionato.

Questo è il campo descrizione, però si aggiunge un terzo campo, qua, vedete, hidden, che non vediamo,

che in realtà andrà a salvarsi al suo interno l'identificativo del record della cittadinanza che è stato selezionato, perché poi quello, quello che va a finire sul nostro bin ed è quello, il valore che andiamo a salvare sulla nostra tabella.

Ok?

Allora, vediamo un attimo, facciamo una prova così, vediamo poi se ci sono domande.

Quindi vogliamo fare più o meno la stessa cosa di quello che abbiamo visto sulle persone.

quindi vogliamo fare più o meno la stessa cosa di quello che abbiamo visto sulle persone

quindi diciamo che sulla nostra maschera dello studente

vogliamo aggiungere l'informazione riguardo la cittadinanza

abbiamo già, l'abbiamo appena visto

un registro delle cittadinanze

che sta sotto a canagrafiche base cittadinanze

ok quindi

che cosa bisogna fare facciamo a step

facciamo a step così vediamo tutto e se ci sono domande mi fermate allora

scusa. Sì.

No, Simone.

Sì, mi sento.

Mi senti?

Mi senti?

Io ci sono, eh?

Ok, questo è un problema microfono.

Va bene.

Quindi,

dicevamo, ok, quindi vogliamo aggiungere questo campo in più sulla modifica di uno studente, no? Quindi quale sarà il primo passo per poter includere

questo lookup cittadinanza sulla mia maschera dello studente? Innanzitutto dobbiamo creare

la colonna sulla tabella degli studenti che ospiterà questo dato. Non solo, questa colonna

dovrà essere poi in foreign key con la tabella che mi contene le cittadinanze.

Ok?

Quindi, ripartendo dall'esercizio ieri,

ok?

eccoci

e tu Cristiano?

mi

stai parlando?

no

ok

quindi

faccio

alter table

la mia tabella degli studenti

e faccio un add di un st cittadinanza. Abbiamo detto

che dobbiamo poi metterla in for in key con la tabella delle cittadinanze quindi vediamo qual è il campo id della tabella

dei cittadinanze allora la tabella delle cittadinanze è a underscore cittadinanza

questa è la chiave primaria ct andescorri di una resco 15 pb è un varia 2 di 11 quindi io qua aggiungo un sulle tabella la mia tabella

del dello studente aggiungo un campo e 7 cittadinanza che un varia 2 di 11

creato adesso crea una foreign key tra il mio campo cittadinanza dello studente e verso la sesta cittadinanza.

Parto da questo qui, in maniera che mantengo le convention, quindi alter table sasard studente add constraint nome della tabella underscore fk123 4 5 quindi sa sarvi studente fk 1 di st cittadinanza verso cosa verso

la tabella sa cittadinanza nel campo ct

e Ok, quindi questo è il primo passo.

Ok, quindi abbiamo creato la colonna sulla tabella dello studente per ospitare l'id della cittadinanza che selezionerà l'utente e di conseguenza anche abbiamo creato la foreign key. Passo dopo, successivo, ovviamente bisogna anche fare

tutto il lavoro lato modello, quindi bisogna andare sul bin dello studente, aggiungermi

una proprietà che ospiterà l libido della cittadinanza che abbiamo

detto un var char quindi stringa cittadinanza mi faccio i miei get

ecco

Poi, allo stesso modo, bisogna andare a modificare l'XML per includere tra le proprietà anche questa della cittadinanza.

studente specifica città cittadinanza cittadinanza ok e un java lang lunghezza abbiamo detto che è un indice

un indice ok

e fin qui

come dire nulla di nuovo

quindi abbiamo aggiunto una colonna

e quindi di conseguenza

dobbiamo poi fare

dobbiamo modellare quella colonna

sul nostro bin, sul nostro XML

e così via dicendo

andiamo adesso a vedere

che cosa bisogna fare però

lato view lato visualizzazione

per poter mostrare questo look up questo widget e per farlo funzionare qui c'è un paragrafo

sui look up esatto

allora per adesso ignoriamo lo step 1

che lo vediamo in esercizio successivo

che intende dire come creare un nuovo look up

e invece qua un look up già esiste

e vi spiego cosa significa quando diciamo che un look up già esiste

quindi partiamo dal 2

l'abbiamo anche già fatto che è aggiungunge la proprietà sul modello e quindi il 3.

Allora, per poter sfruttare un lookup, quindi in pratica per avere sulla nostra pagina dei studenti

la possibilità di scegliere una lista valori che viene generata a partire dai cittadinanze censito al sistema, io devo

far sì che sia censito innanzitutto un oggetto lookup in questa tabella qui.

Select star from C underscore lookup.

Questa è la tabella che elenca tutti i possibili lookup che posso utilizzare all'interno di Arias

quindi tutte le possibili lookup che posso scegliere di visualizzare con questa maniera qui

con il bottoncino che mi apre la lista valori

se non esiste un lookup non è possibile mostrare quel bottoncino

faccio un esempio il fatto che io

possa avere un lookup

che mi pesca

la lista valori dalla tabella delle cittadinanze

è perché se cerco in questa

tabella se le star from si lookup

where lk

lk

Nome della tabella è sa cittadinanza.

Ecco, perché esiste un lookup il cui codice identificativo si chiama sempre sa cittadinanza, va bene, in questo caso.

Perché appunto un lookup in questo codice esiste all'interno della tabella si lookup.

Se non esisteva questo record, io il lookup sulla sa cittadinanza, quindi sul registro di cittadinanza, non avrei potuto farlo, anche se gestivo le cittadinanze.

Quindi il fatto di avere una gestione dove l'utente può censire cittadinanza non vuol dire necessariamente che io poi possa inserire un look up che pesca su questa tabella nelle mie maschere delle persone, degli studenti e così via dicendo d'accordo ma lo potrò fare se soltanto se prima definisco all'interno di questa tabella

si look up un look up che avrà che cosa un codice

qualsiasi basta che univoco solitamente solitamente ma non sempre solitamente

corrisponde sempre il nome della tabella dove lavora va bene

un titolo e cosa ci serve questo titolo ci serve perché quando poi andiamo a cliccare la lista valori

togliamo questo quando apre lista valori eccolo qua viene mostrato qui il titolo questo è il titolo

qui il titolo questo è il titolo la tabella il nome della tabella dove va a lavorare look up questo caso società dinanza l'informazione di questa di quale sia la chiave primaria di questa tabella che un elenco comma separated dei campi che potenzialmente posso mostrare qui.

Quindi potenzialmente qui potrei mostrare, in base alla definizione del lookup, tre campi.

in base alla definizione del lookup, tre campi, il codice, la descrizione e questo penso che sia il codice della sigla della cittadinanza, non lo so, però alanno ovviamente in ordine, quindi si è scelto di mettere solo due campi di testo.

Quindi il primo sarà relativo al ct-cody, il secondo relativo al ct-desk.

Non ne potrei mettere più di tre, posso massimo attingere a questi tre specificati nel lookup field.

Altri due campi importanti sono list field e caption field che cosa

sono vanno a coppia insieme ovviamente e servono semplicemente per dire quali

colonne quali sono le caption di quelle colonne che voglio mostrare nella lista

valori infatti vedete che c'è

che come list field sono indicati ID, codice e descrizione,

l'ID però ha una caption, vi ricordate che ve l'avevo accennato ieri,

una caption con una tilde davanti, quindi la tilde è utilizzata come segnaposto

per dire che la caption deve essere nascosta,

e quindi io qua vedrò soltanto codice e descrizione.

Fine. Di cosa è un lookup? Poi in realtà il lookup ha tanti altri campi che poi vedremo più avanti, che lo possono rendere un po' più complesso.

Questa è la forma più basica del lookup, quindi il fatto che attinge ovviamente i dati

dalla tabella indicata qui dentro

d'accordo?

ci siamo?

ci siamo

un solo dubbio

questa è una tabella

che viene in pratica

diciamo letta dal framework

sì esatto.

Infatti in fase di startup, per chi è già riuscito a farlo partire

o per chi lo farà partire, vedrete che poi...

Per i fortunati.

Per i fortunati.

Allora, vedete che all'inizio, inizio, inizio...

Eccolo qua.

Proprio all'inizio, vedete?

Questa è la partenza, questa è il startup del Tomcat

e questo è

praticamente quasi subito all'inizio

vedete, carico lookup, lookup, lookup, lookup, lookup

è proprio una delle prime cose

quindi una delle prime cose che fa il framework

è andare a leggersi questa tabella

e caricarsi tutte le definizioni dei possibili lookup

che potrà poi gestire

nelle maschere

perfetto delle possibili look up che potrà poi gestire nelle maschere.

Perfetto, poi adesso vedremo anche nell'esercizio dopo, non questo,

un esercizio dopo ancora, come si crea un nuovo look up da zero.

Va bene, quindi in soldoni noi sappiamo che il codice look up, il codice identificativo del lookup che lavora sulla mia tabella delle cittadinanze si chiama sa underscore cittadinanza.

Se lavorava sulla tabella della cittadinanza e si fosse chiamato sa underscore pippo, il mio codice lookup è sa pippo, quindi quello avrei dovuto utilizzare. In questo caso combaciano, come anche tanti altri casi, combaciano codice e table name.

Va bene.

Quindi, con questo codice cosa ci faccio?

Devo andare, adesso finalmente lavoriamo sulla nostra bella GetObjectInfo,

a specificare che la mia proprietà cittadinanza è legata a quel lookup.

Quindi mi copio questo pezzettino di codice in giallo

e vado sulla mia

sul mio

sulla getobject info del mio bin studente

e qui come prima cosa

metto

Questo qua, dico. Come vi dicevamo, la getObjectInfo, anche come l'avamo detto che era per la getPropertyInfo, ma il principio è lo stesso, vedete che viene passati due parametri, info e propertyName.

La info è il tipo, per questa qui il framework invocherà questo metodo un centinaio di volte ogni volta che si apre una maschera.

Perché il framework incomincia a chiedergli tutta una serie di informazioni, quindi per questo abbiamo due parametri.

informazioni. Quindi per questo abbiamo due parametri. Il primo ci dirà che tipo di informazione ci sta chiedendo il framework e il secondo invece è per declinare quelle informazioni per ogni singola

proprietà del mio bin. Quindi ad esempio gli dico, se mi stai chiedendo come informazione se gestisco

dei lookup, mi stai chiedendo se ho dei lookup all'interno tra le mie all'interno del mio bin e se me lo stai chiedendo per la proprietà

cittadinanza allora sappi che il lookup c'è e si chiama sa underscore cittadinanza

Cittadinanza.

Ok?

Fine.

Lato bin è finito.

Quindi lato bin, praticamente quello che abbiamo fatto è creare la proprietà

sul bin,

censirla sull'XML e poi

descriverla nel getobjetinfo come collegata

ad un lookup.

Il passo dopo è inserirlo in maschera e inserire quello cap in maschera ok sulla vista quindi abbiamo detto che vogliamo farlo sulla maschera

di inserimento e modifica di uno studente no quindi io andrò su lo studio aprirò innanzitutto la gespe studente edit gespe

diciamo che ci mettiamo in fondo sotto a data di fine

cittadinanza qui non metteremo il nostro link property come abbiamo fatto finora no? Qua ci sta un td di drop mi pare, td, td,

td, td, td, sì c'è un td di drop, vabbè, ok, sì, quindi qua non andremo a mettere il nostro

semplice input text come abbiamo fatto fino ad oggi semplicemente legando la link property,

perché vogliamo realizzare questo widget come si realizza il widget

copiamo questo snippet di codice adesso vediamo che significa

Allora, parto in realtà dal fondo, va?

Ok.

Il primo, questo qui che vediamo, è il bottoncino.

Vedete, questo è il disegno del bottoncino che apre la lista valori.

E questo va, questo bottoncino va,

racchiuso all'interno di un altro custom tag

che si chiama lookup property.

Quindi ieri abbiamo visto il link property,

oggi vediamo il lookup property.

Qua su property names dobbiamo semplicemente

andarci a indicare il nome della mia proprietà

che è legata alla cittadinanza. Su questo voglio gestire il lookup della cittadinanza.

Su questo voglio gestire il lookup della cittadinanza

e quindi si chiama proprio nel mio caso cittadinanza.

Poi abbiamo gli altri due, questi qui,

altri due lookup property che vanno praticamente a racchiudere

gli input text che voglio mostrare in pagina.

Quindi questi qui, li voglio mostrare anche qui, codice e descrizione della cittadinanza.

Quindi qua prevedo due campi di testo.

Volendo avrei potuto prevedere un terzo campo di testo perché, l'abbiamo appena visto,

tra il lookup field sono autorizzato a mostrare come camp campo di testo perché l'abbiamo appena visto tra il look up field sono tra virgolette

autorizzato a mostrare come campi di testo il codice a descrizione e l'fce quindi poter

mostrare è a mia scelta se mostrare e fare solo se aggiungere un solo campo di testo in quel caso

sarà solo il codice se metterne due sarà codice descrizione se metterne tre codice descrizione

fce la cosa importante è questa che è posizionale quindi se mette

un solo campo di testo vuol dire che automaticamente sto dicendo che ct

code non è che posso dirgli a un campo di testo solo la descrizione no quindi

poi su lookup property ok vado a indicare su entrambi Vado a indicare, su entrambi, vado a indicare sempre cittadinanza.

E va bene.

Poi qui avrò,

incominciamo da qui, poi qui avrò Property Name Field 1, Property Name Field 2.

Dovremo dare un nome, però questo lo mettiamo a livello di input text,

per team in field 2 dovremmo dare dobbiamo dare un nome però questo lo mettiamo a livello di input text del tag html quindi come name del come attributo del tag input un nome di per di distingo ok tra i

campi quindi ad esempio libero è però che abbia un senso ad esempio qui sarà immagino questo è il

primo campo di testo sul codice,

quindi qua scriverò codice e questo magari è

lezione, ok?

Ultima parte relativa al lookup property è

dire

dire qual è il campo della lookup field a cui fa riferimento.

Quindi il primo campo è ctodi, il secondo campo è ctodi.

Ora però una cosa su cui bisogna fare attenzione è questa.

Qua c'è il lookup code field e qua c'è il lookup field.

Quando va usato l'uno e quando va usato l'altro.

Lookup field va usato per tutti quei campi della lookup field che sono descrittivi, descrittivi in senso largo, ok?

Quindi ad esempio è descrittivo la desk ma anche fce

facciamola più semplice

è un look up, è un campo descrittivo

tutto ciò che non è un look up codice

quindi se il campo

è un campo che mi fa da codice

quindi che vuol dire? che ci posso implementare

sopra questa funzionalità che vi ho fatto vedere prima

che io metto il codice perché già lo so

perché lo conosco, perché è mnemonico

perché è un codice ministeriale quindi è qualcosa di ben conosciuto io metto il codice, perché già lo so, perché lo conosco, perché è mnemonico, perché è un codice ministeriale, quindi è qualcosa di ben conosciuto, io metto il codice.hub, vedete che mi fa questo automatismo che mi seleziona automatico il record.

Quindi sul campo che mi fa da codice io specifico lookup code field e li specifico il nome del campo.

Per tutti gli altri campi ok viene considerato

un campo descrittivo e quindi si mette semplicemente look up field

quindi questo è l'occa con cid non deve essere necessariamente un codice potri metterci anche

magari direttamente di il nome dello stato e poi lui mi fa poi l'autocomplete.

Adesso se scrivo ITA, lui mi fa poi l'autocomplete e mi cerca magari Italia.

No, no, questo qui, questo è secco proprio, va a uguaglianza.

Quindi qua praticamente costruisce una query dove dice where ctcody uguale

601, capito?

quindi va a uguaglianza, no no, deve essere veramente un codice

però, però, quello che dici tu

in realtà funziona su tutti i campi

descrittivi, nel senso che

sui campi descrittivi ha questa

funzionalità, che se io scrivo ad esempio A

e poi apro però la lista valori, quindi il tab

non c'è nulla, eh, c'è nulla, però se io scrivo A prima di aprire la lista valori e poi apro la lista valori, quindi il tab non c'è nulla,

però se io scrivo A prima di aprire la lista valori e poi apro la lista valori,

vedi che mi filtra automaticamente la lista valori per, va in like, ok?

Quindi mi filtra la lista valori in base a quello come sono i campi descrittivi.

Ok?

Ok, capito, grazie.

Prego.

Ok. ok? ok, capito, grazie prego ok fine del lookup, il lookup si disegna così

però poi, come ci siamo detti

al di là del widget grafico

quindi tutto quello che vediamo su lookup property

è il widget grafico

quello che stiamo disegnando all'utente

a letto di quello però noi vogliamo

poi ottenere

sul nostro bin, quindi non

soltanto una questione di view

ma una questione poi di

proprietà che si rifletta all'interno del

nostro

bin, eh

il valore, l'id, ok, della cittadinanza è stata scelta.

Come facciamo?

E qua torniamo invece al link property, ok?

Perché tanto comunque poi per fare il binding, ricordiamoci, no?

Del nostro campo, ok, con le proprietà del bin, è sempre link property, ok?

Quindi torniamo a quello che abbiamo già visto.

E nel particolare, in questo caso, lo mettiamo hidden.

Perché lo mettiamo hidden? In realtà non è obbligatorio metterlo hidden, potrebo metterlo anche text, d'accordo? In quel

caso verrebbe anche visualizzato il campo id. Si mette hidden perché nella maggior parte dei

casi l'identificativo è una cosa ad uso interno, ok? Quindi magari l'utente ha familiarità

con il codice della cittadinanza, ad esempio il codice della cittadinanza dell'Italia è 100,

ha senso mostrare all'utente la descrizione,

ha poco senso mostrare un ID che potrebbe essere qualunque numero casuale, randomico.

Quindi per quel motivo lì non lo mettiamo.

Hidden, qui dentro nel primo campo, quindi in questo campo qui,

ci andrà a finire il CTD,

che poi io linko, come abbiamo fatto ieri,eri con link property alla mia proprietà cittadinanza

quando l'utente seleziona il valore quello che fa il framework è mettere qua il ctd qua il ctcd

qua il ctdesk qua questo qua dove va a finire lì io gli ho messo link property quindi

mi va a finire tramite set cittadinanza all'interno del bin dello studente

chiaro se la science in questo caso potremmo anche non metterlo comunque comunque sta prendendo adb esattamente

e detto poi li ben ripeto il 99 per cento dei casi non ha senso mostrare l'id però ci sono dei

casi in cui ha senso è uno di questi mi pare che sia proprio la persona. Cioè, poi, quando lo vedete

nelle maschere che utilizzano

le persone, i soggetti, che ne so,

non voglio anticipare troppo perché

dopo facciamo pure il corso su XMPI,

però comunque ci sono poi dei look-up

che attingono alla grafica delle persone

e lì mi pare che la persona sia un campo

che viene mostrato.

Quindi cambia nulla, semplicemente uno mette

text, viene visualizzato e lo vede. Se ha un senso

lo mettiamo, se non ha un senso che è

quello che sembra la cittadinanza, lo

mettiamo hidden.

Scusa, l'aggancio fra la parte

della parte del look up

quindi il meccanismo

di mostrare

l'elenco

pescare da quell'elenco

e

quel campo nascosto

è solo esclusivamente

il property name

vero?

no perdonami

ripetimi una domanda perdonami

cioè

abbiamo di fronte

queste quattro righe

una di

link property

e l'altra lock up property

ok?

le lockup property

Le immagino

Correggimi se sbaglio

Governano tutta la

Parte di

Accesso al database

Costruzione

Della lista

Delle possibilità

E tutto quel meccanismo

Che poi Alla fine va a riempire il campo che poi a noi serve, che hai detto è quello gestito con la link property. separate prese diciamo in questi due gruppi

separati

almeno io così li vedo

ma l'aggancio

tra queste due cose è il propertino m

che è lo stesso

e poi dopo il framework tramite la metodo

che tu ha obiettivo

capisce

che è collegato

a che è collegato a lookup e quindi poi si comporterà attivando tutte le

logiche che servono per il lookup. Il property name che fa da collante di tutto.

- Benissimo, perfetto, grazie. - A te. Ci sono altre domande?

A te. Ci sono altre domande?

Ok. Quindi in questo insomma abbiamo completato anche la parte di view, diciamo così, e quindi possiamo semplicemente andare a startare il nostro il nostro server allora qui già che ci sono

li do una sistemata a questa gsp

che un po' facendo i vari copi e incolla

ieri ho visto che ho messo un po' di td

sbagliate, qua sono giusti

sono giusti, ok

ho sbagliato un po' di gerarchia

di td e tr

quindi al solito quindi

al solito faccio il mio bel main

e poi riavvio il server

vediamo che è successo Grazie.

ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok ok Cisarstudente.du prendo il mio studente

eccolo qua

e abbiamo aggiunto il look up cittadinanza

adesso clicco qui

eccolo qua

adesso torniamo al funzionamento che abbiamo visto prima

quindi la lista delle mie cittadinanza

seleziono ad esempio

sembra, confermo.

Ok, confermo e quindi abbiamo salvato l'Afghanistan.

Adesso esco e rientro.

C'è qualche cosa strana su questo calendario

ah mi sa il formato è

ddmm

sempre questa maiuscola

mm

mm

un po po che questo

che 10 ok quindi adesso quindi giusto farvi vedere insomma ho pescato insieme adesso mettiamo albania

201 ok confermo riesco il rientro c'è sempre albania andiamo a vedere adesso sul db che cosa è accaduto. Se faccio una query su

e-star-rom-sasar del studente,

eccolo qua.

Vabbè, 201 perché in questo caso codice id hanno lo stesso valore, ok?

Quindi se vado su la tabella, promsa cittadinanza,

where ctcodi uguale 201,

201 anche l'ib,

perché su questo database dove sto lavorando,

altrimenti sono due cose completamente scollegate,

uno è gestito tramite sequence,

uno è invece un codice che mette l'utente.

Questo è perché quando è stato popolato questo tb

di sviluppo sono messo per comunità lo stesso

ok?

quindi qui ci va a finire

comunque

non so di lingua, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa, sa

cittadinanza. Ok, perfetto.

Ok, abbiamo completato adesso quindi l'esercizio relativo agli studenti.

Ok, sulla pagina dei studenti non ci torneremo più. Quindi adesso abbiamo, giusto per fare il punto della situazione, perché adesso li vedremo insieme,

li vedremo insieme, noi abbiamo un'anagrafica dei corsi scolastici, un'anagrafica degli studenti, ok? Sisa al corso punto do, sisa studente punto do, anagrafica corsi e anagrafica studenti.

punto 2 se la studente punto 2 è una grafica corse nella fia studenti adesso cerchiamo di metterli

insieme nel prossimo esercizio cioè vogliamo aggiungere un ulteriore dettaglio al nostro corso il dettaglio in particolare sarà la lista degli studenti che frequentano il corso e i loro

voti dal momento che l'esercizio precedente abbiamo creato il registo degli studenti che frequentano il corso e i loro voti dal momento che l'esercizio precedente abbiamo

creato il registro degli studenti vogliamo semplicemente referenziare uno studente utilizzando

il nostro registro cioè nella maschera eccolo qua nella maschera dei corsi aggiungeremo un

dettaglio studenti come simile a questo i dettaglio ieri l'abbiamo visto, l'abbiamo fatto

però siccome vogliamo legarci

uno studente, non è che ci mettiamo a scrivere

il nome, il cognome dello studente

semplicemente andremo ad attingere

tramite lookup

all'anagrafica degli studenti

praticamente andiamo a rifare

un po' la stessa cosa che abbiamo fatto adesso con lo studente e cittadinanza, lo faremo tra corso e io posso aggiungere un nuovo studente, indicare il voto, però andando a recuperare lo studente nella mia anagrafica dei studenti tramite un look-up.

quindi questo dettaglio studenti, avrà praticamente due sole proprietà di sue proprietà, proprio specifiche del dettaglio, avrà una referenza allo studente, così come abbiamo fatto adesso una referenza verso la cittadinanza, quindi una referenza verso lo studente e un campo studente.

per gestire il voto.

In modo per poter avere un lookup,

ovviamente dovremo anche definirlo,

perché ad oggi noi abbiamo definito

la tabella degli studenti,

abbiamo fatto il nostro BIM,

abbiamo fatto il nostro controller,

le nostre GSP,

però sulla SILUKUP non abbiamo fatto nulla.

Di conseguenza, se sulla SILUKUP non c'è nulla,

noi questo lookup qui

non lo possiamo mettere

ok?

non basta fare la tabella

bisogna poi

censire il lookup

e vediamo come censirlo

prima di questo però

quindi in pratica

quello che andiamo a ottenere

è una

quello che dobbiamo fare

a livello di

di tabelle

ora al di là del nome delle colonne

che sono leggermente diverse,

però quello che andiamo ad ottenere è praticamente questo, nel senso qui ho la tabella dei corsi,

qui ho la tabella degli studenti, ok?

Degli studenti, ok? Creiamo una terza tabella che mi permette di fare l'associazione molti a molti, ok? Quindi una tabella di mezzo che mi collegherà il corso con gli studentiferimento che sarà tramite l'Ucap verso lo studente e il voto.

E in più, ormai l'abbiamo imparato, rimettiamo anche un bel progressivo gestito da sequence.

D'accordo? Quindi questa qui sarà la tabella che sarà oggetto del dettaglio che andrò a disegnare nella mia maschera dei corsi.

La sa-studente-corso, chiamata così.

Sento chiaro?

Sì, ok.

Quindi adesso abbiamo detto questo è corso, esame,

studenti,

me lo tolgo, lo vediamo, anzi.

Perché cavolo ha fatto? Un secondo me secondo perché non mi si apre

una porca paletta

allora visualizza

ok

ok

ci metto

ci metto qui.

Quindi diciamo, tabella, corso, studente.

Facciamo una create table sa sard corso studente e aggiungiamo quindi CS corso studente cs underscore b

che sarà una sequence

quindi number di 11

poi

la tabella

che la colonna

che avrà la referenza verso il corso

quindi che sarà in fuori in clic

con la tabella dei corsi

quindi cs corso

è un varchar 2 di 11 mi pare la chiave primaria

il codice del corso è un var char 2 di 11 la foreign key verso il mio studente che quindi sarà la

proprietà dove gestirò sopra il lookup quindi cs cs studente, che è un number di 11, la primary key.

Poi semplicemente invece una proprietà del bin, che è il voto smark.

Facciamola all'italiana, un numero.

Quanto è?

Due.

Sì, c'è il tre, c'è anche il 110.

Poi, al solito, mettiamo i nostri campi di controllo, quindi metteremo il cs ut ins var char 2 di 30, che sarebbe l' la data di inserimento csdp

var che è il

var char 2 di 30 che è l'utente

di variazione

csdp

var

i campi di controllo

questi li mettiamo sempre

fine

crea una tabella fatto ora definiamo tutte quante le solite insomma definiamo

una primary key e queste due foreign key quindi incominciamo con la primary key

primary key su la sard corso studente che sarà i k sa

al corso studente la primary key è il campo csd

e quindi primary key fatta e adesso le foreign key quindi la prima

il corso quindi alter table hard corso studente ad cost 30 abbiamo detto che si

chiama nome della tabella scorr fk1 è in for in cliccola tabella

star corso e il campo

il campo

fuori in chi la colonna che cs corso fuori in picco la tabella della grafica dei corsi che è satard corso la cui chiave primaria cr code

fatto a tra fuori in chi del corso adesso facciamo quella verso lo studente quindi facciamo

fatta la for in key del corso adesso facciamo quella verso lo studente

quindi facciamo

table sa

saard corso studente

add constraint saard corso studente

fk2

noi lo incrementiamo solitamente

non è nulla vieta di chiamarle in maniera diversa

però noi solitamente

le numeriamo così

fk2

la for in key è

il campo che sarà in for in key è il CS studente, quindi questo qui, CS studente, referenza verso la tabella degli studenti, quindi SASARD studente, colonna ST and the score ID.

Done, Finito.

Quindi tabella fatta.

Ah, rimane l'ultimo step che è creare la sequence

con cui gestire questo campo chiave primaria.

Quindi mi creo la sequence,

anche create sequence, e li chiamiamo second score nome della tabella.

Finito.

Quindi in questo momento abbiamo fatto questo, insomma abbiamo fatto la tabella.

Perfetto.

Abbiamo fatto la tabella.

Perfetto.

Ora torniamo qui all'interno del nostro package corso,

ritorniamo perché sarà un dettaglio del nostro bin che è stato corso, e creiamo il bin e qui l'XML relative alla tabella Sazard Corso Student.

tabella, Sazard Corso Studente.

Quindi, nuovo,

Cals Corso Studente.

Le proprietà, abbiamo detto,

che saranno il long per l'id,

poi una stringa per il codice del corso, un long per l'id dello studente e un integer e il voto.

Voto, un po' italiano, un po' inglese qua, vabbè, ok.

Voto, ok?

Fine, non abbiamo altro.

E adesso ripassiamo praticamente come si disegna.

Ieri abbiamo ripassato come rifare un bin di testata, no?

Vi ricordate?

Con lo studente abbiamo rifatto praticamente un bin di testata.

Adesso ripassiamo come fare un bin di dettaglio.

Quindi, si parte sempre dal bin source

generate get 37

i vari implementi per system system valid e ball interface in amic

per feris e implementiamo metodi Poi, poi, poi e torno qua su.

Il memento.

Faccio i vari import.

Il nome della tabella, abbiamo detto, è SASARD corso studente.

La chiave primaria CSD.

I campi di controllo sono CSD, CSD, TINS, CSTVAR, CSTVAR. sono cs in success di teens cs tv arci s i var

implementiamo i nostri store ritriva remove

però ricordiamoci che nella store noi vogliamo gestire tramite sequence l'assegnazione del nostro id

e quindi era queste due righe di codice qui

quindi se l'id è uguale a null, l'id che è csid, il campo id cst lo calcoliamo sulla sequenza che si chiama

seccan descorra a far corso studente a pastor andiamo a leggerci

lì che è stato assegnato che facendo che trover ti as long di

sd l'ID che è stato assegnato facendo get property as long di SD ok

poi poi poi poi

poi implementiamo la nostra geto obietti info

corso studente

creiamo e creiamo il nostro xml quindi qui dentro sempre dentro il package corso facciamo new

other xml

si chiama corso studente.xml frequentano un corso

letto si, anche si, sar corso

corso studente, table name SISAR corso studente,

upper key name della chiave è id e poi qua incominciamo a mettere le nostre proprietà. Quindi abbiamo id che è legato al csd,

action identificativo,

la classe è Java, lang, long, i11.

Poi abbiamo la proprietà corso, che contiene il codice del corso

il corso quindi qua era cs corso

codice nel corso e un java lang string sempre di 11 poi la referenza verso lo studente ecs

studente

creativo studente, java lang lang, sempre di 11,

e infine l'unica proprietà di fatto reale di questo bin,

che non è una referenza, che è il voto cs, ho fatto un po' di inglese, un po' di italiano, vabbè,

csmark, voto, voto dello studente.

Soundjava lang integer length 3.

Finito.

Livello di modellazione del bin.

Però abbiamo detto che questo è un bin di dettaglio,

e quindi nel bin di dettaglio, se vi ricordate, ci sono altri due step da compiere.

Il primo è quello di definire sul bin di dettaglio il costruttore che prende un parametro tipo object.

E noi sappiamo che il framework inietterà un'istanza del mio parent, che in questo caso sarà un corso, perché noi vogliamo fare che questo corso student è un dettaglio del padre corso.

Quindi che faccio?

Parent uguale parent, creo, corso, e qui casto, ok?

Me lo sono assegnato.

Qua è sempre buona norma il parent, nel caso metterlo come transient.

Il parent, come vi dicevo, non è che vi serve, giusto anche per,

quando l'abbiamo visto ieri, per ritornarci.

Io volendo potevo pure fare così semplicemente.

Mi arriva un parent, il mio obiettivo finale qual è?

Quello di valorizzare la mia referenza verso il corso, quindi posso pure fare così.

Parent.

Bene?

Anche di semplicemente così.

E fermarmi qui.

anche se semplicemente è così e fermarmi qui

solitamente accedere al parent

può fare sempre comodo

perché magari dal bin di dettaglio

voglio invocare un metodo del mio parent

ci sono diversi casi di questo genere

quindi per questo motivo stesse volte le troverete

invece che il parent

si crea anche una referenza

fare appunto corso parent

e questo parent me velo assegno

qui l'unica cosa questa invece non viene fatto sempre ma nel caso fatelo sempre meglio specificarlo

a transient il motivo lo capiremo quando

Il motivo lo capiremo quando vedremo i messaggi web service SOP.

Lo posso già anticipare giusto un pochettino.

Sui messaggi web service SOP i bin vengono serializzati e non vogliamo che nel dettaglio ci vada a rifinire il padre. Si comincierebbe a generare un loop perché poi il padre ha la lista di dettagli, quindi poi la serializzazione del padre si realizza i dettagli, che dettagli hanno il padre, capito? Si comincia a reginare un loop, perché poi il padre ha la lista di dettagli, quindi poi

la serializzazione del padre ha i dettagli,

che dettagli ha il padre, ok?

Semplicemente questo.

Quindi comunque, poi lo vediamo

quando facciamo web service.

Quindi poi this.parent.getcode, ok?

Quindi questo è quello che bisogna fare sul bind di dettaglio.

Ora, allo stesso modo però bisogna rendere il padre consapevole dei suoi figli.

Quindi...

Abbiamo già una lista di esami, qui aggiungiamo una lista, private list di corso studente.

Chiameremo studenti, uguale new array list.

il get and set get studenti

set studenti

get and set

e in ultimo

sul metodo retrieve, così come abbiamo fatto

per gli esami, dobbiamo aggiungere

l'istruzione per caricare gli studenti

quindi qua dentro ci metto

faccio copia e incolla

quello che dobbiamo personalizzare ric ricordiamoci, sono tre cose. La prima, il tipo di bin, di dettaglio, che è il nostro caso è corso studente.

studenti che abbiamo abbiamo appena creata e l'abbiamo chiamata studenti ultima cosa è il nome del campo la tabella dei ricorso studenti che contiene una referenza al corso che quindi nel

nostro caso è questa no su saco verso studente cs corso fine dal punto di vista del modello sono domande

no perfetto ok adesso rimangono vi ricordate due cose la prima la view bisogna fare la gespi che mi gestirà il dettaglio

la seconda è il controller di dettaglio qui facciamo la nostra gf la gesp la

mettiamo sempre il solito posto qui dentro quindi sotto la cartella gespi si

sta al corso qui dentro facciamo new gsp

gsp quindi però gsp si anche sisar corso

corso studente

detail

come si faceva la GSP di dettaglio

ce l'abbiamo

insert edit view, controller, combo box

sequenza, eccola qua, la nostra GSP l'abbiamo in certi video controller combo box

eccola qua la nostra gsp il dettaglio

c

contro lu vi ricordate che per fare questa

maschera qui bisogna personalizzare tre cose la caption che voglio mostrare nella lista nella

griglia i valori che voglio mettere all'interno della griglia e poi disegnare la sezione qui in

basso che mi permette di inserire nuovi dettagli quindi iniziamo dalla caption che questa parte qui qui, qua mettiamo al solito il titolo della finestra, vista studenti.

Come abbiamo visto nel dettaglio di ieri, solitamente si mette nelle maschere di dettaglio

in testa un qualcosa che faccia capire qual è il parent che abbiamo preso in gestione,

quindi ad esempio codice del corso, due punti, e qui mostriamo magari,

possiamo fare anche un po' più complessa adesso,

mettiamo che vogliamo mostrare il, rispetto al parent object, quindi al mio bin corso,

voglio mostrare la code,

voglio mostrare la code meno, ok, buttata lì così, brutale, description

quindi voglio mostrare, quindi informazioni del corso

quindi mostrerò in testa, in for del corso due punti codice meno descrizione

poi qui come dicevo le tre cose

quindi prima di tutto la caption

la caption che voglio mostrare sono

l'id dello studente

il nome dello studente

quindi inteso però come campo unico dove mostrare nome e cognome, e il voto.

Ok?

Il voto.

Quindi qua metterò, ok, il di studente, nome e voto. Il di studente, nome studente.

Iniziamo. Iniziamo.

Un secondo, eh.

Secondo, interrompo la condivisione un secondo, voglio vedere un attimo una cosa, prima di fare questo.

Ok.

un giorno solo Ok, scusate, volevo un attimo verificare una cosa prima.

Allora, quindi, torniamo a noi.

Torniamo a noi.

Qui dicevamo l'id dello studente, il nome dello studente e il voto.

Poi qui dobbiamo, invece questa qui è la sezione che dicevamo, personalizziamo il contenuto della griglia inteso come valori.

Prima di tutto bisogna iterare su ogni dettaglio che ho in quel momento, quindi? Quindi sulla mia lista di dettaglio che ho all'interno del corso,

quindi sulla lista degli studenti.

Quindi qui faccio un iterate sulla

proprietà che abbiamo chiamato

studenti.

La source è il parent object,

quindi farà get studenti su corso,

perfetto. Poi

parcheggiamo ogni elemento, oggetto di iterazione,

lo parcheggiamo dentro questa variabile item.

E poi qua incominciamo a fare un td per mettere i valori,

insomma, sotto le nostre caption.

Quindi la prima è l'id dello studente.

Quindi l'id dello studente sarà semplicemente,

quindi item è un'istanza di studente e quindi sarà id.

Scusate, non è un'istanza, perdonatemi, è un'istanza di corso studente, quindi sarà id.

Sento uguale.

Sarà id.

Qui,

Qui, qui invece cosa vogliamo fare? Vogliamo mettere il nome dello studente, il nome e cognome dello studente, ok?

Infatti questo non mi tornava all'esercizio. Questo lo vediamo, però prima bisognava creare il lookup, quindi questo in realtà ci torniamo a brevissimo ok?

per adesso questo lo saltiamo

va bene?

qua dovremo mettere insomma

un modo per mettere

che cosa?

nome e cognome

dello studente

questo vogliamo mettere qui dentro

come valore

andiamo avanti così compriamo a GSP.

L'altra colonna invece è sempre un link property ed è il voto dello studente che abbiamo detto è la proprietà su corso studente che si chiama portato.

voto. Ok. Terza e ultima cosa che dobbiamo personalizzare è esattamente la nostra pagina

qui, questa porzione di pagina per fare l'inserimento di un nuovo studente. Ora, siccome noi vogliamo

inserire lo studente tramite lookup, adesso arriviamo al punto, quindi poi torniamo indietro a questa parte che ci siamo saltati, è arrivato il punto in cui dobbiamo necessariamente fare cosa?

Censire il nostro lookup studente.

Come si censisce un look up qui trovate sempre

ho messo una insert diciamo pronta all'uso però in realtà non è completa perché poi lo vediamo più avanti degli esempi non facciamo non facciamo esercizi ma vediamo degli esempi di look up più complesso che per caso il capo c'è diversi campi ogni campo c'è

uno scopo intanto vediamo un luco come se finisce un look up nella sua forma più più semplice che

esempio quella della cittadinanza è quello che abbiamo visto prima come si fa inserisce quindi bisogna inserire un record sulla

sulla silu cap abbiamo detto valorizzando almeno queste proprietà utenze di pins bisogna valorizzare

perché è cosa buona e giusta dire qual è l'utente di inserimento, però ci interessa il giusto. Quelle che ci interessa invece sono queste proprietà, codice, title, eccetera.

Quindi dobbiamo metterli un codice al nostro lookup.

Potrebbe essere sardstudente underscore lk, giusto così per

differenziarlo, per non confonderci tra tabella

e lookup. Quindi questo è il codice

nostro lookup.

Un titolo

che verrà visualizzato quando uno

apre la lista dei valori, quindi

lista

degli studenti.

La tabella dove

deve attingere i dati, che è la saard20, la chiave primaria e il lookup field

che vogliamo che siano il cognome

e il nome ad esempio, noi vogliamo mostrare

il cognome e il nome dello studente

quando avremo i campi di testo

i campetti di testo vogliamo fare

nome e cognome

quindi

Facciamo stname,

circola st,

surname.

Poi,

dobbiamo mettere la lista dei campi

che vogliamo mostrare nella lista valori.

Quindi se uno clicca sul bottoncino

per aprire la lista valori,

se uno apre il bottoncino vogliamo mostrare insomma decidere le colonie che vogliamo mostrare

in lista valori quindi dobbiamo specificare qui sempre in testa in ogni caso il ripetere

nuovamente il campo che aveva primaria quindi a settiende scorso e poi le altre colonie che vogliamo mostrare che nel nostro caso sono sempre

nome e cognome

magari possiamo anche aggiungerci

che ne so, la cittadinanza

anzi non la cittadinanza

la

start date and date potrebbe essere

start date e basta

giusto così per vederlo

start date e basta, giusto così per vederlo.

Start date.

Quindi l'identificativo non lo vogliamo mostrare, quindi ci scriviamo, anzi no, lo mostriamo.

Questo potrebbe essere un caso in cui l'identificativo ha senso mostrarlo, perché è l'id, magari potrebbe essere la matricola dell'utente.

Identificativo, anzi matricola scriviamo, no?

Questo può avere un senso.

Poi mettiamo nome, cognome, iscritto dalla, per esempio.

Fine. Riga inserita

commettiamo in questo caso

perché

d'accordo?

quindi cosa abbiamo fatto?

ok

quindi qui abbiamo inserito il nostro look up, l'abbiamo censito. Ora andiamo ad usarlo, ok? Ora andiamo ad usarlo. Quindi cosa su bisogna fare

due cose la prima sul modello quindi andiamo sulla get object info e diciamo

e diciamo if dynamic info interface

mick info inter face

property look up se mi chiedi se qualcuna delle mie proprietà vestisce un look up io ti dico che quando me lo chiederai per la proprietà if

studente

i quali per t name così la gestisce e il nome del look up è quello che abbiamo appena creato

quindi sa start student lk

fine lato bin ora un attimo nel momento che ho fatto l'auto completamento vi faccio vedere

anche la lista di cose che chiede vedete sull'agobjetinfo queste sono tutte le cose che chiede il framework al bin.

l'interinterinterinterinterinterinterinter? Perché appunto la classe delle proprietà se lo

legge dall'XML, la lunghezza se lo legge dall'XML

le caption se lo legge dall'XML e così via diciamo

comunque, a noi adesso ci interessa

dirgli, guarda qua

gestisco dei lookup e lo gestisco

sulla proprietà studente e questo è il codice

del lookup e lo gestisco sulla proprietà studente e questo è il codice del lookup.

Tornando qui quindi, eravamo qui, no? Abbiamo saltato questa parte relativa ai lookup perché

ancora non l'avamo definito. Quindi abbiamo detto che le caption sono id studente, nome studente e voto.

Qui nella griglia all'interno delle iterate mostriamo come prima colonna l'id dello studente,

come seconda colonna il nome e cognome dello studente.

Come facciamo?

In questo caso dobbiamo usare il lookup.

Quindi questo qui, lo copiamo

però il lookup funziona un po' come

il tag lookup property che abbiamo visto questa mattina

però funziona allo stesso modo il link property

vi ricordate che se il link property al suo interno ha

un widget, ad esempio un campo di test, un checkbox, una combo, eccetera, allora lui si occupa di fare il binding.

Se invece lo apriamo e lo chiudiamo, stampa video.

Quindi noi cosa vogliamo mostrare in questo caso?

Vogliamo dire, guarda, a partire dalla proprietà che ha la mia referenza dello studente, che si chiama studente.

Stampami rispetto al lookup finito.

da parola abbiamo messo qui le st name

per esempio facciamo tutte e due settimane su st name

e

nbsp

pazio

spazio. Spazio.

Da sempre su studente, st, surname.

Ok?

Quindi.

Questo stampa cosa farà? Andrà a interrogare, vedrà sulla proprietà studente, ah si è definito un lookup, qual è il lookup? Il lookup è Sassard Student LK, ok, cosa vuoi sapere di Sassard Student LK? L'STNEMA, ok, e lavora poi con il look up ok poi lo vediamo anche nel dettaglio

come funziona il look up internamente c'è una classe che si chiama look up manager che gestisce

tutte queste cose e poi la stessa cosa lo ripetiamo per le seti surname ok sulla terza colonna voto

invece rimane link property che mostriamo del voto.

Adesso torniamo qui invece, qua dobbiamo modificare, dobbiamo editare questa parte qui.

Quindi bisogna disegnare il nostro lookup.

Dobbiamo editare questa parte qui, quindi bisogna disegnare il nostro lookup. Quindi, studente e voto, iniziamo con lo studente.

E qui dentro ci mettiamo lo snippet del nostro lookup.

Me lo copio e incollo da qui.

Ok, allora, la property name abbiamo detto che è studente, quindi metto studente in tutte le property name che mi chiede, property name studente, property name studente, property name studente. qui vogliamo mostrare

nome e cognome

in realtà in questo caso

poi magari vediamo come rendere

il campo codice

il campo id abbiamo detto che

a volte ha senso mostrarlo, questo potrebbe essere un senso

non abbiamo un campo codice

sullo studente, abbiamo soltanto l'ID

che però in questo momento per adesso

nascondiamo, però facciamo magari che lo

visualizziamo, perché in questo caso

magari potrebbe aver senso

perché è l'unico

campo, come dire, un po'

non posso fare un codice sul nome

o sul cognome, devo avere

un qualche cosa di univoco

qua l'unica cosa univoca in questa tabella

per come l'abbiamo strutturata è proprio l'ID

e quindi potremmo interpretare come la matricola, quindi potrebbe avere senso, un sensoiamo detto tutto ciò che non è codice,

lookup field, st underscore name.

Property name field, nome, studente.

Lookup field qui, st, surname.

Property è cognomeome studente.

Qua mi sa che c'è una parentesi angolosa di troppoli nello snippet.

Eh sì, eccolo qua.

Ok?

Abbiamo fatto quello di stamattina praticamente.

Altro tr, invece per il voto.

Perché non mi autocompleto? Tdvoto e qui dentro mettiamo in questo caso un semplice link property legato al voto con input type text.

Finito.

Tutto chiaro?

Sì.

Sì.

Perfetto. Sì. Ottimo. sì sì perfetto ottimo ultimo step creare il nostro controller di dettaglio che sta dietro questa gsp e poi modificare il controller padre per dirgli di aggiungere quel dettaglio. Quindi, torniamo sui package Java.

Qua dentro corso,

faremo new

corso

studente v3

ci rivediamo un attimo

com'è a fare il

controller di dettaglio

il controllo di dettaglio si faceva

in questa maniera qui

allora dobbiamo

classe java che estende

v3 controller persistent fail e implementiamo un solo metodo, che è il nostro metodo init, dove gli diciamo di legarsi, facciamo gli import,

dove gli diciamo di legarsi, facciamo gli import,

dove gli diciamo di legarsi al controller padre,

che sul bin padre la proprietà che contiene la lista degli studenti si chiama studenti, e qua poi anche per la questione di legarsi i tab,

che poi andiamo a modificare sul controller padre.

In ultimo la gsp che abbiamo appena creato, che quindi si chiama, sta sotto, si, anche Caesar Corso Corso Studente Detail.gsp.

E rimandiamo direttamente in insert.

Qua al solito mettiamo il nome del bin di dettaglio, in questo caso, che è corso studente.class.getname.

il controller una volta creato

gli dobbiamo dare anche un mapping

quindi sul nostro

file di properties

dei mapping

censiamo anche il mapping

di questo dettaglio

lo mettiamo magari

quindi mapping.

sarà una cosa del tipo

tisar tisar mettiamo magari, mettiamo anche qui, quindi mapping. Sarà una cosa del tipo sisar.cors.studenti.

Poi il mapping sarà sisar.cors.studenti.du

uguale a sianc.sisar.corso.corsostudentev3.

Poi associazione bin, controller bin, quindi bin. questa roba qui, sianc.sisar.corso.corsostud3 uguale sianc.csar.corsostudente che è il bin.

Fatto questo, andiamo sul controller qui,

padre, sul controller padre che è corso V3 e vi ricordate che ieri noi abbiamo aggiunto,

abbiamo definito i tre tab, il tab padre, che è anche quello attivo di default, un tab

per il dettaglio esami e adesso noi ci andiamo ad aggiungere un tab per i nostri studenti quindi cosa facciamo

scriverlo insieme tab uguale get tab list ottengo la lista di tab get tab list tab list

punto ad tab e vuole un identificativo tab studenti una label studenti

come azione mettiamo sempre action tab

e poi facciamo agganciamo l'executor per intercettare dirgli quello che deve fare quindi

setup exeggito il new button exegguto l'executor per intercettare e dirgli quello che deve fare. Quindi setup executor new button executor interface, eccolo qua.

Qui dentro facciamo il nostro return new, lo reindirizziamo al controller che abbiamo appena definito di dettaglio,

quindi new controller forward

request mapping il mapping abbiamo detto che è questo qui quindi sisar.corsostudenti.do action uguale insert poi tutte queste cose eleaction le vediamo nell'ultimo esercizio,

che vediamo che cos'è questa action, virgola l'istanza di questo controller, quindi corso v3.this.

Bene? Quindi adesso possiamo buttare tutto giù, deployare e vedere se esplode tutto. io che sta partendo adesso se io faccio scroll lock

qui dentro cerco

abbiamo detto che si chiama sa

sard

vedete

diciamo prima

quindi in fase di start up vengono caricati look up

e viene caricato anche il look up che abbiamo adesso c'è

sito perché l'abbiamo messo nella nostra tabella

quindi si far corso punto du

ricerca primo corso, abbiamo esami studenti

studenti

perfetto, vediamo se funziona

quindi ho qua il mio look up studenti, clicco qui sulla lista valori

eccoci qua, vedete?

quindi viene mostrato matricola, nome, cognome e scritto dal

che sono le caption che abbiamo previsto

io seleziono un valore quindi qua ci

finisce il nome qui ci fisce il cognome voto 90 conferma quando una funzione ok qui ha inserito

nella lista il d dello studente quando non ha funzionato il look up ah ok adesso

c'è qualche cosa di refresh

ok adesso è comparso magicamente

ok questo è un attimo

magari adesso tra poco facciamo pausa e lo verifico

quindi

tutto qui, adesso io posso inserirne un altro

quindi inserisco anche la matricola con la matricola

perché ho selezionato matricola non ho fatto pippo bludo secondo

elimina ok sono quello con matricola 2, Pippo Pluto, voto 10, matricola 2, ah ok, me sembrava che avevo messo ok, matricola 2, Simone, 10, matricola 3 in ultimo c'è qualcosa che non qua

andiamo a vedere che cosa abbiamo messo

qui sulla griglia

ah scusate giustamente perché qua ci ho messo l'id

ho indicato l'id

non dello studente ma ho messo l'id, ho indicato l'id non dello studente,

ma ho messo l'id della metabella di dettaglio,

quindi qua in realtà dovevo mettere, volevo mostrare l'id dello studente,

quindi qui dicevo mettere studente, questo è il primo errore.

Poi devo vedere perché qua è lookup field,

ah lookup field, questo è il motivo, lookup field ah lookup field

questo è il motivo

lookup field non code

quindi eccola qua studente

quindi il primo errore che

ho sbagliato proprietà

qua è lookup field

quindi voglio recuperare questo lookup

se ti nome se ti surname da stampare

vediamo un po

qualcosa non quadra sul nome studente per adesso almeno la matricola è coerente quindi metto simone lucidi conferma simone lucidi e va bene se faccio

tutto pippo

prodotto brutto pippo. Pruto brutto pippo.

Ah, giusto.

Allora, per il motivo qual è?

È perché il source,

k.hug, cap propria tag vedete che

non ho specificato

il source

quindi non dicendogli dove andare

a recuperare questo studente sta facendo un po' di

di giri mortali

quindi in realtà gli devo dire che sì che deve

leggere la proprietà studente ma come qua sopra deve leggere dal dalla variabile item

e

o ok

quindi

corso

corso.do

adesso funziona

perfetto, quindi qua li do 10

e poi li do 9

finito

ok

allora, se ci sono domande altrimenti direi che possiamo andare a farci i nostri 15 minuti di pausa.

Pausa, pausa.

Ok, allora ci ribecchiamo qui, direi alle 11.05.

va bene?

perfetto

a più tardi

buon caffè per me. Grazie. Grazie. Grazie.

Grazie. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie. Rieccoci.

Guardiamoci al solito un minutino e reiniziamo.

Grazie. Grazie. Allora, rincominciamo.

Oh, oh mio... Quindi, condividi, condividi, condividi condividi allora qui insomma abbiamo visto come aggiungere il nostro look up alla nostra

alla nostra alla nostra gestione quindi abbiamo aggiunto praticamente qui innanzitutto avete visto

anche questa cosa qui che abbiamo messo prima no quindi codice meno

descrizione quindi abbiamo visto come aggiungere abbiamo rivisto come aggiungere un dettaglio su

un bim di testata come si fa la definizione del gesti di dettaglio le modifiche abbiamo

potuto fare sui bim di dettaglio su bim padre la definizione di un controllo di dettaglio la modifica del controller padre eccetera

vi è servito per questo l'esercizio per ripassare come si fa un dettaglio però in più abbiamo visto

anche come aggiungere un look up fatto in casa quindi un look up come abbiamo abbiamo censito un look

all'interno della si look up e lo abbiamo dichiarato nella get object info del nostro bin.

Ora però possiamo fare anche altre cose interessanti con questo look up.

Quindi adesso se io clicco qui mi fa vedere la lista di tutti gli studenti che ho censito qui.

Incominciamo a censirne un po', va?

Quindi sulla maschera dello studente incomincio a censire un po' di studenti.

Ok, quindi Rossi Mario. dello studente incomincio a censire un po di studenti che hai quindi rossi forsi mario

inizio 20 21 data fine ieri 4 aprile conferma nuovo bianchi il motivo per questo facendo questo è perché il prossimo esercizio è relativo a

filtrare la lista degli studenti quindi quando clicco qui mi fa vedere vedere adesso mario rossi

mi fa vedere tutta la lista degli studenti che ho però spesse volte in realtà noi non vogliamo

mostrare tutta la lista delle possibili,

tutti i record che ho all'interno del mio lookup, ma solo alcuni.

Ad esempio, banalmente, come in questo caso, alcuni utenti,

gli utenti abbiamo detto che c'è una data d'inizio e fine iscrizione, io magari voglio vedere qui sul lookup soltanto gli utenti

la cui data di iscrizione èida da di oggi come sempre però i casi

possono essere diversi ok quindi adesso mi popolo con un po di gli studenti quindi alcuni validi, altri no. Vediamo un po' che cosa ho fatto.

Allora, quindi abbiamo Luci di Simone che alla data di oggi non è attivo perché finisce il 7 aprile.

Pippo Pluto che alla data di oggi non è attivo perché l'iscrizione inizia il primo ottobre.

Rossimario lo facciamo attivo, quindi a partire dal 2021,

che quando quindi non metto la data di fine vuol dire che è infinito.

E Bianchi Giuseppe anche lo facciamo attivo,

Bianchi Giuseppe, anche lo facciamo attivo, però qua li mettiamo una data, che ne so, finisce primo aprile 2023. Quindi diciamo in questo momento ho due record attivi, Rossimario, Bianchi Giuseppe e Pippo Gluta e Lucidi Simone che invece sono disattivi.

D'accordo? Come si fa? Come si fa? Come si fa? Come si fa?

Allora, innanzitutto ritroviamo il nostro lookup sugli studenti.

LK codice, Sard, Sard, Student LK.

Ok.

È possibile passare ad un look up dei filtri.

La definizione di questi filtri si fa sempre tramite la get object info del bin, poi vediamo come.

Si possono passare filtri di varia natura, ad esempio banalmente io potrei dire, guarda filtrami

tutte le persone il cui s campo st name è uguale a Giuseppe, quindi mi farà vedere in

quel caso tutti gli studenti il cui nome è Giuseppe.

Oppure potrei dirgli filtrami per le colonne, possiamo filtrare per qualsiasi colonna della nostra tabella.

Però, e questo ci aiuta questo esercizio a vedere sia come si settano i filtri ma anche per esplorare altri campi della SiluCup.

questo esercizio a vedere, sia come si insettano i filtri, ma anche per esplorare altri campi della SiluCup.

Sulla SiluCup, per quanto riguarda le date di abilitazione, quindi date inizio, data fine,

siccome sono delle tipologie di campi molto ricorrenti in areas, poi lo vedremo quando guardiamo ad esempio l'anagrafica,

quando faremo il corso delle anagrafiche,

tantissime gestioni

hanno una data di inizio e una data di fine

ok

i comuni, le anagrafiche di base

soprattutto, quindi comuni, regioni, province

diagnosi, interventi

cittadinanze

hanno una data di inizio

e una data di fine valità, perché ad esempio

il comune, i comuni oggi nascono

domani possono essere accorpati un comune diventa un quartiere una provincia inizio e inizio e inizio e inizio e inizio e inizio e inizio e inizio e inizio e inizio data fine non l'ho messa a caso qui nel corso, negli studenti eccetera perché effettivamente in tante gestioni ce l'abbiamo

anche i soggetti hanno data inizio, fine

e poi dopo li vediamo meglio nei dettagli

quindi per poter gestire tutte queste date di abilitazioni

i lookup hanno un campo che si chiama, vedete

LKDT date enable, LKD disable. Che serve? Serve per dichiarare al framework, a dirgli, guarda, questo lookup, questo oggetto, studenti, prevede delle date di abilitazioni.

E questi sono i campi dove troverai il nome del campo dove troverai la data enable e questo è il nome del campo dove troverai la data disable.

Specificare e dichiarare questi due campi ci permetterà poi dopo,

a livello di bin, a dirgli guarda filtrami la lista valori dei miei oggetti,

escludendo tutti quelli che sono disattivi ad una certa data,

ad esempio banalmente di solito si fa alla data di oggi.

Svrslkcodice set lkdate setenable uguale e qui dichiariamo il nome della colonna

che mi gestisce l'inizio della validità, quindi nel mio caso, nel caso dello studente

era st underscore start underscore date.

E lk date usable uguale st end date.

Ok? Fine.

E abbiamo dichiarato, adesso il framework sa che ci sono queste date che rappresentano un intervallo temporale di validità di un record all'interno della tabella degli studenti.

Quindi prima cosa è per definire queste cose qui.

Second step è andare a dichiarare i filtri all'interno della GettyObjectInfo.

Come si fa?

Si va sulla GettyObjectInfo in questo caso di Corso Studente, perché noi vogliamo filtrare qui.

Quando io clicco qui su Corso Studente, clicco qui, questa lista la voglio filtrata.

Quindi mi deve apparire soltanto Rossi Mario, Giuseppe Bianchi.

Cosa devo fare? Vado sulla Get-Object Info.

Un'altra informazione che chiede il framework sarà dynamic-info-interface.property-lookup.com

filters

era che tu hai dichiarato che sullo studente gestisci con lookup perfetto quindi dopo lui

mi farà subito la domanda successiva mi dici per quella proprietà studente dove gestisce lookup se

hai dei filtri aggiuntivi e io dico sì per la proprietà studente

aggiuntivi? Io dico sì. Per la proprietà studente, questa è la mappa di filtri,

in JavaUtil, la mappa dei filtri che puoi utilizzare. È una mappa che aveva valore, stringa è un object.

Filters. filters hash map turn filters

e qui poi popoliamo i filtri

nel nostro caso

il filtro per dire al framework

che deve filtrare in base alle date

di abilitazione e disabilitazione che abbiamo dichiarato

c'è un filtro cod look up punto

cap

e

manager manager

capo manager bet e nebo filter il valore specifichiamo qual è la data a tenere in considerazione per il filtro esempio banalmente può essere generalmente è la data di oggi quindi

una nuova utile date

è la data di oggi, quindi una new Java util date.

Tutto qui.

Chiaro?

Ok.

Quindi adesso dobbiamo ravviare.

Perché dobbiamo ravviare? In realtà non abbiamo fatto grosse modifiche, abbiamo modificato il corpo di un metodo, quindi in generale viene presa la modifica, viene presa il volo dalla Java.

Come vi ho detto, la definizione dei lookup è la prima cosa che viene caricata dal framework quando viene startataria.

Quindi bisogna stoppare il Tomcat e riavviarlo in modo che il framework ricarichi tutti i lookup e quindi ricarichi.

IP recepisca questa nuova informazione. Vediamo che succede.

Scusate un secondo, mi allontano in dieci secondi, prendo un fazzoletto. Rieccoci.

Allora, ok, qui è partito.

Quindi vado su Caesar.corso.du, prendo il mio corso, studenti, apro la lista valori, perfetto.

Quindi infatti trovo il mio Mario Rossi e il mio Giuseppe Bianchi, che erano gli unici due record attivi quindi se io

qua invece sulla pagina dello studente pippo pluto

metto data inizio al 2021 conferma

ecco qua che sono risalute anche pippo bluto va bene tutto chiaro

che tipologia di filtri possiamo applicare perciò volentrò quella re ottima domanda

se volessi filtrare che ne so gli iscritti di quest'anno

allora gli iscritti di quest'anno adesso magari magari lo vediamo, però partiamo da un esempio di filtro più semplice che immediato.

Ad esempio, qui potete mettere filters.put, potete filtrare per le colonne della vostra tabella.

tabella ok quindi volendo ad esempio poter fare se ti è in che la tratta una quella colonna del nome e dirgli dirgli

cosa c'è qua e dirgli

come esempio dirgli che ne so

come esempio di G, vediamo che succede.

Qua settiname G, quindi diciamo in questo modulo lui farà un filtro facendo settiname like G, quindi dovrebbe selezionarci automaticamente Giuseppe.

o non trovare addirittura nulla perché per condizione ha creato

a farlo uguaglianza scusate mi fa uguaglianza non like scusate quindi

no uguaglianza quindi giuseppe dovremmo scrivere proprio

scrivere proprio

e quindi seleziona giuseppe quindi potete metterci insomma i campi le colonne del del db e quindi poi il rispettivo valore e lui vedete come fa la query quando clicco sulla

lista valori qui in debug sui log trovate addirittura anche le query che vengono fatte

quindi in virtù dell'esecuzione di quel faccio rivedere ho adesso pulito il log

io non appena clicco qui

pulisci

pulisci

non appena clicco qui

boom

qua avete la query

che viene fatta dinamicamente

in virtù di quel look up

ok?

quindi qua vedete quelle condizioni

altro non fa insomma quello che scrivete qua

è fare nome, colonna, uguale, il valore.

Poi per gestire l'anno

non so se funziona

una cosa di questo genere.

Una prova.

Perché in realtà cose di questo genere io le gestirei in una maniera diversa,

che è sempre tramite lookup, però ve la spiego dopo, perché come vi dicevo sulla tabella di lookup ci sono tanti altri campi,

perché è possibile gestire anche cose un po' più complesse, quindi io la gestirei con quel modo lì che poi vi spiegherò dopo

però intanto già che ci siamo

proviamo a vedere se anche questa idea qui

con quanto abbiamo visto fino adesso

può funzionare

quindi

prank st

anzi no, com'è che era la sintassi per fare...

allora mi ricordo la sintassi, facciamoci una prova qui.

Io faccio select star from, anzi, select st, start date from sa sard,

date from sa sard ottengo la data

se io faccio

char di questo

facterò così?

quindi proviamo un po' a vedere

che succede se faccio

to char questo uguale Quindi proviamo un po' a vedere che succede se faccio pushar.

Questo quale?

Che date ci abbiamo?

2022, va benissimo.

Ancora sta col filtro vecchio, chiudiamo.

Esci tutto, esci, chiudi tutto, sisar corso.du.

Verca.

Cosa ha fatto?

Ah, sì.

Ha messo. Aspetta.

Sì, ha messo.

Ah, ok, perché è l'unico che è del 2022 e in più ha un intervallo,

Giuseppe per casualità è l'unico che è del 2022 e che ha anche un intervallo valido alla data di oggi.

Togliamoci questo filtro qui, detenevo il filter.

E adesso ce ne abbiamo due che sono il 2022.

Ha funzionato, ok?

Quindi per esempio abbiamo messo questo qui e questo è quello che è andato a finire sulla

PED, sulla condizione. Ok?

Ok, i campi dei filtri devono essere per forza all'interno della riga dell'U-Cup o possono essere tutte le colonne della tabella studenti?

tutte le colonne della tabella studenti.

Per i filtri tutti, infatti quello che metti qui è praticamente,

adesso facciamo un esempio con end date,

lo che fa lui semplicemente lo va a mettere nella condizione di query.

Ok.

Facciamo così, infatti adesso mi ha selezionato solo Simone Lucidi,

e sì, vedi, l'ho messo in end date.

End date non l'abbiamo dichiarato nel lookup field

del nostro lookup

quindi tutti

ok

domande?

ok

quindi questo

è come si passano i filtri ad un lookup.

Quindi abbiamo fatto l'esercizio 5-2. Vediamo adesso, prima di andare al 5.3, che ci aprirà un nuovo mondo proprio.

Quindi ci allontaniamo un po' col 5.3 dal mondo dell'Ucap, solo un po'.

Quindi prima di allontanarci del tutto, vediamo proprio un attimo una overview delle altre...

altri campi del look up quindi se io faccio una query sulla si look up è giusto vedere allora noi

abbiamo visto il codice look up il titolo la tabella la key field look up field list field

le caption field per per andare a definire la lista valori c'è anche l'order by ok quindi in automatico io qua

specifico guarda quando fai la query semplicemente aggiungi minela query la clausola order by per

questa colonna o queste colonne come può essere come reti vedo quelli più semplice e poi

alcuni all esalto poi abbiamo visto le detenabled

quindi per fare gli intervalli

di attivazione e disattivazione

qui sono i campi di controllo

lk condition

qui possiamo mettere qua direttamente

delle condizioni di ur

quindi uno qua potrebbe mettere direttamente già qui delle condizioni cablate, quindi banalmente io qua avrei potuto fare, qui dentro ci potevo mettere proprio questa condizione che abbiamo aggiunto, magari il tuchar per filtrare tutti quegli studenti iscritti nel 2022,

lo potevo mettere direttamente qui dentro.

Quindi semplicemente poi quella condizione sarebbe stata concatenata qui.

E serve per raggiungere le condizioni che sono fisse, non dinamiche, fisse.

Altre cose.

Campo azienda, questo è importante

lo capiremo magari meglio

quando facciamo il corso sull'anagrafiche

alcuni record

all'interno del database di Arias

sono aziendali

quindi vuol dire

che sono di pertinenza

quindi il tenancy

io magari ho due aziende che insistono sulla stessa

installazione, quindi sulla stessa base dati, però un'azienda sulla stessa tabella, che ne so,

magari la tabella che contiene tutte le strutture, alcune strutture saranno visibili ad un'azienda,

alcune strutture saranno visibili ad un'altra azienda. Quindi sulla stessa tabella si gestisce il multitenancy.

Come si fa? Banalmente nella tabella ci sarà una colonna, un campo,

che mi dice qual è l'identificativo dell'azienda a cui fa riferimento quel record.

Quindi qua, molto simile a quello che abbiamo fatto per i campi di abilitazione e disabilitazione,

molto simile a quello che abbiamo fatto per i campi di abilitazione e disabilitazione

possiamo dichiarargli

il campo

il campo

eccolo qua

che mi contiene il valore dell'azienda

e quindi serve soltanto per gestire

insomma

questo, mi filtrerà automaticamente

i record in base all'azienda dell'utente che sta lavorando in quel momento al sistema quindi ad

esempio qui è il look up delle cittadinanze è ovvio che i record della cittadinanza sono

sovra aziendali non è che la cittadinanza italiana è diversa per l'azienda di cagliari o l'azienda

di sassari ok però alcuni a record invece sono aziendali qui quindi viene specificato

Però alcuni ha record, invece sono aziendali qui, quindi viene specificato.

Per quelli basici sono questi.

Andiamo invece in quelli più particolari e qua introduciamo una cosa importante.

Siccome a volte magari le query che si vogliono costruire a partire da un lookup possono essere più o meno complesse, e magari potrebbe essere un pochettino anche questo filtro che abbiamo creato qui, questo del tuchar, ok che alla fine l'abbiamo sfangata, si può fare così in effetti brutto neanche è però magari ci possono essere dei filtri

un po' troppo particolari da implementare

che non è facile implementare con una cosa del tipo

appunto

chiave valore

ok? perché magari supponiamo che addirittura

quel filtro mio obbliga a fare delle join

leggere

chiavi di profilatura, poi vedremo

cos'è la chiave di profilatura

insomma

fare diverse cose più o meno complesse

allora è possibile

definire, dichiarare

su un lookup

una classe java

in quel caso

praticamente si demanda

la costruzione di queste SQL

quindi delle SQL, della query che viene fatta del lookup, non viene fatta più automaticamente dal framework come sta avvenendo adesso, la fai tu.

ma è molto sulla falsariga di quello che abbiamo visto con il corso query, ad esempio.

Quindi noi ci definiamo una nostra classe di query che riceverà dei filtri, come riceverà i filtri?

Tramite questa cosa qui che abbiamo creato, quindi noi ci definiamo dei filtri che poi tratteremo in maniera opportuna all'interno della nostra classe Java,

costruendo il nostro statement SQL ok le classi java che si possono

dichiarare per un lookup in realtà sono

due

una è l'lcap class

e un'altra

l'lcap

valio list

non è valio list lk class ecco la prima lk list query

lk list query che scopo hanno quindi non lo vediamo però non

non lo facciamo come esercizio ma lo vediamo prendendo quelli che già esistono quindi vediamo

uno sguardo a del lookup reali. Ad esempio mi cerco il lookup URL K list query is not null. diamo ad esempio qualcosa delle anagrafiche

ad esempio questo qui

sanatura pdc, che cosa mi fa?

questo mi torna nel piano dei conti

questa è una query list

cioè un lookup

nella lista valori

mi va a mostrare la lista del piano dei conti

ha tutta la definizione che abbiamo visto fino ad oggi, però vedete che qui ha list query valorizzato. Quando è valorizzata list query, nel momento in cui l'utente clicca qui sulla lista valori, non viene fatta una query in automatico come abbiamo visto qui adesso nell'esempio ma semplicemente il framework delega dice invocherà

mi sono perso, scusate, invocherà questa classe

e dice ok, pensaci tu

vediamo come è fatta dentro

vediamo qua

vedete che non è

diversa

vedete formal filters

non è diversa dalla classe di query che abbiamo visto, quindi anche qui dentro, ok, al di là di cose queste che hanno fatto un po' più complesse loro, però di base il concetto è lo stesso, ha un metodo diverso, non si chiama to, come si chiamava qui, getCustomSqlString, qua si chiama toSQLString, ma il concetto è lo lo stesso vedete che costruisce la select e poi

vedete che fa isFilterPresent

quindi dice se è presente questo filtro

faccio determinate cose, aggiungo delle condizioni

faccio altro, ok?

questo è già abbastanza complesso come

classe di query per un lookup

quindi di base io qui ad esempio

tornando all'esempio

che abbiamo detto

della data del corso

supponiamo che magari avevo

sì, magari

avevo un filtro un po' più particolare

quindi volevo gestire

il mio lookup degli studenti

tramite una classe di query, quindi mi definivo

una classe di query e qui potevo

fare filters

.put

filtro iscrizione

20 22

filters

quindi qua poi facevo

is filter present

filtro iscrizione

quindi uguale a quello che abbiamo visto fino ad oggi

mi facevo

get filter value

prendevo il filtro insomma

che sarebbe il valore che sarebbe stato 20-22

e poi costruivo le condizioni

ok?

insomma al clic sulla lista valori

la query che viene eseguita viene demandata a questa classe qui

che viene specificata sull'LK list query

ci siamo?

all'interno di questa classe le colonne che si può utilizzare

sono sempre tutte, sempre quelle definite all'interno di questa classe le colonne che si possono utilizzare sono sempre tutte, sempre quelle definite all'interno?

No, tutte, alla fine sovrascrive, diciamo.

Comunque, diciamo, qui sulla list query è sempre bene indicarle, ok?

Però sì, a quel punto quando fai la list query fai quello che vuoi.

Diciamo, quei campi poi sarebbero

anche opzionali potrebbero anche marini voti diciamo quelle colonna la capa fields vuoti non

lo so perché dopo voti non so se lui comunque si sa che quando quando fa il caricamento del look up

no quando abbiamo visto in start up carica comunque mi sa che ce la va a vedere quindi può essere pure

che se il vuoto è nulla nel pointer sinceramente quindi solito noi quello che facciamo è comunque

tenere due cose allineate definizione su tabella e campi che c'è qui

però sì, linea generale

quello che poi dichiari come colonne qui dentro nella tua query

insomma vincono

ok

ok

questa era la prima

classe lk list query quindi lo scopo di questa query questa era la prima classe

lk list query

quindi lo scopo di questa query

di questa classe

è caricarmi la lista valori

come suggerisce list query

però c'è anche un'altra classe

di tipo java che si può implementare

che è lk class

prendiamo qualcosa classe

prendiamo qualcosa sempre di

sanitario

grafico l LK codice, like, o sa.

Ok, c'è l'equivalente del PDC,

però è un po'

tricato, vuole una cosa un po' più semplice.

Vediamo qua, ad esempio, elenco indirizzi

persone.

Eccolo qua. C'è questo lookup,

lookup indirizzi persona

quando è che il framework utilizza questo?

intanto vediamo dentro come è fatta

costruisce sempre e comunque una query

quindi riceve dei filtri

costruisce una query

adesso in questo caso la

in realtà

costruisce sempre una query

qua in questo caso l'hanno implementata soltanto per

per aggiungere

dinamicamente dei filtri fissi

va, va beh

e

poi delega la costruzione della query sempre al framework,

perché comunque, dipendiamo da un'altra un po' più complessa,

questa è un po' troppo semplice,

ASO da comune lookup, vediamo.

Questo c'è la Kvalison, c'è la che vale intanto vediamola per questa

allora una classe di lookup

deve estendere lookup

ora la classe

la classe di lookup

quindi quello che mettete nelle lk class

quindi ricapitolando quello che mettete su list query

deve estendere

custom query,

che poi è molto simile a quello che abbiamo già usato, il custom query profile, è identico, cambiare il nome del metodo,

ma lo scopo è quello che si fa dentro, isfilter present è identico, comunque questa c'è la sua gerarchia che è custom query.

è identico, comunque questa c'è la sua gerarchia che è custom query

questa invece

la classe di lookup

quindi quello che viene messo nelle k class

deve estendere lookup

che cos'è la classe lookup?

la classe lookup

c'è una piccolissima classe

ma non è anche tanto grande la fin fine,

che fa praticamente, è quella che di default fa la costruzione di questa query qui che abbiamo appena visto.

Quindi quando noi qua su corso studente gli abbiamo detto che vogliamo il filtro per la data,

per l'intervallo di data, per la data di iscrizione eccetera

stavamo praticamente dando delle

istruzioni a questa classe qui

a lookup java, quindi è questa

classe qui che di default

si occupa

di fare tutte le costruzioni

delle query

delle liste valori eccetera

però oltre che la questione della lista valori,

c'è anche un'altra query che può fare la classe di lookup,

che è la getKValues.

La getKValues è un particolare tipo di query che viene fatta per avere la lista degli id a partire da determinati valori dei campi o dei filtri.

ok? Quindi supponiamo che io voglia chiedere al framework

di dirmi, mi dici l'ID

mi dici

la lista di ID

di tutti gli utenti

attivi

alla data di oggi?

Quindi del nostro

Giuseppe Bianchi e Mario Rossa

il risultato di quella query è 4 e 3

questa query qui

viene utilizzata dal framework

per due motivi

o perché esplicitamente richiesto dal programmatore

e questo lo vedremo con degli esempi più avanti

oppure banalmente come validazione, cioè va a verificare, ad esempio, se io seleziono qui dalla lista valori 2, lui applica delle validazioni per cui dice, ma questo 2 è contemplato all'interno

della lista

di ID che mi torna alla classe

di query? Si è definita

ok? Quindi insomma

viene usata anche

in questo contesto qui, quindi

quando leggo una classe di query gli posso dire

quali sono le condizioni con cui recuperare

a partire dai filtri la lista degli id e lui poi va

un controllo incrociato tra

l'id che ha

selezionato l'utente

e quello

che gli torna

questo metodo getKeyValues

il motivo non è tanto per quanto

riguarda la selezione della lista valori

in questo caso come dice? Uno dice

se qua io ho

posso inserire Mario

vuol dire che Mario è valido

ma in realtà serve per due

circostanze

la prima se l'id lo specifica direttamente

l'utente

ok?

adesso qua non abbiamo messo l'id

però ad esempio

se io vado sulla pagina...

Adesso vi faccio vedere su una pagina reale.

Se io vado ad esempio...

Su...

Tu, tu, tu, tu, tu, tu, tu...

Posso andare su...

Strutture. Questione strutture gestione strutture

ok

qua c'è il responsabile

anzi ma anche il comune

quindi io ho

io il codice magari già lo so lo metto direttamente senza prenderlo da lista valori,

in quel caso lì, chi mi dice che quel codice che ho messo effettivamente è valido?

Cioè magari supponiamo che io da questa lista valori questo comune non avrei dovuto vederlo,

perché magari se cliccavo su lista valori questo comune mi veniva filtrato

perché disattivo però io magari

perché me lo sono tenuto, me lo sono ricordato

l'ho visto sulla base dati, quello che sia

quindi io conosco questo comune e ce lo metto

direttamente

deve scattare una validazione

questo non era tra i

tra i comuni che potevi selezionare.

Allora, in quel caso, scatta l'invocazione da parte del framework

di questo metodo getKeyValues, cioè lui passa a questo metodo

tutti i filtri che ha deciso il bin.

A fronte di quelli filtri, il lookup li tornerà una lista

degli identificativi che fanno match con quei filtri.

Se l'id che ha indicato l'utente rientrano nella lista degli id che mi torna il lookup,

allora va avanti, altrimenti dà un errore.

......

...

.........

...

...................................................................................................

...

...

... che va a vedere, rispetto a quello che il codice che abbiamo inserito, se eseguendo questa query che costruisce qui dentro,

gli identificativi fanno scopa.

Tutto chiaro?

Se no magari non è previsto come esercizio, però magari più avanti ci possiamo tornare,

Tanto questo non è un argomento vincolante per le altre cose che vediamo.

Quindi per questo, alla fine, la cosa importante è vederlo, però non ho previsto un esercizio.

Però nulla vieta, magari più avanti ci possiamo pure fare un esercizio e implementare la classe di query e la list query per il nostro lookup dello studente ok vediamo comunque il concetto intanto chiaro sono dubbi

la classe invece di squiri quella classistanda era sempre al lookup no invece la classe listQuery estende customQuery. Ok, praticamente è questo ritorno lo statement, quindi la stringa.

Mentre la classe lookup comunque chi estende, chi implementa l'inter per interfaccia deve anche eseguire la query

oltre eseguiamo esagerò creare connessioni tutte ciò che eseguire perfetto poi vediamo come costruire

le query qua adesso questa qua l'ha fatto java standard sono un po di di API pure che ci aiutano a creare

e ad eseguire le query su dv

va bene

perfetto

questa era giusto un attimo per concludere quindi l'argomento

lookup perché le k

lk class che è la classe di

di look up e list query sono due cose

effettivamente importanti da

sapere, perché poi tutti i look up

un pochettino più complessi

soprattutto nel mondo

sui singoli

sul moduli

centralizzati, quindi sul moduli

del framework, i moduli trasversali

quindi il framework

che chiamiamo anche GBF o

le anagrafiche, xMPI

non ce ne sono di gran che, sinceramente.

Però nel mondo dell'MC, sui portori verticali,

sull'HR, sui sanitari, ci sono classi di query

anche abbastanza grandi, quindi era importante

comunque parlarne.

Poi magari facciamo una prova più avanti,

magari a fine corso,

a implementarne uno su questi studi su quello

degli studenti ok ok adesso scusi un'altra curiosità sulla classe sulla tabella se luca

ci sono anche gli le quattro polne di controllo ma quindi è possibile

modificare questo record

no no no

lo mettiamo dappertutto

però in realtà no

le colonne di controllo le mettiamo dappertutto

questo è importante però

ottima domanda

i look up li rilasciate voi

vengono rilasciati da sviluppo

punto fine non è che si possono creare I lookup li rilasciate voi, cioè nel senso vengono rilasciati da sviluppo, punto, fine.

Non è che si possono creare sul cliente, cioè vanno con il prodotto, ok?

Quindi quando si rilascia il prodotto si rilasciano anche i lookup previsti.

Poi dopo, avanti negli esercizi, vediamo ad esempio come rilasciare una modifica al DB,

queste modifiche al DB che stiamo facendo, ok?

Quindi rilascerete anche la modifica al DB

che fa l'inserimento, il censimento sulla SinoCup,

però non è che poi uno sul cliente si può personalizzare un lookup,

no, è quello che rilasciate, punto.

Ok?

Ok, grazie.

Prego.

Simone?

Sì? scusami, avevi indicato anche una colonna LK condition, giusto?

Sì, ah, sì.

Cioè, diciamo questa qui sarebbe molto utile per integrare alcune condizioni non statiche, giusto? Non dinamiche.

No, no, qua proprio statiche, qua proprio statiche, il contrario. Quindi qua, nel senso statiche, giusto? Non dinamiche. No, no, qua proprio statiche. Qua proprio statiche, il contrario.

Quindi qua, nel senso statiche.

Sì, sì, statiche.

Sì, esatto, quindi cose che magari,

quindi sul codice, sui filtri, magari uno ci mette

qualcosa un pochettino più dinamico, che può

cambiare, tipo la data di oggi, eccetera.

Qua invece proprio statiche, no?

Quindi faccio un esempio, magari

sulla tabella degli studenti abbiamo la cittadinanza, magari vogliamo filtrare tutti gli studenti che hanno cittadinanza italiana, qua ci mettiamo a secco ST cittadinanza uguale 100, che è l'identificativo della cittadinanza italiana, appunto a quel punto.

quella lista valori sarà sempre fatta da studenti italiani.

Ok, cioè diciamo che da un punto di vista di manutenzione

è abbastanza comodo che tu modificheresti soltanto la tabela,

il problema è che è statica, quindi la scolpicci.

Esatto.

Magari il problema è anche che se questa look- è condiviso magari in più parti potrebbe essere

un problema magari un altro punto del codice non serve eseguire la condizione e già troveresti

però marcata tabella quindi sarebbe un problema giustissimo anche questo

Anche questo? Perfetto. Ci sono altre domande? Ok, per caso il look up un attimo ci stacchiamo e non ci torniamo negli esercizi. ok allora

adesso noi

che cosa abbiamo fatto?

abbiamo la nostra

la nostra

lista valori sugli studenti

ecco vabbè

corso

punto du

cominciamo Chiudiamo corso.du.

Cominciamo.

Abbiamo la nostra lista valori sugli studenti.

Però immaginate magari che ad un certo punto l'anagra studenti cresce, cresce, cresce, nel senso di qua, magari noi ci insiamo un altro studente, nei casi reali, no, che ne so, l'Università di Bologna mi pare che ha tipo 60-65 mila studenti, non mi ricordo.

Abbiamo migliaia di studenti.

Inizia a essere un po' complicato andare a spulciare gli studenti dentro una lista valori.

Ora, già che ci siamo, qua vi faccio vedere anche un'altra cosa

sulla lista valori ci avete un imbutino qua

se ci cliccate

poi potete fare tipo

ad esempio che ne so

contiene, inizia, maggiore

quindi ad esempio che ne so il nome contiene

giù

di filtra

ok? però al netto di questo

che questi sono filtri

un po' tra virgolette stupidi

perché sono filtri che vi fa soltanto sulle colonne

e soltanto quindi sulle colonne

che ho a disposizione ma supponiamo che appunto

volevo fare una cosa un po' più

volevo filtrare per

volevo fare un po' di filtri più particolari, ok?

Insomma, qui sono limitato alle colonne, voglio filtrare per cose un po' più particolari

e più in generale magari voglio sfruttare direttamente la pagina di ricerca dello studente.

Ok? Quindi non voglio avere una semplice... Questo meglio che me lo metto su una pagina a parte,

quindi non voglio, ma ne detto Chrome, quindi non voglio semplicemente avere una lista che mi viene aperta così,

voglio cercare attivamente uno studente cosa faccio in questi casi

utilizzo una cosa che si chiama find 2 che significa fa in due la find 2 viene modellata a livello visivo esattamente con un look up quindi la vedremo allo stesso modo però invece di fare di aprire la

lista valore al clic del bottone al

clic del bottone viene aperta la

maschera di ricerca ci verrà aperta la

maschera di ricerca dello studente qual

è la potenzialità di questo che io adesso

su questa pagina di ricerca abbiamo

messo tre filtri stupidi però magari

qui posso veramente mettere tanti altri criteri posso magari mettere due campi che mi dice trovami tutti gli studenti con la data di

iscrizione dal al troviamo pure mettere un anche una una ricerca sulla cittadinanza quindi posso

mettere un filtro sulla cittadinanza per cercarmi tutti gli utenti afghani albanesi italiani eccetera

d'accordo di questa è la potenzialità.

Quindi si delega la maschera di ricerca della gestione

che sta lavorando sugli studenti

di andare a filtrarmi, a crearmi la lista valori.

Chiaro?

Ok.

Quindi vediamo adesso come si fa.

Allora, innanzitutto un po' di termini.

Questa modalità si chiama find2.

Quindi quando implementiamo questa cosa qui, quello che facciamo è implementare la find2.

Quindi invece di usare una semplice lista valori, vogliamo selezionare lo studente usando la pagina di ricerca della maschera dello studente che abbiamo creato.

Quindi andare in modalità find2.

La find2 si fa in maniera molto molto molto semplice.

Seguiamo le istruzioni che abbiamo fatto per definire un look up, quindi ci inseriamo

il look up, dichiariamo nel B e tutto il resto. Questo l'abbiamo fatto perché partiamo dall'esercizio

del corso. L'unica cosa che dobbiamo fare in più è individuar e posizionarci dove sta il bottoncino

sul lookup property che circonda il bottoncino,

e aggiungerci l'attributo linked controller.

Nel linked controller indicheremo il mapping della maschera

che si occupa, in questo caso, dell'anagrafica dello studente,

quindi questo sisarstudente.do.

Quindi vediamo. occupa in questo caso dell'anagrafica dello studente, quindi questo si sarà studente.do ok?

quindi vediamo quindi vado su corso studente

detail, qui ho il mio

look up sullo studente

qui ho il mio

bottoncino

e qui ci aggiungo questo pezzettino

in giallo

quindi ci aggiungo questo pezzettino in giallo. Quindi ci aggiungo

LinkedController, il mapping del controller, che è...

Qua pure mi sa che c'è una parentesi angolosa di troppo.

No, non c'è.

Quindi LinkedController,

che è, nel nostro caso, sisar.studente.

Buttiamo giù e rifaccio l'ant. facciolanta Grazie. Ok, quindi, corso, vado su studenti, clicco qui, vedete? Mi ha aperto una grafica degli studenti. Adesso cosa faccio? Posso mettere i miei filtri, faccio ricerca. Vedete che adesso in corrispondenza del record che ho trovato, sono io che mi costruisco la mia lista valori in base ai filtri che posso mettere qui,

Vedete che oltre al tasto per andare in gestione, un piccolo classico per andare in edit, c'è questo tasto di selezione.

Selezione sempre Bianchi Giuseppe.

Selezionato.

Conferma.

Vedete?

Poi il funzionamento diventa uguale a quello di un look up, la differenza è nella lista valori praticamente, perché la differenza è nel fatto che la lista valori non è automaticamente popolata, ma me la costruisco io, quindi qua se voglio cercare G, a cognome, G G Giuseppe

se c'è un

al solito

se in virtù della ricerca c'è un solo risultato

quel risultato viene preso in gestione automaticamente

ok?

però questo è il

discorso

ok quindi la potenzialità

qui è che la lista valori della potete costruire da soli qui ovviamente l'idea è che ci sono dei campi di ricerca un po' più estesi, che quindi mi permettono di fare una ricerca molto nel dettaglio, nel modo in cui vado a tornare ai risultati di ricerca.

in cui vado a tornare i risultati di ricerca.

Questo è utile quando appunto la lista valori, so che non sarà costituita da pochi record,

o comunque da record un po' stupidi,

nel senso che è facile filtrare,

ma magari un po' più complessi.

Quindi un esempio reale è proprio quello sempre dei soggetti, delle persone, l'anagrafica delle persone.

quanti filtri ho a disposizione?

Tanti.

Adesso, comuni di nascita.

Poi c'è tipo,

vedete il codice da A,

data di nascita da A,

range, eccetera.

Immaginatevi di creare un look up sulle persone. Le persone, intendiamo

persone fisiche che sono all'interno di un'azienda,

pensiamo magari anche ai dipendenti

che sono all'interno di un'azienda.

Adesso possono essere migliaia. Se io facessi un sempliceinterno di un'azienda adesso possono essere migliaia

se io facessi un semplice look up

e io ho una lista valori di migliaia di persone

con nome e cognome, che ce faccio?

cioè, ci posso fare ma ci posso anche non fare

dipende

quindi in quel caso ha più senso

che il mio look up non sia un semplice look up

ma vada in fine 2

sulla maschera di ricerca di persone

o qua mi imposto tutti i miei by filtri,

eccetera eccetera, bla bla bla, ricerco

e faccio la selezione.

Ok?

La selezione si può fare appunto direttamente

da qui, oppure se prendete in gestione

perché volete magari prima aspettate un secondo ho fatto

chiediamo un po di roba questo viaggio più senso

parola si anche corso ok ricominciamo di prendere il corso, studenti, ricerca.

Ok.

Potete appunto, dicevo, o reselezionarlo... Ah, perché mi sono logato, scusate, perché in fatto mi sono logato,

quindi ha chiuso la sessione.

Ok.

Quindi, dicevo, o cliccate qui e selezionate il record automaticamente,

oppure, potete, che ne so, prendere in gestione,

controllare, ah, sì, effettivamente è lui, e poi qua cliccare, seleziona, è il funzionamento lo stesso.

Questa è la file 2.

Tutto chiaro?

Ok.

ok questo già ci è servito per vedere

un attimo, logandomi per farvi vedere

la maschera di soggetti, avete visto che adesso qui

è scritto Alfonso Mancusi che è un collega

scusate ma

discorso che mi sono collegato con

il suo utente, sul mio ambiente, questo è un ambiente

di sviluppo mio

e il

e invece prima faccio lo faccio logout logout utente debug e adesso sono così questo succede

soltanto quando siate potete il punto di lavorando con il non state lavorando con eclipse ok con eclipse

vi viene sempre creato un utente di debug per evitarvi di dovervi loggare sempre, ok? Quindi avete sempre quanto meno utente di debug. Ovvio

che poi se vi loggate le maschere hanno poi problemi perché la possessione HTTP viene disinvalidata

e tutto il resto. Ok, perfetto

perfetto però quando lavoriamo con la fine 2

cambiano cambia una cosina il modo con cui passo i filtri

infatti avete visto anche che il mio filtro... adesso lo rifaccio. Avete fatto caso che prima la mia lista valori, quando ci cliccavo, filtrava due elementi che erano gli unici due che avevano una iscrizione.

un'escrizione valida data di oggi

adesso me ne ritornano tutte e quattro

quindi in pratica mi sta ignorando

questa porzione qui

quindi non mi considera più

i filtri del lookup

perché di base qua quando si va su una find 2

non è più un lookup

ci si appoggia un po' sulla gestione del lookup

cap però tutta la fase di ricerca

eccetera viene demandata

al controller in questo caso

degli studenti

ok? una maschera di ricerca degli studenti

come si fa a passare quindi un filtro?

cerchiamo di passare

lo stesso filtro

o meglio di ottenere lo stesso risultato

diciamo così

tramite però la find 2

un secondo solo prendo un bicchier d'acqua scusatemi tramite però la find2. Ok. Come facciamo?

Bisogna dichiarare quello che viene definito action handler.

Ok? Questa roba qui.

Questo action handler deve essere dichiarato

all'interno del controller dove è prevista la find2.

Nel nostro caso quindi il controller di dettaglio,

orso studenti.

Adesso incopiamo, incolliamo e poi dopo ragioniamo su quello che scriviamo ok quindi io copio questo pezzettino di codice

vado su corso studente v3 sul metodo init

incollo questa roba qui

faccio tutti i miei import

bene allora che cos'è in generale un action handler Ok, andava a capo. Ok. Anche questo, tutta la roba delle action, quindi anche action tab, tutto quello che è action lo capiamo nell'ultimo esercizio.

Però per adesso quello che possiamo dire, insomma, che l'action handler, come suggerisce anche il nome serve per intercettare

delle azioni che compie l'utente

sulla maschera, nel particolare

qui cosa vogliamo intercettare

l'azione

di find 2

l'utente qua clicca dicendo

che vuole aprire una find 2

Quell'azione verrà inviata al server e quindi noi ce la prendiamo.

Quindi tutto ciò che è un'azione di tipo find2 che vuole fare l'utente, la intercettiamo.

E qua dentro, che succede quando ci sono a find2? come abbiamo visto nella gespe il sistema ci indirizza fa una redirect diciamo in realtà per la nuova maschera ci rimanda comunque

fa un controller forward al controller dell'anagrafica degli studenti quindi quando gli andiamo a dire con questa acción

prima che fai il controller forward

prima che mi mandi sulla pagina degli studenti

se il controller forward

lo stai facendo qui

perché ci sta questo if?

perché io potrei averne anche

sulla stessa pagina 50 di find2

non è che ne posso avereessa pagina 50 di find2, no?

Non è che ne posso avere solo una,

posso avere una find2 sui soggetti, sulle persone,

una find2 sui comuni, una find2 sui studenti,

una find2 di qua, una find2 di là. Quindi qua ci vogliamo intercettare.

Se il forward lo stia facendo sugli studenti, allora alla maschera di gestione degli studenti passa lì anche questi filtri che ti indico qui.

Ok? Ora qua è importante sottolineare questo, siccome qua praticamente stiamo delegando la ricerca in toto alla maschera di ricerca degli studenti, i filtri che passo qui non c'entrano in una mazza con il lookup, appunto il lookup è una cosa che utilizziamo come ponte dal punto di vista grafico, però ci stiamo allontanando dal punto di vista di utilizzo effettivo,

perché la lista valori non la fa il look up, la fa la maschera di destinazione, e quindi di conseguenza anche i filtri,

non c'entrano più i filtri che abbiamo detto di look up, c'entreranno quali filtri? I filtri che prevede la gestione di anagrafiche degli studenti.

prevede la gestione di anagrafiche degli studenti. Cosa voglio dire? Supponiamo che voglio riprodurre questo filtro qui che avevamo impostato, per cui voglio filtrare soltanto gli utenti

e gli studenti che hanno una data di iscrizione attiva

alla data di oggi

ok?

cosa posso fare?

qui mi creo il filtro

mi invento il filtro

allora, metto ad esempio

solo

iscritti oggi sono iscritti e li passò una data alla data di oggi

a chi arriva sto filtro

ma che arriva secondo questo filtro

proviamoci provate

chi arriva secondo voi?

alla maschera

della lista studenti

ok perfetto

ma a livello di java?

student v3

mi?

student query

alla fine si arriverà ovviamente al controllo degli studenti certo query alla fine

si arriverà ovviamente al controllo degli studenti

certo però alla fine arriverà insomma

come filtro

e quindi come qualsiasi altro filtro lo possiamo gestire

all'interno della nostra classe

di query

quindi qui dentro farò

if is filter

present is filter present

filter present

o iscritti

faccio

et filter value

scritti prendo il valore

che nel mio caso

ho deciso di essere

che sia new date

gli passo new date

qualsiasi data

prendo filterValue

e dico

quelle più uguale

and

st

start date

minore o uguale

di

jdbc

datamap per object to

SQL di filter value

and nvl st and date il date loro uguale di

e di sì questa roba qui ok?

quindi dico

tutto ciò che

se insomma questo filter value ricade

nell'intervallo

dello start date

nell'end date, poi ci ho messo un nvl perché l'end date potrebbe essere anche vuoto,

e quindi in quel caso come abbiamo detto che consideriamo, solitamente si considera infinito.

Se ricade l'intervallo allora, lo mostri, mettiamoci un punto di debug, il debug non ci siamo andati mai...

Giusto un attimo per vedere anche un po' di debug, dai, non fa tanto, ci avviciniamo al pranzo.

Allora, quindi, vabbè, prima di tutto devo buttare tutto giù, perché mi sono creato addirittura un inner class sul controller, quindi tutto giù.

Non penso di aver modificato la gsp

ma un ant me lo faccio comunque

no, non l'avevo toccata infatti

e restarto

anzi il punto di debug ce lo mettiamo qua sopra

così vediamo pure

vabbè no, anche qui va bene

qua, 32

ok va bene, anche qui va bene qua, 32 Ok, quindi

il percorso.

Studente.

Ricerca.

Cosa abbiamo qui come variabili.

Filters.

Quindi, quando noi facciamo quel isFilterPresent,

lo facciamo su questa mappa di filtri, ok?

Che mi conterranno i filtri in maschera, o come in questo caso, i filtri che gli ho passato

dalla FIND 2, quindi al corso studente v3.

Quindi lui dirà, isFilterPresent

isFilterPresentTrue,

prende la filterValue che è la newDate, gli ho passato newDate,

e quindi poi costruisce la condizione di query e questo è la SQL finale, SQL finale, query to date, eccetera.

ne vediamo tre infatti che tre erano in realtà quelli vediamo un po bianchi giuseppe è attivo la data di oggi rossi mario è attivo alla data di oggi pippo bluto è attivo alla data di oggi

quindi non ne abbiamo più qua prima erano 4 c'era anche la simone ci

anche io, quindi adesso ne vediamo solo tre

d'accordo?

ok

perfetto Va bene.

Va bene.

Ok.

Allora, vediamo se riusciamo a fare l'esercizio 5.4 prima di andare a pranzo.

Così poi dopo pranzo riniziamo direttamente con il 6 diciamo che col 5.4 concludiamo la gestione di come si fanno le pagine

le pagine standard su areas che rappresentano quindi ripeto veramente la percentuale elevatissima

delle maschere che troverete no tutte le maschere sono fatte così se c'è di pinzer

eccetera eccetera ci sono però delle maschere che magari hanno, faccio un esempio, un wizard,

una pagina che deve fare un wizard, non è che c'è una pagina di ricerca di edit, insert,

c'è la pagina wizard. E quindi vedremo l'esercizio.6 come fare tutte le pagine non standard,

lì diciamo non è che ci sta grosse cose da vedere, perché praticamente poi è la libertà

e la fantasia del programmatore implementare quello che si vuole però ci facciamo un po' di esercizi che ci sono utili poi

per vedere alcune API del framework

quindi quello sicuramente è tutta una cosa che facciamo nel pomeriggio

vediamo se riusciamo prima di pranzo a fare questo qui

altrimenti, allora, spezzettiamo, che dobbiamo fare?

non è ancora mezz'ora

pausa pranzo e Vediamo un po' che dice. Questo è complicato come esercizio, non so se ce la facciamo per pranzo. Iniziamolo. Allora, vogliamo aggiungere sulla pagina di ricerca del corso un filtro,

un nuovo filtro. Questo filtro permetterà all'utente di selezionare uno o più studenti.

In particolare, quindi il sistema mostrerà tutti i corsi che hanno al loro interno lo

studente selezionato. in parole povere questa è la

pagina di ricerca del corso fino adesso aggiungiamo questa questa sezione dove posso selezionare uno o più

studenti supponiamo che sullezioni mario rossi

quando faccio ricerca mi deve mostrare tutti i corsi dove che sono seguiti da

mario rossi

quindi per intenderci che è creiamoci innanzitutto allora quando abbiamo

messo giuseppe bianchi simone luci di, Pippo, va bene andiamo, che ne so, su C2 inserisco anche qui

Giuseppe Bianchi

confermo

ok?

cazzo, no, l'ho chiuso tutto

una cosa importante

quando chiudete quella X rossa chiudete tutto

uscite, chiudete, boom, chiude tutto

ok, questa X rossa qui

quindi poi C3 ci metto

tippo bluto conferma quindi a giuseppe bianchi ce l'ho sul primo corso il secondo corso tippo

bluto sono sul primo e primo corso bis quindi se io cercherò

su questo filtro

qui, selezionerò Giuseppe Bianchi

lui mi dovrà mostrare

primo corso e secondo corso

d'accordo?

come si fa?

si fa

allora innanzitutto il widget sarà simile a questo che vediamo Si fa.

Innanzitutto il widget sarà simile a questo che vediamo, il widget che andremo a disegnare nella pagina sarà simile a questo, cioè un campo di testo, tipo una textarea, dove è scritto i nomi degli studenti selezionati e qua due tasti add and remove che mi permettono di rimuovere uno studente selezionato oppure di aggiungere uno nuovo andandolo a ricercare

sulla maschera di ricerca dello studente che abbiamo visto fino ad oggi. Sarà questa visualizzazione

qui. Questo widget prende il nome di find3, per fantasia.

Quindi abbiamo la find normale, la find2, che è quella che abbiamo appena visto, e la find3.

La differenza tra find2 e find3 qual è? La find2 mi permette di cercare, di avere una lista valore,

di selezionare un risultato di ricerca. la find3 mi permette comunque sempre di ricercare,

quindi andrà sulla maschera della ricerca degli studenti, cerco, faccio quello che voglio.

Però poi da risultato di ricerca posso selezionare uno o più risultati,

che poi dopo mi vengono riportati qui dentro nella textaria. Ok?

Ok.

Come si fa?

Per

Primo step è definire il widget

ok?

quindi sulla mia GSP metto questo widget della find3

quindi questo è un altro custom tag che stiamo scoprendo

che è forms find3

e lo mettiamo, abbiamo detto, lo vogliamo mettere nella pagina di ricerca del corso

quindi vado dentro corso find, creiamoci prima un'altra sezione, qui un'altra riga, quindi qua ci metto selezione studenti

e qui come widget

non ho link property, non ho niente

è un widget che avvive di vita propria

ci metto questo qui

ok, è una select, non è una textarea

è una textarea, comunque un widget di per sé è una select, non una textarea, assomigliano a più una textarea che una select,

comunque, un widget di per sé è una select.

Poi, personalizzo questa roba qui,

property name,

property name, praticamente, dobbiamo dichiarare dove vogliamo ricevere

la lista degli elementi che sono stati selezionati

quindi quando l'utente selezionerà due record

questi due record dove devono andare a finire?

chi li deve ricevere?

quindi qua abbiamo property name e come sempre source

quindi praticamente qui scrivendo items lui farà che cosa?

Andrà a settare quella lista degli studenti su set items del controller.

Quindi in questo caso siamo su corso find, quindi sul controller corso v3.

Quindi sul controller corso V3.

Quindi, ad esempio, dirò, che ne so, property name, studenti selezionati, source controller.

Quindi qui su corso V3 cosa dovrò fare però definisco una

variabile tipo lista

non serve

object, infatti generic

object

selezionati uguale new array list e va bene array list

poi ci facciamo i nostri metto qua sotto getter and setter

ok?

e fine io quindi qui dentro

riceverò la lista degli studenti selezionati

ok?

poi, poi, poi

lookup name

perché ripeto, il lookup comunque lo utilizziamo come ponte

per quanto poi dopo la gestione è tutta delegata al controller forward, ok?

Però lo usiamo comunque come ponte, quindi comunque un lookup di appoggio lo dobbiamo avere.

Quindi il nostro, qua specificiamo direttamente qui il nostro lookup, che era sa, sard, studente, lk.

Qui specifichiamo il mapping del controller di destinazione.

Una cosa importante,

a volte magari serve lo slash,

a volte non serve lo slash,

a volte serve il punto 2,

quindi negli snippet ve lo specifico.

Se trovate solo

mapping of controller vuol dire che deve essere

ad esempio csar.studenti

stop, se vi metto

mapping of controller.du vuol dire che dovete specificare

csar.studenti.du

se vi metto lo slash dovete specificare

la slash, ok? Semplice

quindi

il nostro controller

era lo sono già scordato Quindi il nostro controller era studente.du.

Ultimo è i campi che voglio mostrare in maschera.

Per questo utilizziamo alla fine il lookup.

Perché una volta che ho selezionato l'utente,

una volta che ho selezionato l'utente,

questo verrà riportato all'interno di questa combo, questa text area,

in questa sezione qui, ma quello che mi torna alla file in tre sono gli id, sono sempre gli id,

gli identificativi dello studente. Quegli identificativi in qualche modo li devo mostrare invece in una maniera un po' più parlante. E quindi qua vi posso dire i campi da mostrare.

Ora, per adesso ci metto soltanto st surname, poi vedo un attimo perché mi sfugge, la memoria mi sta abbandonando su come concatenzio.

in realtà è possibile concatenare più più campi come ad esempio fare una cosa come qua no tipo come

scritto qui quando mettiamo per andare avanti con l'esercizio magari dopo pausa pranzo vederci

ritorniamo in androci metto così per avere subito una cosa tangibile il cognome ok poi niente qua specifico la serie clena multiple e poi questo niente sites semplicemente

per decidere la dimensione sia in termini di larghezza però anche in termini di altezza quindi

quanti elementi vuole far vedere eccetera quindi semplicemente per dimensionare la combo fine

la combo fine vediamo intanto già il risultato

intermedio Grazie. Ok.

Quindi, sì, sar.corso.du.

Eccola qua.

Sezione studenti

facciamo aggiungi

e vedete che veniamo riportati

sulla maschera di ricerca dello studente

al solito

però se faccio ricerca vedete adesso la differenza

io non ho un bottone per selezionare

ho quello di gestione del record

e vabbè

però non ho quello per selezionare

perché in realtà ho dei check

quindi in realtà posso selezionare uno o più valori poi qui sotto c'è un tasto conferma

che mi riporta qui posso rimuovere

va bene Poi posso rimuovere. Va bene?

Ora, quello che dobbiamo implementare è...

Widget è fatto...

Scusate.

Scusate.

Un secondo.

Dicevo, quindi il widget è implementato, funziona, posso andare quindi sulla maschera degli studenti, selezionare più risultati e portarmi indietro

poi qui in realtà uno può anche ordinare la lista

mai visto un caso in cui sia importante ordinare una lista

però vabbè, uno la può ordinare

e quale lista stiamo ordinando?

stiamo ordinando

questa lista qui

studenti selezionati coordinando questa lista qui.

Studenti selezionati, perché qui dentro mi arriva.

Adesso ci metto un bel back point, iniziamo un po' a andare in debug.

Quindi io faccio aggiungi, ricerca, conferma.

Perché non mi è centrata, attenzione. Ok, get.

Quindi lavora direttamente sulla get.

Quindi aggiunge e lavora sulla ghetta va bene

ok anzi pulisci

Quindi il mio tag si prende distanza della lista. su questa istanza di vista poi dovete fare tutte le aggiunte

vabbè

ok

ok giusto un attimo anche per parlare di tag

prima ancora di andare avanti

prima di parlare di andare avanti però un attimo di tag perché così

sempre andando in debug mi si è aperto il find3 tag che cos'è il find3 tag è il tag

della mia find3 ok qua usato formus fine3 quindi sto delegando

tutte le logiche qui

di questa fine3

a questa classe qui fine3 tag

trovate tutto

ovviamente penso che in realtà

lo sapete già però io lo spiego a prescindere

tanto

Siamo sicuri di stare sulla stessa pagina tutti quanti.

Ci sono praticamente due TLD principali che sono PSG Tag Library e PSG Tag Library Form.

Trovate tutte e due nel progetto PSG Lib.

Quando li cercate, li trovate anche su altri progetti, dappertutto, ignorateli.

Quelli che fanno fede sono quelli dentro il progetto PSG-Lib.

Quindi apriamo entrambi.

Quindi poi, ad esempio, su tag library, quando noi utilizzavamo il tag link property che si chiamava link property

significa questo è il nome del tag

questa è la classe che gestisce il tag

e questi sono i vari attributi

che possiamo impostare

su quel tag, quindi se abbiamo visto il source

controller, main object, parent object

eccetera, quindi trovate

tutto qua dentro le possibili cose da fare.

Ok, ce ne sono diverse.

Però poi, in soldoni, andando su link property tag,

vedete anche l'effetto e come viene usato ciascun tag.

Ad esempio, quando ieri avevamo visto

che il link property non

settava la max length sui campi di testo cosa ho fatto

ho preso link property tag ho cercato qui dentro dove impostava la length

apply max length vedete qui costruisce

qui costruisce

il

qui setta

sull'input

sul nostro campo input

la max length

e ho visto che effettivamente qui lui non invocava il nuovo metodo

getObgetInfo ma continuava a invocare

il vecchio metodo getProperInfo

ok?

e quindi da qui poi ho

ho capito insomma che la lo che in qualche modo dobbiamo fare quella quel lavoro di lb delegate per rimandarlo a leggere la gett obiettivo quindi trovate tutto quanto qua dentro. L'altro tag che abbiamo visto è il lookup

aperti tag.

Quindi qua dentro trovate tutte quante le logiche

con cui lui, diciamo ci sarà il metodo,

al di là di tutti quanti get, set, eccetera,

che ci sono, poi il metodo sapete, no?

Che sono due start tag, due end tag.

Ok? ci sono poi il metodo sapete no che sono due start tag due end tag ok quando è tag c'è questo metodo get the correct body che fa tutto quanto quello che deve

fare

ok

ok

Ad esempio, qui il lookup property, se ci avete fatto caso noi specifichiamo la proprietà,

specifichiamo il nome del lookup, perché? Perché lui dopo in base alla proprietà, che cosa fa? Lookup property? Dice ok, prendo il bin, l'oggetto,

e su quello ci chiamo la getObjectInfo,

chiedendogli mi dici la lookup della proprietà studenti,

e quindi dopo torniamo qui dentro.

Quindi chi è che mi invoca questo pezzettino di codice?

E' il lookup property tag, ed eccolo qua il pezzettino di codice e il luka property tag ed eccolo qua il pezzettino

e adesso invece ci sta il find3 tag il find3 tag è quello che abbiamo appena visto

sempre qua c'è un star tag, un two-end tag dovete guardare qui c'è un metodo decored body una delle prime cose che fa è

recuperarsi la lista ok la lista che le abbiamo specificato qui dentro nella find

nella find 3 quindi questi studenti selezionati e da dove la prende? da source controller gli abbiamo detto quindi lui farà

source

e gli abbiamo specificato controller

lui fa page context get attribute source

quindi nel page context

se il source non è specificato

vedete come vi dicevo

di default è main object

però al di là del main object

che è l'opzione di default

quindi non serve mai specificare

avete a disposizione anche

parent object e o controller. Entrambe sono cose che sono iniettate dal framework

in autonomia sul page context, quindi poi diventano attributi del page context. Un altro

source particolare che abbiamo visto, l'abbiamo visto sull'iterate, quando poi facevamo un'iterate,

particolare che abbiamo visto, l'abbiamo visto sull'iterate quando poi facevamo un iterate

quando facevamo l'iterate

ecco qua, spiegavamo l'iterate target

questo non fa altro che creare in automatico

va a settare nelle page context in automatico

un attributo che si chiama item con l'istanza ok qui dopo

riusciamo a fare sul site e poi fa questa cosa qui qua su site mi torna gli esimo elemento e poi da

quello ci fa la ghett pro per t valio in questo caso di corsi il corso studente. D'accordo? Sono un po' di domande su questa parte qui.

C'è troppa fame ormai.

Come?

C'è troppa fame per fare domande a queste ore.

Vabbè, è vero.

Allora,

andiamo un po' avanti

perché a me mi bacchettano

se faccio

magari 10 minuti prima

magari ci posso fare però

troppo prima

non possiamo purtroppo

allora

ok

quindi noi eravamo arrivati

qua dentro che abbiamo ricevuto

la nostra lista è selezionata, qui sarà valorizzata in buona sostanza.

Ora la dobbiamo portare, la dobbiamo dare, la dobbiamo mandare alla nostra classe di query, ok? Perché è la classe di query che poi dovrà fare tutte le logiche con cui andare a filtrarmi i corsi. Ora qui in realtà un po' questo qui mi anticipa, questo esercizio mi anticipa il 6.

Mi anticipa il 6, un po' bacco, un po' bacco. Ma beh, facciamo così, lo anticipiamo, chi se ne frega.

Facciamo così, andiamo in chiacchiera fino al pranzo e poi allora ok

fino adesso abbiamo sempre tenuto da parte

questa cosa dell'action

però non è nulla di trascendentale

un po' l'abbiamo detto

che vuol dire un action?

ogni volta che l'utente compie una qualsiasi azione

sulla maschera

quello che fa è inviare un action

inviare un action al nostro controller

al controller in questione

ok?

quindi tutti i bottoni che vedete

che sono bottoni di ricerca

non è che l'abbiamo creato noi

no? nel senso lo importiamo

nella nostra GSP ma

quello che fa

il fatto che cliccando qua

mi faccia ricerca

non è che l'abbiamo scritto da nessuna parte

noi al massimo abbiamo scritto la classe di query

ok?

tutte le logiche dietro a quel bottone

ricerca noi non le abbiamo

implementate, anche quelle che ci sono dietro

al tasto nuovo e così via dicendo

d'accordo?

quindi

come funziona? l'invocazione di un javascript e ci ragganciamo al javascript che vi dicevo ieri, che gestisce la comunicazione tra client server, tramite la funzione javascript do action, ad esempio qui sulla ricerca c'è do action confirm, qua su nuovo c'è do action insert,

E così via dicendo, d'accordo?

Quindi ogni azione fatta, che deve essere fatta verso il server, deve avere una sua action.

Poi diciamo questo, due action è la funzione JavaScript che invoca l'azione, qua dobbiamo mettere l'identificativo della nostra azione.

Che succede lato controller?

l'identificativo della nostra azione.

Che succede lato controller?

Quindi, abbiamo detto, il controller dispatcher va a leggere il mapping,

capisce qual è il controller regato a quel mapping.

Perfetto.

Se è nuovo il controller, la prima volta che lo apriamo,

lo istanzia, lo inizializza invocando il metodo init.

Se non è la prima volta, invece, che fa?

Di quell'azione che gli viene passata, abbiamo detto che questo poi il controller lo mette in sessione

quindi la volta dopo

giusto per fare il giro, no?

quindi io vado su

sisar.corso.du

ok, lui prende il mapping

mi stanzia il controller corso v3

e invoca il metodo init, perfetto

e lo mette in sessione

quando adesso io clicco su ricerca viene invocato il metodo,

la funzione JavaScript doActionConfirm, che fa,

viene mandato al controller dispatcher

il fatto che voglio fare l'azione confirm,

confirm, sì, confirm, sul controller sysar corso.

sul controller SISAR corso.

Controller Dispatcher,

metodo Service,

mettete qua quando leggi il path,

ricerca,

ok, quindi lui va a leggersi il full path

e questo quindi il controller name

del mapping qual è?

si è al punto corso

si ricava questa session key che vi dicevo

che altro non è che è semplicemente

il controller punto il mapping del controller

e poi va a leggere anche l'action

confirm

ok va beh fa un po' di cose anche election confirm

ok fa un po di cose legge pure l'ip ma ce ne interessa il giusto andiamo avanti andiamo ecco qua

Questo ancora ci interessa, il tracing, cose di sicurezza sul gtr, ci interessa, andiamo una ciccia, tutte cose di tracing, auditing per tracciare chi fa cosa. Eccolo qua, col mio session key vado a vedere se esiste in sessione un'istanza di controller.

Ed esiste, eccola qua, perché l'abbiamo inizializzato all'inizio, quando abbiamo aperto la pagina.

Quindi a quel punto, comunque su questo controller,

action uguale confirm

al di là degli end o l'action

arriverà ad un certo punto che fa

mi sono saltato?

no, capoletta era qui, era

mi sono saltato, era l'end o l'action

ok, faccio drop era qui, era l'endol action, ok, faccio.

Drop to frame, ripetiamo, ecco qua, arriva a un certo punto che fa endol action di questa azione, quindi invoca il controller il metodo che si chiama endol action.

Questo metodo endol action è quello implementato a livello di v3 controller persistent il nostro controller estende

controller persistent d'accordo e qui dentro quindi c'ha tutte le varie logiche quindi che fa

legge qua c'è l'azione confirm e inizia a fare

e inizia a fare,

secondo,

ah eccolo qua, su, ecco non trovavo questo, l'abbiamo già passato, e fa, vabbè, nel caso dell'azione esempio confirm, in realtà andiamo,

lo delega al padre, che a sua volta poi lo delega al padre che a sua volta poi

lo delega al padre

quindi quando siamo andati a VUTE controller base

ok

ad un certo punto

ecco qua, fa questo metodo

do action

confirma ancora, quindi ancora

nessuno l'ha gestito, è tutto un passacarta per adesso arriva qui al metodo do action, confirma ancora, quindi ancora nessuno l'ha gestito, è tutto un passacarta per adesso,

arriva qui al metodo do action, eccolo qua, finalmente siamo arrivati a qualcuno che forse

se la prende in carico, cioè ha invocato praticamente in fondo il metodo do action alla

fine di tutta questa fiera, che poi è quello dove si andrà sempre a lavorare, ok? Si lavorerà sempre sul metodo i do action

e qui comincia a dire

che azione è,

è l'azione insert, no, edit, no, view, no, find, no.

Fino ad un certo punto.

Nessuno ce l'ha qua dentro,

delega ancora al padre

v3 controller edith

tu come dicevo c'è tutta una gerarchia di

padre, figlio

padre, nonno e anche bisnonno

andiamo avanti

eccola qua finalmente

quindi se l'action è uguale a action confirm

allora fa il metodo do confirm

ci entriamo dentro

e adesso siamo tornati a vt.controller.persistent,

siamo tornati a questa gerarchia,

e qui dentro cosa farà?

Dice,

in base allo stato,

perché il confirm è sempre confirm,

il confirm è anche in fase di salvataggio,

di insert, di edit,

quindi,

di report, quando vengono prodotti report,

sempre l'azione è sempre confirm,

diciamo ricerca, ma l'azione è sempre confirm.

Quindi poi dici, ok, è un conferma,

ma è un conferma di insert e quindi devo inserire,

è un conferma di edit e quindi devo fare aggiornamento?

No, è un conferma di find, perché sono in find.

E allora fa questo metodo, do confirm find.

Entra qua dentro e poi è sua responsabilità, quindi ci fermiamo adesso a questo livello,

altrimenti sta a due milioni di classi, poi magari più avanti ci andiamo. Comunque il risultato

finale è questo, che all'interno del do confirm find, eccolo qua, finalmente c'è qualcuno che fa

qualcosa, cioè esegue la ricerca, questo internal confinement farà la ricerca

e mi torna il risultato della ricerca,

finalmente qualcuno fa qualcosa.

Quindi, tutto

questa cosa qui per dire che

noi adesso vogliamo

intercettare

l'evento di ricerca

e quindi per farlo

dobbiamo

reimplementarci il metodo

do confirm find

dove nel nostro controller

corso V3

qua

ok?

a livello di giro?

ok ok, adesso dai sono il 56

quindi prima di fare proprio la modifica

ci fermiamo qua, intanto volevo

introdurvi il giro, quindi insomma avete

chiaro che il lato client

si sparano queste due action

con un codice che poi dopo vengono intercettati

vengono intercettati da questo

metodo do action, che comincio a fare?

in base all'if l'azione questa, if azione quest'altra

faccio così o faccio cosa

quindi poi

riusciamo a capire che se l'azione

è confirm, giusto per capirci

io per intercettare

l'azione confirm, potevo fare un do action e intercettare direttamente qui.

Oppure è più pulito, io so che poi in cascata, perché abbiamo visto in debug, un debug abbastanza semplice,

che poi di default questa azione di ricerca viene gestita dal metodo confirm find, quindi io mi rimplemento direttamente questo metodo.

ricerca viene gestita dal metodo con FearFind, quindi io mi rimplemento direttamente

questo metodo.

Va bene.

Ok, allora ragazzi, ci facciamo

pranzo e ci ribecchiamo qui al solito

alle due sull'altro evento del pomeriggio.

Va bene?

Perfetto.

Ciao.

Ciao a tutti, ciao.

Grazie a tutti.



-----------------
VIDEOLEZIONE 04 :
-----------------

rieccoci ciao a tutti ragazzi

ciao Ciao. ma aspettiamo solito un po di tempo arrivano gli altri e poi iniziamo

un Grazie. ok Buon pomeriggio.

Buon pomeriggio.

Buon pomeriggio.

Siamo quasi tutti, aspettiamo un altro po', 30 secondi e poi iniziamo. Tanto mi viene lo schermo.

Pronta.

aspettiamo un altro po rifacciamo un attimo un recap di dove c'eravamo lasciati per ripartire

il tom cat yes allora avevamo aggiunto e visto il widget della find 3 ok con cui selezionare i nostri studenti.

Quindi abbiamo visto come si aggiunge l'elemento di find3,

come l'elemento di find3 debba essere collegato ad una proprietà,

essere collegato ad una proprietà, la proprietà del controller di tipo lista che accol sì, dicevamo, che in base agli studenti che sono

stati selezionati dobbiamo poi filtrare di conseguenza i corsi. Quindi se cerchiamo,

ad esempio, il studente Giuseppe Bianchi Giuseppe, dobbiamo mostrare soltanto i corsi dove partecipa Giuseppe Bianchi.

Poi abbiamo visto un attimo come funziona il modo con cui comunica il client verso il server. Quindi, questo qui, insomma, che tutti quanti i bottoni, ma anche poi i bottoni che creeremo noi,

quindi qualsiasi cosa che deve interagire con il server,

dovrà inviare questa do action.

Quindi invocare questo JavaScript specificando un identificativo dell'azione che si sta compiendo.

Andando a fare tramite un debug, insomma,

per cercare di capire chi intercettava questa azione confirm,

siamo andati a finire a questo metodo confirm find.

Quindi adesso noi cosa facciamo?

Iniziamo, insomma.

Intercettiamo questa azione perché?

Qual è il nostro compito?

Sappiamo che qua dentro nel confirm find poi lui farà effettivamente la ricerca, eseguire la query, tutto quanto.

Perché vogliamo iniettare, quindi sfruttiamo il fatto che rimplementiamo questo metodo, perché vogliamo iniettarci prima di eseguire la query il nostro filtro relativo agli studenti selezionati perché noi ce l'abbiamo qua però noi sappiamo che i filtri

in qualche maniera

li dobbiamo passare

alla nostra classe di query

nel nostro corso query

perché è lei che farà la query, no?

ok, perfetto

quindi cosa facciamo?

facciamo, facciamo

dentro il document find facciamo questo

get find filter

ci prendiamo la mappa di filtri

put

lista

studenti, poi c'è il nome del filtro che diamo

e qua come valore ci mettiamo

studenti selezionati, la mia ristro ok lo

siamo soltanto come per come per metterci nel mezzo quindi poco prima di fare la ricerca vera e propria

intercettiamo l'evento e iniettiamo nella mappa dei filtri questo filtro qui.

A questo punto vediamo cosa ci arriva sul corso query.

Quindi qua dentro cosa faremo sulla classe di query?

Faremo, quindi lo sta studenti è il nome del filtro,

che aveva l'ore sempre.

Faremo,

if his filter present

is a student

if filter value

is a student Questa studenti.

Vediamo cosa ci sta.

Aspetto qui, il punto di debug.

Quindi qua faccio aggiungi.

Aggiungo Giuseppe.

Ricerca. Is filter present list

studenti? Sì

che ci sta dentro

ecco qua vedete l'id

l'id del mio, quindi è una lista

che conterrà l'id degli elementi che sono stati

selezionati

quindi

adesso cosa occorre stati selezionati. Quindi,

adesso, cosa occorre fare? E qua bisogna adesso un po'

lavorare di più sulla query,

ok? Adesso non è che ci concentriamo tanto a come

bisognava fare la query, però, in linea

generale, sicuramente

ad esempio la query non potrà essere

soltanto questo, perché dovrò mettere

in... ma, c'è un ultimo, ci sono diversi

modi per fare adesso questa query.

O mettiamo in join la tabella Sasa, corso, studente,

oppure qui potremmo fare anche semplicemente un exist, ad esempio, forse ci rimane più facile senza stravolgere tutto quanto.

Quindi SQL più uguale,

scriviamoci la vaquale, va prima.

Adesso ci avveremo.

Select.

Salazar di corso. Avremo lì di un modo potrebbe essere questo, no?

Questo studente per, che colonne adesso qual era? Un RCR Code e CS Corso.

e cs corso.

and cs student è uguale 4, in questo caso no, anzi in 4 perché sarà una lista.

Ovvio che però dobbiamo stravolgere un po' tutto qua. Oppure facciamo così.

cs course from

where

cs

student

ok?

possiamo fare una cosa di questo genere

quindi

quindi

quindi

facciamo filter value

SQL più uguale

e che caspiterina

and CR code

in

CR code when

per il studente e qua dobbiamo mettere

un in, cioè la lista degli studenti.

Ora, per fare questo,

intanto qua creiamoci lo spazio, quindi è più, più, più.

Ok.

Ci sono delle classitine di utilità Non mi pare che l'objetto SQL gestisca le liste. Quindi c'è la list utile.

Questo.

Questo.

Sì, dovrebbe essere questo, questo, list.utils, ad esempio.

Ce la possiamo costruire come ci pare, questa è una classe di utilità,

però non capisco qual è il package.

SG library.utils.

Perché non lo ho?

Perché faccio un cf.

Sì, lo stavo aprendo

forse questo me li ho aperto liste nell'utils

ok, quindi endlist utils.to comma separated spunto tu comma se parete o ma se parete di nostri in tu

un attimo attendere breve

cerco prima la classe senza che ci stiamo aggirando intorno. Grazie. Ok, questo qui.

Mi pare che ci abbia anche la logica, perfetto, ok, condivido.

Tanto non è tanto importante perché poi ognuno la stringa e la può costruire come vuole,

però ci sono delle classi di utilità che ci possono essere tornare utili,

ed è questa qui, SQLUtils, non era listUtils, era SQLUutils che sta

su un po' dappertutto come classe

però quella che ci interessa

era questa

psg library db

punto

e

collection to com separated string sono una questione di oggetti una stringa delle

trasformazioni se quale degli elementi separati da virgola utile quando si vuole fare una condizione

di perfetto quello proprio quello che cerchiamo e quindi quali passiamo filter valio che la nostra

lista che vuole anche giustamente qui filter value noi lo prendiamo come oggetto,

quindi dobbiamo castarlo, noi lo sappiamo che è una lista perché lo stiamo passando noi questo filter,

quindi lo castiamo in maniera diretta.

Proviamo, vediamo adesso cosa accade

se quelle finale

where ncrcode in

perfetto

ecco qua, primo corso, secondo corso

ok, perché il corso è il corso, sono i corsi dove c'è Giuseppe Bianchi.

Ecco qua, Giuseppe Bianchi.

Togliamo il breakpoint, Giuseppe Bianchi.

E anche qui su studenti abbiamo Giuseppe Bianchi.

Perfetto. Se andiamo su...

aggiungiamo...

L'altro era Pippo Pluto, mi pare.

Sì, lui sta su primo corso e primo corso bis.

Perfetto.

Se ci metto sia Pippo che Giuseppe...

Perfetto.

Trovo il primo e il secondo

e il primo corso bis.

D'accordo?

Ok.

Insomma, così si conclude

la nostra find3.

Insomma, abbiamo anche ripassato un attimo.

Con questo esercizio della Find 2 e della Find 3,

ci è servito anche un attimo per capire l'importanza della classe di query,

quindi non solo nel gestire i filtri che mette l'utente,

però su studente query abbiamo visto come ci siamo gestiti questo filtro,

che in realtà chi mette? Noi, quando clicchiamo sulla Find 2,

di questo filtro che in realtà chi mette noi quando clicchiamo

sulla find 2, vi ricordate?

Quindi quando ci sta la find 2

abbiamo detto che

su

su

su

corso

quando abbiamo definito la FIM2

li abbiamo iniettato

noi abbiamo detto guarda fammi

applicami questo filtro in maniera da dire

da istruire il controller degli studenti

a filtrare

questo filtro

e quindi poi il filtro viene applicato

a livello di

studente query

quindi qua ce lo siamo gestiti

quindi un filtro non messo dalla maschera

ma gestito da noi.

E la stessa cosa alla fine l'abbiamo visto anche adesso sulla fine 3, per cui gli studenti selezionati in fine 3 poi sono passati come filtro qui,

prima di fare la ricerca, su lista studenti e poi lista studenti viene gestita dalla classe di quale.

Va bene?

Ok, perfetto, perfetto, perfetto.

Fine.

Per quanto riguarda la gestione delle pagine standard, fine.

gestione delle pagine standard fine quindi abbiamo visto tutto quello che serve sapere per gestire una pagina standard che ci permette di fare nostre operazioni crad di ricerca insert edit

cancellazione sia per quanto riguarda le testate sia per quanto riguarda i dettagli

riguarda le testate sia per quanto riguarda i dettagli

adesso se ci sono poi vediamo una pagina non standard quindi avete domande in generale volete rivedere volete rivedere qualcosa gli esercizi che abbiamo fatto sono anche ripeterli tanto va bene

ok andiamo

andiamo avanti

ok questo mi serve

questo mi serve

questo lo chiudo c'è un po di polizia

allora esercizio 6

esercizio 6 parleremo e service manager allora vogliamo creare una serie di pagine web, anzi una pagina web in realtà, dove l'utente può creare un nuovo corso in una maniera un po' più veloce, quindi un wizard.

Nel wizard l'utente inserirà semplicemente la descrizione del corso e il nome completo dell'insegnante questa maschera qui

descrizione insegnante un tasto create quando clicca sul tasto create il sistema automaticamente

assegnerà alcun corra al corso un codice con il formato

C underscore è un numero incrementale, che ci gestiremo tramite sequence.

E la start date del corso sarà la data di oggi.

Quindi vi ricordate che il corso, in questo momento, quando facciamo un nuovo,

ha sei campi.

Quindi tramite Google Wizard noi chiederemo all'utente solo descrizione

e l'insegnante

il codice viene calcolato in automatico

la data inizio viene calcolata in automatico

ok?

dopo non ci rimettiamo qua a questo nel wizard

però intanto iniziamo

con questa cosa qui

va bene?

quindi

come si fa?

allora come si fa? allora

innanzitutto

partiamo

allora in questo caso la prima cosa da sapere è che

non abbiamo

un modello

o meglio, non abbiamo

un modello, una classe di query

o altre cose così come l'abbiamo intese

fino adesso.

Quindi stiamo proprio giusto un attimo per cambiare logica.

Tutto quello che abbiamo visto va da parte.

Quindi quello che abbiamo visto fino adesso è come si creano le pagine standard.

Abbiamo detto che le pagine standard seguono il pattern MVC

e abbiamo visto come si fanno tutte queste cose qui

chiuso

ci torniamo possiamo ritornare così però ecco se avete domande fatemela adesso perché adesso

cambiamo proprio abbandoniamo l'unica cosa che rimarrà rispetto a quello che abbiamo detto fino

adesso che ci sarà sempre un controller con un mapping e ci sarà la GSP.

Il resto è tutta roba nuova.

Quindi tutto quello che adesso andavate a spiegare, non c'entra nulla.

Non create dei collegamenti, non cercate di creare dei collegamenti a quello che vi ho spiegato prima,

perché non c'entra nulla.

Ok?

L'uso un attimo per fare un reset.

Quindi, io su Caesar

creo un altro package

Caesar.wizard

vedo tutto

qui così partiamo da 0

e come dicevo l'unica cosa che ci sta sicuramente

su questa wizard ci sarà

un controller perché il controller ci serve

perché è il nostro entry point

mettiamo un mapping, quel mapping

corrisponde a un controller

che poi dopo

invocherà una gsp

scusate

quindi facciamo new

class e Scusate. Quindi facciamo new class wizard v3.

Wizard v3, w3, extend.

sempre il nostro un tre controller per system

ok anzi prima ancora creiamoci anche la gsp perché poi la dobbiamo comunque dichiarare nel metodo init quindi creiamoci anche la gsp la creiamo dentro si anche cesar sì

no, non ho creato la vega per tella qua

new fold wizard Ok.

Ecco ci mettiamo wizard e gistro.

Partiamo da una gistb che può essere anche quella di ad esempio di find

che abbiamo già visto

me la copio

la incollo

oppure prendiamo dal template del documento

gli snippet

e lo svuoto nei tag

start, you can edit from here

me la svuoto da qui in realtà devo togliere anche un altro paio di cosette

cosa devo togliere?

devo togliere l'inclusione della bottoniera standard

bottoniera standard non ce ne servono perché di standard non c'è nulla

poi qua lo vero comunque

in questo caso la gesp l'ho copiata dalla pagina di find quindi anche find result

quali diamo un titolo

quali diamo un titolo della pop questo è il titolo della window questo titolo della app, questo è il titolo della window, questo è il titolo della pagina, ok?

E dentro adesso inizio a disegnare la mia pagina, ora forse l'ho svuotata un po' troppo perché mi serviva il pr.

varie sono una tabella le mie varie righe colonne e quindi il primo campo

descrizione secondo è l'insegnante quindi descrizione

descrizione

insegnante

poi

qua dovrò mettermi il campo di input text

come avevo sempre detto e fatto

però adesso

però adesso

devo fare ovviamente anche il link property

perché devo linkare, devo collegare

il mio campo della view al server

devo fare il bail binding no però questo link property adesso

non lo posso fare come ero abituato nella pagina standard ad collegarlo alla classe di query oppure

collegarlo al bin perché non ho niente di tutto questo,

qua non seguiamo il pattern MVC

quando parliamo di pagine non standard,

tutto un po', c'è un GSP che fa delle cose,

è un controller, fine.

Quindi, solo il controller abbiamo,

diciamo, lato server, ok?

Quindi noi cosa faremo?

Faremo comunque sempre un link property,

lo copio sempre da l'altra pagina, faremo comunque un link property, però questo link property stavolta,

filter via, questo non ci interessa, su property name dovrò mettere il nome di una proprietà il cui source è il controller.

il cui source è il controller.

Quindi utilizzeremo il controller.

Il controller non soltanto eseguirà le varie azioni che poi adesso andremo a fare,

ma conserverà anche lo stato della pagina.

Quindi tutto quello che l'utente metterà nel campo descrizione verrà mandato al controller.

Quindi io qua magari scrivo property name description, source source controller quindi qua sul mio controller che farò string description

description description

ok questa cosa qui sotto

insegnante

il nostro campo di testo lo

circondiamo di

property name feature

source controller

quindi qua avrò

string feature net feature In the teacher.

The teacher.

The teacher.

Ben.

e per adesso ci fermiamo qui adesso però una cosa più importante dobbiamo creare

dobbiamo creare la il metodo di in it per inizializzare il nostro controller quindi lo

copiamo vergine da dallo snippet

quindi sappiamo che per fare un

per design the controller è questo

me lo copio

ma lo depuriamo delle cose che non ci servono

faccio l'import

quindi

non abbiamo classe di query

quindi va via

abbiamo una sola gsp quindi non è che serve di specificare edit insert view o altro

allora intanto scriviamo la gsp si anche

si sauré zard pulizia gsp quindi tutto questo non ci serve

e lo inizializziamo a questo secondo me noi potevamo fare anche direttamente così. Togliendo anche tutto questo.

Facciamo un attimo entrambe le prove.

Quindi io questo me lo metto perché adesso mi sfugge.

Quindi facciamo così.

E gli diamo direttamente la gestire.

Non ricordo se comunque uno status, per quanto li stati sono lì gestiremo cioè che

ci sta fa in the edit insert non c'è niente ok però mi pare uno status iniziale comunque di

ricordare che deve andarci poi questo via non ci interessa non è che gestiamo bin non possiamo

modello non gestiamo niente fine guardaperiamo che succede intanto.

Intanto vediamo quello che abbiamo fatto fino adesso.

Quindi abbiamo creato la nostra gsp,

definito il nostro controller.

Ultima cosa, dimenticavo,

sempre il nostro mapping.

Quindi qui sotto che faccio?

Faccio mapping.sisa.wizard, ad esempio,

uguale sian.sysar.wizard.wizard v3.

Fine.

Mi fermo qui.

Non vado a definire questa seconda riga del bin

perché un bin io qui non ce l'ho

seguiamo l'hunt

e seguiamo il server

Grazie. ok ok

quindi abbiamo detto

sciser.wizard.do

sì, infatti

infatti non serve neanche

in sciser lo stato, ok?

quindi alla fine è solo questo

dirgli praticamente qual è la GSP da aprire.

Vedete che abbiamo praticamente un init minimale.

Ok, quindi adesso abbiamo la nostra GSP.

Perfetto.

Adesso dobbiamo implementare un po' la ciccia.

La ciccia significa che bisogna creare innanzitutto il bottone qua, Create,

al cui clic implementare le logiche che sono descritte qua, quindi di creazione del corso.

Quindi molto semplicemente nella nostra gesti buttiamo un bottone.

Non sono un mastro HTML, però insomma, l'importante è mettere il bottone.

Con lo span 4 lo mettiamo qua e qui dentro ci mettiamo il bottone.

lo mettiamo qua e qui dentro ci mettiamo il bottone.

No, facciamo il boot type button.

Button, value, crea il corso. Per far sì che al clic del bottone venga invocato il controllo, cioè inventare le nostre logiche, qui dentro cosa dobbiamo fare? action, quindi ve lo diciamo prima, action e ci inventiamo un'azione.

Ad esempio

the underscore corso.

Lato controller

a questo punto, cosa dovremmo andare a

questo è anche scritto qui nello snippet

quindi troviamo qui sotto

eccolo qua

e implementarci il metodo doAction

che abbiamo visto prima

ma un super doAction lo facciamo per tutte le altre azioni

standard

vari eventuali

comunque

qui intercettiamo la nostra

che ci interessa

e facciamo

if

crea corso

equals

2Action

e'

2Action

scusatemi

allora facciamo il metodo E inizio action, scusatemi.

Allora facciamo il metodo doCreaCourse.

E ciò che lo creiamo qua tutto.

Protected.

DoCreaCourse.

Bene. ok tornato non object perché poi alla fine quello che bisogna sempre tornare questo

che è la strada di corso questo è semplice per vedi torna dobbiamo tornargli un qualcosa che fondamentalmente la pagina dove

bisogna andare fare che la specie for volvo dire rimani sulla stessa quindi aggiornati Perfetto.

Allora.

Un secondino.

Ok.

Allora.

Quindi qua dentro metteremo le nostre logiche per creare il corso d'accordo?

ora

per poter creare il corso cosa dobbiamo fare?

dobbiamo ovviamente interagire con la base dati

d'accordo?

un secondo solo

dobbiamo interagire con la base dati

quindi introduciamo un paio di concetti

prima di iniziare a scrivere codice

il primo concetto importante è quello di connection pool

nel senso

Arias gestisce le connessioni

verso il DB all'interno di un pool

di connessioni. Quando parte

Arias, la startup,

una delle primissime cose che fa nel log

è questo, vedete?

Crea una serie di connessioni.

Quindi non è che ogni volta che ha bisogno di una connessione verso il DB per fare un update o una query crea una connessione verso il DB.

Niente di trascendentale insomma, concetti triti e ritriti.

Quindi in fase di partenza crea una serie di connessioni, le parcheggia all'interno di questo pool, quando un qualsiasi verticale, una qualsiasi

funzionalità applicativa

deve interagire con il database

si fa prestare

dal connection pool

una di queste connessioni

la utilizza, fa quello che deve fare

e poi dopo, quando ha terminato il suo lavoro

la restituisce al pool in maniera che poi sia

usufruibile

ad altre funzionalità.

Il pool di connessioni gestisce minimo e massimo,

quindi vuol dire che in fase di startup di Arias,

anzi o meglio c'è un file di configurazione di Arias, anzi o meglio c'è un file di configurazione di Arias che poi vediamo

dove è possibile indicare

il numero minimo di connessioni

che vogliamo sempre presenti nel pool

a prescindere, e il numero massimo

di connessioni, perché questo?

Supponiamo che io abbia

10 connessioni minime e 100

connessioni massime

se io ho 10 utenti contemporaneamente 10 connessioni minime e 100 connessioni massime.

Se io ho 10 utenti contemporaneamente,

ho il primo utente che lavora,

si prende una connessione dal pool e quindi nel pool mi ne rimangono 9 di connessione.

Arriva il secondo utente,

si fa prestare la seconda connessione,

ne ho 8 nel pool e così via dicendo.

Quando arriva l'undicesimo utente contemporaneo

che chiede una connessione,

il pool ha finito le connessioni da prestare

e quindi a quel punto ne creerà una ad hoc

verso il database.

Perché lo può fare?

Perché il massimo numero di connessioni è 100.

Quindi creerà l'undicesima connessione,

arriva l'undicesimo utente,

tiene la dodicesima e così via dicendo.

Supponiamo di avere 100 utenti contemporanei che nello stesso momento,

esatto momento, chiedono una connessione,

il centunesimo utente otterrà un errore.

Quindi 100 utenti ce la facciamo, ovviamente,

perché appunto il pool si allargherà fino a coprire,

a creare 100 connessioni verso il DB.

Non appena arriva il centunesimo utente,

il centunesimo utente riceverà un errore di massimo numero di sorsi raggiunto.

Quando parliamo di errore, vuol dire che verrà mostrato,

prima nei test, nel momento che stiamo facendo le prove,

un po' l'avete visto, viene mostrata una maschera rossa,

poi se ricapita magari ci soffermiamo,

però viene mostrata una maschera rossa

con un errore, con l'escrizione dell'errore

il problema eccetera

d'accordo?

l'errore sarà massimo numero di risorse raggiunto

sarà scritta una cosa di questo genere

quindi quello che vuol dire è che sono state terminate il

numero di connessioni.

Una volta che poi il pool si è allargato, in realtà poi si restringe anche,

quindi questo per gestire appunto i momenti di picco, no?

Quindi se ci sta un momento di picco, il pool si allarga,

dopo un po', anche questo è un tempo configurabile,

piano piano il pool chiude le connessioni che sono in eccesso

verso il DB e tende sempre ad andare verso il minimo,

verso il numero minimo di connessione.

Il file dove si specifica questo è il file sul cliente, sul cliente questo, quindi qua in produzione, ok?

E il file application properties, che è lo stesso file, perché ha fatto il corso con me, e dove abbiamo

perché ha fatto il corso con me

dove lavoriamo per

specificare lo startup

delle applicazioni

quindi un application properties

di un cliente avrà anche queste informazioni

un secondo che cerco di ritrovarlo

un file magari un file di properties

di un cliente

interrompo un attimo la condivisione così ve lo faccio vedere. Grazie. non ce l'ho

sotto mano

comunque le stringhe sono queste

poi dopo magari

lo trovo

lo faccio vedere domani un nuovo vero tanto non c'è nulla di sensibile,

sono tutti i dati tecnici.

Allora, comunque adesso l'ho ritrovato una stringa, sarebbe...

Condivido

sarebbe rimesso questa roba qui application properties quindi del cliente verrà scritto

minimo connessioni 10 massimo connessioni qualsiasi, dipende

dalla dimensione del cliente, da situazioni

insomma comunque in Sardegna è già configurato

tutto quindi nulla da

cambiare, solo da conoscere

quindi quando lo troverete nell'application properties

scritto in Sardegna

minimo connessioni

Connessioni 10, massimo 30, sapete cosa significa.

Quindi numero minimo di connessioni che crea alla start-up, queste cose qui.

Massimo quello fino a dove può arrivare.

Ok.

Ok. ok allora come come faccio che quindi sappiamo che abbiamo una connessione sulla sulla base dati sul sul verso la base dati sul connection pool come faccio io verticale io che voglio implementare

la mia funzionalità,

a prendermi quindi una connessione tramite un'API,

adesso cominciamo a vedere un po' di API utili,

tramite un'API che si chiama Connection Manager.

Quello che vi interessa è PSG Library DB. di livelli di b qui potete fare

gap connection

e di va passato utente utente e anche un tema che serve proprio quando nell'eventualità in cui si arriva al massimo numero

di risorse raggiunto

in pratica stiamo dicendo

voglio una connessione

la voglio perché mi serve per questo

utente che è l'utente che è

logato, ok

questo utente non dobbiamo definirlo perché come abbiamo

visto prima è una variabile

del controller persistent

ok, voglio una connessione per questo

utente. Se hai terminato tutte le connessioni, quindi sei arrivato al numero massimo di connessioni,

sono disposto ad aspettare questi millisecondi prima di ricevere l'errore. Quindi dicevo che

una volta che sei arrivato alla fine del pool si ha un errore, uno schianto, un errore,

un'eccezione,

un errore imprevisto, massimo numero di risorse raggiunto.

Prima però magari di dare subito un errore,

sono disposto ad aspettare magari un secondo,

perché magari in quel secondo che aspetto,

qualcuno rilascia una connessione,

quindi torna disponibile una connessione.

Serve a questo questo tutto qui

surround 3 catch creiamo il catch

scusate sbagliato ho fatto ok quindi no surround 3 catch eccolo qua

e nel momento in cui,

vabbè, la connessione ce l'assegniamo,

ok,

e nell'esatto istante,

questa mettiamo,

connection,

questa è la connessione, dal try,

ok,

ci prendiamo la connessione

e nell'esatto momento in cui create il catch

createvi subito anche il final

così non vi sbagliate

ciò per fare che

vi rilascio

quindi a prescindere da quello che potrà

a prescindere da quello che potrà capitarci

d'accordo?

da quello che potrà capitare all'interno del nostro metodo

quindi noi adesso implementeremo le nostre logiche

se sbagliamo qualcosa

qualsiasi cosa succeda

oppure anche se va a buon fine

quindi nel finally

noi la connessione la rilasciamo

quindi facciamo connection manager

release connection

questo perché? Perché se fate la get connection e poi non vi dimenticate di fare la release,

voi le connessioni le prendete, prendete, prendete, prendete, senza rilasciarle mai,

prima o poi saturate il connection pool e quindi avete massimo risorse raggiunto.

Quindi sarebbe un leak.

quindi sarebbe un leak.

Ok?

Quindi prima cosa è questa,

prendere la connessione,

e qua ci possiamo anche preparare,

stiamo preparando un po' lo scale che dobbiamo fare,

quindi sicuramente la prima cosa è prendere la connessione,

rilasciarla a prescindere da quella che accade quindi noi qua dentro adesso ci mettiamo la business logic

quindi un'altra cosa sicuramente dobbiamo fare è terminata business logic il commit

dobbiamo committare la connessione non serve fare la rollback perché comunque la prima cosa che fa

release connection quando rilasciate la connessione è il proprio rollback per far sì che la connessione

prima di essere restituita al pool siano una connessione pulita, quindi a prescindere

di far rollback. Se non avete committato, rollback a tutto. Se avete committato, apposto così.

Fine. Queste sono le connessioni domande su connessioni?

no, nulla

perfetto

ok

ok, ok, ok

allora

ok

adesso introduciamo invece

un'altra API, quindi fate il connection manager, introduciamo il service manager.

Che cos'è il service manager?

Il service manager è un'API che permette di eseguire le azioni di retrieve, store e remove dei bin.

Ok, noi adesso ci siamo abitati a vedere che sul modello,

sul nostro bin, dobbiamo implementare,

ad esempio, qui, sul corso, noi abbiamo implementato

i nostri metodi store, retrieve,

e remove, e questi metodi sono, diciamo, chiamati framework.

Quindi quando noi prendiamo conferma,

in maschera è il framework che faceva tutta una serie di ragionamenti

e poi invocava il nostro metodo store.

Ok?

E basta, e quindi questo facciamo il salvataggio

nel nostro caso invece non abbiamo il framework che ci invoca

siamo noi che dobbiamo gestire il salvataggio

che dobbiamo arrivare ad invocare questo metodo store

o dobbiamo arrivare ad invocare il metodo retrieve

o il metodo remove

lo facciamo e lo facciamo tramite questo API

che si chiama Service Manager.

Il Service Manager, per poter essere utilizzato,

ha necessità di aprire innanzitutto una cosa che viene chiamata Service Context,

un contesto.

E vedremo come lo usiamo. Quindi, quindi in realtà prima di tutto noi creiamo questo

oggetto service context e poi vediamo

come lo usiamo per i service manager

il service context

sotto psgx services

e vuole come informazioni minime poi vediamo cosa altro possiamo metterci

l'utente

possiamo passare un utente di login

un altro si può passare altre informazioni tra cui ad esempio, questo è importante la connessione

di context.setConnection

perché è importante?

perché poi questo service context

lo dobbiamo passare al service manager

per fare le nostre operazioni

ad esempio

per fare un salvataggio io avrò l'API

che si chiama Service Manager,

vedete sempre quello sotto psgx services,

service manager.save.

Il binder adesso vediamo che roba è, però vedete che per l'operazione di save

devo passare il contesto, cioè sto dicendo fammi il salvataggio

utilizzando questo contesto.

Dal momento che nel contesto gli avviasciamo la connessione, lui l'operazione di save la farà con quella connessione.

Questo è utile, quindi se io devo fare più operazioni, voglio che tutte le operazioni vengano fatte con la stessa connessione,

li devo passare allo stesso contesto.

O quantomeno devo passare la stessa connessione al contesto che vado utilizzare capito tutto qui questo utile ad

esempio ne so se devo salvare un bindi testata e poi i bindi dettaglio devo lavorare sempre con la

stessa connessione se faccio il contesto

commit solo alla fine, se faccio il commit di volta in volta non fa nulla, ma se faccio il commit solo

alla fine e le due connessioni sono diverse, il dettaglio non vede il padre, schiatta. Bisogna lavorare con la stessa connessione.

Diciamo che sempre, normalmente, eccezione fatta magari per quelli che possono essere vari casistiche

particolari, è sempre cosa buona e giusta lavorare con la stessa connessione.

è sempre cosa buona e giusta lavorare con la stessa commissione.

Ok, quindi questo è lo scopo insomma del service context,

far sì che tutta una serie di operazioni che facciamo con il service manager vengano fatte con un determinato contesto.

Poi facciamo ad esempio appunto il...

adesso possiamo fare l'esercizio, insomma abbiamo introdotto tutto.

L'esercizio ci dice che

vogliamo creare un corso

in automatico, settandogli un po' di

proprietà in automatico

e altre proprietà

prendendo da quelle che ha inserito

l'utente.

Quindi innanzitutto dobbiamo crearci

una nuova istanza di corso

che poi valorizzeremo

in maniera opportuna e poi andremo a salvare.

Come si crea un'istanza di un bin?

Non posso fare direttamente

corso, mio corso, uguale mio corso.

No.

Anche se si può fare a livello di Java,

non va bene.

Si fa così.

Si fa così.

ServiceManager.getObject e questo metodo ha bisogno di tre informazioni.

Il primo, il nome del nostro bin che vogliamo istanziare.

Se vogliamo istanziare un corso punto class

un po che ne vuole vuole la stringa

una classe vorrei la stringa che rappresenta tutto il nome il full name della classe questo

vuole ovviamente un contesto con ult'ultimo parametro, questo già abbiamo visto,

e poi vuole opzionalmente la primary key.

Perché opzionalmente? Perché questo get object viene usato sia se io voglio creare un corso nuovo,

sia se io voglio recuperare un corso già esistente,

e la discriminante sarà il valore della chiave primaria.

Quindi se io qua ci passo null,

passo la chiave primaria. Quindi se io qua ci passo null, passo la chiave primaria null,

allora,

qua mi dice di aggiungere le exception,

faccio così, cache exception, tutto quanto.

Quindi, se metto null allora,

lui mi tornerà un oggetto,

questo binder interface,

qua spiego un cos'è,

comunque mi torna un oggetto

che mi rappresenta un corso nuovo,

vuoto, vergine

quindi pronto per l'inserimento

se io qua invece gli passo

ad esempio C1

allora lui mi tornerà

un'istanza di corso

recuperata da...

al db cercando il sul db il corso che ha come chiave primaria c1

e poi adesso vi passiamo un altro che noi vogliamo inserire e quindi mettiamo parametro vuoto e lui ci torna

questo oggetto

scusate un secondo

ok ok quindi dicevamo, questo mi torna un oggetto

che rappresenterà il mio corso vuoto

però non mi torna direttamente un'istanza di corso, vedete?

mi torna un binder interface

ah quindi, altro concetto, cos'è questo oggettino qui?

Ah, quindi, altro concetto. Cos'è questo oggettino qui?

Praticamente è un'altra di wrapper dell'oggetto reale, cioè quando noi qua ci tornerà questo binder,

noi potremo fare... Sì, è un wrapper che si costruisce intorno all'oggetto, quindi per intenderci se facciamo bin.getbin, allora questo sì che sarà l'oggetto corso,

quindi è semplicemente un wrapper, perché usiamo un wrapper per aggiungere tutta una serie di funzionalità che poi vi spiego

intorno al bin

ok

quindi

si lavora

quindi diciamo quando si lavora col service manager

non si lavora mai direttamente

sul bin corso

per intenderci anche quindi non soltanto

non invocheremo mai direttamente

i metodi store, retrieve, remove,

ma adesso impostiamo i valori del nostro corso, non agiremo nemmeno direttamente con i suoi metodi,

getCode, setCode, description, ok? È voluto questo, poi spiego perché.

E quindi utilizzeremo questo oggettino qui, tipo Binary Interface interface come sorta di schermo. Quindi noi ci interfacciamo con lui e poi

lui che in cascata si interfaccia con il bin che custodisce al suo interno che è di tipo corso.

adesso cosa facciamo?

vogliamo

ad esempio

iniziamo settandoli le informazioni

che conosciamo, che sono quelle che ci

passerà l'utente

come si fa?

per settarli ad esempio, adesso dobbiamo impostarli

l'utente metterà la descrizione

insegnante iniziamo da queste impostiamo la descrizione l'insegnante dobbiamo fare binner punto set property value

e dobbiamo dire il nome della proprietà che vogliamo settare quindi description questa qui sul bin quindi a modi stringa

così

il valore che ci vogliamo mettere, ci vogliamo mettere

il valore, questo qui, che abbiamo sul

controller, description

il service context

e ora, li ripassiamo lo stesso

capito?

vedete? io non faccio direttamente

corso, set e description, faccio così

set property value

questa cosa anche per l'insegnante

quindi faccio binder set property value

feature

context Ora aggiungiamo le altre due proprietà che ci chiede l'esercizio. Noi vogliamo assegnare automaticamente al nostro corso

il codice C underscore una sequence

e la start date ha le date di oggi.

Incominciamo dalla start date.

Facciamo quindi bind

.setPropertyValue

startDate

startDate, esatto, property value start date

start date esatto ho scritto il nostro start date valore di oggi quindi java util date

la stringa del codice del corso invece abbiamo detto che deve essere

una cosa formato del tipo c underscore e un numero incrementale

questo numero incrementale ce lo andiamo a prendere da una sequence

quindi creiamo una sequence intanto sul db

perché sul corso non abbiamo fino adesso creato sequence quindi ce la creiamo ad hoc

ad esempio una cosa del tipo create sequence sec underscore hard underscore corso underscore wizard Quindi toglie underscore.

Quindi questa sarà la nostra sequence.

Come posso leggere qui direttamente il valore della sequence?

Quindi fare next val per intenderci.

Tramite la classe...

Non mi ricordo come si chiama sequence manager, ecco la sequence manager di psg.

Quindi, next sequence mi pare.

No, sì, no.

Sequence manager di psglibrary.db.

Get new value ripassiamo la stessa connessione

e ripassiamo il nome della sequence

ok

adesso faccio Ok?

Adesso faccio Tinder.setPropertyValue.

Questo, che è deprecato, vedete?

Non ho deprecato, non ho sbagliato a prendere metodo,

ma è deprecato, non ho segnato Eclipse. E' quest'altro, ho tre parametri.

Code, il cui valore è codice corso,

e il contesto è questo.

Va bene?

Finito.

Abbiamo settato tutte le nostre proprietà.

Non ci rimane che salvarlo.

E quindi per salvarlo ci rimane da fare solo questo

service manager punto save il binder e il contesto

con

stiamo domande Siamo?

Siamo domande?

Ok.

Quindi tutto quello, trovate tutto quello che vi ho spiegato qui, anche qualcosettina in più, comunque adesso ce lo vediamo, quindi anche un po' di altre cose che si possono fare con i service manager.

Ah, sì, qua come si mostrano gli errori?

È anche scritto.

Mettiamo caso che qui ci sta un'eccezione nella nostra logica di business,

quindi vogliamo mostrare un errore parlante in qualche modo all'utente. Allora, se voi fate così, trovo un'euroentime exception,

quindi se è tornato un'eccezione non gestita, quello che otterrete come risultato è una maschera rossa.

Quindi vuol dire che l'utente gli schianterà la maschera, errore bloccante, riparti dal via.

La vostra maschera sparisce se gli viene rinpassata una maschera rossa.

Quindi è più carino in realtà l'errore in qualche modo gestirlo

e questo vale sia per, nel caso in cui lavorerete sulle maschere standard

che sulle maschere non standard, come questa.

Il metodo è add global.

Add error e come primo campo il codice del tipo di errore, global, globale.

E qui il messaggio dell'errore, quindi che ne so. ritogliamo la tro

altra cosa importante sulla visione degli errori

oltre ovviamente a mandare a stampare l'errore all'utente,

l'errore dovete saperlo pure voi che caspiterino è caduto,

quindi deve andare anche a finire in qualche modo sui log applicativi.

Allora, dentro Arias utilizziamo Log4j per fare il logging.

Quindi dovete andare a definire innanz, quello di log4j.

Get logger di wizard v3.class.

Passiamo quindi il nome della classe dove creiamo il log.

E poi qua semplicemente farete

log.error e virgola

ok

questa è la gestione dell'errore insomma

questo esercizio serve anche a questo

facciamo una prova

mettiamo un punto di debug

qui

buttiamo via tutto

rifaccio l'ant

e restarto.

In questo caso, non essendo il XML relativo all'oggetto bin,

dobbiamo settare in noi la lunghezza diretta all all'interno della GSP Sì, sì, bravissimo

Qua tutto

Qua tutto quello che abbiamo visto

Su model BIN

Lo perdiamo insomma

Quindi qua con pagina non standard

Facciamo tutto, tutto, tutto, tutto

C'è una classe crea il corso

c'è una classe

non mi ricordo

comunque c'è una classe CSS

che potete usare per renderlo ovviamente

omogeneo con il resto

con il resto

come un esempio

tanto questo è molto banale

basta fare ispezione

quindi vedete che il bottone qua è diverso da quello del CSS.

Basta dargli questa classe qui.

E la diamo, va, se faccio un po' più belle.

Qui qua, type input class button fixed. ok

adesso che si ho

corso wizard

l'insegnante io che è un corso wizard, l'insegnante io, che è il corso?

Tata, siamo andati qua dentro, ok?

Quindi, è stata invocata 2Action, è stata intercettata il CreaCorso,

quindi prendiamo la connessione, eccola qua, una bella connessione,

prendiamo la connessione, eccola qua una bella connessione

crea, questo è l'utente

c'è un po' di debug

questo è l'utente che come vi dicevo

siccome siamo in debug

non abbiamo fatto una login, allora ce ne viene creato uno

di default

e se creiamo il contesto

esettiamo la connessione

e questo è il service context

con l'utente e la connessione va a finire in questo oggetto parameters

creiamo il bin

e vediamo qua dentro cosa ci ha dato

questo qui è un oggetto che ha tutta una serie di cose in più

a corretto, poi vediamo che cosa sono

quindi a che serve questo binder

però vedete che al suo

interno incapsula un bin, noi andiamo ad esplodere e vedete tutto in all, ha fatto semplicemente

un'istanza nuova. Qua adesso e t, ci sono rimasto in al perché sono

dimenticato un pezzettino, ok, stop, bisogna mettere poi, quando si invoca, allora, per

Per leggere in realtà, per leggere i parametri di input che mi arrivano dalla maschera,

o due modi, uno brutale e uno meno brutale.

Più brutale è che le andate a leggere nella request,

fate REC, GET PARAMETER, qui dentro se siete andate a vedere,

ci trovate insomma i parametri.

Oppure come stiamo facendo adesso, che è più pulito,

è quello del modo in cui facciamo noi, creiamo i vari oggettini,

però per far sì che queste vengano ribaltate,

bisogna fare come prima istruzione, quindi magari la facciamo qui.

Tutto, tutto, tutto. Un secondo. Ok, potrei...

C'è un vuoto di memoria, ragazzi, scusate un attimo,

se non si scorda pure come si chiama. set data properties

mannaggia i pescetti

set data properties

e brek qui qui pare nulla.

Questo set data properties

in buona sostanza è quello che di fatto

fa quel lavoro che dicevano,

volendo stanno come parametri all'interno della request.

Quindi fa,

quindi volete leggere direttamente come parametri della request, d'accordo? Quindi fa quindi voi lo andate a leggere direttamente come parametri della request

e ricordate parametri oppure

fa lui il lavoro per voi

cioè va a leggersi

la

va a leggersi la request

e va a ribaltare i parametri della request

all'interno delle vostre proprietà

quindi nel nostro caso all'interno di description

e all'interno di teacher

ritiro su quindi nel nostro caso all'interno di description e all'interno di teacher.

Ritiro su.

Grazie. Grazie. ok quindi aggiorniamo

corso wizard

ovviamente io

abbiamo detto che abbiamo una connessione

vediamo un po'

ecco infatti adesso vedete che il description

è valorizzato teacher è valorizzato perfetto allora facciamo vabbè prendiamo la connessione

creiamo il service contest abbiamo creato il bind e adesso iniziamo a settarli le proprietà

quindi set property value description set property value teacher set property value teacher, set property value start date.

Andiamo a vedere che è successo.

Vedete che nonostante io ho fatto il set, il bin è rimasto in tonso.

Perché? Perché questa è una delle funzionalità del binder.

Cioè il binder gestisce un suo commit barra rollback.

Quindi per rendere persistente, per ribaltare tutte queste proprietà dal...

Dal bin al binder, bisogna fare,

scusate, dal binder al bin,

bisogna fare binder.comit.

Se io faccio binder.comit,

vai col service context,

sempre la versione col service context.

Adesso non la facciamo, solo per farvi vedere.

Se io faccio questa cosa qui,

a quel punto queste proprietà che ho settato

non vengono semplicemente parcheggiate

qui nell'oggetto binder, ma vengono rese effettive sul bin.

Non lo facciamo perché? Perché in realtà poi al momento del salvataggio lui fa il commit in automatico.

Ok?

Tutto qui.

Non so quali sono i casi d'uso, comunque funziona in questa maniera qui, volendo, io posso annullare le modifiche, quindi non renderle, tra virgolette, permanenti sul bin corso, perché in realtà permanente non è nulla fino a quando non sa.

Adesso faccio, mi calcolo il codice del corso, C1, promessa C1 non c'è esiste?

C1, promessa C1 non ci esiste?

Ok, c'è un descolo 1, perfetto, va bene.

Lo setto anche questo sul bin e poi faccio salva.

Vediamo che succede.

Vedete che lui ha fatto la insert?

Eccola qua.

Ha salvato.

Ha salvato con insegnante io, c1, il codice, corso wizard, di oggi.

Però ovviamente serve adesso il commit, la connection.

Ultimo step, release della connection.

Finito.

Andiamo a vedere

ancora bene siamo

sì

ok Sì, perfetto.

Ok, quindi anche questa parte è fatta. simone generale la differenza principale tra i metodi standard e non standard cioè sarebbe che

quello standard diciamo c'è dei metodi dire tra i best or remove quasi implementati diciamo mentre quadro il metodo di uno standard li vai implementare

tu la gestione pure delle connessioni giusto si nel meglio il flusso allora sempre che io

adesso facendo questo salvataggio guarda anzi facciamo rinnovere lo vediamo in del

bug così vediamo poi metto un punto di legato qua su service manager save che sapete sto facendo io

e rimetto anche un punto di debug sul metodo store del mio corso adesso qua creo scol wizard un altro

corso 2 crea il corso acqua vedi adesso sono pronto ho impostato tutte le mie cosette

dico di salvare

il corso

faccio play

vedi che vado a finire sul metodo store del bin

quindi sempre che

qua dentro ci va a finire

la differenza, come dici tu, è che per arrivare

a questo punto qui dello store

mentre nella gestione standard io non facevo nulla,

nel senso era il framework che prendeva le connessioni,

il framework che faceva tutto,

che creava il service manager,

settava le proprietà, eccetera,

nelle versioni standard,

invece nella versione non standard devo fare tutto io,

devo prendere io la connessione,

devo creare io il service context,

devo fare io il set property, questo e così via.

Ok?

Ok, grazie.

Prego.

C'è altre domande?

Va bene.

Ok, quindi questo è il funzionamento base per salvare, gestire e modificare un oggetto.

Quindi abbiamo introdotto per fare un recap, abbiamo introdotto due concetti importanti, due proprietà importanti

due API importanti che sono il connection manager

per gestire, per interfacciarmi diciamo

con il pool di connessioni che è gestito da Arias

per prendere una connessione e per rilasciare una connessione

e poi l'altra API, che è il Service Manager,

che invece serve per interagire con i miei oggetti di Arias,

quindi con i miei BIM.

Sia per, adesso l'abbiamo visto, per recuperare un'istanza

e sia per salvarla.

Poi adesso, se noi qua andiamo a guardare,

adesso vi metto magari

qui sotto

ok

io sto per distinguere

service manager

anche altre API

che sono

esempio

il service manager

punto

re

e punto

e tavol delete

e sempre a fronte, un po' come il save,

sempre a fronte di un oggetto

e di un contesto, che cosa farà?

Invocherà il metodo remove

eccolo qua, del mio bin e quindi lo cancella.

Fine.

Poi dopo l'altro metodo, abbiamo detto,

è sempre lo stesso, in realtà,

se io volessi recuperarmi un'istanza del corso

che già si sta su db, cosa farò?

Farò getObject corso.class.getName

e qui però gli passo la chiave,

quindi ad esempio c andesco room

e facciamo allora facciamo così quando ci andiamo in debug lo vediamo dopo andiamo avanti con gli

esercizi quindi quali creò abbiamo detto che fino a qui che era un corso giusto quindi faccio

se e salvo un corso perfetto facciamo che qui subito dopo anche se non serve niente solo per

vedere i metodi è me lo recupero quindi mi recupero il codice corso appena creato

e poi lo cancello e poi faccio con il sum commit metto qua un punto di debug qui

quindi qui adesso sto creando un corso C-3

salvo, committo, quindi adesso se vado sulla base dati

eccolo qua, corso Quisar 3, vedete?

adesso me lo recupero, quindi un codice C-3

eccolo qua, quindi sotto vedice C underscore 3. Eccolo qua.

Quindi sotto vediamo un po' cosa ha fatto.

Ha fatto una query sulla matabella del corso.

Ha invocato il metodo retrieve del corso.

Quindi se io adesso vado qua dentro al retrieve object,

quando vado su questo qui, su questo binder,

se io adesso esplodo l'attributo bin,

vedete che è compilato perché lo sono ripreso dal db.

Fresco fresco.

E adesso faccio la delete.

Vedete?

Delete.

Commit.

Quindi qua dentro, adesso sul db,

c underscore 3 è sparito.

Non c'è più.

Insomma, con questi tre metodi,

con questi tre metodi,

get object, riesco a fare la retrieve.

Ecco, service manager get object, faccio la retrieve.

Con service manager delete, faccio la remove.

Con service manager save, faccio la store.

Ok.

Adesso questa parte qui la tolgo,

perché non ci interessa cancellare.

Ok. Ok, andiamo avanti con l'esercizio. ok allora vogliamo migliorare il nostro wizard e oltre ai campi

descrizioni ticere insomma vogliamo anche permettere all'utente di generare automaticamente un calendario degli esami ricordiamoci no che il nostro corso gli

abbiamo associato due dettagli la lista degli esami la lista degli studenti quindi vogliamo che con

questo wizard creiamo anche non solo il corso inteso come testata anche che crei automaticamente il corso con i suoi dettagli esempio l'esami

l'utente potrà selezionare attraverso una combo box una delle seguenti opzioni

mensile il sistema genererà un esame a partire dal primo giorno di ogni mese

a partire dal primo giorno di ogni mese.

Trimestrale il sistema genererà un esame a partire dal primo giorno ogni tre mesi, semestrale il sistema genererà un esame a partire dal primo giorno di ogni sei mesi.

La descrizione di ciascun esame sarà un formato del tipo esame e poi il numero dell'esame quindi

se ne fa 12 farà esame 1 2 3 4 se farà trimestrale farà esame 1 2 3 4 basta e semestrale 1 2

Vediamo, facciamo un esercizio.

Quindi, primo step, andiamo ad aggiungerci questa combo box.

La combo box l'abbiamo già vista, come si fa, quindi frequenza dell'esame frequenza da dentro dobbiamo metterci per la

combo la combo box come si fa la combo lo troviamo sullo snippet e sopra per indice

compobox

questo è quello che dobbiamo mettere

nelle nostre

USB

ricordate che

dobbiamo mettere, queste sono per dire

se deve mostrare la chiave, se deve mostrare

l'opzione vuota

qua dobbiamo

dirli dimostrare l'opzione vuota. Poi dobbiamo dirgli qual è il nome della...

Un attimo.

Un attimo.

Però no, in realtà, diciamo, possiamo farlo sia come l'abbiamo fatto, ad esempio, nell'esercina la lista delle proprietà che voglio mettere nella select.

Siccome qua in realtà, come stavo ragionando, sono solo tre opzioni, sono stati che sono quelle,

io potrei fare una select normale e semplicemente settarmi lo stato.

Cioè l'opzione selezionata facciamoci tutto il giro

come documentato

risultato è identico

in tool wizard

mi creo un metodo

un metodo che mi torna

alla lista delle opzioni

della mia combo,

chiave descrizione, comma separated,

quindi sarà M per mensile,

E per trimestrale,

S per semestrale.

Get combo.

Get.

Se è bloccato il pc.

Ok.

Get.

Frequenza.

List, chiamiamola.

frequenza list chiamiamola

quindi qua nel wizard ci scriviamo frequenza list

e qua al solito la proprietà con cui vogliamo ribaltare

l'opzione selezionata

quindi private string frequenza

frequenza. Ok.

Frequenza.

Frequenza.

Ok.

Quindi. Adesso cosa dobbiamo fare?

Lo muciamo con il commento e lo facciamo alla fine, quindi salviamo tutto o niente. Dobbiamo creare i nostri esami ed associarli al nostro corso. Ok?

Come faremo? Faremo.

Allora, vediamo intanto come si crea un esame facciamo così

facciamo prima uno

tanto alla fine il fatto del mensile

trimestrale eccetera

e quando lo lascio fare gli altri

esercizio

è importante vedere come si fa a creare

un dettaglio

allora

bisogna...

Allora, partiamo dalla cosa che abbiamo già visto.

Quindi creiamo un oggetto esame vuoto.

Quindi l'abbiamo visto prima

come si fa?

si fa service manager

get object

in questo caso cosa devo trovare?

esame.class

get name

pk null

però

e poi il contesto, però il mio esame in realtà non è, per essere istanziato, se vi ricordate, che abbiamo definito un costruttore, quindi c'è una soluzione,

un gioco di telefono abbiamo un solo e un solo costruttore che vuole il parent come facciamo

però lo facciamo qua dire al service manager insomma che questo oggetto che sta istanziando

è diverso da quello del corso di prima di cor di corso di prima era un padre. Questo è un dettaglio, lui che è caspiterina,

non esame, non esame nulla.

Glielo diciamo andando a settare all'interno del context

queste informazioni qui.

Set parameter value service, parent object.

E qui li mettiamo,

vendor.get bin.

letbin quindi anche qua

alla fin fine

qui noi ci siamo limitati a

definire il costruttore

poi il framework che ci ha pensato a passarci un parent

la differenza è sempre con le pagine standard

abbiamo solo definito il costruttore

poi qualcuno in qualche modo

non sappiamo come ce l'ha passato sto parent

qua invece

stiamo facendo tutto noi

come siamo noi che dobbiamo istruire il framework per recuperare il parent quindi il parent te lo

dico io con è è quello che troverai dentro l'inter get mil bene quindi poi questa, giusto per un attimo per distinguerlo, questa variabile la rinomino course.

Quindi adesso questo oggettino qui non ce lo assegniamo, e questo è l'esame.

Poi per il resto è uguale.

Per il resto è uguale.

Quindi, ad esempio, su esame dobbiamo settarli...

Allora, l'id è una sequence se lo prende da solo.

Il corso se lo prende da solo perché?

perché lo passeremo qui tramite quel parent object che abbiamo appena visto

quindi dobbiamo solo dargli la descrizione, la data e il numero massimo di studenti

facciamo

mi pare che era soltanto descrizione obbligatoria

quindi set property value, description, esame, set property value con il context.

poi service mail

facciamo pure le date

binder.set

property value

data

app context no data context

no, mi idea, beh, adesso mettiamo il mio data

non tanto come lavora

e poi qua alla fine

l'ultima cosa è service manager

punto save

esame

context, va bene?

quindi questo è come si crea

in generale un dettaglio

quindi lo recuperate

allo stesso modo però dovete avere cura

prima che nel contesto ci sia

l'oggetto padre

poi per il resto è uguale

quindi settate le proprietà

e salvate tramite service manager

facciamo un attimo un giro

per vedere cosa succede sulla base dati se funziona e poi facciamo pa attimo un giro vedere cosa succede sulla base dati

se funziona

e poi facciamo pausa voce

allora

qui facciamo partire

ok Grazie. corso wizard 4

crea il corso

vediamo un po' che succede

allora lui

qui ha creato il corso

lo salva

perfetto

a questo punto lo mette qui nel contesto

guardate qua, adesso lui fa

cerca di creare un nuovo

perché abbiamo perso tornare l'esame

ecco qua l'ha creato, vediamo un po' cosa ci sta dentro

vedete avete il bin esame, ma se lo esplodiamo

vedete? è tutto vuoto perché è nuovo

però il corso ce l'ha già perché ce l'ha già

perché ne abbiamo passato un parent eccolo qua corso

bene

Discrizione, data, salva, eccola qua la insert, commit, vediamo sul db.

Quindi il SAT corso C4 l'ho fatto.

Sard esame, eccola qua, legato al C4.

Bene? Ci sono domande?

No.

No.

Ok.

Allora dai, facciamoci un po' di pausa, ci ribecchiamo qui alle 4 e 5, va bene?

Va bene.

Ok, grazie. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie Grazie Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie. Eccoci qui.

Eccoci qui.

Siamo un minutino.

Grazie. è poco rilevante, però facciamo così dopo si riallaccia con l'esercizio 6.2.

Dobbiamo creare un esame al mese, un esame al trimestre, un esame al semestre.

Quindi, quindi, quindi, qui noi creiamo il nostro esame.

Dobbiamo prenderci innanzitutto la frequenza.

La frequenza abbiamo detto che è un valore che ci prendiamo dalla combo box.

che prendiamo dalla combo box. Quindi facciamo 1. If frequenza, eh?

No, ho detto T trimestrale, S semestrale.

T equals.

Frequenza T trimestrale sarà

uguale a 3.

If S uguale a crema fs

ogni 6 mesi

ok

praticamente niente mettiamo

in for

in for each questa parte qui

quindi ogni volta, questo è importante

ogni volta ci creiamo una nuova istanza di esame

ogni esame che dobbiamo inserire ce ne creiamo un'istanza nuova

quindi Per ogni esame che dobbiamo inserire ce ne creiamo un'istanza nuova. Quindi, quindi,

increment,

12. e creiamo una per

e la data deve essere

la data deve essere

essere

primo

di ogni mese

quindi

slash

slash slash

slash Sleplo.

29.

Ecco, su framework avete un po' di dati di date.

Non mi ricordo.

Let date.

Questa.

Allora, remove data, did date,ToDate, mi pare che sia. ok ok ok

oh

oh

oh

yes

string today

string

string string to date, string to date, esatto, e il formato è dd.m.4.

ok poi che altro c'era da fare?

so che c'è la descrizione, esame, numero dell'esame

quindi

è uguale esame, numero dell'esame, quindi...

è uguale...

1...

esame...

ok...

va bene

Ah, la abbiamo avviato, non abbiamo fatto...

La combo l'avamo messa, mi pare.

Ah, forse l'avevamo...

Ah, forse l'avevamo fatto girare l'antel.

Infatti, eccola qua.

Quindi buttiamo giù e tiriamo su. Grazie. ok

ok ok ok ok ok ok che ha fatto? ciao allora

property name è sbagliato

non ho cambiato la property name

che è frequenza

il resto frequenza il resto.

Frequenza list.

Frequenza list.

Deve essere solo questo. non vissi solo no

che cosa non gli piace

Grazie. ok forse perché bisogna specificarli che il source controller

no forse sicuro perché l'abbiamo fatto anche qui

scusate quindi qua l'avevamo fatto già

source controller quindi mancava soltanto

specificare lì questo allo stesso modo

ok Ok.

Ok. ok 5, posto con esami

esami 1, 2, 3, 4, 5

d'accordo?

quindi se facciamo

corso

trimestrale

è il corso esame per C6, esatto, fa 1, 2, 3, 4 esami, marzo, giugno, settembrebre dicembre perfetto ok questa prima parte insomma è fatta ricordatevi questo insomma

che ogni volta che inserito un nuovo esame non è che dovete perché una volta è successo in passato

che in altri corsi che si riciclava l'oggetto esame che aggetto es sono ogni volta va ricreato che risolvato va bene

e qui

7 e poi qua c'è il commento

andiamo allora all'altro esercizio

portando all'esercizio precedente aggiungiamo adesso l'opzione annuale

Adesso l'opzione annuale nella nostra combo box.

Se l'opzione annuale è selezionata, allora mostreremo un nuovo campo di testo qua sotto alla frequenza che permetterà all'utente di inserire la frequenza.

data dell'unico esame che andrà genere che verrà generato ok quindi se quindi qua aggiungiamo mensile

temestrale semestrale annuale se annuale non facciamo niente cioè nel senso mostriamo un utente di mio

ok dimmelo tu la data dell'esame ok e quindi poi creiamo quell'unico esame. Quindi qua, primo step, ovviamente ci andiamo ad aggiungere

l'opzione annuale. E questo, diciamo, dovrebbe anche essere immediata, nel senso che se io

riavro, ce l'abbiamo, l'opzione annualetto. Però al click dobbiamo mostrare un campo di test per inserire la data dell'esame.

Magari anche qua a fianco.

Però un campo che deve comparire solo in quel caso, quindi se poi da annuale lo mettiamo in insieme, il campo deve sparire.

Quindi innanzitutto mettiamo il campo in maschera quindi magari

questo vedo che è un td col span 3

mi faccio uno spazietto

metto un td a fianco

quindi ci creiamo un campo di testo.

Un campo di testo.

quindi dove il tizio metterà la data dell'esame

quindi lo possiamo chiamare data esame

data esame annuale

source controller

sarà di tipo data

quindi facciamo format

facciamo il calendario

facciamo calendario ugualissimo.

Quindi intanto ci facciamo la setget sul nostro controllo.

sul nostro controllo 8

8

8 8 8 8 8 8 Grazie.

ok

ok

intanto vediamo qualcosa che abbiamo combinato

buttiamo giù, facciamo l'ant

e vediamo che uscita fuori. Grazie. ok

ok perfetto quindi qua abbiamo l'opzione e qua abbiamo la data

però questa data come dicevamo deve essere nascosta

quindi la dobbiamo mostrare se soltanto se

è selezionata l'opzione annual

e quindi questo esercizio ci serve per vedere un altro tag, library, utile,

che è quello del psgif.

Ok?

Psgif.

Un altro non fa che condizionare un blocco HTML.

Altro non fa che condizionare un blocco HTML.

Quindi ho qua dentro tutta questa parte qui del mio link property.

La circondo con un psgif e gli dico,

se la proprietà,

questo qui, frequenza, uguale,

penso per e può essere minore, uguale,

uguale a A, che è annuale, valutandolo sul controller

allora mostri

altrimenti no

dopo in realtà sull'if tag

per l'operator se vuoi andare ad aprirlo

if tag

guarda ci sto

anche java doc ci sono però

quindi

però al di là di questo

questi sono in realtà gli operator

che potete utilizzare

ok quindi

eq potete scrivere oppure uguale

vale per l'uguaglianza

n o così

è diverso

in contains, pat, greater than

lower than ok diversi ok sono tutti quelli che potete usare poi qua dentro ci sta lo switch case con tutto

quello che fa per valutare le varie opzioni ok però solitamente quello che si fa è usare il l'equals e il not equals,

quindi ce ne sono diverse soluzioni. Quindi, se la frequenza è uguale a A, vediamo un po che succede buongiorno

ok non si vede

e va bene così

annuale non appare

perché

annuale non appare

perché torniamo al discorso

che avevamo visto quando abbiamo fatto l'esercizio,

dove abbiamo aggiunto il checkbox remote sul corso.

Non c'è niente che dice...

Bravissimo, bravissimo, bravissimo, esatto.

Dobbiamo dire al server, ehi, qualcosa è cambiato.

Quindi, glielo diciamo, però qui sul nostro select, quindi quando cambia la select...

Ok, lo aggiorniamo.

Perfetto, annuale appare, mensile, sparisce.

Trimestrale, cioè niente, vedete che lui la refresh la fa sempre ovviamente,

però appena diventa annuale, eccola qua che esce fuori ora non ci rimane che l'atto applicativo

già insomma andando a gestire quindi e che doveva fa? non mi ricordo no, deve creare con la data specificata

indicata

ok, vabbè, senza stare

a fare

facciamo il

ah

i colsi

frequenza

facciamo le cose carine

questo metodo

me lo butto fuori

extract method

crea esame

if e frequenza non li farà il context ci serve

non mi pare che ci serva altro

sì

ok, non esatto Sì.

Ok, non esame.

Sì.

Sette proverbi.

Non esame un esame

usalo

ecco qua faremo

il raccorso di service context

questa è la data, un esame uguale.

ok, questo cosiddetto poi qui invece

su crea corso quando è annuale

lo invocheremo

dicendo

che la data

sarà in realtà la data

che mi ha indicato l'utente, quindi

data esame annuale

il nome esame

non c'è scritto, va, un esame annuale. Il nome esame...

Non c'è scritto. Il nome esame farà esame annuale.

If così, else.

Connection call me.

Riaviamo.

Grazie. ok Ok.

Esame annuale.

Aprile.

Vediamo cosaata al corso

il corso con esame annuale

CMS47

CMS47

perfetto, esame annuale e questa è la data di oggi

va bene?

insomma con questo esercizio abbiamo visto anche

come condizionare pezzi di codice della nostra GSP.

Ci siamo?

Ci sono comande?

Mulla.

Ok. ok una cosa importante è scritto qui

che la find

insomma c'è il source

quindi che dice praticamente

dove andasse a recuperare questa proprietà

il default come

sempre è lo detto il main object quindi qualsiasi cosa che è diversa va specificato ad esempio il

controllo però c'è anche questa find filter in più rispetto agli altri come source che però ha

valore soltanto nel caso siete su una maschera standard e siete su una maschera di ricerca in quel momento.

Il valore della proprietà è presa dalla mappa dei filtri.

La proprietà che mettete qua dentro lui la va a cercare come chiave della mappa dei filtri.

E poi va a vedere l'operatore, i proprietari, i pali.

eccetera. Allora signori, abbiamo praticamente finito gli esercizi più importanti, no? Perché

abbiamo visto tutta come si fa una maschera standard dall'A alla la z come si fa anche una maschera non standard stile wizard fine adesso

in realtà c'è rimasto 81 esercizio io speravo in realtà di fare lunedì ma semplicemente per un fatto

di quello che vi devo raccontare per poter fare un esercizio, quindi per evitare di spezzare. Sinceramente inizieremo adesso il venerdì con un esercizio che non riusciremo mai a finire entro oggi

per recuperarlo dopo il weekend.

Lascerà secondo me il tempo che trova.

Quindi, vabbè, io anticipo soltanto l'esercizio, l'esercizio è relativo alla profilatura, quindi in questo momento sul wizard io posso creare il corso e vabbè, però magari voglio creare, far sì che non tutti gli utenti siano autorizzati a usare questo wizard.

siano autorizzati a usare questo wizard quindi crearne una profilatura per far sì che se un utente non è abilitato a premere questo bottone appaia un errore bloccante quindi quindi questo questo

esercizio implica il fatto che vi devo introdurre alla questione al sistema di autenticazione di

areas e al sistema di autorizzazione di arias Quindi sicuramente è una cosa che conviene prendere direttamente lunedì.

Però abbiamo ancora un'ora e mezza, insomma, alla fine della giornata.

Intanto facciamo magari un recap di tutto.

Poi, non so, possiamo vedere un po' di debug su qualche classettina

e se ci avete domande, insomma, sono ben accette.

Allora... se ci avete domande sono ben accette. Questa giornata noi l'abbiamo riniziata dall'esercizio 5, quindi all'esercizio 5 continuiamo a spiegare.

all'esercizio 5 continuiamo a spiegare.

L'esercizio 5 abbiamo introdotto il concetto di lookup,

che altro non è che un widget come questo,

con cui guidiamo l'utente nella selezione di un valore,

un valore che non è libero, non è inserito dall'utente a suo piacimento,

ma viene recuperato a partire da una lista valori.

La lista valori viene generata da lookup.

Il lookup a sua volta, abbiamo visto una si lookup,

è agganciato ad una tabella.

Poi abbiamo anche detto, comunque sia,

che un lookup può essere che sono censiti sulla tabella si lookup può essere agganciato anche una

classe a due classi java una particolare della classe di list query in quel caso la costruzione

della lista valori è demandata in toto alla classe java che deve costruire lo statement sql e così

via dicendo.

Abbiamo visto come...

Poi abbiamo visto anche...

Abbiamo creato proprio un lookup,

quindi l'abbiamo creato da zero per quanto riguarda gli studenti in modo da poter spenderci questo lookup all'interno di un nuovo tab di dettaglio del corso.

Quindi abbiamo introdotto il tab studenti.

Questo è quello che abbiamo fatto a livello tabellare.

E poi abbiamo incominciato un po' a giocare con il lookup.

Innanzitutto abbiamo visto come faccio a passare dei filtri,

tramite la GetObjectInfo posso passare dei filtri addizionali per poter filtrare la lista valori generata da lookup.

non veniva il bottone della lista valori, non apriva la lista valori, ma mi mandava, faceva un controller forward ad una gestione, nel nostro caso la pagina di ricerca degli studenti.

E quindi la persona aveva la possibilità di usare la maschera di ricerca normale degli studenti, tirare giù l'istrata di ricerca e selezionare un valore. Poi abbiamo visto l'altro tipo di find,

che è la find3,

che a differenza della find2,

che funziona praticamente allo stesso modo,

ma a differenza della find2,

è possibile selezionare più di un valore.

Quindi faccio sempre un controller forward,

vado sul tato ricerca,

seleziono più di un valore,

e questo mi viene riportato indietro

all'interno di una

select

multiple.

Poi siamo arrivati all'esercizio

che abbiamo visto adesso.

Quindi, diciamo, con questa

cosa qui della fine 3 abbiamo

concluso, no? C'è pagine standard.

C'è poi una serie di

possibilità anche di creare pagine non

standard, quindi libere, a piena fantasia e creatività.

E abbiamo creato un wizard per creare un corso. chieste all'utente, altre venivano calcolate,

e questo esercizio sul wizard ci ha aiutato ad introdurre due concetti importanti,

il concetto di connection pool, che c'è all'interno di Arias,

e l'API connection manager per poter accedere a questo connection pool,

un pool per rendere una connessione e per rilasciare una connessione e poi il concetto e poi la del

service manager ok poi l'api service manager che ci serve per recuperare un oggetto come nuovo

oppure data una chiave primaria passata qui come parametro, abbiamo visto come si fa il set delle proprietà,

abbiamo visto come si salva l'oggetto,

e poi un esercizio non l'abbiamo fatto,

però l'abbiamo visto insieme, insomma,

che poi il Service Manager, oltre al recupero di un oggetto,

al salvaggio di un oggetto, gestisce anche la delete dell'oggetto.

Ok?

E poi, un ultimo adesso,

fresco fresco, abbiamo visto

lo funzionamento del tag,

psitag library, psgif,

che serve per

andare a condizionare

dei pezzi di codice della nostra

GSP, come in questo caso abbiamo condizionato

la visualizzazione di un campo di testo ok tutto chiaro

col sul bind e possiamo vedere anche che comunque sia già parliamo un po del binder va approfittiamo

ne avevamo detto che avrebbe introdotto il binder quindi oltre a probabilmente questo qui è una

sorta di wrapper ritor costruito intorno al mio bilano quindi ha poi una serie di metodi per

interfacciarmi con il bin ad esempio la set property value però anche ad esempio io non certo direttamente

proprietà sul bin male certo tramite il binder c'è anche ovviamente il corrispettivo e che proprio attivani ok così mi prendo il codice nel corso

altre cose del binder

qual è il suo scopo principale

più importante

più importante oltre il suo compito principale è quello di interfaccia

questo è importante vediamo un po andiamo al di là dell'interfaccia. Questa è la Java Interface, però la classe concreta che sta dietro su Binder Interface è il profileBinderBase.

Implementa Binder Interface, ok?

è lei che poi fa una ciccia

e

ad esempio banalmente il binder gestisce i listener

quindi quando noi

qua c'è il file event

quando noi facciamo il motivo per cui

il motivo principale per cui si lavora con il Binder è perché in questa maniera siamo sicuri di scatenare tutte le gestioni e eventi che ruotano intorno agli oggetti.

Ad esempio, vi ricordate quando... no, scusate, vi ricordate? No, niente, perché sto a pensare al corso... scusate, il corso l'ho fatto dai miei colleghi. No, niente, non l'abbiamo ancora visto con voi.

No, non l'abbiamo ancora visto con voi.

Vabbè, in generale comunque, sui BIN è possibile agganciarsi a degli, essere in ascolto a degli eventi.

Cosa sono questi eventi?

Quando salvo un bin, quando cancello un bin,

quando recupero un bin, sono tutti eventi in cui è possibile essere in ascolto.

Se io facessi corso, corso uguale mio corso e presi corso punto certo con una cosa che

funziona benissimo però rimane lì invece guardate cosa fa il file binder base quando

io setto un codice passando tramite il metodo set property value.

Fire event before set property event.

Quindi prima fa il fire, cioè avvisa, attenzione qualcuno su questo bin sta facendo il set della proprietà

e poi fa quello che deve fare, il set effettivamente della proprietà.

Poi dopo ci avrà anche l'equivalente, eccolo qua, dopo che ha fatto afterset property event.

Quindi questo permette poi a qualcuno, in generale, volendo, se serve, di poter aggiungere delle liste,

fare un add listener sul binder e quindi stare in ascolto ogni volta che ad esempio viene fatto il set di una proprietà.

Lo scopo principale di avere questo oggettino qui che mi fa da wrapper e da

filtro verso il bin è questo, il fatto che poi lui ci aggiunge tutta una serie di gestioni

di eventi eccetera

questa è una

classe abbastanza importante

è una classe abbastanza importante è una classe abbastanza importante

importante senza tutto passa di qui tutto quindi che ne so poi un

entro ad esempio

no? voglio farvi vedere

se uno garantisce anche

il rispetto delle

delle policy

su questo BIN

perché ad esempio

vi ricordate che noi sul corso

abbiamo specificato

che codice e descrizione sono obbligatori

se io facessi

così sono obbligatori se io facessi così se io facessi

esatto così

codice C1

se io non facessi set code

cioè mi sembra che creavo corso

e poi non faccio set code

che dovrebbe essere obbligatorio

ok

anzi no, sono obbligatorio, scusate

un esempio è se io metto essere obbligatorio anche il nostro obbligatorio scusa diventa senso

un esempio è

se io metto

che il codice ad esempio

è l'opera

non lo puoi cambiare

ecco questo

se questa proprietà

io ti dico che l'opera non lo puoi cambiare

però tu vai passi

per cavoli tuoi

sul metodo set codice 1 la proprietità cambi non c'è niente che

ti blocca e cambi direttamente allora passare tutto su questo strato invece che cosa ci garantisce che

se quando faccio il bimbo set property value che cosa fa tra le cose tra le sue cose allora qua in realtà fa poco ancora

perché vi ricordate che set property value

non va direttamente sul bin

lui parcheggia i valori

all'interno di una cosa che si chiama property buffer

quindi se li parcheggia da parte

senza sporcare il bin

non appena viene fatto il

commit è che viene fatto in automatico dove è fatto il save allora lui ribalta le proprietà dal dal

dal dal binder insomma da proprio questo progetti sbaff, le ribalta all'interno del bin.

E qui anche magari gestisce anche l'evento,

quindi send before commit event,

quindi notifica l'evento, attenzione sto per commentare.

Tra le cose che fa c'è questo,

validate,

ecco, ma tutta una cosa di interfacce

quindi allora andiamo

cerchiamola così

cerchiamola così

get property

visibility

ok

ok

ok ok ok ok ok ok ok ok ok ok ok ok ok ok

ok

ok ok ok ok ok

ok ok ok eccolo qua ma sa qui in realtà non ho visto ok quindi fa diciamo insomma il commit torniamo

indietro scusate un attimo se salta una parte all'altra allora commit quindi manda l'evento

poi fa validate before binding effettua azioni necessarie prima del binding, una cosa che fa va a verificare ad esempio se

è di table

verifica una sette cosa, è table, check modify

è stato effettivamente cambiato

non è cambiato, check di table

cosa fa il check di table?

interroga

la visibilità di questa proprietà

quindi fa

getObjectInfo, il suo getObjectInfo

property visibility questo metodo getObjectInfo il suo getObjectInfo property visibility

questo metodo getObjectInfo

del profile binder base

property visibility fa questo

getPropertyVisibility

e insomma poi fa tutta una serie di ragionamenti

per cui va a recuperare

la visibilità di quel campo

quando scoprirà che il campo

è locked,

quindi da qua uscirà fuori che il campo è locked, darà un errore, non fa il set.

Facendo così si garantisce anche che si passa per tutte quelle che sono le logiche applicative.

applicative.

Nulla vieta che ci saranno dei casi in cui magari uno istanzia direttamente il bin senza passare dal binder, perché magari c'è un senso, perché magari io volutamente lato business,

lato mio, sono io, un programmatore che ne so, devo fare un recupero o cose di questo

genere, mi sto creando una procedura che faccio

un recupero, non voglio passare per le logiche di business, sono io che decido quello che scrivo.

In quel caso può avere un senso, sarà direttamente per me. Va bene. allora, poi

altra classe importante

abbiamo detto che è il service manager

però il service manager, questo qui

è una sorta di

questa classe qui è una sorta di proxy

nel senso che se andate ad esempio

nella classe service manager

cosa fa poi il binder commit che dicevamo che va bene però poi il salvataggio

mi sto cercando di

eccolo qua il salvataggio, service save,

vedete, lo recupera da qua,

fa instant service, fa instant service get,

un secondo,

il service lo recupera, il service da usare, davvero,

lo recupera da questa mappa, Instant Service.

Questo perché,

se vediamo questo Instant Service Interface,

che poi di fatto implementa quei tre metodi che abbiamo visto,

ce ne sono,

ce ne sono alcuni.

Allora, nel 99% dei casi si usa il default service, poi spiego perché.

poi spiego perché quindi il service manager qui dentro

recupera la classe che fa effettivamente il lavoro

quindi il service manager è una sorta di classe proxy

che poi delega il suo lavoro a una classe di tipo instant service interface

quindi recupera questo instant service interface

che nel 99% dei casi sarà un

default service, e qui dentro c'è il metodo, quindi save, delete, eccetera, che abbiamo visto.

Vediamo, ad esempio, il salvataggio che cosa fa. Prima di tutto va a vedere se esiste una

connessione all'interno del nostro context.

Vi ricordate che qui su wizard abbiamo settato la connessione.

Poi in realtà c'è anche la possibilità di dire al contesto,

questo è covono, saperlo,

di non impostare la connessione, ma di dire, guarda, falla tu,

falla tu,

falla tu e apri una transazione,

quindi set use transaction a pro, questa roba qui,

però lo vediamo quando poi spiega un attimo le transazioni.

Comunque, qua cerca di capire se c'è una connessione da utilizzare,

oppure se lui se la dovrà creare, ok non ce l'ha quindi se non ha una connessione

lui cosa fa la crea quindi se la crea lui dal connection manager le stesse cose abbiamo fatto

lui e poi se la setta lui sul contesto poi ecco qua guardate cosa fa anche qui tramite il binder dice

invoca il metodo before save

quindi spara l'evento

sempre tramite binder dicendo

il bin si sta per salvare

poi salva

e poi spara l'after save.

Ok?

E poi dopo fa la commit della connessione.

Cosa fa l'internal save?

Innanzitutto, anche qui insomma ci sono tutta una serie di verifiche e di controllo,

passando tramite questi profile binder service manager eccetera

che effettivamente l'utente può fare

tutto quello che

stiamo dicendo di fare, quindi ad esempio

su internal save lui controlla

ma l'utente autorizzato

ad inserire è autorizzato a modificare

e così via dicendo

poi autorizzazione ripeto lo vediamo quando affrontiamo

lunedì

quando vi spiego ora la parte autenticazione

autorizzazione comunque poi andando avanti se autorizzato che cosa fa ottiene questo oggetto

che si chiama persistent manager

cerco un attimo di farvelo vedere ecco qua

get persistent manager

ok, quella era l'interfaccia

quindi per andare sulla classe concreta

ok, in soldoni è questo qui

quindi si istanzia un oggetto che si chiama così,

JDBC Persistema.

Praticamente adesso stiamo vedendo,

non stiamo vedendo più tanto come fare le maschere,

adesso stiamo dando uno sguardo,

rispetto a tutto quello che abbiamo visto,

che è la maggior parte di quello che abbiamo visto,

è praticamente layer di persistenza.

Stiamo andando a vedere come funziona internamente,

questo stiamo vedendo.

Quindi, questo per dirvi non lavorerete mai qua dentro e con gdbc per system manager direttamente però

giusto per vedere insieme come funziona internamente quindi se poi stiamo parlando

layer di persistenza quindi tornando a noi qui se qua su default service

stiamo sull'interno al save

quindi si è autorizzato a salvarsi

si recupera un persistent manager

che sarà questa classe

JDBC persistent manager

ok?

poi andiamo avanti

una volta che ha recuperato il persistent manager, cosa fa?

Questo non l'abbiamo visto.

L'abbiamo imprimato nel metodo, non l'abbiamo visto.

Invoca la validate.

Vi ricordate che noi sui nostri bin ci abbiamo messo tutti quanti la validate.

Eccola qua, la validable interface.

Come lo facciamo?

quindi abbiamo il metodo validate

che però l'avevamo lasciato al vuoto

però il validate serve appunto apposta per questo

adesso lo vediamo praticamente

vedete?

che prima di salvare

adesso dice ok

sono arrivato a questo punto

l'utente può inserire

può modificare

facciamo la validate se la validetta passa lui continua altrimenti blocca tutto

se passano a date a questo punto arriva a fare persistent manager che abbiamo detto che un gdb

si persiste manager invoca il metodo save passandolili il bin quindi adesso ci spostiamo qui

JDBC Persistent Manager

metodo

save

qui ci sono degli eventi sparati

internal save

l'internal save cosa fa?

L'internal save cosa fa?

L'internal save si crea un altro oggetto che si chiama Persistence Handler.

Questo Persistence Handler, adesso mi torno qui,

noi abbiamo il GDBC Persistent Manager e il GDBC Persbc persistent handler, questi due oggetti.

Il persistent handler viene ricavato dal gdbc persistent manager.

Adesso vediamo cosa serve.

Comunque, se ne crea uno, si crea un'istanza di gdbc persistent handler e questo PersistenceHandler viene passato al nostro oggetto.

Quindi praticamente se stiamo facendo la Store del corso, cosa farà?

Invocherà il metodo Store del corso passando il PersistenceHandler.

Infatti, se vado sul corso e vado sul metodo store, vedete?

Eccolo qua.

Viene passato.

Ora, io fino ad adesso nel corso non è che facciamo nulla.

L'unica cosa che faccio, cioè sull'oggetto corso, sul bin,

questo qui del corso, l'unica cosa che ci invitiamo a fare è poi con questo oggetto che mi viene passato invocare phStormem.

Però, internamente, questo gbcPersistenceHandler

su store col momento,

internal store,

è lui che crea,

siamo finalmente arrivati alla ciccia,

è lui che crea le SQL

vedete

update

tocca all'insert

fa tutta una insert

quindi diciamo

siamo arrivati al punto in cui

è lui questo persistence handler

che fa tutta la ciccia

tutto il lavoro sporco

per cui va a

fare l'inserimento sul database

o fare l'update

una cosa importante da dire

come fa lui a capire

quindi c'è un metodo solo che fa update o insert

ovviamente come fa a capire se deve fare update o insert

lui prova a fare l'update quindi quello vediamo

mi fa l'update

però non fa l'update sto cercando eccolo qua due execute sql sta subito sotto quindi lui fa l'update, quindi si costruisce tutto quanto

in base

anzi ancora prima, in base

quindi abbiamo passato il memento

che abbiamo

allora, giusto un secondo

giusto per rifare il giro

quindi sto sullo store del corso

pulisco il memento

mi popolo il memento

in base alle informazioni che ho sul bin

quindi le informazioni del bin le ribalto

nel memento e invoco

il persistence handler store

quindi qua c'è un momento popolato con dei dati

in base

ai valori che trovo

nel memento

o meglio, il feed update lo popolo

insomma con quello che trovo all'interno del memento, cioè o meglio, il feed update lo popolo insomma con quello che trovo all'interno del memento.

Ok?

Adesso qua tutta una serie di...

Non è proprio...

Fa tanti if di qua e di là, però il discorso è, come volevo mostrarvi,

sto cercando, è praticamente che lui si cicla, eccolo qua,

lui si cicla i cam, eccolo qua, infatti era qui, l'ho evidenziato,

lui si prende i campi del memento e per ciascun campo si popola questa stringa fieldupdate che conterrà nome del campo, valore del campo.

Ok.

Fieldupdate.

Ok.

Quindi qua dentro fieldupdate c'è tutti quanti

le set dei vari campi

quindi che ne so crcode

uguale punto interrogativo

crdescription uguale punto interrogativo

eccetera, quindi si crea le SQL

di update, poi fa

due execute SQL, lo esegue

esegue l'update

fa il bind dei parameter, quindi tutti

quei punti interrogativi dei vari campi

li sostituisci con i valori reali,

che sono sempre contenuti nel momento,

e se l'update ritorna più di un record, a posto.

Allora vuol dire che ha fatto l'aggiornamento.

Se invece ritorna nessun record,

allora lui, se torna più più un record, si ferma,

altrimenti lui va avanti.

E quindi va a fare tutte le logiche che servono invece a fare la insert.

E quindi poi conclude facendo execute SQL dello statement di insert.

ok

va bene

poi stessa cosa

il metodo remove qui dentro

ci avrà che si costruisce

la delete

molto semplice

e poi c'è la retrieve

che invece

fa la select

e può andare a recuperarsi l'oggetto e poi c'è la retrieve che invece ha la select,

per andare a recuperarsi l'oggetto.

Tutto qui.

Quindi vi ho dato anche uno sguardo al layer di persistenza,

non è nulla insomma di trascendentale poi

ok sul service manager vi ho detto qui che è sempre default service, però non proprio sempre sempre, non andiamo a prescinta dei casi, perché lui si va a recuperare quale classe utilizzare per fare effetti di salvataggio tramite questa mappa.

Chi la valorizza sta mappa?

Andiamola a vedere. il motivo per cui lui va a recuperare il default service e perché esiste con questa chiamata qui service manager service stringa vuota default service che vuol dire ora innanzitutto contestualizziamo

perché ha fatto il corso con me vi ricordo sicuramente si ricorderà che gli ho spiegato che qui nel file application properties abbiamo i file di startup, i file, scusami, i riferimenti di startup delle varie applicazioni, quindi questo fa lo startup del framework, questo del modulo GBF Flow e così via dicendo, sì, anche qui, dei progetti che avete sul vostro workspace, alla startup effettiva del modulo.

Ora,

se io prendo ad esempio questa classe di startup,

ok,

praticamente il metodo principale è questo, init,

che serve appunto per fare

l'inizializzazione del modulo.

Cosa fa? Faizializer init cos'è

inizializer e questa classe qui che se px inizializer quindi se noi ci andiamo

qua dentro ok troviamo la classe che praticamente effettua l'inizializzazione ok

il modulo in questo caso che si chiama psg ex alcuni chiamano pc di libano gbf

è sinonimo sempre della stessa cosa ok quindi faccio un altro esempio se prendo

la start up del modulo acquisti è quella del modulo dell'emc e qui c'è il modulo del metodo init che fa acquisti initializer

acquisti initializer e questo è l'initializer del modulo di acquisti lo scopo di inizializer

è praticamente ogni modulo si prepara inizializzando delle cose che gli servono a lui

ogni inizializer ha una storia a sé però quello che ci interessa vedere ad esempio è che

sull'initializer

del DPSGX, quindi del

framework, tra le cose che vengono inizializzate

è proprio il service manager

e viene inizializzato con questa

chiamata qui, service manager

add service

default service, singa vuoto default service

che gli stiamo dicendo guarda di

default al service manager diciamo di default e questa singa vuota sta a significare proprio questo

default di default per salvare le terriva cancellare un record utilizza il default service

utilizza il default service ok?

il default

però

in realtà

ci sono anche

degli altri

classi tipo

il default service

che sono ad esempio

la grafiche service forse qua, Sianx Service, forse. Sianx Service, ad esempio,

questo è un figlio e mezzo.

Vede che fa?

Quindi sul Sianx, ad esempio,

sul Sianx Inizio Laser,

Sianx il modulo delle anagrafiche centralizzate,

lui in realtà censisce un suo service

e marcandolo come Sianx.

Quindi dice,

scrive una stringa Sianx Service,

Sianx e gli associa alle stanze di siank service

un'altra classe quindi per gestire

salvataggio, remover e tri

quando il service manager deve salvare un bin

quindi che cosa fa?

va a recuperare

da questa mappa

calcolandosi una chiave a partire

dal binder

cioè molto male da questa mappa calcolandosi una chiave a partire dal binder cioè

ci andiamo dentro

molto banalmente

dice

in base a quello che è l'oggetto

però di norma l'oggetto appunto è un binder

lui tira giù

il path della classe, cioè in soldoni quello che succede è questo.

Se ad esempio io salvo un oggetto

il cui package inizia per cianc,

allora lui utilizzerà cianc-service.

Se inizia per qualsiasi altra cosa il package, allora lui utilizzerà default service.

Perché poi è quello, dico, 99%, perché ci sono fatte appunto per sì anche qualcosa particolare.

Vogliamo esempio questo chest-pite-service.

Ecco, ad esempio questo chest-pite-service viene utilizzato soltanto per Cespite Query.

Adesso questo vediamo che significa.

Prendiamo un altro, questo è una vaga.

Questo usa per le query.

In realtà quindi manco, alla fine utilizza soltanto,

alla fine ci sono solo questi due praticamente sul framework.

Default Service per tutti gli altri,

Sianx service per le anagrafiche.

Ok?

Per le anagrafiche.

Poi qua, ad esempio, se prendiamo Sianx service e vediamo il metodo save,

Andiamo a C-HankService e vediamo il metodo save.

Vediamo che lui non ce l'ha il metodo save, C-HankService.

Vedete?

Eccolo qua.

Quindi lui torna sempre comunque a default service.

C-HankService, poi magari lo vediamo quando facciamo il corso sull'anagrafiche,

serve per aggiungere altre funzionalità.

Però il livello di salvataggio alla fine si ritorna sempre sulla classe base che è default service.

Qua il Cespity Iniziale mi ha fatto ricordare questa cosa qui.

Tramite service manager,

mi ritorno sull'esempio del wizard

in realtà

non potete soltanto

fare salvataggio, save

get object, come avevo visto

ma addirittura potete eseguire anche query

classi di query

quindi potete fare service manager

punto

find

find ok Quindi che fa questa roba qui?

Vuole quattro informazioni.

Vuole la query che vogliamo eseguire.

Quindi, esempio, magari eseguiamo una nostra query.

Corso query.

Punto class.cat name.

Ok.

vuole una mappa di filtri

perché noi sappiamo che le query vengono eseguite

a partire dalle filtri

string object

put put

ad esempio vediamo un po' quali filtri gestisce la nostra classe di query

esempio code filter

code filter

abbiamo qua il codice del corso che abbiamo appena inserito

mettiamo codice corso

quindi passiamo i filtri qua e salt filza

ci dice quali sono i risultati che vogliamo che ci torni la query inteso cosa inteso come colonne

quindi a partire dalle colonne che contempla qui magari dico guarda tornami soltanto la description per esempio il context al solito questa find mi torna una lista quindi un array risultati ricerca

vediamo come si comporta

già vedete questo bene fare le prove uscito prove. È uscito questo.

Perché è uscito questo?

Perché quando vi stavo facendo vedere l'esempio,

qui sul corso, vedete?

Sulla getProperpInfo ho cambiato qui,

ho messo che il codice è un valueLocked.

Quindi che succede?

Siccome noi nel nostro wizard tentiamo di settare questa proprietà,

ma non siamo abilitati,

errore durante la creazione del corso.

User not allowed to modify property.

Utente non abilitato alla gestione della proprietà code.

Questo messaggio è così perché l'abbiamo stampato così, no?

Perché qua sull'add error abbiamo fatto

errore durante la proprietà, la creazione del corso,

e poi abbiamo tornato semplicemente il get message dell'exception. Questo è servito per vedere come funziona la validazione, ad esempio,

delle proprietà bloccate, non bloccate, obbligatorie, eccetera.

Adesso qua ci metto value required

e quindi volevo farvi vedere qui la query come funzionava.

Eccolo qua.

Quindi qua mi crea una mappa dei filtri.

Ok?

Quindi code filter C9.

Adesso metto un breakpoint anche dentro corso query,

così vediamo che succede.

Quindi da qui adesso faccio find.

Tac, vedete?

Sono entrato qua dentro, quindi esegue la mia classe di query.

Is filter present code filter?

Sì.

C9. Quindi lo esegue. Facciamo di fare la SQL. query is filter present code filter si c9 di resegue diciamo di farla copra sql andiamo a vedere anche i meandri della di come fanno come funzionano le query quindi

quindi ha fatto le se quelle ritorno alle se quelle

quindi ha fatto le sequele ritornare se quelle

scopo qua dentro come un'altra cosa cosa è sbagliato pre per base e se quelle detto qui ok quindi diciamo prepara le sequele che è sempre parlando le sequele

Ok, sto sempre parlando dell'SQL.

Allora, Replace My User è interessante citarlo.

Replace My User quello che fa è semplicemente nelle query volendo si può mettere una sintassima, lascio il tempo che trova, secondo me, comunque.

Sintassi, fatto in questa maniera qua.

Select user, main user, il vario del genere.

Non serve che lo fate,

ve lo dico soltanto per capire che vuol dire

quel connection manager, replace main user.

Poi lo sostituisce con l'utente del DB, dello schema,

in modo da fare nome dello schema, punto nome tabella.

Quindi tornando a noi, eravamo qui,

quindi replace main user, ancora sta facendo qua quindi alla sql pronto e adesso alla query quindi si prende la connessione dal service context che abbiamo passato noi fa un po' di debug per stampare la query

no, bisogna

Ho fatto la query, statement.

Ah, execute query, non l'ho visto.

E qua esegue la query.

Ok.

Qua c'è il result set.

Poi il result set travasa all'interno di un oggetto che si chiama result set list,

di tipo result set list.

Quindi lo popola, questo è il result,

chiude il result set, chiude lo statement,

rilascia, no, la connessione non la rilascia perché ce l'abbiamo noi,

comunque, morale della favola alla

fin fine torniamo a noi eccolo qua quindi non ci arriva questo oggetto resalzette list e sarà un

array di array quindi per ciascun elemento un array di array quindi per ciascun elemento della prima lista otteniamo una seconda lista che contiene il valore delle sidi tutte le colonne.

Vedete qua la colonna è una sola perché noi abbiamo specificato di restringere il campo risultati solo alla colonna CR.

In questo caso qui, il service manager quando si fa find,

quando fa find, non fa, non utilizza il default service, ma se lo va recuperare tramite un'altra mappa

quindi diversa da quella che vi davamo prima

find services

in questo caso praticamente

utilizza la classe default find service

quindi trovate due classi

che il service manager utilizza

default service per save, retrieve, delete

default find service per le query

ok Save, retrieve, delete, default, find validate non l'avevamo ancora fatta, quindi sono su corso

no?

allora funziona un po', funziona, faccio test, test, conferma

ok, inserito

però

voglio metterci ad esempio una validazione

per cui se il corso

Se la descrizione non è almeno di 30 caratteri,

di 10 caratteri, do un errore.

Quindi qua posso fare

if description.length minore 10.

Troppo new validate exception.

Scriviamo.

La string non è abbastanza faccio nuovo

adesso ho messo più di base

adesso ho inserito perché ho messo una descrizione più lunga.

Adesso poi vale anche dopo, nel senso che se la tolgo mi fa aggiornare.

Rimane questa.

Altra cosa importante è che questa validazione ce l'ho a prescindere,

cioè non ce l'ho soltanto qui sulla pagina del corso.

Se io adesso torno sul mio wizard,

non è ce l'ho soltanto qui sulla pagina del corso.

Se io adesso torno sul mio wizard,

faccio descrizione corta.

Qui c'è la descrizione corta, errori di una traversione corso,

la stringa non è abbastanza lunga.

Se volessi trasformare questo anzi ok questo lo lasciamo

ok almeno la stringa di 10 caratteri

se volessi comunque mostrare

invece una cosa che

è un warning

ad esempio supponiamo che

al di là della descrizione

voglio che

voglio invitare l'utente a popolare sia la data di

di cosa che abbiamo di start date, null, posso fare return,

un po' così stringa,

meglio valorizzare o meno, ma da valorizzare le trame,

le date. almeno ma da inoltre entrambe date ok

quindi salvataggio lo fa comunque

a prescindere

qua cambio ci scrivo

asda

ci scrivo

descrizione molto lunga confermo nulla ricarico questo è rimasto questo

warning e quindi lui pro dice però va avanti

d'accordo

va bene Va bene.

Va bene, va bene, va bene. facciamo

facciamo

così

ah sì, volevo farvi vedere anche un'altra cosa

che era il lookup manager

il lookup manager è comodo

allora, noi abbiamo visto come si definiscono il lookup manager. Il lookup manager è comodo.

Allora, noi abbiamo visto come si definiscono i lookup, d'accordo?

Però li abbiamo visti poi declinati sulla maschera web per permettere all'utente di selezionare un valore da lookup.

I lookup però possono essere anche utili per il programmatore stesso.

Ad esempio, supponiamo...

Supponiamo lì...

Un secondo, fatemi pensare a un esempio

possiamo fare anche un esempio qua direttamente sul wizard

tanto ci andiamo in debug e ci fa comodo

quindi mi metto l'esempio qui all'inizio

supponiamo che io ho un id

che è l'id della cittadinanza

e dall'id della cittadinanza e dall'id della cittadinanza

voglio ricavarmi qual è la sua descrizione

posso fare una quale sul db opp il nome del lookup

la cittadinanza

qui devo mettere la chiave primaria

supponiamo che io so che sia 100

la cittadinanza

e qui il nome della colonna che voglio ottenere dal lookup.

Quale colonna?

Quello che posso accedere solo a quello che è indicato nel lookup field.

Non ho nient'altro di più.

In esempio posso ottenere magari la descrizione, il CT Desk.

Vediamo un po' come si comporta.

So qui in Breakpoint.

Sfrutto sempre il mio wizard.

Quindi qua 100, vado avanti.

Tac, Italia.

Questa è la query che ha fatto.

Ha fatto una query, vedete, linkando lookup fields, questo è un lookup fields.

From cittadinanza, where, 1.1, ctd, quello che ho passato come d.

E poi rispetto a tutte le colonne che tornano, mi torna quella che gli ho detto di fornirlo.

Quindi questo può essere un modo rapido e veloce

di recuperarsi un valore da db

ok

quindi si può usare anche per questo

il lookup manager

il lookup

il lookup manager

si può anche usare

per fare

get list value per fare get

list value

quindi ottenere la lista valori

che sarebbe lo stesso metodo che invocherebbe

il framework per aprire la lista valori

quando l'utente clicca sul bottoncino

d'accordo?

è uguale, sempre che bisogna indicare

il nome della block up

vuole una connessione quindi ci spostiamo qua sotto,

vuole eventualmente dei filtri, i filtri del look up, utente e il max row, cioè quanti è il numero di risultati massimo.

Di solito il default che mettiamo è 2000.

Vediamo che succede.

Qua vedete l'ha fatto?

Vedete, ha fatto la query.

Non ha passato nessun filtro, quindi ha fatto semplicemente una select su tutta la tabella.

Qua su list value avrò una lista di liste,

dove per ciascun elemento della lista avrò un'altra lista,

dove per ogni elemento della lista avrò le varie colonne.

Quindi questa è ctd, ctcodiody, CTDesk. D'accordo?

Fine.

Questo ovviamente è sfruttando il WCAP, ok?

Però in realtà noi abbiamo la libertà di fare anche semplicemente delle query

dirette sul db ora qui sempre delle cose snippet

avete un po di classi utilità min un po di tutto

contenere poi lo vediamo magari insieme

questo dopo fare chi lo vediamo lunedì

vediamo questo esempio come posso fare a fare una query

se vuole fare una query per i cavoli miei sul db, come posso fare?

certamente avete a disposizione

la modalità standard

di Java

quindi fate connection

per statement del vostro sql

poi fate l'execute query

per una teresa al set, per riciclate

il teresa al set, eccetera eccetera

ok

quindi ovviamente ci avete sempre query, per una teresa al set, riciclate il resal set, eccetera, eccetera.

Quindi ovviamente avete sempre la possibilità di fare

nella maniera più standard.

Noi abbiamo

delle API di utility

che potete utilizzare, che si

chiamano resal set

helper. che potete utilizzare, che si chiamano ResultSetHelper.

ResultSetHelper ha una serie di metodi statici

per fare, ad esempio, fill list list.

Passate la query.

Passate la query.

Quindi passate una lista che volete popolarvi. Questa è la list. D'accordo?

Che cosa fa questo qui?

Vediamo un po'.

Vedete?

E segue la query che gli ho indicato.

Adesso su result list, eccolo qua.

Vedete? Anche qui c'è sempre una lista di liste con tutti i risultati di quella query.

di liste con tutti i risultati di quella query continuo a parlare ma interrompetemi se qualcosa non è chiaro

questo ok poi dopo c'è un'altra rialdi metodi di utilità quindi c'è il fill list list poi c'è il

fill list list con le connessioni

no però c'è poi

single row select

questo qui è da utilizzare

quando

sapete siete certi che la query

ritornerà un solo risultato, è uno solo record.

Qual è il vantaggio di questo metodo qui?

Facciamo sempre che torniamo,

voglio eseguire questa query sulla sa cittadinanza,

anzi sulla sa sard.

La differenza è questa,

che invece di dovergli passare noi un array,

una collection da popolare,

torniamo direttamente all'array.

Torna però un array diretto, quindi non torna una lista di liste,

una lista.

Quindi un array, ogni elemento è una colonna.

Quindi semplicemente perché per questo dobbiamo farlo

quando dobbiamo la certezza che la query tornerà un solo risultato, perché se ne torna più di uno lui comunque pesca soltanto il primo.

basta poi dopo ci sono tutte le varianti

del fill list list

ad esempio

tornando indietro all'esempio di prima

fill list list ad esempio

che

questo qui

che però

ha anche un collapse single column

ecco qua se true e la query estrae se true e la query estrae una singola colonna

genera una lista di oggetti invece che una lista di liste quindi è da usare in teoria soltanto nel

caso in cui ho qua voglio mettere ad esempio crcode,

quindi una colonna sola, quindi inutile che mi fa una lista di liste,

tanto una colonna in una sola e quindi fa direttamente una lista

dove per ogni posizione ci sarà la colonna di ogni record.

Quindi con questo true...

Ho chiesto troppo

e facciamo

ok

questo per fare le query

un'altra classe di utilità è per invece per fare gli update e l'insert

e sempre che comunque sia potete farlo alla maniera java

quindi

però comunque noi abbiamo questo invece

execute anche execute helper

molto brutale

execute string update

ok

Nulla di che. Mi sembra che in output l'unica cosa che torna il numero di re un int che rappresenta il numero di record che sono stati eventualmente aggiornati.

come definire un logger l'abbiamo visto questo è un altro utility interessante

il class mapper

class mapper

no, anche qui fondamentalmente

è tutta una serie di classi per convertire un oggetto

da una sorgente ad una

predestinazione quindi

ad esempio ho la mia stringa

100

e la voglio trasformare

in un integer.

Ecco, è un integer.

Può sembrare banale, però in realtà se andate a vedere dentro c'è un po' di tutto questo class to class, quindi praticamente vi, come dire, praticamente in grado di

di, vedete

abbastanza grossetto

in pratica ha un po' tutte

le

possibili combinazioni che

potete fare

per poter, cioè si arrangi in qualche modo

in qualche modo lui riesce sempre a tornarvi

un risultato cheato a dovere.

Quindi ad esempio, banalmente, per trasformare tramite,

ecco, questo mi fa capire,

se la destinazione, se vuole trasformare una string, un booleano,

lui dice che c'è scritto on, yes, s, true,

tutte queste qua casistiche lui le trasforma in un true.

true, ok?

Tutte queste eccoacistiche lui le trasforma in un true.

Oppure anche, ad esempio, mi pare, sui date, esatto,

sui date lui c'è anche una serie di tipi di formati,

quindi prova a castarli un po' provando tutti i formati possibili, quindi insomma è una cast utilità che possa tornare utile per fare

per fare dei cast sicuri.

Va bene.

Ci sono domande? Ammetto che

la mia voce mi sta abbandonando

quindi magari

siamo morti

siamo morti anche noi

infatti

mi rendo conto

mi ramento di che parlo ma anche voi che mi dovete ascoltare

la radio non è facile poi a venerdì oggi ancora più difficile infatti anche per questo come vi

dicevo non ha senso che stiamo a parlare di profilatura perché tutto quello che possiamo

dire adesso sia 0 alle 6 e un minuto si azzera quindi meglio che incominciamo belli freschi

lunedì con argomento completamente nuovo e via e

non so, volete un attimo se c'è

adesso magari

concludiamola

non so ragazzi

concludiamola qua se non ci sono domande concludiamo non so ragazzi concludiamo la

qua se non ci sono domande

insomma possiamo pure

voi siete cotti io pure

e venerdì

si direi che ci sta

ci sta

va bene dai

allora lo scrivo nella chat

se non vorrei qualcuno poi

entra dopo e dice sono andati tutti a casa.

Va bene, dai, ok, dai, ragazzi, vi auguro un buon weekend e ci becchiamo lunedì, va bene?

Va bene, grazie, buon weekend.

Ciao, ciao, ciao. Ciao.


-----------------
VIDEOLEZIONE 05 :
-----------------

buongiorno a tutti buongiorno buongiorno ciao buongiorno

aspettiamo un po anche gli altri buongiorno a tutti ciao buongiorno Grazie. ciao buongiorno

buongiorno a tutti

aspettiamo un minutino

inizia Buongiorno.

Buongiorno buongiorno

avete già iniziato?

no no, siamo proprio per

iniziamo proprio adesso

perfetto

allora, buongiorno a tutti

buon lunedì

buon inizio di settimana grazie al trattante riprendiamo insomma il discorso del che abbiamo

lasciato venerdì se vi ricordate abbiamo fatto tutta una serie di esercizi per vedere come si

creavano delle maschere standard e per vedere come si faceva una maschera non standard avevamo

lasciato l'ultimissimo esercizio che era denominato profilatura il motivo per cui

abbiamo tralciato perché prima bisognava spiegare che cos'è questa profilatura per quanto il concetto

è familiare sicuramente a tutti vediamo un attimo come questo viene gestito all'interno all'interno di

areas quindi in pratica la lezione di oggi sarà sulla parte, perlomeno dalla mattinata, sarà sulla

parte di autenticazione e autorizzazione all'interno di Arias, quindi vedremo queste

cose qui.

Queste in realtà sono anche slide che mostrate i vostri colleghi specialisti, quindi poi

lo affrontiamo sia come tematica e poi dopo un attimo invece a differenti specialisti

vediamo anche qualche classe java.

Comunque fondamentalmente quello che andremo a vedere oggi è come si gestiscono le utenze in areas, la profilatura, cos'è la profilatura configurabile e poi in ultimo anche, qua sta nelle slide però poi dopo torneremo a fare l'esercizio e poi dopo andremo avanti e vedremo anche i report personalizzati.

Ok, quindi gestione delle utenze.

La gestione delle utenze in Arias ricalca un po' quella che è la situazione reale degli utenti,

cioè la situazione del mondo reale dei nostri utenti, quindi un utente

nella realtà ricopre un ruolo

lavorando all'interno di uno specifico

ufficio nell'ambito di un'azienda

e queste informazioni

cioè ruolo, ufficio e azienda

le codifichiamo anche all'interno di area

quindi poi lo vedremo

noi quando ci inseriamo un nuovo utente,

a quell'utente gli dobbiamo poi associare un ruolo, gli dobbiamo associare un ufficio, gli dobbiamo associare un'azienda.

L'associazione di queste tre cose all'interno di Arias viene denominato Tern.

Un utente nella realtà può anche ricoprire più ruoli, può lavorare in più uffici o addirittura all'interno di più aziende ed è per questo motivo, e poi lo vedremo, in Aries è anche possibile associare

ad un utente più di una terna. Le nuove utenze si possono creare tramite l'utente administrator,

scritto proprio così. Questo qui è un utente speciale che viene rilasciato con l'installazione

di Aries ed è un utente un po' equivalente di root per Linux administrator di Windows, ok?

Quindi è un utente con di default

ecco che esiste, che ha superpoteri

per accedere a configurazioni e

altre attività di amministrazione.

L'utente administrator è un utente

che però è anche in grado a sua volta di

di eleggere, quindi di creare nuovi utenti o amministratori con privilegi di amministrazione.

Allora, vediamo subito come è possibile creare utenti, profilature, eccetera, sfruttando l'ambiente di formazione che è stato messo in piedi per il corso.

che è stato messo in piedi per il corso

vi faccio vedere

seguitemi poi dopo magari nel pomeriggio

insomma finiamo

facciamo gli esercizi

li fate voi gli esercizi però adesso seguitemi

quindi adesso cosa facciamo

andiamo a censire

un utente, un ufficio, un ruolo

e andiamo ad associare a questo nuovo utente

l'ufficio e il ruolo appena creato.

Ok?

Quindi

quindi

mi collegherò con il credenziale di administrator

e faccio insomma queste operazioni.

Qui ho scritto questa cosa qui

cognome tra parentesi angolose, questo servirà quando fate poi voi l'esercizio, praticamente quando trovate scritto underscore cognome vuol dire che, ad esempio in questo caso si parla di codice d'ufficio, dovete crearlo con un underscore e sostituirlo con il vostro cognome, questo per evitare, siccome andremo a lavorare sullo stesso ambiente per evitare conflitti

tutto qui

io adesso siccome questo corso

già l'ho fatto agli specialisti

il mio cognome

ho sparato questa cartuccia

mi invento un'altra sintassi

comunque

ambiente di formazione

che lo trovate censito

nelle slide che vi ho pubblicato venerdì.

Nome utente. Entro con quest'utente che ho creato per la formazione.

Dopo vi do le credenziali.

Questo è un utente che ha privilegi di amministratore.

Quando un utente ha privilegi di amministratore, l'unica cosa che può vedere sono questi punti di menù ok solo così configurazioni applicazioni sono costituito tra queste due

applicazioni quindi di conseguenza i menu di configurazione per adesso ci concentriamo con

su questi qui che sono sotto accesso quindi creo innanzitutto allora l'azienda l'ho già creata e l'ho creata un'azienda di formazione

ok? ad hoc, adesso la vediamo

quindi inizio nel creare gli uffici

i ruoli e poi di conseguenza

l'utente, come si crea un ufficio e un ruolo?

tramite questo menu uffici

ruoli

fate nuovo

azienda

io ho creato appunto un'azienda di formazione

FM tipologia ufficio tipo ufficio ruolo azienda, io ho creato appunto un'azienda di formazione FM

tipologia ufficio

tipo ufficio ruolo, quindi questo punto di menu ci insisce entrambi

la tipologia è un flag che ci dice cosa stiamo creando, di default ufficio

codice, questo deve essere un codice mnemonico quindi niente spazi, niente

soltanto alfanumerici

U underscore, ad esempio, che ne so, AP

analista programmatore

nome

ufficio per analista

programmatore

conferma

e per adesso a posto così

quindi ci siamo accorti insomma che è stato inserito

l'ufficio

dal fatto che qua sono usciti fuori

il tasto elimina, i tab di dettaglio e qua

sopra è scritta questa descrizione. Creo il ruolo nuovo, lo associo sempre all'azienda FM, tipo ruolo

R underscore ap.

Inserito.

Fatto l'ufficio.

Fatto il ruolo, adesso vado a creare l'utente.

Come si crea l'utente?

Menu, accesso, utenti. Nuovo. Login. Login è la username che inserirà l'utente, ok? Quindi, ad esempio, che ne so, utente.

la password, dobbiamo dare una prima password che verrà utilizzata dall'utente per il primo accesso

quindi al primo accesso Ares chiederà di cambiarla

d'accordo?

adesso ci metto

questo, il nome utente ripetuto due volte

utente analista

programmatore

conferma

ok?

questa è la parte insomma di anagrafica dell'utente

ok? questa è la parte di testata

quindi al di là adesso ci siamo concentrati sui campi obbligatori

che sono nome, username, password

e il nome

il nome pure è un campo obbligatorio

il nome intende dire, solitamente appunto si dovrebbe mettere il nome e il cognome dell'utente

al netto di questi insomma poi ci sono tutta un'altra serie di campi

ad esempio di

anagrafia, metodici fiscali, mail, telefono, ma un altro campo importante, poi vedremo perché, è questo

qui, connessione solo da servizi. Che significa? L'utente che noi andiamo a censire è un utente

che poi si potrà loggare sulla maschera di login, giustamente, ok? Quando viene marcato un utente

come solo da servizi

invece creiamo un utente che da maschera applicativa

non potrà loggarsi, riceverà un errore se ci proverà

ma è un utente che verrà utilizzato appunto nell'ambito dei servizi

ad esempio, ok?

quindi quando poi li vedremo

quando un sistema terzo si vuole integrare via web service su Arias

dovrà autenticarsi per poter utilizzare quei web service e lo potrà fare tramite utenti marcati come solo da servizi.

Abbiamo confermato e quindi poi si accende il tab di dettaglio, questo è quello che è.

Qui, uffici ruoli.

Questa è la maschera con cui noi possiamo associare ad un utente le sue terne.

Quindi vedete che è una griglia di dettaglio, non l'abbiamo vista nel corso come si fa queste maschere.

Io sono una griglia di dettaglio, quindi significa che posso associare ad un utente più di un ufficio ruolo.

Come si fa?

Semplicemente qua indichiamo l'azienda, nel nostro caso abbiamo

detto FM, l'ufficio che abbiamo appena creato, quindi U underscore AP, che è un lookup,

l'abbiamo sempre visto, potrei andare qui e pescarlo anche nella lista valori, R underscore conferma fine

quindi

ricapitolando abbiamo creato l'ufficio

abbiamo creato il ruolo, abbiamo creato l'utente

adesso abbiamo fatto l'associazione

quindi noi adesso abbiamo un utente che si può

collegare su Arias

quest'utente andescorra.p

e che ha questa

e si loggerà con Arias con questa unica terna che hanno in questo

momento associata vediamo che è successo facciamo una login con quest'utente vediamo il risultato

finale

una maschera in incognito

l'utente abbiamo detto che si chiama utente AP, password.

Mi chiede, come vi dicevamo, di cambiare la password dalla prima login.

ok?

tata!

ok?

abbiamo fatto la login ok?

qua abbiamo il tasto logout

qua abbiamo la top bar che ci identifica

ok, quindi abbiamo fatto la login

perfetto

ovviamente, come avete notato

la menu principale è completamente vuoto il motivo perché? Perché fino adesso ci siamo concentrati soltanto sulla parte di autenticazione del nostro utente.

Quindi abbiamo censito l'utente, abbiamo dato una password e nulla più, fondamentalmente. Quindi, di conseguenza, cosa è autorizzato a fare quest'utente? Nulla. E adesso vediamo come si fa a dargli delle abilitazioni. Per adesso, insomma, questo è il primo step, autenticazione. Tutto chiaro?

Sì, fin qua tutto ok.

Perfetto.

Diamo un po' di sguardo alle tabelle, prima di andare avanti.

Riprendo anche l'Excel, l'SQL che ho fatto per i vostri colleghi, così mi sto...

a reinventare nulla

eccole qua

allora le query

per gli utenti

quindi noi abbiamo censito

un utente

quest'utente che si chiamava

utente underscore app

va a finire nella tabella che si chiama

si underscore user

ok?

eccolo qua

non è di particolare.

Login, email.

Poi per vedere un po' di cose in più.

Allora.

Ad esempio, questo è lo stato attivo dp

scad è il campo che indica la data di scadenza

della password, ok? Con voi vado magari un po' più

nel dettaglio rispetto

ai colleghi

adesso vediamo anche le classi java

quindi questa è la data di scadenza

della

no, della password, scusatemi,

quindi basta quando verrà scadra la password e verrà imposto il cambio password dell'utente.

Questo è un campo SDTH che tiene traccia della data di ultimo accesso dell'utente.

È utile perché dopo un tot mesi senza fare la login,

l'utente viene automaticamente disattivato, poi vediamo che tutta questa

serie di

di policy

di sicurezza in realtà sono tutte cose

configurabili, poi vediamo come

questo OS service

è il flag che vi dicevo, quindi N

vuol dire che non è da servizi

bad password, tiene traccia del numero

di volte che viene fatto

un inserimento errato di una password,

superato un certo numero viene disattivato l'utente e poi può essere riattivato solo da utente administratore.

Logininfo tiene traccia, questa è una stringa cifrata, delle informazioni di login, ad esempio l'ultimo IP con cui è stato fatto l'accesso sulla macchina.

È utile perché poi in fase di login, ok, data ultimo accesso, vedete che c'è scritto, Ripeto, l'accesso.

Ecco, vedete, dato l'ultimo accesso, questa sezione in basso mi dice, ad esempio, guarda, l'ultima volta che hai fatto l'accesso è 11 aprile, 917, 59 e questo è l'IP. Tutte queste informazioni sono cifrate qui dentro, sulle login info.

qui dentro, solo che in info.

Poi,

la tabella dove vengono censiti gli uffici

e i ruoli

uffrole,

quindi questi qua sono l'ufficio e ruolo

che abbiamo creato, qua non c'è nulla

tra le entità di

perché è soltanto una tabella codice e descrizione e l'ufficio e il ruolo devono essere poi associati all'azienda.

Questa tabella di anagrafica dell'ufficio e ruolo.

Una volta che noi abbiamo creato l'ufficio e ruolo, lo abbiamo associato al nostro utente.

E quella tabella di associazione di un ufficio e un ruolo verso l'utente è la tabella C user role quindi molto banale la chiave cioè la chiave che la username dell'utente e poi

varie associazioni della terna questi tre campi sono terra azienda ufficio e ruolo d'accordo anche

non c'è nulla da dire c'è qualcosa su ufficio abituale che vediamo adesso. Allora, a livello di classi invece la classe principe di tutto questo è la file user bin.

Questo è il bin, vedete il memento, l'abbiamo visto negli esercizi di giovedì e di venerdì, questo è il memento, no? l'abbiamo visto negli esercizi di giovedì e di venerdì questo è il memento

è collegato sulla tabella C-User

questa è la classe principe

che gestisce tutta la parte di gestione

profile user bin dell'utenza

intesa come maschera, d'accordo?

quindi questa maschera qui praticamente

è il bin di testata che mi gestisce

la testata dell'utente e le sue

associazioni con l'ufficio ruolo

infatti qui abbiamo

oltre che le proprietà di testata

che sono le stesse

al netto poi di alcune proprietà

di comodo per i programmatori

poi abbiamo

la lista di dettaglio

vi ricordate abbiamo visto anche come si fa

la lista di dettaglio

di conseguenza qui dentro

andiamo sul metodo quale?

retrieve, qui dentro ci sarà ad un certo punto

eccolo qua, vedete il caricamento

sulla user role, ok?

eccolo qua, bene?

qui dentro insomma trovate un po' tutto lo scibile che gestisce, tutto il bin che gestisce questa maschera, d'accordo? A livello di modello, ovviamente.

Poi...

Secondo...

Ah, finito... secondo ok

vabbè c'è la user role bin che invece gestisce

e il bin di dettaglio che gestisce specificatamente la user role

anche qui non c'è nulla di trascendentale

è semplicemente sempre il bin

quello però volevo farvi vedere

eccolo qua, profile user v3

ok

e invece il controller

d'accordo sempre parlando

rispetto a quello che ci siamo visti

nel

nel corso di giovedì verdi

ovvio che qua il controller

se sempre andiamo sulla 2 action

vedete fa

l'esercizio come si può

implementare delle

azioni particolari per l'utente

e qui ovviamente ci sta diverse cosette perché poi qui ci sono diversi bottoni

poi magari li vediamo a fine corso, tanto non sono nulla di particolarmente rilevanti in realtà

comunque ogni bottone è un'azione che fa il controller

quindi è un'azione che poi viene gestita all'interno del nostro controller.

Nulla di più.

Va bene.

Profilatura.

Adesso passiamo alla parte autorizzativa.

passiamo alla parte autorizzativa. La profilatura consente di definire e di implementare le security policy di un'organizzazione gestendo l'intero processo di fornitura agli utenti

di diritto d'accesso alle applicazioni e alle risorse che vengonoendentare la profilatura, e questo è importante è costituita da chiavi di profilatura

ok?

quindi

ciascuna

come dire, opzione

che garantisce

ad un utente il fatto di poter

o non poter fare qualcosa

ad esempio

o il fatto di poter vedere o non poter vedere qualcosa

ciascuna di queste opzioni viene denominata chiave di profilatura

le chiavi di profilatura sono i due tipi sono possono essere di tipo parametro o di tipo

abilitazione vediamo i parametri sono generalmente opzioni di configurazione

dell'applicativo, che quindi di conseguenza

cosa fanno? Cambiano o permettono il suo

normale funzionamento.

Un esempio di parametro è questo qui, il

checkbox calcolo automatico del codice

fiscale paziente, poi magari lo vediamo.

Ok? Quindi c'è un parametro all'interno della profilatura di Arias

dove io posso decidere se l'applicativo deve calcolare o meno il codice fiscale paziente.

Se è selezionato questo checkbox, quindi questa chiave di profilatura,

questa è una chiave di profilatura, un checkbox ad esempio in questo caso,

se è selezionato allora l'applicativo calcolerà in automatico il codice fiscale, se non è selezionato l'applicativo non lo calcolerà, quindi vedete che stiamo decidendo praticamente il comportamento di una porzione dell'applicativo.

Questo è un esempio di chiave di profilatura, questo checkbox.

Di tipo parametro. Quando è di tipo parametro una chiave di profilatura significa che si applica a livello di azienda.

Quindi vuol dire che io per ciascuna azienda potrò dare e configurare un comportamento diverso.

Quindi magari sull'azienda di Cagliari dico che deve essere fatto il calcolo automatico e il coge fiscale.

Su quella di Sassari no.

Un altro tipo di chiave di profilatura sono le abilitazioni. Indicano le capacità di un utente nell'accedere a determinate risiamo, di tipo abilitazione, dove a fronte dell'elenco di tutte le strutture censite disponibili all'interno del sistema, io potrò indicare quali strutture l'utente è effettivamente abilitato a modificare, a vedere, a cercare. D'accordo? Quindi io magari all'interno dell'applicativo di Areas

ho censito tutte le strutture di tutta la regione Sardegna.

Ok.

Però l'utente Mario Rossi potrà vederne due.

C'è una chiave di profilatura per decidere questo

ed è una chiave di profilatura di tipo abilitazione.

Le chiavi di profilatura di tipo abilitazione

si possono applicare a livello di ufficio, ruolo o singolo utente. Quando si attiva una chiave di profilatura di tipo abilitazione a livello di ufficio viene gestita anche l'ereditarietà, quindi avrà valore per tutti gli utenti che appartengono a quell'ufficio.

Se lo faccio a livello di ruolo, avrà valore per tutti gli utenti che ricoprono quel ruolo.

Se lo faccio a livello di singolo utente, singolo utente finisce lì.

Chiaro? Tutto quanto?

Sì. Perfetto.

Sì, perfetto.

Rientrano nella classificazione di profilatura anche l'abilitazione di moduli applicazioni e menu.

Quindi abbiamo visto che adesso nel nostro menu principale qui, noi non vediamo niente.

Quindi dobbiamo abilitarci questi tastoni che vediamo a sinistra, che abbiamo detto che si chiamano applicazioni, e di conseguenza quando clicchiamo sull'applicazione dobbiamo anche abilitarci i punti di menu che vediamo a destra. Queste abilitazioni, l'abilitarsi insomma all'applicazione ai menu sono comunque chiavi di profilatura, di tipo abilitazione, perché lo facciamo a livello appunto di ufficio, ruolo o utente quindi facciamo proprio questo

questo esercizio adesso

quindi

prendo in gestione il ruolo che ho appena creato

che si chiama r underscore ap

e li abilito al

all'accesso al menu delle anagrafiche, ok?

Ai menu delle anagrafiche, quindi il tabbidito qual tassone anagrafiche e i vari menu.

Come si fa?

Lo faccio a livello di ruolo, ok?

Quindi vado su configurazione, accesso, uffici ruoli,

R underscore AP.

R-AP.

Il primo step è i moduli, quindi è le versioni anagrafiche centralizzazioni abilitate anagrafiche

e me le abilito tutti

con questa doppia freccia

vedete che qua non ci sta

un tasto conferma, elimino o altro

ogni volta che non vedete

un tasto conferma vuol dire che quello che fate

è autocommittante

quindi adesso è buttato a destra, quindi questo già

è effettivo

quindi se io adesso

questo è il mio menu principale attualmente

adesso faccio il logout

mi ricollego

era utente underscore ap

eccolo qua

perfetto

quindi

tasto una grafiche

e punti di menu abilitati

d'accordo?

questa qui

questa viene chiamata

dual list

quindi a sinistra è disponibile ad essere collegati,

questa dual list è una chiave di profilatura,

di tipo abilitazione,

perché adesso la sto associando ad esempio al ruolo.

Quindi di conseguenza, siccome l'ho fatto al mio ruolo RAP,

siccome il mio utente è collegato al ruolo RAP,

allora l'utente eredita questa abilitazione.

Ci siamo?

Ok.

Che cosa è successo sul DB?

Diamo uno sguardo.

Allora, come si gestisce tutta questa cosa qui della profilatura?

Queste sono le tabelle che dovete conoscere.

Partiamo dalla Sikeraad e la Sikeraadparam.

Sono praticamente le tabelle di definizione di una chiave di profilatura.

Anzi, guardate, giusto un attimo anche per rendere più chiara la cosa. Ad esempio,

nelle slide parlavo, ho fatto gli esempi di due chiavi di profilatura, d'accordo? Quindi, ad esempio, una di tipo

parametro e una di tipo abilitazione. Vediamo un attimo un esempio di tipo parametro. L'esempio che ho fatto

il chat box calcolo automatico il codice fiscale paziente

andiamolo a vedere

è un parametro aziendale

quindi essendo un parametro aziendale

dovrò lavorare a livello di azienda

l'anagrafica delle aziende è qui

configurazione, accesso, azienda

mi cerco la mia azienda di formazione

eccola qui, non è nulla di trascendentale

è un po' di informazioni anagrafiche

però qua c'è un tab parametri

se ad esempio adesso vado su anagrafiche,

pazienti,

vedete? Qua c'è a un certo punto calcolo automatico codici fiscali, questo è un parametro,

anzi questa è una chiave di profilatura di tipo parametro.

Questo checkbox è una chiave di profilatura, questo radio è una chiave di profilatura, questo lookup è

una chiave di profilatura, questa combo è una chiave di profilatura, quindi ognuna di

queste, questo campo di test è una chiave di profilatura, ognuna di queste righe che

vedete è un parametro. Poi i parametri per una questione di rendere più facile la loro ricerca, sono categorizzati all'interno di questi link, per cui tutti i parametri anagrafiche saranno sotto il link anagrafiche, posto volta scomp è attivo, quindi vuol dire che per l'azienda di formazione verrà calcolato il codice fiscale del paziente.

e vado su, in questo caso si chiama funzionalità risorse,

qua accedo alle chiavi di profilatura di tipo abilitazione.

Anche qui, sempre sotto tutto suddiviso in link e linkettini, ho anagrafiche, pazienti,

anzi no, scusatemi, volevo farvi vedere quella delle slide.

Anche qua comunque sia

diciamo ad esempio

questa qui è una chiave di profilatura

questa è una chiave di profilatura e così via dicendo

ad esempio questa è una chiave di profilatura che se selezionata abilita

l'utente, anzi

gli utenti di questo ruolo

a inserire un paziente, vedete qua come cambia

qua non è una questione di cosa fa o non fa l'applicativo

è di cosa l'utente può fare o non fare

quindi può inserire o no

un paziente, può modificare o meno un paziente,

e così via dicendo, ok?

Ognuno di queste è una chiave di profilatura.

Ora, come lavorano sulla tabella tutte queste cose che vi ho spiegato?

Allora, partiamo dalla definizione della chiave di profilatura, ok?

Il fatto che qua ci sia una chiave è perché è definita all'interno di una tabella

che si chiama C-Underscore-KERAD. Come potete capire qual è la chiave è perché definita all'interno di una tabella che si chiama si underscore kerab.

Come potete capire qual è la chiave di profilatura?

Ci sono due modi.

Il primo modo per individuare la chiave di profilatura è andate per label, quindi ve la copiate, la label,

etichetta, ctrl c

e vi fate una query su questa tabella

che è sikeradparam

già l'ho fatto apposto

workup ap value la label

che cos'è la sikeradparam?

fornisce, come suggerisce il nome

è una serie di parametri

a contorno

della nostra chiave di profilatura

ad esempio conterrà delle informazioni

se la chiave di profilatura appunto deve avere

una label, si, ed è questa qui se ad esempio, che so, in questo caso è un checkbox, quindi ha poco senso, però su un campo di testo magari dice se il campo di testo ha una lunghezza massima eabile, di solito, se ci sta un'immagine associata, insomma ci sono un po' di cose, solitamente vedete che è sempre label, ecco ad esempio qua, KpOriz, quindi quali sono questi server per dirgli appunto il numero di caratteri massimi, numero di caratteri minimi e così via dicendo.

Quindi sono tutta una serie di configurazioni che poi dopo capiamo meglio quando vediamo come creare da zero la chiave di profilatura,

comunque di contorno e di parametrizazione della chiave.

Questo è un modo, insomma, per individuare la chiave.

Un altro modo, siamo programmatori, quindi tasto destro sopra il checkbox, ispezione.

Eccolo qua, name.

Quello che dovete prendervi è questo numerello qua.

Questo qui, dopo K, questo numerello vi dovete prendere.

Questo numerello deve essere poi ricercato

nella tabella

quindi o fate prima la tabella

quella sulla SikeraD param

vedete il numerello è questo qui

e vi prendete la Kpk

questo numerello ci serve

oppure fate tasto adesso ispeziona

fatto sta che avete alla fine questo numero

questo numero fate

select star from SikeraD where Kpk

il numero

eccola qua questa è la nostra chiave di profilatura

cosa c'è

identificativo k r che è un identificativo univoco k r per in che serve per creare

questa gerarchia di link sotto linkottolink, eccetera, quindi

dice semplicemente qual è la chiave padre. Live è semplicemente appunto di vista grafico,

di gerarchia. Quello che ci interessa sono questi tre campi qui. Questi tre campi qui

che cosa ci dicono? Allora, target ci dice proprio che tipo di chiave è.

Una chiave di profilatura, ok, ma che cos'è?

Utente, parametro, poi ci sono altri che vediamo durante il corso,

però adesso abbiamo detto che abbiamo abilitazioni o parametri, no?

Quindi U vuol dire abilitazioni.

perché sta per user, quindi abilitazione, quindi una chiave che potete specificare o a livello di ufficio, o di ruolo, o di utente.

L'altro target è A, A sarebbe parametri, A sta per azienda, ok?

Il target è U per utente, non per user.

Quindi U per abilitazione, A per azienda, è per parametro, ok?

A per parametro, ok? Quindi questo ci dice il tipo di chiave di

profilatura. Kr nome, e adesso lo vedremo poi nell'esercizio che ci serve questo kr nome.

Comunque è un codice, adesso ci serve sapere che è un codice mnemonico con cui noi identifichiamo

chiave, ok? Quindi questo è l'identificativo, è un numerico, e questo è una, che viene,

come dire, tra virgololette calcolare una sequence ok

questo invece è un codice semplice identificativo ma un codice mnemonico che quindi anche questo

deve essere univoco ma che decidiamo noi e quale semplice c'è stato un vuoto nell'audio mi ripeti

kr nome che cosa indica un codice mnemonico che identificaica? Un codice mnemonico

che identifica sempre la chiave, però

mnemonico, quindi questo qui lo vediamo, lo decidiamo

noi.

Mentre la kr che è una sequence, questo lo decidiamo

noi. È un nome.

Può essere univoco.

Sì.

Sempre comunque univoco.

È un altro identificativo,

però più umano.

Poi vediamo adesso nell'esercizio a che ci serve ok?

ok

l'ultimo object type

object type serve per

per decidere che tipo di chiave di profilatura è

quindi capite che qua su

sigerate, sigerate param, quello che facciamo è di descrivere

la chiave di profilatura

questa chiave qui non è che la disegniamo

non c'è una pagina Gespin, HTML,

dove noi ci mettiamo qui a disegnare le chiavi, ok?

Le chiavi vengono censite e descritte in queste due tabelle.

Poi dopo magari lo vediamo a fine corso

come a partire dalla definizione sulla Sicherad,

Sicherad Parama vengono disegnate tutte queste cosette qua che vedete

vedete anche c'è pure

una divisione ecco

link sotto link

tab

però è tutto dinamico in realtà non è che c'è un qualcosa

che viene disegnato manualmente

d'accordo?

però fermiamoci qua.

Questi sono i campi fondamentali

per poter lavorare sulla SikeraD e la SikeraD para.

Poi, ad esempio, supponiamo che io qua appunto

mi metto il check su questo inserimento paziente e confermo.

Che cosa ho fatto qui?

Ho dato, ho attivato questa abilitazione all'azienda FM sul ruolo RAP.

RAP, ok? Questo è il ruolo.

Dove gli ho attivato questo check.

io adesso se faccio annulla

insomma se ricarico la pagina

questo check ormai è salvato

dove viene salvato

il valore che ha dato l'utente

su questa abitazione

sulla tabella che si chiama

SikeraDati

quindi questa è la tabella come suggerisce il nome

dove vengono salvati i dati

i valori

delle chiavi di profilatura

anche qui ci dovete andare per il numerello

quindi il numerello è il punto di ingresso di tutto, quindi dovete avere il numero identificativo della chiave.

chiave di abilitazione come dicevamo può essere data o a livello di ufficio o a livello di ruolo o a livello di singolo utente ok dovete poi filtrare ad esempio se noi voglio trovare il record che ha

salvato adesso ho cliccato qui io il record lo salvato per il ruolo r ap quindi che devo fare

devo cercare per questa chiave e l'ho fatto perché il numerino ce l'ho però poi per il ruolo R a P, quindi che devo fare? Devo cercare questa chiave e l'ho fatto,

perché il numerino ce l'ho, però poi devo filtrare per AND KDUF ROLL uguale R_AP. Eccolo qua.

Quindi questo qui, adesso vediamo, infatti è 943 di oggi. Questo è il record che ho inserito

43 di oggi questo è il record che ho inserito in virtù del mio conferma su questa maschera qui quindi lui ha inserito un record che mi dice che per questa chiave con i d 300 0 5 di tipo abitazione

utente eccetera per l'azienda fm ma sul ruolo rap ok è stato dato un K di value S perché S? Perché questo

in questo caso qui è un checkbox

quindi il valore potrà essere S o null

o SN insomma

S positivo, il resto è negativo

se fosse stato qui

un campo di testo, magari vediamolo anche

se lo troviamo un campo di testo

prendo a caso.

Oggetti, qualcosa, col cavolo.

Diamo un po' qualcosa sul sistema, ad esempio.

Non c'è un campo di testo, man a pagarlo oggigiorno allora impostazioni

larghezza in pixel

della maschera della lista valori

ok poi questo vediamo che roba è

però ad esempio metto 100 qui

confermo

questo me lo vado a ispezionare

il numerino in questo caso è 1095

lo sostituisco qui

lo qua, vedete k di value 100

quindi semplicemente ci mette il valore

è un var char, è un var char quindi ci va dentro di tutto

ok? quindi è un var char

campo unico per tutte le chiavi di profilatura, a prescindere che siano checkbox, combo, campi di

testo, dual list, per quanto complesso possa essere il widget, alla fin fine il valore va a finire

nella kd value della sikerad dati. Qui dentro ci va a finire il nostro valore. Tornando all'esempio della chiave di prima, quindi era un checkbox e qui ci va a finire soltanto S.

Però questo qui, quindi, abbiamo dicevamo che è il valore che è stato dato all'abilitazione sul mio ruolo RAP. cioè la profilatura in generale gestisce l'ereditarietà.

Di conseguenza il fatto che io abbia detto che questo check è selezionato sul ruolo,

vuol dire che deve avere effetti su tutti gli utenti che appartengono a quel ruolo,

che ricoprono quel ruolo.

Quindi c'è un'ultima, quarta ed ultima tabella,

che si chiama Sikrad dati utente

sikrad dati utente altro non fa che normalizzare

i valori cioè

se io qua sulla sikrad dati ho il valore

effettivo del mio check

codato in maschera quindi avrò sempre un record

ok? che ho messo un check

lui si salva

un record che mi identifica la mia volontà di aver messo ok? Che ho messo un check, lui si salva.

Un record che mi identifica la mia volontà di aver messo,

cioè il fatto che ho messo quel check.

Fine.

Su la sigera dati.

Su la sigera dati utente trovo quel record spalmato per ciascun utente che appartiene a quel ruolo.

Quindi se quel ruolo me lo ricoprono 10 utenti,

sulla sigera dati troverò sempre un record,

ma sulla sigera dati utente

troverò 10 record. Infatti se io adesso vado sulla sicera dati utente, sempre con il mio

numerello, ora qui filtro per l'utente mio giusto per individuarlo, perché per questa

chiave qui i record ne trovo tantissimi ok?

ora per andare a identificare il mio

mi filtro per l'utente

con cui ho fatto la profilatura

qua in questo momento sono collegato

con l'utente di amministratore

per vedere un attimo

identificare il record che è stato inserito

so si grada di utente

è una domanda la normalizzazione di cui parlavi poco fa viene fatta tramite c'è un trigger ottima domanda domanda e sociali viviamo

niente lui ne di anche per il database

e che ho chiesto

Allora, ignorate questi due perché sono quelli che ho fatto con l'esercizio con i vostri colleghi.

Quindi eccolo qua. Questo è il record invece che ci interessa dell'11 aprile.

Quindi eccolo qua, questo è il record invece che ci interessa dell'11 aprile, perché ha scritto un solo record, perché in questo momento all'interno di questo ruolo noi abbiamo censito un solo utente.

Se fossero stati due utenti, qua avrei ritrovato due record.

Cosa mi dice? Mi dice che questo record lo sta, innanzitutto è editato, questo ereditato, che può essere R per ruolo o per ufficio, perché in quel caso abbiamo sc come vi dicevo, un'abilitazione la potete dare a livello di ufficio e quindi ereditato

a livello di ruolo ed ereditato, oppure a livello

di singolo utente, non è ereditato

da nulla in quel caso.

K di value ripete il valore,

quindi era S sulla sikera

dati, lui lo rispalma

lo stesso valore su tutti quanti

gli utenti.

Poi queste altre dimensionate lo vediamo alla fine

le fine fine fine del corso di target abbiamo già detto abitazione utente questo è l'identificativo

univoco della chiave e questo è la identificativo della terna a cui è stata applicata, è stata spalmata l'abilitazione.

Ok? Perché adesso, se io prendo questo numerello qua, di user role, e torno su questa tabella qui, su user role che vi spiegavo poco fa, no?

Dove ci sono censite tutte quante le terne che ho associato al mio utente.

le terne che ho associato al mio utente,

questo qui ha,

vedete, questo qui è l'identificativo della terna e vedete che combacia con quello salvato sulla sikera dati utente, ok?

Perché? Perché su questa terna io ho associato il ruolo RAP.

Quindi il mio check sulla sikera dati associato al ruolo RAP

ha fatto sì che

tutte le persone che hanno sulla user role

ricoprono il ruolo di RAP

avranno per questo UID

un record sulla sigeraadati utente.

Ok.

Quindi in pratica ci sono...

in questo momento tre utenti

che hanno

quell'abilitazione?

Ho capito male.

Sì, ci sono tre utenti,

tre terne,

più corretto dire tre terne,

che hanno quell'abilitazione.

In questo momento sì.

Ah, tre terne.

Tre associazioni, perché poi...

Vabbè, sì,

nel nostro caso sono tre utenti, però considerando anche che un utente può avere più di una terna,

questo mi sono dimenticato di farvelo, come lo faccio adesso l'esercizio,

un utente può avere più di una terna, magari un utente potrebbe ricoprire più volte lo stesso ruolo,

perché magari ricopre lo stesso ruolo ma su uffici

diversi in quel caso se il mio utente

ad esempio facciamo un esempio io vado

qui su configurazione accesso utenti

prendo in gestione il mio utente

ha un ufficio ruolo noi adesso abbiamo inserito una sola terna

però possiamo inserirne anche in altra

quindi, perché abbiamo detto

può lavorare anche su aziende diverse, uffici diversi, ecc

l'ufficio magari me ne prendo uno a caso

ok

ruolo, lì li do lo stesso

fermo

perché quest'utente magari ricopre lo stesso ruolo però su due uffici diversi

in questo caso io mi ritrovo

io mi ritrovo due volte quel valore

ok

per lo stesso utente, perché l'utente ovviamente poi ogni volta che fa la login

dovrà ricoprirlo

farà su una terna

e questo adesso arriviamo allora all'esercizio

che

non vi ho fatto vedere

cioè io adesso ho associato al mio utente

due terne

perfetto

guardate che succede adesso quando provo a fare

la login con quest'utente

guardate

c'è logout

mi autentico con utente

ap

vedete?

non mi va più sulla maschera di login direttamente

ma mi dice

attenzione tu hai più di una terna

quindi con quale terna tra quelle disponibili tu vuoi fare effettuare l'ingresso?

Vedete, posso scegliere.

Ok, ma in questo caso mi fa scegliere soltanto l'ufficio, perché l'ufficio è l'unica cosa diversa che ho censito.

Poi, una volta che ho scelto con quale entrare, faccio conferma e a quel punto vado sulla maschera del menu principale,

ma lo faccio con, vedete qua in alto a destra ci sta questo tasto qui, andate qui sopra,

vi fa vedere con quale azienda, con quale ufficio, con quale ruolo state lavorando,

state lavorando con questo profilo.

quindi per questo poi

le nostre

la sicurezza dati utente si spalma alla fine

sulla terna

non tanto sull'utente

si parlerà sempre di associazione all'utente

in ogni caso, questa è la terminologia che si usa

però in fin dei conti a livello di record

si lega ad un record

della user role

cioè ad un record che mi identifica

la terna.

Il motivo è questo, perché io qua, io adesso sono sempre lo stesso utente,

però in questo caso sono entrato con questo profilo che è U underscore AP,

è ruolo R underscore AP.

Però io posso andare qui, o anche magari già in fase di login,

oppure lo vediamo posso andare qui preferenze

cambio impostazioni login

e torno qui

e quindi dico no vabbè basta adesso cambio

switch e vado con

l'altro ufficio

ok?

questo è configurato allo stesso modo perché era uno degli esercizi

che abbiamo fatto con i corsi colleghi

comunque se io vado qua in alto a destra,

sempre su questa i, vedete che adesso sono

ufficio uandescoraru.

Un utente può ricoprire più terne.

Di conseguenza, poi, ogni terna avrà il suo profilo

di abilitazioni, di cose che può fare, cose che non può fare,

cose che può vedere, cose che non può vedere. cose che può vedere, cose che non può vedere.

Justo per completare questa cosa della terna,

qui su ufficio e ruoli,

scusate, su...

Sì, qua, sulla terna,

quando io seleziono

una terna, posso anche dirgli

ufficio abituale.

Cosa significherà? Significherà che se adesso io faccio

logout e login del mio utente,

vedete che è entrato direttamente, non mi ha chiesto più di selezionare l'azienda, l'ufficio e il ruolo, è entrato direttamente non mi ha chiesto più

di selezionare l'azienda, l'ufficio e il ruolo

è entrato direttamente con quello

marcato come ufficio

abituale

però sempre che in qualsiasi momento

posso fare preferenze, cambio impostazioni, login

a questo punto rientro con l'altro

posso fare quello che voglio

per completare il giro

d'accordo?

sto chiaro?

ok

sì chiaro

perfetto

quindi questo è

quando inizio

adesso abbiamo visto anche

come si incrociano poi queste tabelle

tra di loro

quindi user role e

sicrad dati

quindi per ricapitolare

sicrad e sicrad param

sono le tabelle di definizione

della chiave

sicrad dati è la tabella

che mi conviene

che mi contiene il dato che ho dato sulla pagina dell'applicativa, insomma salva il fatto che qui ho messo 20, ecco ad esempio,

si crea un dato di utente, spalma quel dato su tutti quanti gli utenti, su tutte le terne degli utenti, gestendo ovviamente tutte le questioni di ereditarietà,

quindi se la parametra all'abitazione a livello di ufficio lo farò su tutti gli utenti di quell'ufficio, se di ruolo è di ruolo e così via dicendo.

Ecco tutto qui.

Poi, come ci scrive, giustamente torniamo alla domanda che sarà fatta prima, come ci scrive su queste tabelle? sicrad, sicrad param poi lo vediamo

perché è proprio uno degli esercizi

che bisogna fare

vediamo come si crea una nuova chiave

però questo ci interessa il giusto

sicrad dati diciamo ci va a scrivere molto direttamente

perché tanto è una insert

dentro una tabella, nulla di che

ben diverso

è la sicrad dati utente laikrad dati utente

la sikrad dati utente

ma in realtà anche sulla sikrad

viene però quello più complesso del lavoro

ovviamente come si può immaginare la sikrad dati utente

viene fatto da un package oracle

cioè al momento del salvataggio di una chiave

viene lanciato un oggetto che si chiama

profile underscore writer. ci sta pensando?

sì file writer, eccolo qua

questa va bene, la definizione

la definizione praticamente c'ha

un metodo

al di là del fatto di più metodi

poi vediamo

perché mano a mano adesso

su tutta la parte di profilatura

ci torniamo più volte

ogni volta che ci andiamo ci ritorniamo ci torniamo con un livello di dettaglio superiore

quindi per questo magari tante cose vi dico

più tardi, ok? Che ci torniamo più volte

anche perché dopo di questo facciamo

anche il corso su XMPI, su XMPI

ovviamente, quindi XMPI intende dire

questo qui, il modulo che

sottende le anagrafiche, ok?

Quindi poi nel guardare

XMPI vedremo anche le abilitazioni

paramedics XMPI, quindi ci torniamo, ci torniamo, ci torniamo, ci torniamo, sarà una cosa un po' iterativa con un livello di dettaglio maggiore. scrive il record, cioè quando io qua scrivo 200 e confermo, al conferma viene invocato il metodo writeObject,

che va a scrivere il record sulla sikerad dati, però alla fin fine è poco di più di una insert.

Quello che invece è molto più complicato è questo, il metodo writeObject,

merge dati utente

è il metodo

che

di fatti una volta che sarà fatta

la write object

va a spalmare quel record sulla

sikrad dati utente

facendo tutti i ragionamenti

di ereditarietà a destra, ereditarietà a sinistra

eccetera eccetera ok quindi giusto un attimo

per guardare anche il body

non è proprio

uno smilso di package, ad essere onesti.

Però diciamo anche che questo qui è un package che

l'ultima volta che è stato messo a mano un package del genere,

per un'anomalia, penso sarà stato un 7-8 anni fa.

Per un'anomalia, penso, sarà stato un 7-8 anni fa.

Sono messo poi mano per fare delle evolutive per progetti specifici,

che non diventano neanche la Sardegna.

Però per anomalie, anni e anni fa, insomma,

e non è una volta che è implementata la logica, è quella, insomma. Quindi, scrive sulla sicera dati, spalma poi sulla sicera dati utente,

secondo appunto le logiche di ereditarietà

ok?

quindi qua dentro

il profile writer insomma è scritto tutto

quello che deve fare

questi metodi qui in realtà

servono semplicemente per

andare ad aggiungere

adesso magari lo vediamo,

perché non viene fatta la chiamata semplicemente profilewriter.write object,

non viene passato al package tutte le informazioni qui all'interno del metodo in realtà.

Alcune informazioni vengono passate tramite questo add value e add context,

quindi per non fare parametri che fossero lunghi

158 parametri, ok? quindi tante cose

poi alla fine si fa

add context, chiave, valore

e poi dopo viene riletto

al profile writer

ad esempio, un attimo interrompo la condivisione

così mi trovo un blocchettino

di profile writer

di esempio

così ve lo faccio vedere

come un profile writer che fa l'applico direttamente questo qui

che è il parametro

allora

aspettate un secondo

conferma

lo recupero, lo dai log

questo qui

ok

ricondivido

Li condivido.

Ad esempio qui io ho messo 200.

Dal file di log, poi vi spiegherò, l'ho spiegato anche ai vostri colleghi, vi spiegherò più avanti come si catturano i log.

E ho ritrovato il pezzo,ete è un begin end questo qui vedete

è il pezzo con cui lui va a salvarsi

questo 200

come fa? vedete questo è l'add context che vi dicevo

quindi per passarsi ad esempio qual è l'utente che sta

che sta

che ha fatto l'operazione di profilatura

quindi il mio utente amministratore

qual è il ruolo su cui sta lavorando

l'azienda eccetera se lo passa così

ok poi questo metodo add value il mio utente amministratore, qual è il ruolo su cui sta lavorando, l'azienda è ciata, se lo passa così.

Poi questo metodo add value gli dice,

ok, per questa chiave qui,

questa chiave qui, di profilatura, numero, righe visualizzate,

questo è il valore che devi mettere,

e questo fa il write object.

Questo scrive il record.

Poi, il write object, come vi dicevo,

alla fine è un fatto che fa un insert su ACRAD,

ma internamente è il write object che invoca questo metodo alla fine, quando ha finito a scrivere la chiave,

dice ok, adesso lancia poi il merge dati utenti.

E il merge dati utenti invece fa tutti i ragionamenti

Merge dati utenti. 1445 finisce 1605, insomma fa tutta una serie di ragionamenti.

Il ragionamento di base è quello che vi ho detto, quindi va a vedere quali sono gli utenti che sono associati ad un ruolo e va a scrivere per ogni utente che appartiene a quel ruolo, ad esempio in caso di ru ruolo a scrivere un regolo se si crea da un utente quindi a livello concettuale non è nulla di

di trascendentale

ovvio che poi

implementarlo su un PLSQL

è un po' più complesso

poi c'è anche da dire

che ci sta la questione della dimensione

però come vi dicevo poi

ancora dobbiamo affrontare qui la dimensione

e le date di abilitazione dei parametri però ci andiamoiamo in maniera iterativa, però ci fermiamo al fatto che un parametro ha un id, un nome, un nome, ok, che sarebbe questo, che abbiamo visto, no?

il renome

è un valore

questo valore è salvato sulla sigla

data di utente come valore

specifico e spalmato sulla sigla data di utente

come attualizzazione di quel valore

per ciascun utente

una domanda?

tutto chiaro?

Simone, una curiosità

ma la merce da di utenti

tu dici che è stata modificata

setottonica diciamo che è stata modificata 7-8 anni fa

diciamo è uguale a una normale

uno statement di merge

che in pratica corrisponde

a un inserimento

nel caso in cui le chiavi non ci siano

e un update in caso

le chiavi esistano e vanno aggiornati

i campi?

ottima domanda

in realtà la vuole fare molto più stupido

però si è giustissima osservazione ottima domanda no in realtà la vuole fare molto più stupido nel senso

però si è giustissima osservazione

fa cancella e svuota

e riscrive

quindi ancora più

ah ok

diciamo non si preoccupa di verificare

che la chiave

che la chiave esista e poi

debba essere solo aggiornata

ripulisce e poi

si rinserisce

esatto

grazie

prego

altre domande?

ok

tanto adesso ci facciamo un bel esercizio sulle chiavi di procedura.

Tutto quello che vi sto spiegando adesso in realtà è solo propedeutico a fare, come vi dicevo, l'ultimo esercizio a livello di codice.

Poi di per sé, sul funzionamento della profilatura, insomma, ci si tornerà, come vi dicevo, in maniera iterativa, ok? Sia con le slide di stamattina, però anche poi guardando quando facciamo il corso di XMPI. XMPI di base è un modulo un po' più funzionale, ok? Quindi per adesso noi stiamo parlando molto di cose che alla fine riguardano tabelle, codici, eccetera. Su XMPI andremo a vedere,

diciamo, molte funzionalità sono tecniche, no?

Anche qua stiamo vedendo la funzionalità per creare un utente,

la creazione di un utente, dare la profilatura ad un utente,

sono tutte funzionalità un po' diciamo tecniche, ok?

Su XMPI invece vedremo anche dei moduli funzionali,

ci sta l'anagrafica dei pazienti, vedremo come funziona, eccetera.

Nel vedere queste cose

poi torniamo

anche a fare degli esercizi

sulla profilatura.

Sulla parte

di autenticazione no, insomma, come creare

un utente, come creare un ufficio, come creare un ruolo

è quello, non c'è nient'altro da dire.

Su tutto il mondo, le chiavi profilature

invece

ci torniamo e ci ritorneremo.

Quindi giusto un attimo per fare un recap.

Prima di affrontare l'esercizio.

Quindi abbiamo detto che su Arias un utente lavora ricoprendo un ruolo all'interno di uno specifico ufficio nell'ambito di un'azienda,

che è esattamente la stessa situazione che hanno gli utenti nel mondo reale.

Quindi quello che abbiamo fatto è creare un nostro utente come anagrafica, quindi come username, password, eccetera,

per poter permettere l'autenticazione della pagina di login di Arias.

E poi gli abbiamo associato, abbiamo creato anche un ufficio, abbiamo creato un ruolo

e gli abbiamo associato quindi questa terna.

Abbiamo detto che tutte queste attività di amministrazione,

creazione utente, ufficio, ruolo, eccetera, si possono fare soltanto tramite un utente administrator, scritto così, che è un utente che ha ovviamente tutte le configurazioni, la possibilità di fare configurazioni e accedere a altre attività di amministrazione, che è un utente fisso, questo lo troverete proprio, è rilasciato con l'applicativo,

però a sua volta l'administrator potrebbe leggere altri utenti amministratori, quindi sdoppiarsi.

Quindi abbiamo creato il nostro ufficio, ruolo e utente, abbiamo visto quali sono le tabelle,

le tabelle dove sono l'anagrafica dell'utente, l'anagrafica degli uffici e ruoli e questa qui che è la più importante, la user role che invece è l'associazione tra utenti,

e vedete, ho aggiunto una terna e quindi adesso vedete, ho due righe, ho aggiunto una terna all'utente quindi qui troverò due righe una per un ufficio e una per un altro

ok?

di cui una, questa qui vedete

U default S perché l'ho marcatta come default

quando un utente ha più di una terna

se non ha una terna di default

gli verrà chiesto ogni volta che fa la login di dire

con quale terna vuoi entrare?

perché poi tutte le attività

quindi cosa potrà fare, cosa non potrà fare

cosa vedere, non potrà vedere,

dipenderanno dalla terna selezionata, perché è tutto sulla terna, diciamo il profilo, il cono di visibilità.

La profilatura lavora su quattro tabelle, due di definizione della chiave,

quindi ciascuna chiave di profilatura è definita e censita in questa tabella.

è definita e censita in questa tabella.

Coppia con queste tabelle vanno la SikeraDati

che conterrà il valore effettivo

di una chiave di profilatura,

ad esempio in questo caso per un ruolo,

e la tabella SikeraDatiutente

che invece mi attualizza

quel valore sulla SikeraDati per ciascun utente che invece mi attualizza quel valore sulla sigara dati per ciascun

utente che in questo caso appartiene a questo ruolo che quindi mi spalma e mi

sdoppia mi duplica insomma il record più volte una per ciascun utente

ok

ora tornando quindi all'esercizio

l'ultimo che avevamo lasciato

che era il 7

allora innanzitutto

rifreschiamo un po' la memoria perché ovviamente in mezzo è stato il weekend

faccio un attimo partire il mio Tomcat

così vediamo dove eravamo arrivati anche a livello di codice

Chievi di profilatura sono condivise tra tutte le aziende? Oppure un'azienda può averla?

Come definizione sono tutte condivise, sì.

Quindi tutte le aziende le vedono.

Poi però il valore in realtà va ovviamente.

Se un parametro aziendale andrà azienda per azienda,

se un abilitazione utente andrà per ogni ufficio ogni ruolo

però la definizione si è

sovra aziendale diciamo a livello di installazione

ok grazie

prego ah vabbè se non faccio partire il database

mi sa che col cavolo che parte il Tomcat

giustamente

è nel lunedì

allora non è possibile se piantato sto cazzo

amen

ok faccio ripartire Amen.

Ok, faccio ripartire. Della serie che si è spiantato. Grazie. ok

quindi noi eravamo rimasti a questo

stavamo facendo questo wizard, no? Vi ricordate? Il wizard con cui creare i nostri corsi in automatico.

Da qui ripartiamo. Quindi c'eravamo fatti un nostro controller wizardv3,

c'eravamo crescensito una nostra azione crea corso che viene invocata al click sul bottone crea corso

e poi qui dentro insomma

tutte le nostre logiche

e abbiamo visto che funzionava tutto

quello che ci rimaneva

era l'esercizio 7

cioè volevamo creare

adesso qua vediamo anche la creazione

volevamo creare una chiave

di profilatura

questa chiave deciderà se un utente è autorizzato o meno ad utilizzare il nostro wizard.

Quindi la chiave di profilatura dovrà essere di tipo abilitazione, perché noi la vogliamo indicare a livello di utente.

Ufficio ruolo all'utente vuol dire che deve essere un'abilitazione.

Ruol l'utente vuol dire che deve essere un'abilitazione.

Se l'utente fa clic sul tasto crea e dà la profilatura chiave,

dalla chiave di profilatura non è abilitato a farlo,

allora mostreremo un messaggio di errore.

Questo è l'esercizio che facciamo.

Quindi adesso noi non solo ci rivediamo un'altra volta come i dati che vengono salvati,

se si crea dati, se si crea dati utenti, ma soprattutto ci vediamo anche adesso

come vengono messi i dati qui dentro, la definizione della chiave,

e risponderemo anche alla domanda che ci è stata fatta prima, ad esempio appunto su che cosa caspiterina sia questo kr nome,

come viene utilizzato di fatto.

Ok?

Allora, iniziamo.

Per creare una chiave di profilatura,

dovete andare qui,

psgtext.monitorsviluppatori.du

Ok?

Ripeto, vedete questo qui è la nostra...

Diciamo il mapping, ok, questo qui è il mapping che dovete mettere.

Al posto di Caesar Wizard 2 dovete mettere psgxt.monitorsviluppatori.du

Anzi, questa cosa qui ve la inserisco qui nelle nelle slide così

quando parla e il ca spiterino

monitor svilupp

ok

va bene?

così ce l'abbiamo

quindi questo qui è il mapping che dovete inserire

questo è un mapping che esete inserire.

Questo è un mapping che esiste soltanto quando siete in debug, d'accordo?

Il cliente ovviamente non è accessibile.

Il primo step che dovete compiere è indicare l'applicazione secondo solo, scusatemi.

Ok.

Intanto, scusate l'interruzione,

io sono dovuto passare sul cellulare perché ho dovuto riavviare il PC, quindi vi sto seguendo con qualche difficoltà ma insomma spero

di non tardare a recuperare il pc quindi il primo passo è selezionare l'applicazione per cui noi vogliamo creare la chiave, perché questo? Perché questo numerino qui, l'identificativo univoco della chiave, è una slide, quella introduttiva, dove vi spiegavo un attimo Areas,

che è diviso in area applicativa, l'AMC, il sanitario, l'HR, eccetera.

Ogni area applicativa è divisa in moduli, acquisti, logistica, contabilità, stipendi, ospedale, pronto soccorso, eccetera.

Ogni modulo ha un suo range di chiavi, che vuol dire, magari banalmente, che se crea una chiave per il modulo di acquisti,

la chiave potrà andare da un milione a due milioni, quindi farà un milione, un milione e uno, un milione e due,

al massimo due milioni. Logistica magari ha un range da 5 a 6, quindi farà 5 milioni e uno, 5 milioni e due,

e così via dicendo, d'accordo? Quindi è importante, questo per evitare conflitti di chiavi,

quindi per far sì che ci sia una sequenza, sì, ma che ogni modulo non calpesti i piedi quando rilascia una nuova chiave agli altri moduli. Ogni modulo ha un suo range, quindi per questo motivo bisogna innanzitutto dirgli qual è l'applicativo, il modulo su cui si vuole fare la chiave. nel nostro caso stiamo lavorando su Sianc il suo eseliziono anagrafiche centralizzate

questa è la label

l'etichetta del modulo di Sianc

poi bisogna

a questo punto bisogna creare

la chiave

Come si crea la chiave di profilatura?

Allora, innanzitutto dipende da che tipo di chiave è.

Se è un'abilitazione, allora andremo qui su funzionalità ruolo,

che è il nostro caso di esercizio.

Se è un parametro, andremo su aziendali.

Poi vediamo gli altri che significa più avanti.

Per adesso, come abbiamo detto, abbiamo detto che una chiave di profilatura

può essere o di tipo parametro, quindi cliccheremo qui su aziendali,

o di tipo abilitazione, quindi cliccheremo su funzionalità

ruolo. L'esercizio ci

dice proprio di poter specificare

con la chiave di profilatura

nell'utente, cioè magari un utente X

gli dico sì, tu puoi cliccare sul

nostro wizard, creare il corso

e altri utenti invece no.

Quindi noi andiamo qua, funzionalità

risorse.

E vedete che siamo tornati alla suddivisione che abbiamo visto prima, no?

Quando stavamo navigando tra le abilitazioni utente, no?

Però in questo momento siamo, diciamo, in edit.

Siamo in edit, in modifica, d'accordo?

Ora, quindi, dobbiamo posizionare la nostra chiave.

Questa qui, una cosa importante, questa qui, che vediamo,

noi la chiamiamo o scheda dinamica o anche RAD.

Questo tipo di visualizzazione è qui.

Io poi posso disegnare le mie abilitazioni.

Allora, facciamo ad esempio, che ne so, io mi inserisco una nuova riga,

faccio così, inserisci, riga, eccola qua, viene scliccata qua sotto,

mi creo un nuovo link, inserisci, contenitore, link,

label, formazione, analista, programmatore,

e crea un link, semplicemente, confermo, esci,

vedete eccolo qui, faccio clic sul link,

inserisci riga, e qui adesso ci metto la mia chiave di profilatura

con cui decidere se l'utente può o non può fare click sul mio tasto crea il corso.

Ora, quindi può o non può, è un checkbox, ok?

Quindi è un valore binario, quindi facciamo un bel checkbox.

Poi facciamo un checkbox, clicchiamo sulla riga, quindi la facciamo in gialletto.

Clicchiamo sulla riga, quindi la facciamo in gialletto.

Inserisci elementi, check, singolo.

Label, formato è un campo qui, è finito.

finalmente ci siamo arrivati, il campo nome.

Il campo nome è il modo con cui noi gli associamo questo codice mnemonico,

questo che abbiamo trovato qui sulla krnome.

È una cosa, diciamo, libera, non è che ci sta...

Poi solitamente noi ci mettiamo, che ne so,

ecco, seguiamo questo formalismo qui,

quindi i package Java, ok?

Quindi, esempio, stiamo lavorando su Seam,

quindi potrebbe essere a senso, magari scriviamo siank.cesar.wizard.createbutton, quindi è una chiave di profilatura,

giusto anche per contestualizzare, perché così dal nome, però ripeto, qua potevamo scrivere

pippo bluto e finiva lì il discorso è in qualche modo la

chiave già contestualizza di che stiamo a parlare stiamo parlando del wizard stiamo parlando del

bottone create button ok è solo per questo cosa importante insomma che questo è un codice quindi

deve essere univoco ma tanto non vi potete sbagliare perché vi da errore se esiste già o inoltre anche che sia insomma un codice, non è che faccio

siank, spazio, dollaro

un codice

stringa e numeri

massimo punti per fare una separazione

ok?

e confermiamo

e c'è stato staccato questo numerino

adesso se io esco

qui vedo già il mio check

però adesso io chiudo tutto

esco, chiudo

torno qua, sono ancora nuovamente l'utente amministratore

prendo in gestione il mio ruolo

RAP

vado su funzionalità risorse Proviamo un attimo a fare un bel...

Ah no, perché questa è formazione, scusate,

il monitor l'ho creato su localhost, vabbè, è lunedì.

Ok, quindi stiamo su localhost,

quindi sul localhost mi devo collegare sul localhost.

La video di profilatura lì l'ho creata.

Adesso mi collego, ok, quindi prendo ad esempio, però mi devo collegare con un utente

amministratore, adesso sono su un altro ambiente, la chiave l'ho creata su localhost,

La chiave l'ho creata su localhost, mi collego su administrator, il mio ambiente di sviluppo, il localhost.

Quindi prendo il mio utente.

vado su funzionalità risorse

ed eccola qui

vedete qua formazione

analista

programmatore il mio link

eccolo qua

e adesso qui io posso decidere

su quest'utente

cosa voglio fare

quindi

sulla maschera prima noi abbiamo creato la chiave

quindi abbiamo lavorato sulla Sikeraad e Sikeraad Paramance

andiamola a vedere

e adesso comunque

qua come administrator posso dargli invece un valore

e quindi lavorerò su Sikeraad dati e Sikeraad dati utenti

andiamo comunque a vederla effettivamente

nella chiave che abbiamo appena creato

questo qui è il numerino che è stato dato

questo è sticker add

è però assolutamente

di locale

scusate un attimo interrompo

sempre sull'adb locale scusate un attimo interrompo sempre sull'ADB locale perché altrimenti

ok quindi quindi questa è la mia chiave numerino eccolo qua si anche si anche si sa wizard create button e se io cerco per la sicara de param kp è uguale questa ma poi ci abbiamo

è fisso che s di niente quello quello che abbiamo impostato è questo

label, ok?

puoi inserire un corso to wizard

fine

adesso

adesso

che succede?

noi abbiamo creato la chiave

io sto qua su questo utente

e vedo che la chiave è stata creata.

Però adesso ancora non gli do un valore, non ci clicco, ok?

È solo un attimo per farvela vedere.

Adesso implementiamo la nostra logica, cioè diamo un significato a questa chiave,

perché una chiave così creata semplicemente sta lì, la puoi cercare di cercare,

ma di base non fa nulla.

Quindi adesso diamogli un significato funzionale.

Quindi facciamo finalmente l'esercizio. Quindi adesso con questo esercizio cosa dobbiamo fare

e cosa andiamo a vedere? Andiamo a leggere questa chiave, ok?

E se l'utente è abilitato, facciamo un qualcosa, se non è abilitato, facciamo un altro.

E adesso torniamo sul codice.

Abbiamo detto che quando l'utente clicca sul bottone, fa un action, abbiamo visto crea underscore corso.

Quindi magari ci mettiamo, come ne so, qua, in testa, qui all'inizio.

Abbiamo la nostra logica, cioè andiamo a valutare, l'utente è abilitato?

Sì, ok, non è abilitato, ferma tutto

mostra l'errore

come si fa?

la classe per andare a leggere

la chiave di profilatura

è

profile manager

get profile manager get

profile

manager

questa classe poi

ha tutta una serie di get

in base al tipo

di chiave, di formato

avete visto che quando ho creato il check

c'era scritto formato boolean perché in check però supponiamo che fosse stato un campo di testo, no? avete visto che quando ho creato il check c'era scritto formato boolean, perché in check

però supponiamo che fosse stato

un campo di testo, magari era una stringa

oppure poteva essere un numero

scusate che accetto

ok, poteva essere una stringa

poteva essere un numero, ok?

quindi qui avete tutta una serie di guess in base a quello che

sapete, quindi voi dovete

sapete quale chiave state leggendo e quindi sapete anche

che tipo di valore contenerà quella chiave se è un campo di testo sapete che pot voi dovete sapere, sapete quale chiave state leggendo e quindi sapete anche che tipo di valore contenerà quella chiave.

Se è un campo di testo sapete che potrà essere una stringa, oppure potrà essere un long, lo sapete voi.

Cosa vi aspettate che l'utente vi metta lì dentro?

Se vi aspettate che vi possa mettere le lettere e numeri, farete getString.

Se vi aspettate che possa essere un numero con decimali, farete get double.

Nel nostro caso sappiamo che è un check.

Quindi mettere questo qui, get boolean.

Poi vuole quattro parametri.

Il primo, il tipo.

Questo qua, il profile manager, serve in generale per leggere le chiavi di profilatura, qualsiasi essenziano.

Quindi prima di tutto dobbiamo dirgli cos'è un parametro o un'abilitazione?

Quindi dove devo andare? Cos'è? Una roba di azienda, una roba di uffici, ruoli utenti?

Nel nostro caso abbiamo detto che è un'abilitazione.

Quindi facciamo profile manager.usrtype. Quindi c'è il parametro per i parametri, usertype per le abilitazioni, quindi usertype.

Secondo, e qui finalmente vediamo, adesso dobbiamo mettere qua il nome del codice mnemonico della nostra chiave. Quindi, per renderci conto, questo: "Sianc, Caesar, Wizard, Ticket, Button". Quindi adesso entra in gioco il nome che diamo alla chiave,

questo codice mnemonico, perché questo è il modo con cui noi referenziamo la chiave

nostro codice, quindi il nostro codice non andremo mai per id, andiamo sempre solo per

nome. Quindi lo dico al profile manager. Voglio una chiave di abilitazione e voglio lavorare

su questa specifica chiave, con questo codice. Lo voglio sapere per questo utente

quindi il stesso parametro è l'utente

quindi per l'utente è loggato

dimensione, poi ci torniamo

per adesso mettiamo null, senza dimensione

poi vedremo che sia la dimensione

quindi questa istruzione qui

mi sta dicendo al profile manager

mi dici che questa chiave qui

che è un'abilitazione, che valore ha

per questo user

tu è chiaro? Questa chiave qui, che è un'abilitazione, che valore ha per questo user?

Tuo chiaro?

Sì.

Perfetto.

Faccio poi i vari surround, tre catch.

Qua vi può andare in catch soltanto se in realtà la chiave che inserite qui non esiste.

Fondamentalmente, se avete scrittoitto bene non c'entra mai.

Quindi se la chiave non esiste vi tornerà una profile exception e entra qua dentro.

La nostra chiave è bella che esiste e quindi me l'assegno.

Valore chiave.

Semplicemente che farò? Faccio.

If

valore chiave

if not valore chiave,

se non sono abilitato,

ok, questo è un booleano, quindi

se vale false vuol dire che non sono abilitato,

che quello adesso, no?

L'esiste è questo,

ho chiamato la chiave, non gli ho dato nessun valore,

non ci ho cliccato, ve l'ho fatta solo vedere.

Quindi sarà false.

D'accordo?

Se valore chiave, cosa facciamo?

Possiamo fare, ad esempio, un messaggio.

Abbiamo visto che gli errori si mostrano così.

Add error global non sei

abilitato

alla funzionalità

e poi faccio una bella

retarna

ok?

e fermo tutto

proviamo

mettiamo un bel debug

senza debug

all'inizio

quindi vediamo un po'

forse non serve neanche

riavviare

vediamo

allora

però mi devo logare

quindi mi apro una finestra

incognita

mi logo con il mio utente

ecco qua

mi sono logato

vado sulla mia pagina del wizard

che abbiamo detto essere

cizar.wizier.do

clicco su creare il corso

non si è abitato alla funzionalità

ok?

adesso

con administrator

ce l'ho già aperta la pagina

eccolo qua

quindi qui su administrator per il mio utente

è andato qui

sul link che abbiamo creato

formazione di sta programmatore

mi inserimetto il check

conferma

qui lato utente

faccio un logout login

perché le abilitazioni poi vengono una volta che l'utente faccio un logout login perché le abilitazioni

poi vengono cash, una volta che l'utente si logga

lavora con certe abilitazioni

c'è una cash, quindi se cambiano

abitazioni, le abilitazioni al prima logout login

di solito hanno effetto

ok?

quindi mi riloggo

mi aggiorno qui la pagina e vediamo un po messo un punto debug ce lo mettiamo altrimenti non vediamo

la differenza e clicco su crea il corso

true, perfetto il parametro si

e quindi passa e va avanti

dall'errore perché non ho messo niente

campo descrizione del corso obbligatorio

va bene

tutto chiaro?

sono domande?

ok

abbiamo visto tutto in pratica

poi dopo alcuni dettagli ci ritorniamo più tardi

però insomma il grosso l'abbiamo visto

abbiamo visto come si definisce una chiave

come si legge

come si definisce una chiave

come viene scritta sul db e anche adesso come si legge quindi come si finisce una chiave, come viene scritta sul DB e anche adesso come si legge,

quindi per attualizzarla e dargli un significato all'interno del codice.

D'accordo?

Questo è il secondo.

Una domanda.

Ora abbiamo creato questa nuova chiave di profilatura tramite quella pagina,

che è solamente visibile tramite un'unità debug.

In produzione invece immagino che questa pagina non sia vis visibile tramite diciamo modalità debug in produzione invece

immagino che questa

pagina non sia visibile

come

direttamente

tramite

diciamo

SQL

eh

si dopo questo

quando facciamo

affrontiamo

il modo

con cui fare il delivery

delle modifiche al DB

lo affrontiamo

poi vediamo anche

insomma

magari l'esercizio

quello che abbiamo fatto

tutto

tutto

magari

le tabelle corso studente eccetera vediamo in generale come l'esercizio quello che abbiamo fatto tutto magari di no le tabelle

corso

studente

eccetera

vediamo in generale

come rilasciare

tutte queste

modifiche

al DB

sì

poi se lo andiamo più avanti

però sì

il delivery tool

la chiave

te la crei sempre da te

e poi dopo

rilasciare

esatto, il discorso del rilascio, il PL, l'SQL, quello che sia, sul cliente, quindi non crei mai direttamente sul cliente.

Sebbene, magari lo possiamo pure anticipare, se lo anticipiamo tanto stiamo in argomento, questa pagina qui sul cliente non ci sarà mai e non ci deve andare. Però, però, però, sul cliente, in produzione, c'è questa fantastica maschera sotto configurazione, avanzate, personalizza parametri.

Facciate per installazione per adesso.

Comunque, personalizza, cioè vediedi personalizza chiave utente e personalizza

aziendale, se io vado qui su personalizza chiave utente

ad esempio

vedete, torniamo alla barrabia che vi ho fatto

vedere prima dal monitor sviluppatori

quindi in qualche modo loro si possono

creare sul cliente le chiavi

perché questo

cioè in generale voi se faccio che ne so, inserisci giusto per vederlo Perché questo?

Cioè in generale, poi se faccio, non ne so, inserisci, giusto per vederlo, funziona esattamente lo stesso modo, faccio inserisci elementi, check ad esempio sempre, vedete uguale, quindi uno si può creare la propria chiave sul cliente.

Quando viene fatto, perché ci sta questa funzionalità? Allora, io ho fatto un caso di esempio reale, però poi durante il corso deires, fuori, esterno, che non aveva un suo sistema di profilatura.

Allora cosa faceva? Loro qui su Ares avevano censito le varie chiavi di profilatura, text, check, radio, combo, eccetera.

Il sistema terzo tramite web service si integrava con Arias, scaricava

le chiavi di profilatura e poi si comportava

lui in un certo modo, quindi diciamo

usavano Arias come

repositori di chiavi, quindi le chiavi le censivano

per Arias quelle chiavi non avevano

nessun scopo funzionale, non succedeva niente

però il sistema terzo invece andava a leggere

e si comportava in maniera diversa

un caso d'uso invece

che ha detto un vostro collega è qua voi create

la chiave poi magari questa chiave andate a leggere voi all'interno ancora voi non avete fatto il corso

lo farete avanti all'interno di un processo di workflow dentro areas c'è un motore di workflow

quindi dove si possono disegnare

i vari processi di business. Sapete che

un processo di workflow è fatto da tante

attività, magari una di queste attività

andrà a leggere, siccome i processi di

workflow solitamente sono disegnati sul

cliente, in base ai specifici

processi di

business del singolo cliente

sul cliente

ci sarà magari un'attività che va a leggermi

quella chiave di profilatura

quindi specifica attività del workflow su quel cliente

specifico parametro su quel cliente

e quindi può andare insomma

una personalizzazione ecco insomma

so se è chiaro

c'è la possibilità di personalizzare

quindi un po' per rispondere a domande

c'è la possibilità di personalizzare e creare i parametri

anche direttamente sul cliente,

non tramite quel punto di menu monitor sviluppatori, ma tramite un menu ufficiale e rilasciato,

che è questo, che sta sotto configurazione avanzata e personalizza parametri, e...

insomma, questo.

Ok?

Ok, sì, è chiaro, grazie.

Prego. ok ok, sì, è chiaro, grazie prego

ok

slide mi piace metterla

prima questa via

e la mettiamo

ok? quindi fine

adesso abbiamo finito gli esercizi praticamente

questo documento è ufficialmente

terminato, termina così

ok?

non c'è altro da dire qui su come si leggono le abilitazioni, d'accordo?

parlando di profilatura configurabile, quindi noi andiamo avanti adesso su questo contenuto qui. Però esercizi sul codice li finiamo qui.

Ok, allora quindi, poi facciamo un ultimo pezzettino, poi facciamo pausa, e poi magari quando riprendiamo, facciamo degli esercizi, ma semplicemente, non un po' per avere confidenza, nulla di trascendentale, per avere confidenza con lo strumento, vi farò collegare sull'ambiente di formazione, qua ci potete andare insomma, vi do le credenziali e vi ripetete quello che ho fatto io stamattina, quindi questi esercizi qui, ok? Quindi crearsi un proprio utente, un proprio ufficio, un proprio ruolo, fare l'associazione e abilitarsi dei punti di menu, ok?

Ci mettete mano voi insomma, fate un vostro utente

ok?

va bene

prima della pausa

introduciamo

i parametri di installazione

quindi per adesso abbiamo detto le chiavi di profilatura possono

essere di tipo parametro, di tipo abilitazione.

Parametro a livello di azienda,

abilitazione a livello di ufficio ruolo. Esiste

poi una terza categoria in realtà,

comunque sempre parametri vengono definiti,

che sono una

sottocategoria di parametri, che sono

chiamati parametri di installazione,

sono trasversali

quindi su tutta

l'installazione di Arias. La loro

valorizzazione quindi ha effetto su tutte le aziende

quindi sono sempre categorizzati come parametri

perché comunque solitamente stabiliscono un comportamento

cosa fa, cosa non deve fare l'applicativo

però lavorano a un livello più alto, a un livello di installazione

quindi non è possibile declinarlo su ogni singola azienda in maniera diversa

e per questo motivo sono riportati tra i parametri di installazione

tutte quelle configurazioni che non avrebbe senso cambiare per azienda.

Un esempio classico è quello delle policy di sicurezza.

Un esempio, che ne so, la complessità della password.

Cioè non è che ha senso dire che Cagliari ha una password di lunghezza 10

e sta a stare 12, o tutto 12 o tutto 10.

Quindi tutte queste cose qui vengono catalogati come parametri di installazione.

I parametri di installazione si accedono tramite il menu ad hoc che si chiama configurazione, sistema, parametri installazione.

Poi la visualizzazione però è sempre la stessa, cioè non cambia niente.

C'è sempre questa suddivisione al link, cliccate sui vari link, vi navigate,

e poi vabbè, posso diventare tab, field box, quello che sia.

Ad esempio, qui sul tab login, trovate quello che è l'esempio della slide,

quindi qui trovate tutti quanti i parametri

relative alle policy della password. Numero minimo di caratteri, la modifica alla password al primo

ingresso, periodo di valità password, password diversa da username, così via dicendo. Qua sotto

c'è il numero massimo di caratteri per l'administratore, numero minimo e caratteri maiuscoli, così via dicendo. D'accordo?

Quindi, tutto ciò che non ha senso cambiare a livello di azienda si specifica a livello di installazione.

Come si legge un parametro di installazione?

Esattamente allo stesso modo come si legge un parametro normale.

Quindi, per esempio, tornando alla nostra chiamata qui,

dove andiamo a leggere una chiave di profilatura di tipo abilitazione, se fosse stata un'azienda, l'unica cosa che cambiavamo

qua è questo. Parameter type, se fosse stato un parametro, un parametro in generale. Quindi,

sia un parametro aziendale, ma anche in caso di parametro installazione, questa è l'unica cosa

che cambia. Specificate parameter type invece di user type.

Il resto è uguale. Il nome della chiave

e l'utente.

Sardo?

Ok. Sì.

Perfetto.

Già che siamo su questa maschera, io vi dicevo che tutta questa parte qui di utenti, per creare gli utenti, per creare gli uffici, per creare i ruoli, deve essere fatta da un utente administrator.

L'utente administrator però può eleggere a sua volta altri utenti amministratori.

Come si fa?

Si fa proprio tramite un parametro di installazione.

Quindi si va qui,

parametro di installazione, sistema, login.

Qui c'è una, ci sono due bottoni,

utenti administrator, ci cliccate.

Nella lista di sinistra,

trovate tutti quanti gli utenti censiti al sistema. Simile è il comportamento... Sistema, login. Quindi insieme al bottone utente administrator ci sono poi i ruoli administrator. Questo è un funzionamento un po' più articolato, nel senso a sinistra avete tutti i ruoli, censite sistema.

siti e sistema. Quello che spostate a destra è un ruolo considerato amministratore. Cosa vuol dire? Vuol dire che ad esempio adesso io cerco quel ruolo RAP che abbiamo creato

questa mattina insieme, un ruolo amministratore. Come lo faccio? Qua ci sta l'imbutino. Dico codice

contiene

r underscore ap.

Eccolo qua.

Se adesso questo qui lo porto a destra,

questo ruolo a chi lo ho associato?

L'ho associato al mio utente che si chiama utente

underscore ap.

Portando questo a destra,

tutti gli utenti

che hanno questo ruolo tra le proprie terne diventeranno automaticamente administrator.

Questo vuol dire.

Guardate bene che quando un utente viene eletto administrator perde tutte le sue abilitazioni.

Cioè non importa più a quel punto quali menu aveva abilitato, che cosa poteva fare, niente.

Nominare un utente come administrator significa dargli un set di default di abilitazioni,

che sono quelle specifiche di administrator, punto, che conosce l'applicativo, insomma,

sdraia tutto e gli da

la possibilità di fare

di accedere

a tutti questi punti di menu che vedete

quindi questa situazione che vedete

è quella che verrebbe data a qualsiasi utente

nominato amministratore

quindi l'accesso a questi menu sotto configurazione

se quindi prima

aveva anche l'applicazione

anagrafica abilitata e quella va via

sparisce

ok?

va bene l'applicazione anagrafica abilitata, quella va via, sparisce. Ok? Va bene.

Io avrei una domanda.

Vai, come no?

Sì, volevo sapere se rimuovi poi quell'utente dal ruolo amministratore,

cioè ovviamente bisogna riconfigurarli tutti gli altri per me

in realtà a livello sotto

di codice la profilatura

rimane, cioè quindi

semplicemente viene inibita

quindi lui non andrà più a leggere

ottima domanda, lui non andrà più a leggere

semplicemente la profilatura

che comunque rimane, quindi nel momento in cui lo

nomini, gli togli la nomina

di amministratore torna come era prima perfetto grazie prego

domande queste diciamo questi l'accessibilità non di cui stiamo parlando la visibilità di lettura

scrittura e sono operazioni che vengono fatte a livello quindi di sistemistica voglio dire

non è lo sviluppatore di quale scusami il fatto di dare le abitazioni a questo qui di dell'amministratore

che fa sua volta inibisce o meno un altro...

No, no, questo è solito addirittura a livello di specialisti.

Tanto qua parliamo di utente amministratore inteso come amministratore di areas,

quindi no, no, addirittura a livello specialistico,

nel senso magari si vuole creare un utente amministratore

di un'azienda X o di un'azienda Y,

qui si vuole sdoppiare si vuole fare un utente administratore

per

per azienda

consideriamo anche che gli utenti

in teoria ogni utente dovrebbe essere

nominale

per normativa

quindi in teoria l'utente administrator

che si chiama proprio così administrator

come vi dicevo è perché quello di default

è rilasciato all'applicativo,

che è un po' l'equivalente del root,

ovviamente deve esistere,

perché è un po' l'equivalente del root su Linux,

devi avercelo, un utente, come dire, generico è,

però in teoria tu non lo dovresti usare,

lo dovresti usare soltanto in caso di emergenza, ecco.

In teoria quello che dovresti fare è creare un utente,

perché ogni utente amministratore appunto deve essere nominale quindi che ne so

simone lucido era avere suo utente che si chiamerà simone lucide che è nominato come administrator

ok quindi no è configurazione sul cliente non è sistemistico per queste cose qui insomma

ok ok grazie prego

altre domande?

ok

già che ci siamo su questa maschera

diamo un attimo uno sguardo su

questo è una cosa importante

è auto

i parametri parlano un po' da soli

però magari facciamoci

questi 5 minuti di panoramica dei parametri

della login, comunque sono parametri importanti

e poi andiamo in pausa.

Quindi qua trovate il numero minimo di caratteri per la password di login.

8, 9, 10, quello che sia.

Modifica password al primo ingresso, è quello che abbiamo visto,

quindi al primo ingresso mi ha fatto cambiare la password che mi ha assegnato l'amministratore quando ha creato l'utente.

Il periodo di validità e la password è 3,

è stato divino in mesi, quindi ogni quanto la password deve essere cambiata.

Password è diversa dalla username e password è diversa dalla precedente.

Periodo di validità login in assenza di connessioni,

qui è sempre espresso in mesi, qui è scritto 12,

scritto 12 però in realtà c'è una classe che si chiama login security privacy utils esatto che è lei che si va a leggere un po' tutti questi parametri che vedete.

Ad esempio, per quanto riguarda il periodo di validità login in assenza connessioni,

esatto, è questo qui, ok, questo qui, lui si va a leggere il periodo

però lo accetta

se soltanto se è minore di 6

cioè

comunque il periodo massimo è 6 mesi

ok quindi qua hanno messo 12

ma 12 viene ignorato

12 vuol dire 6

quindi potete mettere una cosa più stringente di 6

potete mettere 5, 4, 3

il motivo per cui qua è rimasto 12 è perché in realtà

questo blocco

a livello di codice si è stato introdotto molti anni

dopo quando è arrivato a GDPR, ok?

questo parametro

risale alla notte dei tempi, ok? Quindi qua

ovviamente poi è rimasto il valore che è stato messo

magari 15 anni fa, ok?

12, però in realtà poi questa qui

è la classe che vi interessa, si chiama

security privacy

utils

ok? questa qui è la classe che vi interessa si chiama security privacy utils e si va a leggere

questa classe qui tutti questi parametrelli qui

quindi a volte magari ad esempio

questo è un caso impone

in realtà poi dei vincoli interni

ok

utilizzo il creatografia non vedversibile

questo serve per abilitare

l'algoritmo SHA256

sulla password

quindi per codificare in SHA256

la password

blocco login da due macchine differenti

non è abilitato in Sardegna, comunque fondamentalmente

dice che se l'utente Mario Rossi si

si collega su un pc

e poi senza fare logout

si collega su un altro

causerà la logout

della login precedente

e poi entrambi viene mostrato un messaggio

blocco login dopo

ogni tentativa errati invece dopo quanto bisogna

bloccare e anche

uno sbaglia la password una volta, due volte, tre volte e così via

dopo un po' c'è un blocco

anche qui è specificato 10

però in realtà

in realtà in realtà

il passo il certo error poi passo x per date lo kato non è qualsiasi

first login

massimo 5 ok? quindi sopra 5

non si ponda insomma

quindi questo viene ignorato

vai datore login e tipo integration utilizzata

questo lo vediamo più avanti nel corso

ci sono delle slide ad hoc su questa parte qui

gestione password

dimenticata serve per far uscire fuori

questo bellissimo link

per fare il recupero password, quindi nulla di particolare

e rinvia la password via mail

con qualsiasi altro sito

questo qui non è attivo in Sardegna, non ci interessa

questo serve per dirgli se mostrare sempre la pagina di scelta terna

ma non ci interessa, non è attiva in Sardegna

log accessi è pure deprecato

autenticazione forte, questo serve per attivare l'autenticazione e la login tramite smart card

infatti qui in Sardegna se voi andate

però non mi risulta che sia utilizzato da nessuno

però la configurazione è stata fatta, secondo me è semplicemente rimasta

all'epoca, qualche anno fa forse lo usavano e qui c'è comunque il tasto smart card se fate

clic qui parte un applet che per questo dico non è stato da più perché l'applet

ormai sono più supportati comunque parte un applet che effettua la lettura di una

smart card va a leggersi il codice fiscale della smart card e poi in base a

quello insomma effettua in base al codice fiscale

risale all'utente di Arias

e quindi fa poi la login applicativa

quindi per fare una login applicativa tramite smart card

ok?

vabbè, poi utenti, ruoli, administratori

questo nasconde i codici

terna login per non far vedere il codice

sulla combo di selezione

nulla di trascendentale

questo non c'entra con la login

poi magari anche questo qui

nello stacca magari affrontiamo quando parliamo

dei servizi web

quello che ci interessa è questo

quindi poi ci sono tutta una serie di

numero minimo di caratteri

del password amministratore quindi si può dire che

l'amministratore la password deve essere

più lunga rispetto agli utenti normali

caratteri minimi, maiuscoli, maiuscoli, numeri speciali

insomma questo torniamo a quello di

che abbiamo sempre

tutti quanti i siti

eventualmente dei caratteri che non devono essere consentiti

e questo qui utilizza la regola di composizione delle password

anche nella gestione utenti, perché? Perché abbiamo visto che

quando un amministratore crea un utente deve specificare una password di default.

Quella password solitamente è tipo 1, 2, 3, 4, 5 per l'amministratore nel momento in cui crea l'utente.

Ok? Quindi da subito. Ok?

Ok. C'è una classe di validazione per questi campi. Ad esempio, se mettevo quel numero massimo

di mesi, i login, 12, però 12 non è più... Ok, no più no no c'è soltanto questa cosa implicita

per evitare problemi

allora in realtà le variazioni si possono mettere

sulle chiavi

anzi me la segno così poi magari

ve la faccio vedere

però in generale qui

se preferito non farlo

per una questione di

retrocompatibilità quindi si è messo soltanto un limite a livello di codice.

Allora, classi, validazioni, parametri, non scrivo sul cellulare.

Altre domande?

Ok, allora dai, ci becchiamo alle 11 e 23,

andiamoci una ventina di minuti e poi rincominciamo.

Però 20 e 23 rincominciamo, d'accordo?

Abbiamo quel gap solito.

Ok.

A dopo.

A dopo. Grazie a tutti.

Grazie a tutti. Grazie Eccoci.

Eccoci qui.

Presente.

Aspettiamo un po' di minuti e iniziamo. Grazie.

Grazie. Allora intanto qui su questo canale

sulla sezione file materiali didattico

avevo messo un file appunti docx

quindi possiamo usare questo per fare... per spostarci i file, per scambiarci... usiamo come chat, insomma. Allora, l'ambiente di formazione è sulle slide, quelle introduttive, quelle di giovedì.

Comunque, ambiente di formazione ve lo riporto qui.

Ambiente amministratore è admin underscore formazione.

Admin underscore formazione. Admin underscore formazione.

E la password, ve la dico, questo è l'utente e questo è l'ambiente.

Quindi il discorso è questo.

Adesso collegatevi su questo ambiente.

Facciamo gli esercizi quindi quello che abbiamo fatto stamattina, però lo fate voi.

Quindi l'obiettivo è crearvi questo esercizio qui, che vi sto proiettando adesso,

crearvi un vostro ufficio, un underscore cognome, un vostro ruolo, r underscore cognome,

un vostro utente che si chiamerà cognome.

E li associate la terna.

Ok?

Qua dovete avere, in senso, quella che create è una a caso, se volete.

L'importante è insomma li associate la vostra terna, d'accordo?

Per farlo lo fate sull'ambiente di formazione di cui trovate il link sugli appunti.

Dovete utilizzare l'utente admin formazione

e perdo queste maschere ok e lo create sull'azienda azienda

...

.........................................................................................................................................................

azienda e la password è formazione con la f maiuscola lo 0 ve lo proiettivo proietto qui

non ho detto qui così

0 punto esclamativo alla fine questa è la password

0, punto esclamativo alla fine.

Questa è la password.

Ok?

Fate pure, io sono qui per problemi. Grazie. Scusami Simone, mi sono perso la password.

Scusami che trovi qui in alto.

Ah, ok, perfetto.

F0.

F0.

Grazie. Grazie. Prego.

il testo dell'esercizio dove lo troviamo?

il testo dell'esercizio

ok vi esporto le slide

ve le carico comunque questo qui

vi esporto le slide

un secondo interrompo la condivisione

allora Grazie. Allora, Teams, Teams, file, materiale didattico, quindi abbiamo caricato le slide 0102, adesso vi carico la slide 03,

che poi si chiama utente profilatura, quindi è parlante, ok caricato. Grazie. Grazie.

Grazie. Grazie Grazie. Grazie a tutti. Simone, il ruolo Ucampus esiste già, mi hai detto. Infatti ho pensato a

l'utente mi dice che è in un piccolo e non validi e condividi pure così un attimo capisco

mi cerco e quindi qua vai

sono andata a crearmi l'utente

quando ho creato il ruolo

mi ha detto che esisteva già

tu eri come nel corso anche di

lunedì, martedì e mercoledì?

scusa?

tu eri come anche nel corso di lunedì, martedì e mercoledì scorso?

no, solo giovedì e venerdì ho fatto

forse è un omonimo

allora, aspetta un attimo

allora, vai un attimo intanto

sulla grafica degli uffici ruoli

quindi menu, uffici, ruoli

cerca un po' l'ufficio che hai creato

quindi Ucampus

e questo l'è associato all'azienda FM è un ufficio Ucampus. E questo l'è associato all'azienda FM.

È un ufficio Ucampus.

Perfetto.

Poi cerca un po' R...

Com'è?

Era Ucampus.

Aspetta un altro che ritornano.

Ucampus.

O.

O.

Ha nessun elemento trovato. Solo un po' a ritornarloarlo che sono cannato la descuola

non si ripropone quello che ha messo in quello che ha messo il login login in ricerca scusami quindi adesso

campus fai ricerca

facendo nuovo ti rimette

tu crei il ruolo

secondo me non ce l'hai

secondo me era rimasto il codice dell'ufficio

poi c'è l'ufficio

ok ruolo

fai pure nuovo

ok quindi tipo

tipo che ci sta non leggo ruolo giusto ai codice metti r perché comunque sia siccome vanno

a finire tutte e due sulla stessa tabella il codice deve essere univoco quindi dai pure una descrizione

quindi ruolo perfetto ok adesso ci sei adesso perché il codice ragazzi è importante

siccome

adesso condivido un attimo io

ok

allora siccome la tabella dove va a finire il tutto

è questa

cioè l'anagrafica degli uffici e dei ruoli

è sempre questa qui

si uff roll

l'abbiamo vista con l'esercizio di stamattina, un secondo che è cascato il DB, un secondo che si deve accorgere che il DB è perso la connessione,

Ok, quindi questi sono gli uffici e ruoli che abbiamo creato stamattina.

Il codice, siccome sia ruoli che uffici vanno a finire sulla stessa tabella, che questa sia UFRoll,

il codice deve essere univoco.

Ah sì, chiaro.

Era quello il discorso, diceva la prima errore che era sempre Ucampus.

Dopo qua vedete che c'è un flag URType, che è poi quello che vedete sulla maschera, che è la combo sul tipo. Ok, chiarissimo. Grazie a tutti. Per adesso fermatevi insomma

a quel testo dell'esercizio

quindi createvi l'ufficio, il ruolo, l'utente

e assegnatevi la terna

sicuramente vi dovete associare la terna

che avete creato, no? Quindi il vostro ufficio

il vostro ruolo. Poi ecco, se volete

associarvi anche una seconda terna, così prendendo

magari a caso quelle che trovate

se volete fare una prova e poi basta, firmatevi

qui. Poi fate

una login, quindi date sulla pagina

di login e fate

una login con quell'utente e vedete insomma

se l'esercizio è corretto,

se riuscite a loggarvi con il vostro utente e dovesse vedere una pagina di menu principale vuota,

come quella di stamattina, ok?

Poi vi fermate lì insomma per adesso.

Ok, fatto.

Ok.

L'ho fatto tutti?

Sì.

Quasi.

Ok.

Mi serve ancora un po'.

Sì, sì.

Ho fatto i ruoli Grazie a tutti.

Ok, fatto.

La schermata però è completamente a volta,

non c'è nessuna applicazione utilizzabile. fatto giusto così come sospettiamo anche gli altri

quanti Grazie a tutti. Grazie. Allora, io ho creato anche l'utenza, ho provato ad entrare e siccome manca la terna, ho avuto il messaggio d'errore che mancava la terna.

associati anche la terna

ok

scusami mi ricordi

associazione terna

MEF aziendale

no no allora devo andare sempre in anagrafica dell'utente

quindi vai su accesso

utenti

ti cerchi il tuo utente

poi dopo

vai in gestione

vai in modifica del tuo utente

e poi dopo c'è un tab

uffici ruoli perfetto, grazie

prego, un po' dopo lì ti raggiungi

tab

tab

tab Oh. Grazie. è case sensitive?

sì, tutto quello che trovate in areas

tranne

particolarità delle funzionalità

è tutto case sensitive Grazie. e quindi questo

ok

va beh il primo è andato

cioè sei il login?

No, ci proviamo subito.

Grazie. ok ok

ok

perfetto

c'è qualcuno che

è arrivata la pagina bianca

perfetto

c'è qualcuno che ancora non ha fatto?

ok

perfetto

prossimo esercizio

adesso Perfetto. Prossimo esercizio. Adesso cercate di abilitarvi, trovate il testo, l'abilitazione è quella di anagrafiche, quindi tutti i menu delle anagrafiche. L'abilitazione la vogliamo fare a livello, quindi è una chiave di profilatura, tipo abilitazione e quindi tra ufficio e ruolo utente decidiamo di farlo

a livello di ruolo. Quindi dovete prendere in gestione il vostro ruolo e abilitarvi i

moduli, sì, anche uno dei modi con cui si chiamano le anagrafiche, quindi giusto così

per dircelo, mi sa che però già l'avevo accennato. I progetti che avete sul vostro workspace, ok,

hanno un po' di nomenclature varie.

Ad esempio, JBF, ABF, PSG-Lib,

tutta roba che fa affidamento al framework.

Quindi sul vostro workspace avete il progetto PSG-Lib.

Se vi dico JBF, sempre PSG-Lib stiamo parlando.

Le anagrafiche sul vostro workspace è C-Hank

però ha un altro modo di chiamarle

è XMPI

qui è scritto XMPI

C-Hank Anagrafico

quindi prendete il vostro ruolo

abitatevi il modulo di C-Hank

l'applicazione anagrafiche e tutti i punti di menu

poi fate nuovamente la login e verificate che i punti di menu li vedete. Simone, nella sezione moduli vedo Cyanck

All e Cyanck B sono uguali?

No, però abitatevi, basta Sianc All, però abitatevi pure, qua ho scritto abitare i moduli Sianc, quindi tutto quello che è Sianc qualcosa.

Ci basta All in realtà.

Perfetto, grazie.

Prego. Grazie. simone scusami ma l'ultime doveva essere prima creare l'utente

quando l'ufficio mi chiede un codice che che se non trova

se vuoi condivide così capisco un attimo

26

mi vedi

sta caricando vedo che è nero

vedo che è condiviso però vedo ancora nero

aspetta

ho creato l'utente

però se lo ricerco poi non lo trovo

aspetta un secondo

ancora non vedo

vedo nero

adesso non so se stai condividendo magari un secondo schermo

aspetta un secondo Grazie a tutti.

no niente è sempre nero

no niente

hai condiviso tutto lo schermo giusto?

si

no niente

guarda

cerca un po' di spiegarmi

hai creato

l'ufficio giusto?

in realtà se creò l'ufficio ho giusto? in realtà se creo l'ufficio

ho creato prima l'utente

ok, va bene, ho creato l'utente

e come lo chiami?

username?

come stava scritto qua

ho messo l'utente

cognome

Cristiano

ok, quindi

se tu adesso vai su

configurazione accesso utenti

e cerchi sul campo login Cristiano

e fai ricerca lo trovi?

no in realtà no

però poi quando lo vado a reinserire

mi dice che già esiste

questa cosa non mi è chiara

se faccio ricerca

risultato, faccio il filtro risultato

e metto su codice non è chiaro se faccio ricerca risultato faccio il filtro risultato e

metto su codice a questo sul ruolo con la natura tu vai su configurazione

accesso utenti si su maschere di ricerca nel campo li login direttamente

lì metti cristiano poi vai ricerca piano ricerca

trovato

sì ma adesso adesso prendi la gestione

se poi ci ha pari di ruoli

se poi ci vuole

benigiani significa benedict benedict se non ho il bottoncino per per andare in edit per il modifica

c'è un bottoncino con la freccia non a destra ha a destra, gestione, gestione, ok, gestione, ok, gestione, perfetto. Ah, ok, ci sto.

Ah, ok, ok.

E qui ci devi mettere una terna.

Quindi ci devi mettere azienda FM, l'ufficio che hai creato, il ruolo che hai creato.

Quindi sullo sheet ufficio ruolo, da qua.

Sì.

Poi dopo fai una prova per vedere se

funziona la login con quest'utente.

E intanto hai fatto il primo esercizio.

Poi dimmi quando hai fatto, ok?

Scusi, per esempio, azienda, no?

Non avendo ancora creato.

L'azienda è MTFM.

Che è l'azienda di formazione.

Come codice MTFM.

Ok, ok, perché non mi... Ok, azienda di formazione, ok, metti fm che non mi ho che formati in

formazione ok ok ufficio quello che creato ruolo quello che è creato salvi

e poi provi a fare la logica ok però devo creare ancora l'ufficio di ruolo giusto

prima di come le gravi non è creato che questa associativa dice

ok, grazie

ma per inserire

l'applicazione

bisogna entrare

sull'utente

lo puoi fare anche sull'utente

però abbiamo detto facciamolo sul ruolo

quindi dovete andare su

su cavolo sta aspetta dovete andare su... Su...

Oh cavolo sta.

Aspetta.

No, dov'è l'esercizio?

Configurazione accesso utenti?

Ecco qua.

Dovremo fare a livello di ruolo.

A livello di ruolo, quindi devi andare

configurazione accesso uffici ruoli,

ti cerchi il tuo ruolo.

Ok, questo. uffici ruoli, ti cerchi il tuo ruolo. Poi dopo, una volta che hai trovato il tuo ruolo,

c'è il tab funzionalità risorse.

E poi dopo puoi seguire quello che hai scritto nell'esercizio.

Io sto proiettando.

Io ho fatto. Perfetto.

Aspettiamo che siamo tutti lo stesso punto fatto anch'io ne approfitto nel frattempo

per chiederti una cosa ho visto che cristiano ha creato il suo utente non associato all'azienda

questa cosa è possibile modificarla poi successivamente l'azienda tipo la terra ti

può sempre associare in un secondo momento ok int, ok. Sì, come anagrafica in quel caso, quindi solo come dati anagrafici,

come login e password.

Però se provi poi a fare una login con un utente che non ha terna,

ti dà un errore, non ti fa entrare.

Ti dice proprio un errore del tipo, l'utente non ha associato nessuna terna.

Ok, quindi vi fate la terna. Ok, grazie. Se andiamo dove lo trovo perché ho investazioni sistema

ma vai su funzionalità risorse poi dopo c'è un tab vai selezioni tab moduli abilitare i moduli

si anche questi a vedere a sinistra dove si a vedere che dovrebbe farti una lista duale sinistra

si anche sono sotto moduli cioè a sinistra scritto si anche nella lista duale, a sinistra si, sono sotto moduli, cioè a sinistra ha scritto si anche nella lista

duale, si, anche nella lista duale, si, anche nella lista duale, si, anche nella lista duale,

si, anche nella lista duale, si, anche nella lista duale, si, anche nella lista duale, si,

si, anche nella lista duale, si, anche nella lista duale, si, anche nella lista duale, si,

si, anche nella lista duale, si, anche nella lista duale, si, anche nella lista duale, si,

si, anche nella lista duale, si, anche nella lista duale, si, anche nella lista duale, si, si, anche nella lista duale, si, anche nella lista duale, si, anche nella lista duale, si,

si, abilitare i moduli, si, abilitare i moduli, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, si, anche nel video, sii a destra, poi dopo tab applicazioni.

La grafiche?

Sì. Lo portiamo a destra.

Ok, e quindi è finito.

No, così è finito.

è abitato il tasto,

con sette i login,

troverai il tastone.

Però vogliamo abilitarci anche il menu.

Quindi poi tab menu.

Quindi andiamo sul menu.

In alto a sinistra è una combo applicazioni.

Selezioni l'applicazione anagrafica ancora.

Eccola perché non la trovarai.

E quindi la doppia freccia,

così ce la portiamo dentro.

Perfetto.

Molte grazie.

Adesso la proviamo. Grazie a tutti. finito anch'io c'è qualcuno che ancora deve finire?

ok, quindi siamo tutti allo stesso punto

io ho qualche problema nella parte del menu, nell'altro tab, quindi sono andato in applicazioni, ho aggiunto anagrafiche, poi vai in tab menu e lo vedo vuoto.

Perfetto, in alto a sinistra c'è una combo applicazioni.

Sì, sì, ok, non l'aveamo selezionato che ok perfetto grazie Grazie. Dobbiamo qui accedere per verificare che tutti i menu siano attivi?

Sì, sì.

Ok. Grazie a tutti.

Grazie. Ci siamo? Funzionato?

Sì, il da me funziona vale sempre.

Come?

Il da me funziona. Sì, sì, sì.

Allora, scusami, è andato tutto bene ho fatto anche una

prova ma vorrei giusto capire

un attimo come funziona

l'interfaccia grafica perché evidentemente

mi sta sfuggendo qualche cosa

per prova io sono andato

a vedere se si apriva anche una

funzione e ho scelto

un nucleo familiare sotto base

dopodiché ovviamente

non avendo nulla granché da fare,

ho semplicemente cliccato sul pulsante esci

e sono ritornato correttamente sul menu iniziale.

Vedo che quello che ho cliccato è rimasto in eretto.

È un funzionamento normale mi dice qual è l'ultima cosa

che stavo facendo

esatto

ok

perfetto

prego

ci sono altre domande?

scusate

mi chiamava

no io

ho creato l'utente

ho creato l'ufficio

poi dopo ufficio ruolo

mi risulta già che

non lo riesco a trovare

quando lo creo

l'associazione mi dice che già esiste

tu hai creato l'ufficio

hai creato il ruolo

adesso sei nel tab

uffici ruolo del tuo utente, giusto?

esatto, esatto

e non vedo niente però

e non vedi niente nella ghiglia, perfetto

ora, sotto vedi tre campi, ufficio, azienda, ufficio, ruolo, giusto?

esatto, esatto, in giallo obbligatorio

allora, parti dall'azienda

azienda, apri la lista valori

e steli con il bottoncino a fianco

e seleziona l'opzione FM.

Cioè l'azienda che si chiama azienda formazione.

Se scorro la lista non la trovo.

Vedo ASL1, ASL2, ASL8.

Eh, forse perché...

Ah, ok.

Eh, no, hai ragione.

FM stava sotto tutto.

Ok.

E se ne ho selezioni questa. Poi dopo... Metto U Cristiano. No, no, no, guarda,, F ma stava sotto tutto. Perfetto, adesso ne ho selezioni questa.

Poi dopo?

Metto U Cristiano.

No, no, no, guarda, anche se non stavo U Cristiano, guarda.

Adesso apri la lista valori dell'ufficio.

Ti apri la lista valori con tutti quanti gli uffici.

Cerca un po' il tuo.

Cioè?

se pressioni appure per il ruolo stessa cosa premi il bottoncino e cerchi r cristiano

a questo forse non ha creato che vedo tutti quanti tra nello di conferma e a quel punto

lui ti porta la lista sopra nella miglia ma scusa di questo no forse non l'ho creato correttamente, non lo vedo, non lo trovo. Ok.

Devo ricrearlo.

No, ok, allora, questa pagina lasciala così.

Tu intanto torna sul menu principale.

Vai a accesso uffici ruoli.

Sì.

Prova a cercare, tu come descri...

Vabbè, prova a cercare un attimo come ti aspetteresti che il codice del ruolo.

Cerca un po', metti il tuo codice ruolo così come pensi di averlo scritto.

E fai ricerca.

Sì, Cristiano, ricerca.

Esce fuori?

No, nessunamente no.

Ok, prova un attimo a ricrearlo.

Allora crea, fai nuovo.

Metti le az aziende metti FM

il tipo ricordati di mettere ruolo

e poi vabbè il codice

quello rimane

nome

ruolo cristiano

con il nome ad escoglio

no

conferma

ok non ho d'errore quindi ritorno su conferma

ok non ho d'errore quindi ritorno su ritorno su accesso utente ancora aperta la pagina ancora lì dove stavi prima

si

si

quindi se hai cliccato forse te l'ha azzerato ok, si ritorna

ok, sto sull'utente

gestisci

ufficio ruolo, sheet

e poi faccio

FM

FM come azienda

FM, fra qua ufficio, revistiano, pluro, ah, è il corso, questa è revistiano,

conferma, conferma.

a te mettermi 10 al tema di chi aveva ultime cielo warning ti dice che ci vorrà tempo per applicare la spiegazione fa subito quindi adesso vai prova allogarti quindi fai esce e prova allogarti

con quest'utente prova a farlo in collo tante che creato e vediamo che succede facciano un

out ragazzi quando create un laterna che vi dice quel messaggio

le abitazioni potrebbero richiedere qualche minuto

perché che cosa viene fatto

giusto così a rivela a lasciarci quello che viene detto oggi

quando ho creato un nuovo

ad un utente li associate in una nuova terna

rivene fatto quel merge dati

che abbiamo detto

prima

oggi sul profile writer, però specifico per quell'utente lì.

Viene aggiunto quell'utente, viene creato sulla sigaretta di utente

dei record per quel nuovo utente.

Il motivo per cui dice che ci potrebbe voler minuti

è perché potrebbe potenzialmente volerci minuti,

perché magari pensiamo un ruolo estremamente complesso

che ha migliaia e migliaia e migliaia di record, di profilature, eccetera,

e quelle devono essere duplicate

sulla sigaretta di usanti, quindi potenzialmente

ci vorrebbero minuti. In realtà

dei fatti, qua si parla di

zero, alla peggio si parla di forse

qualche decina di secondi.

Però l'è scritto

minuti perché fondamentalmente nel nostro contesto

non le sappiamo a livello

di prodotto tutte le possibili

abitazioni che uno può andare a configurare

comunque nel caso

le abitazioni sono in corso

e l'utente prova a loggarsi

riceverà infatti un errore di questo tipo

dice attenzione, attendere prego

le abitazioni sono ancora in corso

Gianfranco, ti ha funzionato?

si mi sono logato

quindi c'è il menu principale vuoto

giusto?

vedo tutto

blank

ora devo fare

allora c'è stato logout

sì

perfetto

adesso fai l'esercizio dopo

che questo qui

te lo riproietto

quindi ritorni con l'utente

quello di amministrazione

poi prendi in gestione il tuo ruolo

e su quel ruolo ci abiliti i punti di menu

di anagrafiche

ok, ok, grazie

prego Grazie. Grazie a tutti.

Grazie a tutti. Continuato?

Continuato?

Sì, sta sotto moduli.

Ok.

Moduli, abiti, quello che trovi che inizia con Sianc.

Poi vai su applicazioni.

Anagrafica. Grazie. Sotto me non compare niente.

Ok, poi ando sul tab menu, poi in alto a sinistra c'è un combo box applicazioni,

selezione una grafiche, e poi dopo ti fai un po' le menu.

Tutti bene. e poi dopo ti fanno proprio poi meno

quando li porta a destra che c'è una doppia freccia o una singola va bene anche quella centrale quindi tipo play quella per

In generale hai nella lista a sinistra tutti i menu disponibili e c'è un check a sinistra, quindi puoi decidere di abilitare un menu puntualmente, oppure se fai la doppia freccia lui ti fa l'abilità tutto, ti porta tutto a destra.

Quello play serve soltanto quando vuoi abilitare un singolo punto di menu.

Ok, in questo caso sono tutti e poi quando vanno a destra

sui collegati non vanno

spuntati

non bisogna fare nient'altro

anche perché sotto i tasti conferma non ce l'hai

quindi è autocommittante

si

quindi anche gli altri

meno, moduli, applicazioni

già stanno a destra

è autocommittante tutto.

Quindi provate solo a riloggarti e vedere se...

Sì, log, ok. Grazie. ok Simone

perfetto

non nemmeno

li vedi giusto?

sì sì

perfetto ok quindi siamo tutti

ottimo

grazie

a te

allora andiamo avanti

allora pipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipipip Allora, andiamo avanti allora. Pimpi di pipi.

Allora, i parametri di installazione li abbiamo visti, quindi sono tutto quello che trovate sotto sistema parametri di installazione, abbiamo già detto.

Parliamo della profilatura configurabile.

Che cos'è sta profilatura configurabile. Che cos'è sta profilatura configurabile?

Allora, quello che abbiamo detto e anche visto,

relativo alla profilatura,

è

Fa affidamento al fatto che sono chiavi rilasciate dal laboratorio di sviluppo, cioè rilasciate con il prodotto.

Quindi in soldoni il fatto che noi abbiamo il parametro, quello che abbiamo visto aziendale, calcola automaticamente il codice fiscale

e il fatto che in virtù di quella selezione del parametro poi l'applicativo calcola in meno il codice fiscale

è perché è stato stabilito da prodotto.

con il mio codice fiscale è perché è stato stabilito da prodotto

cioè a livello di prodotto è stata

rilasciata quella chiave di profilatura

e a livello di prodotto

c'è la lettura di quella chiave di profilatura

all'interno del codice

simile a quello che abbiamo fatto sul wizard

quindi che ne so, immaginiamoci che

adesso poi quella chiave andiamo a rilasciare

la chiave del nostro wizard, abbiamo noi

creato la chiave per poter

fare click sul tasto crea corso del nostro wizard

e nel nostro codice del wizard no abbiamo messo la lettura quel profile manager get profile manager

che va a leggere la chiave questa è la profilatura esiste poi questo tipo particolare profilatura che

chiamata profilatura configurabile a differ differenza della normale profilatura permette di essere

creata e personalizzata sul singolo cliente. In altre parole vengono aggiunte delle ulteriori

chiavi di profilatura rispetto a quelle rilasciate dalla Btu. Quindi non serve che il laboratorio

di sviluppo preveda di creare una determinata

chiave. Al massimo, nella profilatura configurabile, quello che viene fatto è che è prevista la

lettura della chiave, ma l'attuale creazione e anche la configurazione è qualcosa che si

fa sul progetto, quindi in questo caso sulla Sardegna.

Adesso vi dico alcuni esempi, poi vediamo come si fanno.

Tra le possibili configurazioni troviamo la visibilità delle maschere, quindi il fatto di poter stabilire se un utente può inserire, modificare o cancellare un record,

è una cosa che non è che noi immaginiamo adesso abbiamo abilitato i punti di menu delle anagrafiche, se vedete ce ne sono già forse una trentina di punti di menu, immaginate su tutti i moduli di Areas non so quanti centinaia di punti di menu abbiamo, quindi non è che potevamo rilasciare una chiave di inserimento, di modifica, di variazione per ogni singolo punto di menu, anche perché nella stragrande maggioranza dei casi

non si ha questa necessità, alla fine i punti di menù dove uno davvero vuole andare a decidere

se un utente può inserire, modificare o cancellare sono molto pochi rispetto al totale, quindi che si

fa? Si demanda a questa funzionalità chiamata profilatura configurabile, quindi sul progetto di decidere su questo punto di menu voglio decidere la visibilità, voglio decidere se un utente

può inserire o modificare. Quindi il va, utilizza, adesso vediamo come, questa funzionalità

che si chiama profilatura configurabile e dice su questo punto di menu voglio definire se

l'utente può inserire. Su quest'altro invece non faccio nulla. Questa è una cosa che si può decidere

tramite profilatura configurabile. La visibilità dei singoli campi, quindi ad esempio anche qui,

su una singola maschera andare a dire magari, ok, ad esempio sulla maschera del paziente ci saranno

il campo nome, cognome, sesso, data di nascita. Dico il nome obbligatorio e il cognome no. La data di nascita è visibile, non visibile, editabile, non editabile e così via dicendo.

Anche qua, nella grande maggioranza dei casi, i miei campi,

non voglio magari specificare una qualche abilitazione particolare,

sono editabili, tanto basta.

Però ci possono essere dei campi in cui magari voglio dire no, questo campo è obbligatorio

quindi non è che uno rilascia una chiave di profilatura

per tutti i campi possibili e inimmaginabili

che abbiamo sul database di Arias

che sarebbero milioni

no, va a dirgli

puntualmente sul cliente

a specificare

su quale campo si vuole gestire la visibilità

altra cosa sempre la visibilità.

Altra cosa sempre di visibilità, ma dei bottoni, dei tab in maschera,

quindi magari immaginiamo ad esempio la nostra gestione corso,

abbiamo due tab, uno è per inserire gli esami e uno per inserire gli studenti.

Io magari dico no, il tab studenti è nascosto, non lo può vedere l'utente.

Oppure anche il bottone, il nostro bottone crea corso.

Adesso abbiamo gestito una chiave di profilatura così, però magari noi potremmo proprio nasconderlo addirittura con la profilatura configurabile.

In ultimo, aggiungere anche delle informazioni aggiuntive in maschera.

Cosa vuol dire? Questa funzionalità è chiamata

extra data.

Aggiungere ad esempio proprio dei campi, no?

Quindi magari, che ne so, siamo sempre

sulla maschera del nostro,

nella grafica del paziente,

vogliamo aggiungere un campo,

abbiamo bisogno che sul paziente si gestisca

un'informazione in più, che ne so, dico una cavolata

proprio così giusto per il codice ministeriale, ma io me la sto, dico una cavolata proprio così giusto per codice ministeriale

ma io me la sto inventando, non ha senso

però per dire, codice ministeriale cosa dovrebbe

fare uno? Dovrebbe

chiamare il laboratorio di sviluppo, dirgli mi aggiungi

il laboratorio di sviluppo deve aggiungere la colonna sul

db, la colonna sul db

aggiungere la proprietà sul bin, sull'xml

aggiungere sulla gsp in maschera

fare tutto lo sviluppo

tramite l'extra data è possibile aggiungerlo semplicemente tramite configurazione applicativa.

Specialista di prodotto, se la canta e se la suona.

Si aggiunge questo campo extra.

Nella profilatura configurabile rientra anche una cosa che noi chiamiamo script rhino.

Che permette di aggiungere logiche

di business e di intercettare

particolari eventi per modificare il normale

flusso applicativo, poi facciamo un esempio

però in pratica anche qui

rientra sempre un po' come gli extra data

per evitare di dover fare

perché magari la modifica è piccola, è banale, è ritenuta

di icola, eccetera, di coinvolgere il laboratorio di sviluppo.

Per cui io magari voglio aggiungere una particolare logica di business

alla mia maschera dei pazienti,

alla mia maschera di gestione dei comuni,

qualsiasi maschera,

voglio aggiungere una mia logica,

invece di demandare l'implementazione al laboratorio di sviluppo,

mi scrivo un mio piccolo pezzettino di codice in modalità RAI,

quindi con la sintassi JavaScript-like,

poi vediamo come,

me la implemento e addirittura posso cambiare il flusso di lavoro,

ad esempio aggiungere delle validazioni al conferma,

al conferma dell'utente ci aggiungo delle mie validazioni.

Tutto ciò che abbiamo elencato,

quindi adesso,

visibilità delle maschere, dei campi, dei bottoni,

l'aggiunta di campi extra, l'aggiunta di logiche di business,

con i script rino, rientra in quello che viene definito

tutto il magico mondo della profilatura configurabile.

Facciamo un esempio.

Adesso questo esercizio, adesso torniamo dopo,

lo fate anche voi, però adesso tornate, insomma,

l'esercizio lo faccio prima io, faccio vedere come si fa, poi lo fate voi dopo.

di mi logo con il mio utente corso gbf qui nella maschera anagrafiche

non mi utente

nel nella maschera cambio la login devo lavorare con quella di formazione, ecco qua.

Ok, ero con l'azienda di Cagliari.

Allora, sulla maschera anagrafiche base comuni, ok, questa qui è una maschera che mi permette di cercare i comuni,

maschera che mi permette di cercare i comuni, di andare in gestione, quindi andare in edit di un comune, di modificarlo, inserirlo eccetera. L'esercizio vuole far sì che su questa maschera

l'utente non possa inserire nuovi comuni e non possa modificare il campo codice ISTAT.

inserire nuovi comuni e non possa modificare il campo codice istat allora scusate perché in realtà questo quell'utente che usato già mi sono già sparato per il corso ai vostri colleghi no entro

con l'utente che abbiamo creato allora questa mattina che utente andesco rapi con questo qui questo fase comuni

comuni

già l'ho fatto

me lo faccio su un altro

punto di meno

me lo faccio sui

prodotti

qua già ci sta, ecco il caspiterina

tipi pagamento

tipi pagamento

vediamo un po' cosa è questo, tipi pagamento

ok

allora mettiamo caso lo facciamo qui, qua nell'esercizio

parlava dei comuni, poi adesso per fare

l'esercizio noi ci assegniamo

dei punti di menù, anzi

prima di andare avanti, scusate

giusto un attimo per capire

io qua avendo 10 persone

mi dite un attimo

chi di voi sta facendo il corso

altri sono qui

controllo

chi di voi segue il corso?

io

mi dite un attimo il cognome

Orani

Orani Har Orani.

Aru.

Come?

Aru.

A Cristiano.

Campus.

Siano.

Debrisco.

Scusa, Scusa.

Campus.

Debrisco.

Cristiano.

Cristiano.

Dejana.

Perdonami.

De... Dejana. Dejana. Perdonami. Dejana.

Ok, grazie.

Altri?

Perfetto, ok, siamo allora questi sei.

Perfetto, ottimo.

Non è complicato assegnarci le cose.

Ok.

Quindi, Non è complicato assegnarci le cose. Ok, quindi, supponiamo ad esempio, tornando qui, facciamo sul tipo pagamento, perché esercizio sul comune l'ho fatto già ai vostri colleghi su questo ambiente.

Ad esempio qua, su questa anagrafica posso inserire un nuovo tipo di pagamento.

Sono libero.

Oppure se vado in modifica di un tipo di pagamento io posso modificare

la descrizione volendo ok facciamo che voglio far sì che l'utente non abbia più l'abilità la potenzialità di cliccare sul nuovo che non possa modificare il campo descrizione

in modifica come si fa tramite questa profilabile. Ora, come si accede alla profilatura

configurabile innanzitutto? Paradossalmente non con un utente amministratore, ma deve essere

con un utente, adesso qua ce ne ho uno, che poi vi faccio usare anche a voi, che si chiama Corson underscore jbf, deve avere il punto di menu configurazione avanzate profilatura

configurabile, questo punto di menu deve essere riabilitato, quindi con un utente applicativo

non amministratore, perché l'amministratore

la profiliatura configurabile

il punto di menu non lo vede

perché questo?

poi lo capiremo

perché qui in realtà

profiliatura configurabile

quello che si vuole fare è

creare la chiave

non abilitarla

creare

quindi adesso noi andiamo

con la profiliatura configurabile

configurabile a crearci una chiave in cui potremo stabilire che sul tipo pagamento non si può inserire

e che la descrizione non è editabile. Poi dopo, tornere a nel filone che abbiamo già visto, quindi con l'utente

administrator andremo a dire ok, questo utente lo può vedere, lo può inserire, questo utente non può inserire,

questo utente può modificare la descrizione, questo utente non può modificare la descrizione.

modificare la descrizione, questo utente non può modificare la descrizione.

Primo step è andare a selezionare l'applicazione, ad esempio il nostro caso è Anagrafiche,

menu, si seleziona il punto di menu dove si vuole lavorare, il nostro punto di menu era sotto Anagrafiche, pagamenti, tipi pagamento. Prendete qui il pulsantino rosso, la pallina rossa.

Cioè, non prendete la cartella.

Configura.

Configura.

E ora qua ci sono queste cose qui.

Abitazioni principali

scusa, Timone, scusa

adesso sei con l'utente quello lì, jbf

sì, corso jbf

perché praticamente ci serve un utente

come si?

ok, ok, scusa

sì, sì, no, non mi era perso

comunque seguite a me, dopo vi do

le credenziali e poi fate pure esercizi

adesso seguite

quindi adesso ci creiamo la chiave,

cioè ad esempio voglio, mettendo il check qui,

inserimento, me li metto dappertutto, va bene?

Anzi, inserimento e variazioni, mi metto qua.

Che cosa sto facendo?

Facendo questi click.

Adesso facendo conferma.

Ho creato una chiave di profilatura

che vi permetterà poi di decidere se un utente può

inserire o variare un tipo di pagamento così creo creo la chiave qua sotto ci sono anche due check

default perché perché momento in cui che reo la chiave confermo, di default nessun utente è abilitato. Io creo

la chiave, è un po' come quando prima abbiamo creato la chiave del wizard, abbiamo creato

la chiave del wizard e poi non l'abbiamo abilitata, di default che significa? Di default vuol

dire che non è abilitata. Quindi se io invece voglio fare il contrario, voglio dire no,

guarda la creo perché magari dopo la voglio gestire ovviamente però di default parti che manteniamo come dire la retro compatibilità no?

Parti che comunque le persone possono continuare a inserire e variare.

Che faccio? Ad esempio faccio qui su variazione.

Mettete qui la spunta anche su default.

Qua invece lo lascio così di proposito.

Confermo quindi che succede? Che ho creato?

Poi la vediamo dove.

Una chiave di profilatura per l'inserimento, una chiave di profilatura per la variazione e quella di variazione l'ho anche di default abilitata a tutti.

E questo è per la prima parte dell'esercizio, quindi disabilitare l'inserimento.

Seconda parte dell'esercizio, abbiamo detto che vogliamo lavorare su il singolo campo, il campo descrizione della tipo di pagamento non vogliamo renderlo editabile. mi vengono, vedete, fatta la lista di tutte le proprietà del bin,

intanto siamo da programmatori, qua ve lo posso dire,

tra bin, del bin, che sottende il punto di menu,

tipi pagamento, no?

Quindi, tra le proprietà c'è, vedete, questo qua, dove lo va a prendere?

Giusto un attimo anche per allacciarci a quello che abbiamo visto.

Questa è la proprietà del bin, e questa descrizione la prende dall xml del bin e questo è anche un altro punto dicevo che la

già registro metadati era uno ve l'ho fatto vedere questo è un altro punto dove dove la caption che

andate indicare l'xml viene visualizzata per questo importante importante nel senso poi alcune

proprietà sono autoesplicative

tipo descrizione mod pagamento è chiaro cosa sia

però per uno specialista

per un cliente, per un utente

diciamo questo è un punto di menu non per gli utenti

è sempre per gli specialisti, però può essere un aiuto

quindi vabbè, voglio gestire qua la visibilità

su descrizione

seleziono

conferma

e mi viene riportato qua

poi devo mettere un check qui quindi seleziono, conferma e mi viene riportato qua.

Poi devo mettere un check qui, confermo, quindi anche questo il check che fa crea la chiave di profilatura,

volendo poi li posso pure specificare un default, come abbiamo detto prima, però, stic cavoli. Abilitazioni.

Stessa cosa.

Perché abbiamo detto che... Quindi questo che succede?

Qual è la differenza tra parametri e abilitazioni?

Perché sto facendo questa cosa due volte?

In realtà potevo farlo direttamente solo su abilitazioni.

Però lo faccio due volte perché qua in realtà

mi creerà una chiave di profilatura di tipo parametro.

Quindi che potrò gestire a livello aziendale

e varrà per tutti gli utenti di quell'azienda

se faccio abilitazioni mi creerà una chiave di profilatura

di tipo abilitazione e quindi la potrò declinare

solo su ufficio, ruolo, utenti

quindi in questo caso in realtà per fare l'esercizio

mi bastava qua abilitazioni

ok?

Mettiamo la spunta

è come se fossero parametri a livello aziendale quindi

super super super diciamo e quindi abilitazione è una sottospecie e ristretta di stai che agisce

sui singoli uffici singoli ruoli o addirittura sui singoli utenti poi al solito anche qui

gli utenti poi al solito anche qui posso stabilire eventualmente un default che mi varrà per tutti gli utenti che se ho commetto qua come default vorrà per tutti ok però default qui

non ce lo vogliamo mettere anche perché in realtà default considerate questo default vuol dire che

Lasci come prima, quindi oggi è editabile, sarà. Fine. Quindi, quindi, no scusate, non l'esercizio, questo è il codice di strato, ok.

Sì, ok, quindi è fatto. Cioè, la livella di profilatura configurabile è fatta le operazioni.

Abbiamo finito. Abbiamo creato le nostre chiavi.

Ora che faccio? Loggo. C'è tutto.

Entro con il mio utente di amministratore

conferma

prendo il mio ruolo che abbiamo creato questa mattina

che è r underscore ap

ricerco

funzionalità risorse

vedete che qui c'è un link

che si chiama profilatura configurabile.

Tutte le chiavi che vengono create

su Improteamita,

la funzionalità profilatura configurabile

vanno a finire in questo link speciale, ok?

Ad hoc.

Quindi profilatura configurabile.

Poi qui è tipizzato per applicazione,

quindi nel nostro caso

era un punto di menu dell'applicazione anagrafiche

quindi

anagrafiche, ecco qua è scritto

anagrafiche centralizzate

e qua trovate una chiave

qua siamo tra programmatori

un link che ha il nome del bin

il nostro nome del bin era tipo pagamento.

Vedete?

Qua troviamo le chiave che abbiamo creato.

Quindi abbiamo creato una chiave per inserimento, abbiamo creato una chiave per modifica.

Su modifica abbiamo messo anche il default, quindi già ce l'abbiamo cercato.

In più c'è un tab campi. Eccolo qua anche qui, vedete? Mi ha creato una chiave

di profilatura in cui io posso decidere la visibilità del campo descrizione. Ora,

l'esercizio ci dice che non vogliamo dare l'inserimento, quindi di qua non facciamo niente,

non mettiamo il check, lasciamo così com'è.

Mentre qui vogliamo renderlo non editabile, quindi metto non editabile.

Conferma.

Chiudo.

Mi logo con l'utente AP, la lista programmatore.

Anagrafiche, pagamenti, tipi pagamento, ecco, vedete, nuovo e disabilitato,

non posso fare niente. Adesso vado in gestione di un esattivo pagamento, vedete che qua non è editabile, prima era obbligatorio, era già

letto editabile vedete non è più editabile

e qua il nuovo continuo a essere

stabilitato tutto questo senza rilasciare

codice questo cambio di comportamento

dell'applicativo ok ma configurandoselo

ad hoc senza neanche prevedere non è

che hanno rilasciato è stata rilasciata

qua una chiave di profilatura per gestire

queste cose ce la siamo creata con la

profilatura configurabile poi dopo quel

punto tramite amministratore, come abbiamo già visto

oggi, ci si può

ci si dà le abilitazioni.

Tutto chiaro? Ci sono domande?

Tutto ok?

Chiaro.

Abbiamo usato l'utente in corso

jbf per aggiungere il parametro

giusto?

per creare la chiave

per creare la creazione della chiave

quindi non l'abilitazione effettiva della chiave

ad un utente eccetera

la creazione occorre farla

con un utente non amministratore

per il motivo che non vede quella parte

perché non vede quella parte lì non vede quella parte lì.

Diciamo che quella maschera ha bisogno di un utente che abbia una terna.

L'amministratore è un utente che non ha terne.

La discriminante è questa.

Quindi siccome la maschera è proprio sotto ha bisogno di un utente che abbia una terna,

che troppo tanto non ha valore.

Però deve averla e quindi di conseguenza abbiamo bisogno di un utente normale.

Perfetto, quindi da qui creiamo il parametro e poi da amministratore gli facciamo delle impostazioni.

Sì, dopo li torno al filone normale.

Perfetto.

perfetto andiamo avanti un attimo con la presentazione

della profilatura configurabile

e poi facciamo gli esercizi

intanto andiamo avanti

qui è tutto chiaro

non è nulla di trascendentale

la profilatura configurabile

come vi dicevo ci possiamo fare tante cosette

ad esempio

se non sta nell'esercizio lo vediamo, abbiamo visto quattro, due già le abbiamo viste, perché abbiamo visto sia la visibilità delle maschere, quindi inserimento modifica, ma abbiamo visto anche la visibilità dei campi con il campo descrizione.

Quindi qua mi seleziono il mio punto di menu, però come dicevo,

la stessa cosa si può fare anche per la visibilità dei bottoni, dei tab,

ma il funzionamento è lo stesso.

Eccolo qua, ad esempio qua c'è soltanto il tab, la maschera dei tipi pagamento, ha soltanto un tab, quindi stessa cosa, qua io mi seleziono questo qui e così mi crea una chiave di profilatura per gestire la visibilità del tab, la visibilità del tab è lo vedi o non lo vedi, se metto qui,

qua anche il check vuol dire che di default lo vedono tutti.

Se lo faccio sotto parametro, cosa vorrà dire?

Mi creo una chiave di profilatura a livello aziendale,

quindi lo decido a livello aziendale.

Se me lo metto qua, mi creo una chiave di profilatura

di tipo abilitazione, quindi lo posso decidere a livello

di ufficio o ruolo utente.

Ok? Il funzionamento è lo stesso.

Qui vedete quello che è riportato poi

sulla profilatura configurabile, sul linkettini.

Scusa se ti interrompo, ma tu parlavi di aver modificato la visibilità del tab.

Sì.

Mi sono perso perché la visibilità

e non la modifica?

eh no, questo è come funziona

il tab è o lo vedi o non lo vedi

ah ok, va bene

allora mi ero solamente perso

no quindi qua

nel senso sulle anagrafiche ad esempio

pagamenti tipo pagamento

se io cerco una modalità di un tipo di pagamento

in realtà qua manco

non ha senso perché in realtà non è manco un dettaglio

è se stesso quindi non avrebbe proprio senso

però ha senso ad esempio

sui dettagli

quindi che ne so

mi prendo avendo i comuni mi prendo

ecco vedete qua c'è un tab comune asl c'è anche un bottone stradario ok allora se io adesso vado

in profilatura configurabile di questo del comune che ha questo tab e questo bottone, così lo vediamo e ci capiamo, tanto qua esco

annullo tutto, quindi applicazioni anagrafiche, in menu mi seleziono quello dei comuni, quindi

anagrafiche, base, comuni e stati esteri, ecco vedi, qua ci sta il tab comune a questo qui quindi no qua posso semplicemente decidere se

vederlo non vederlo quindi se vederlo come in questo caso che ci clicco e posso consultarlo

oppure metterlo in grigito quindi questa cosa quasi può fare qui ok tra l'altro il fatto che c'era uno solo tratto in inganno.

Sì, infatti lì non c'era in realtà un dettaglio, quindi non ha senso.

Sul tab di testato ovviamente non ha senso, perché appunto uno mette o inserimento modifico, come abbiamo fatto prima, in quel caso lì, scusami.

La stessa cosa si può fare addirittura per i bottoni, quindi ad esempio il bottone stradario, faccio vedere non lo faccio vedere e quello si fa sempre qui clicchi e si crea una

chiave profilatura dove posso decidere lo vedo non lo vedo

Fatto, questo è quanto.

Ok, quindi queste sono le tre possibilità, quindi le possibilità di maschere abbiamo detto, di scambio abbiamo detto, bottoni e tab l'abbiamo appena detto.

Però, come vi dicevo, ci sono anche la possibilità, rientra una proprietatura configurabile, la possibilità di aggiungere dei campi e delle logiche di business aggiuntive.

Ok? Quindi, ad esempio questi script Rhino.

Gli script vengono utilizzati per aggiungere logiche di business ad Arias e modificare il normale flusso applicativo.

Gli script sono realizzati tramite la sintassi Rhino, che quindi è una sintassi mezzo JavaScript e mezzo Java.

La sintassi JavaScript però vi permette poi anche di accedere a classi Java,

sia classi Java rilasciate ma anche librerie, insomma un po' di tutto,

permette di fare praticamente qualsiasi cosa,

e permettono di intercettare particolari eventi esposti da areas stesso.

Che significa?

Nell'esempio qui che troviamo è stato creato uno script e sbagliato al doppio apice

office fa schifo ecco

scolla speciale quindi sono fatto ad esempio uno script

che cosa fa?

intercetta l'evento di salvataggio

nel particolare

prima che venga fatto il salvataggio

fa delle verifiche

ad esempio si prende l'utente collegato

recupera la username e dice se l'username è uguale a Mario Rossi, blocca tutto, ferma tutto, mostra questo messaggio, questo errore, il salvataggio viene impedito e fine.

Tutti gli altri invece torna un trucco per dire, ma sì, vai avanti, prosegui il salvataggio, ok?

vai avanti, persegui salvataggio, ok?

Quindi, qua è ovvio che all'interno della mia funzione posso metterci proprio di tutto, qualsiasi cosa,

invocare classi, utilità, fare query, update,

posso fare quello che voglio qua dentro,

quindi la mia logica di business la posso fare come voglio.

Dove poter mettere la mia logica di business invece è, come dire,

incasellata all'interno di una gestione eventi.

Cioè ogni qualvolta l'utente preme il tasto conferma, elimina, ricerca, eccetera,

Arias genera degli eventi che poi in realtà l'abbiamo visto, vi ricordate venerdì abbiamo visto

l'utilizzo, ritorno al mio codice del wizard,

abbiamo parlato dell'utilizzo del binder,

che abbiamo detto un wrapper del mio bin,

abbiamo detto perché abbiamo questo oggetto qua,

perché non facciamo direttamente il lavoro sul corso,

perché se vado a prendere l'implementazione concreta

di questa classe, anche questa avevamo visto,

profile binder base,

vedete?

Forse lui ogni volta che viene fatto qualcosa

banalmente abbiamo visto addirittura la set property

quando viene settata una proprietà

vedete fire event, before set property

quindi invia degli eventi

se noi qua avessimo preso semplicemente

corso, avessimo fatto new corso

corso set nome, set codice

quello che è

il codice lo settavamo ma finiva lì.

Invece il farlo attraverso questo oggettino

ci permette poi di generare tutta una serie di eventi,

prima del salvataggio, dopo il salvataggio,

prima della cancellazione, dopo la cancellazione,

prima del caricamento, dopo il caricamento e così via dicendo,

che poi possono essere usati in diversi contesti

e questo è uno di quei contesti,

potermi agganciare a quegli eventi per aggiungere il mio scripterino.

Chiaro?

Chiaro.

Perfetto. Quindi facciamo ad esempio la prova, poi andiamo a pranzo facciamo la prova

proprio sempre su questo

tipo di pagamento

dove sono?

oh caspita

il mio utente ap

no mi sono sloggato

ok quindi qua

tornando

rilogandomi con utente ap

per fare i corsi ci vogliono 4 monitor

utente ap, quindi pagamenti, tipi pagamento

ci siamo tolti la possibilità di fare nuovo

però abbiamo ancora la possibilità insomma di

di inserire, di accedere, di aprirlo, modificarlo, fare conferma, eccetera.

D'accordo?

Facciamo che al conferma voglio far sì che l'utente AP non sia abilitato.

Mostra un messaggio d'errore.

Quindi diciamo, andiamo a mettere questa funzione qui.

Vediamo però come si mette questa funzione.

Sempre tramite profilatura configurabile, abbiamo detto.

Quindi entro con un utente che ha il menu della profilatura configurabile abbiamo detto quindi entro con un utente

che ha il menu della profilatura configurabile abilitato

mi chiudo un po' di cose

un secondo solo

quindi via pure questo

questo via

questo per adesso facciamo logout

quindi sto adesso sul mio utente

corso gbf avanzate

profilatura configurabile mi seleziono il punto di menu, quindi abbiamo detto che è pagamenti, tipi pagamento, corsogbf.

configura, configura, poi vi spiego cosa è questo script, configura e lo leghiamo qua, script.

E qui abbiamo una textarea dove mettere il nostro script.

Ora, la cosa importante, adesso faccio copy e incolla dalla slide, però ce la riporto e via.

E lo poi personalizzo con il nome del mio utente,

che si chiama utente underscore ap,

una lista programmatore, è salvo.

Però, quello che potete fare con gli script,

lo trovate tutto qui dentro,

cioè un oggetto utilità,

se ci cliccate questo libricino,

vi fate tutte le liste, ok?

Di manuali.

L'aprite, è tutto un manuale con tutte le cose che potete fare.

Query, così si fa una query, per fare una query si fa così, db utils, execute query, questa è la query, prendete

il risultato, pure che ne so, profile utils, vi permette di leggere delle chiavi di profilatura,

così come abbiamo fatto nel codice corso, quindi potete fare veramente di tutto, ad esempio

questa qui, profile utils, si riallaccia a quello che vi dicevo prima quando vi dicevo che sotto configurazione avanzate, personalizzazione parametri, qui uno si può personalizzare i parametri sul cliente.

Questo potrebbe essere un altro caso d'uso.

Io mi creo il mio parametro,

me lo creo io,

e poi dopo il significato funzionale

me lo implemento qui nello scriptrino.

Perché lo posso fare?

Perché qui, tra le funzionalità che ho,

addirittura che mi posso andare a leggere

la mia profilatura come mi pare.

Quindi c'è un po' il mondo qui, quindi andiamo nel dettaglio.

Però, insomma, tutto documentato, quindi è anche facile di lettura.

Per adesso però ci limitiamo a questo.

Quindi creiamo...

Ah, anche per sapere quali sono gli eventi che potete intercettare,

sono sempre scritti qui dentro

eccoli qua

oggetti binder

l'after create, quindi dopo che viene fatto il nuovo

il before load, prima del caricamento

l'after load, dopo il caricamento, prima di salvare

dopo salvare e così via dicendo

tutto abbastanza, anche questo qui

chiaro

la cosa importante da sapere è che tutto ciò che è before

ha potenzialità di veto quindi può bloccare nel nostro caso vogliamo la cosa importante da sapere è che tutto ciò che è before ha

potenzialità di veto

quindi può bloccare

l'after invece

è sì

per implementare altre logiche

ma

non è che si può bloccare

nel nostro caso

quindi facciamo il before

diciamo

prima che salvi l'oggetto

mi prendo l'utente

se la username

e questo utente underscore ap

allora mostriamo questo messaggio

salvo

ora badate bene

qua sopra vedete che c'è scritto versione

ogni volta che leggete una cosa di questo genere

versione o un tastino

la funzionalità è sempre la stessa

cioè a che serve?

serve per gestire delle versioni

dell'oggetto che avete

quindi poi vediamo che in altre esercitazioni,

per altri contesti completamente diversi,

troverete sempre questo qui, versione.

Però il funzionamento è lo stesso, cioè,

cliccate sul tasto la freccia.

Dovete fare pubblica, dovete pubblicare la versione.

Va al lucchetto, uscite e vedete che a questo punto lo script è pubblicato

e a quel punto lo script è funzionante. Fino a quando non fate pubblica lo script non ha effetti.

Se dovete modificare lo script, dovete cliccare qui sul tasto freccia, fare duplica, vedete che a questo punto avete una versione non pubblicata

cosa accade?

l'ultima versione pubblicata è quella che continua a funzionare

questa qui, la 2 che avete creato

cliccate qui sul tastino freccia

vedete che torna editabile

ve la modificate come volete

salva

e che t'ho chiesto trasto freccia pubblica ecco che adesso a quel punto

diventa fruibile da tutti la versione e la versione 1 non viene più usata d'accordo?

questi sono

per la gestione dei file versionati

dei file ancora non ci siamo arrivati

comunque in generale per gestire le versioni

di qualsiasi cosa e poi lo vedremo anche

nei report personalizzati

quindi creavo versioni di report eccetera

workflow

comunque funzionamento sempre lo stesso.

L'ultima versione pubblicata è quella utilizzata.

Se voglio modificare devo duplicare la versione, modifico e pubblicare.

Vediamo il risultato finale.

Quindi io adesso mi collego col mio utente a P,

con il mio utente ap

ad anagrafiche pagamenti tipi pagamento cerco una modalità

confermo e ha funzionato perché mannaggia i pescetti

io perché... Vediamo un po'.

Tututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututututut

a P

allora

altra cosa importante

l'avrei detta dopo

ma l'anticipiamo a questo punto

io sono su una pagina

c'è una problema

voglio sapere un attimo

voglio andare a vedere il codice

per analizzare

tutte le maschere avete la funzionalità Shift F12.

Dovete premere Shift F12.

Al di là del versione, qua ci sono le versioni,

ci sta la possibilità di accedere ai log,

ma al di là di quello, quello che ci interessa è questa

cosa qui. Vedete che ci dice?

Ci dice qual è il mapping,

qual è la classe

controller e qual è la GSP.

Quindi a partire da questo io riesco a capire qual è la classe Java dove lavora.

Quindi mi prendo questa cosa qui, lo porto sull'Eclipse, me lo apro e vediamo un po'

perché non ha funzionato.

Perfetto.

Tutto chiaro già.

E ve lo spiego ve lo spiego

ve lo spiego dopo pranzo

ve lo spiego dopo pranzo

così

intanto mi sposto

cioè la profilatura configurabile

invece di metterla a livello

dentro i

per farvi vedere un attimo l'esempio

invece di metterla in modalità di pagamento lo metto da un'altra parte momentaneamente. Lo metto quindi su, ad esempio, base, province, configura, script, profilatura configurabile, anagrafiche, base, province, configura, configura, script, già l'avevo messo per fare gli esercizi ai vostri colleghi, comunque pubblico la nuova versione,

e qua ci metto utente underscore ap, quindi lo stesso script, in questa username, salva, pubblica

torno con l'utente mio

AP

faccio login, logout

base, province

ricerca

confermo

ecco qua, non sei autorizzato da

script, due punti, questo per far capire che è una validazione

introdotta

da script, ok? Questo è soltanto per differenziare

tra validazioni applicative e quelle

dello script erino non sia autorizzata al salvataggio va bene domanda veloce questo script eseguito

lato client l'altro server lato server e qui comunque venne apparsate poi comunque eseguito

sempre lato server in base agli eventi che abbiamo detto prima che ci vengono mandati da quel binder

ora quanti di pagamento invece non ha funzionato però voglio un attimo una cosa non è che perché detto prima, ci vengono mandati da quel binder. Ok, grazie.

Ora qua il tipi pagamento invece non ha funzionato, però le do un attimo una cosa, non è che perché non ho fatto logout?

No, qua non funziona però, vi spiego perché non funziona dopo pranzo, perché così ne

approfitto per rispondere a una delle domande che mi ero segnato che era il cosa significava quegli use service che ci sta nel

controller se vi ricordate nel tutti controller mettiamo questo c'è una domanda venerdì ho

detto aver risposto dopo ci ci fa comodo adesso questo problema per rispondere a questa domanda dopo pranzo

sono domande altrimenti ci becchiamo

alle 2

siccome dalle 2 alle 3

è stato operativo sul cellulare

se mi puoi dare le credenziali

di accesso di corso

GBS così poi

procede in autonomia

non puoi provo a puntarmelo

insomma

per fare per fare quell'esercizio servono le credenziali

di corso gps sempre la stessa password sempre formazione sim scusa, mi è saltato un attimo l'audio.

A un certo punto, quando hai detto, si può fare Shift F12.

Sì, su tutte quante le pagine applicative, fate Shift F12 e avete le informazioni del controller.

Quindi l'entry point, diciamo, è anche della GSP, per capire, insomma, per fare debug,

per capire che questa pagina non funziona, vediamo un po' che pagina è,

perché ovviamente voi non potrete, ma neanche io le conosco,

cioè io non è che conosco di tutti i punti di menu quali sono le classi Java che ci stanno dietro,

è impossibile, è veramente impossibile, cioè sono veramente centinaia e centinaia,

quindi come fate? Fate Shift F12, vedete qual è la classe e poi da lì si inizia il debug.

Ok, perfetto, grazie.

Ok, dai, allora ci ribecchiamo alle due e continuiamo con il corso, va bene?

Ok, buon braanzo ciao

Grazie a tutti.

-----------------
VIDEOLEZIONE 06 :
-----------------

buon pomeriggio

buon pomeriggio anche a voi

ora aspettiamo un minuto

iniziamo la lista non possiamo tutti

sì

sì ecco daniele

ok adesso sono tutti perfetto

allora riprendiamo

da dove eravamo

interrotti

condividiamo lo schermo

allora ci eravamo interrotti con questo dubbio amletico,

per cui abbiamo approvato lo script rino, no?

Nella profilatura configurabile sulle province ad aver funzionato.

Non aveva funzionato altrettanto bene, invece, sui tipi di pagamento.

Pocca. Il motivo è il seguente.

E si rilaccia con una domanda che mi era stata fatta

provvedì o venerdì, non mi ricordo quando,

sul fatto che sui controller, ricordate nel codice,

sempre su corso V3, nel codice che dovete copiare, che vi ho, degli snippet, insomma, che vi ho dato per fare copia e incolla, veniva riportato nel linit questo useService uguale a true.

Che significa useService uguale a true? Perché si riallaccia con il malfunzionamento che abbiamo.

Perché, se vi ricordate, mi sposto e torno ad esempio sul wizard per fare un salvataggio

interagire con il bin

con il wizard

cosa abbiamo dovuto fare?

abbiamo dovuto usare la classe service manager save

poi venerdì vi ho fatto vedere come il service manager save

internamente poi insieme al binder

gestisce lui

tutta la questione

degli eventi

quindi prima del salvare

dopo il salvataggio

prima cancellazione, dopo cancellazione

invia, spara

tutta una serie di eventi

e oggi vi ho spiegato

che basandosi su questi eventi

che vengono sparati da questa classe

service manager, binder, eccetera

si poggia ad esempio l'aggancio

degli script Rino

ecco, lo script Service Manager, Binder, eccetera, si poggia ad esempio l'aggancio degli script Rino. Perfetto.

Ecco, lo script,

il controller tipo pagamento V3

non ha useService a true, infatti.

Ok, non ce l'ha.

Vedete?

questo useBind è un'altra cosa, non so che roba serve

useService a true

useService a true, non ce l'ha

quindi che succede quando non fai useService a true?

succede che il controller quando farà i salvataggi

non userà ad esempio il service manager save

non usando il service manager a save

allora non invierà tutta quella serie di eventi

infatti se io prendo ad esempio

come viene fatto il salvataggio non invierà tutta quella serie di eventi. Infatti, se io prendo, ad esempio,

come viene fatto il salvataggio,

l'ho trovato prima,

mannaggia i pescetti,

eccolo qua, scusatemi.

Ad esempio, qui sono sul v3 controller persistent,

quindi sul pad dei controller,

ci ricordiamo, i controller estendono v3 controller persistent.

Quando fa il salvataggio, infatti, cosa fa?

Vedete, c'è qua. Se non è useervis allora fa questo e adesso lo vediamo se no a questo vedete allora in questo caso se

passa da qui e fa quello che abbiamo visto insieme nel quando aveva fatto il wizard allora gli script

rino funzionano perché vengono stati fare bene fatto il fire degli eventi tutto quanto e ci si può agganciare dei script

se non utilizza il service allora entrerà ad un certo punto qui save object

entra qua dentro che cosa fa in questo caso utilizza il persistent manager diciamo un po tra virgolette

a basso livello vi ricordate anche questo, l'abbiamo visto venerdì che il service manager poi

in cascata internamente

invoca il default service

il save del default service

fa questo internal save

vedete che fa dopo?

crea il persistent manager

quel JDBC persistent manager che poi abbiamo visto

costruisce praticamente i vari

update,

lo statement vero e proprio, quindi che fa la persistenza.

Quindi comunque si arriva al Persistence Manager, la differenza è che un conto è arrivarci passando attraverso l'API Service Manager, un conto, e quindi in questo modo passare per tutti i fire,

degli eventi, eccetera, un conto invece facendo quello use quello se non si mette quello use service a true

è andarci direttamente così a secco

così vedete viene invocato direttamente

la save praticamente

la store del nostro oggetto

e quindi mi perdo queste cose qui

ok?

così

tutto chiaro?

adesso non mi ricordo chi mi fece la domanda

però se gli ho risposto

sì l'avevo fatta io

ok

perfetto, chiaro?

si si

ok, apposto si me la smarco

ok

perfetto, capito?

ora, tutti i nuovi

controlli, cioè in generale

insomma

i service

sono state introdotte dopo

cioè il service manager è arrivato dopo

un po' dopo

quindi magari delle vecchie gestioni

poco utilizzate

poco sono rimaste

ancorate ancora alla gestione

tramite così tramite

per system manager a secco

ok? Mentre le gestioni più nuove

o comunque sia quelle che sono stati oggetto di refactoring

utilizzano il service manager

quindi funziona poi tutto quello

che ne deriva

va bene

va bene

comunque è importante adesso abbiamo fatto l'esempio

sulle province

e abbiamo visto che funziona

allora allora Abbiamo visto che funziona.

Allora, allora, allora, allora, allora.

Andiamo avanti e poi facciamo un po' di esercizi.

Allora, vediamo un'altra cosa importante che si può associare tramite profilatura configurabile che sono gli extra data, quindi per esempio questi campi aggiuntivi che vi dicevo, che si possono, insomma, senza richiedere le modifiche del codice, dello schema, eccetera.

Comunque, quando viene agganciato un nuovo extra data, quello che accade è che su una maschera applicativa appare un nuovo tasto, come questo, extra,

questo l'ho fatto, sempre perché per i corsi l'ho fatto gli altri giorni.

Quindi esce fuori questo campo extra,

con cui è possibile poi accedere all'extra data che è stato configurato.

Esistono cinque tipologie principali di extra data.

Il primo è allegato.

Permette praticamente di allegare a qualsiasi gestione un file,

qualsiasi natura,, per accodare dei file, legare dei file ad un oggetto.

Parliamo di oggetto, quindi ad esempio se io aggiungo un'extrata sulle province, andando in gestione di una provincia, è lì su quella provincia che io potrò magari allegare un file.

tabella generica questo lo diciamo però poi lo affrontiamo

in più di dettaglio e più avanti

che cos'è una tabella generica

comunque per adesso ci basti sapere che è possibile associare

ad un oggetto

che sia un paziente, una provincia, un comune

ad un oggetto generale

un elemento di tabella generica

codici locali permette di legare ad un oggetto

una lista di codici alternativi

un esempio di uso di

di tipo codice locale può essere

ad esempio il paziente. Supponiamo noi

abbiamo una grafica del paziente, quindi

la nostra anagrafica locale del paziente,

magari quel paziente però è presente

anche in altri sistemi software, non

Arias, magari un dipartimentale,

laboratorio analisi, un'anagrafe regionale, SOGEI, eccetera, eccetera, eccetera.

Quelle posizioni anagrafiche distribuite sui vari software ovviamente fanno sì che ogni posizione anagrafica abbia un suo identificativo interno, quindi un'idea.

un modo con cui quella anagrafica è identificata all'interno del software.

È possibile, volendo, tramite questi codici locali,

far sì che XMPI si preoccupi anche di raccogliere

tutti questi identificativi con cui il paziente è conosciuto

sulle varie anagrafiche, quindi magari ho il mio paziente,

Mario Rossi, censito su Arias, o poi dei codici locali

che mi dicono, sì, su Arias ha codice 100,

però sul laboratorio analisi ha codice 200,

su Sogei è conosciuto così, su una grafica regionale ha quest'altro codice regionale, così via dicendo.

Quindi è un tipo di extra dato utilizzato prettamente nell'ambito delle integrazioni, quindi web service.

script è esattamente come lo che abbiamo visto prima però è la possibilità di non

prima abbiamo visto in profilatura configurabile come abbiamo creato uno script

agganciandoci ad un evento, ad esempio quello del before save object

è possibile comunque creare un'extra data di tipo script

che esegue uno scriptrino ma in quel caso è manuale lancio cioè io

cliccherò sul tasto extra pam e parte il mio script rino magari faccio un update un insert

in col mio script faccio quello che voglio ultimo tipolo di extra data che quello poi che vedremo

nell'esercizio è quello di scheda dinamica. Cioè, mediante l'utilizzo di un RAD, che è quello che abbiamo usato ad esempio oggi

per fare i nostri parametri,

per creare il nostro parametro,

il parametro che abbiamo utilizzato nel wizard,

mediante l'utilizzo di un RAD,

permette di definire maschere e campi aggiuntivi.

La scheda dinamica, detta anche RAD,

è lo strumento di Arias per disegnare in maniera visuale porzioni di maschere applicative.

Quindi i due contesti principali, questi specialisti sono questo dell'extradata, ma anche la reportistica che poi vedremo.

Però nel caso degli sviluppatori in realtà c'è anche, ad esempio, il RAD viene utilizzato anche quando si definiscono nuovi parametri, nuove abilitazioni.

E anche lì abbiamo utilizzato una scheda dinamica,

abbiamo utilizzato un RAD.

Ok, allora, esercitazione. L'obiettivo è aggiungere alla nostra gestione dei comuni,

quindi adesso cambieremo, un nuovo campo aggiuntivo, sfrutteremo gli extradati e le scale dinamiche. Come si crea un campo extra?

allora bisogna sempre andare in profilatura configurabile ora vediamo innanzitutto dove agganciarlo

questa extradata perché le gestioni ormai me le sono finite

qua c'è?

regioni?

se no me lo aggancio, aspetto un po' a prodotti

qua già c'è

provo ad agganciarmelo sempre qua su questi tipi di pagamento

vediamo un attimo

o altrimenti

un po' più

scusate, mi cerco una caspiterina piena

dotture

proviamo un attimo questi tipi di pagamento

tanto

vediamo come si fa

quindi ad esempio proviamo ad aggiungere un extra data qui su tipi di pagamento

in questo momento ci sono ecco questa serie di camp proviamo ad aggiungere un'extra data qui su tipi di pagamento.

In questo momento ci sono questa serie di campi,

voglio aggiungermi un campo aggiuntivo.

Un nuovo campo, qui do codice pagamento riscossione,

me ne aggiungo un altro tipo di codice, non lo so.

Come si fa?

Configurazione, avanzate, profilatura configurabile,

selezioniamo il punto di menu,

configura, extra data.

Qui dobbiamo mettere un codice extra bug, un codice memonico, quindi non deve contenere spazi, non deve contenere nulla,

un codice, un'etichetta, e qui invece possiamo sbizzarrirci,

altri campi altri campi

facciamo clic qui su oggetto

quindi senza fare conferma niente

andiamo qui su oggetto

e poi qua abbiamo tutta una serie di conferma

conferma

configurazione

conferma

disegna.

Eccoci qua, vedete che siamo tornati sempre al nostro RAD, sempre nella nostra scheda dinamica.

E qui ad esempio ci aggiungiamo un nuovo campo di testo.

Concolliamo l'occasione per vedere un attimo anche insieme alcuni elementi che si possono aggiungere, ok, sul RAD.

Ora, quello che noi andiamo ad inserire sarà, ad esempio, un elemento di edit senza descrizione.

Vuol dire un campo di testo.

Campo di testo, input text semplice.

Però abbiamo anche, con descrizione, sarebbe un lookup, quindi.

ci chiederà di dire qual è il look up che vogliamo mettere in maschera.

Multilinea è a textarea, etichetta invece è una label statica buttata lì.

Combo box è una combo, check è un checkbox,

che può essere single oppure una lista di checkbox.

Poi abbiamo radio button, immagine, quindi per legarci un'immagine,

quindi per allegarci un'immagine, stampa, lo vediamo dopo magari, non ho mai visto usato in tutta la mia vita, file invece permette di allegare un file, permette di allegare un attaccio, un file, a gestione. senza descrizione, perché vogliamo un campo di testo questi sono gli elementi tutto il resto invece sono tutte cose per

organizzare, d'accordo?

quindi posso fare, che ne so, contenitori, metterci un link

un tab, un bottone, un box

però alla fine

in soldoni si arriva

all'elemento edit

elementi

e questi qui che troviamo, ad esempio in questo caso

edit senza descrizione

label, al solito elementi e questi qui che troviamo. Ad esempio, in nostro caso, edit senza descrizione.

Label, dal solito.

Campo nuovo, che ne so.

Formato, essendo un input,

un campo di testo, dobbiamo dire,

se una stringa, un numero, una data,

in nostro caso una stringa.

E qui è simile a come abbiamo visto per i parametri, quindi anche qui un codice mnemonico.

Campo punto nuovo, ad esempio.

Conferma.

E poi qui, attenzione, bisogna uscire e confermare, uscire e confermare.

Quindi dove serve?

Quindi qua il conferma è spento, quindi usciamo, usciamo, conferma, esci, conferma, esci ecco qua che vengono che ha aggiunto andiamo qui su

una grafica conferma esci fatto quindi adesso se noi facciamo un bel logout login

bell logout, login,

utente AP, pagamenti,

tipo di pagamento, eccolo qua.

Adesso mi ricerco un pagamento,

ad esempio qua, bonifico postale,

questo qua BOP, codice BOP, bonifico postale,

extra, altri campi,

vedete che c'è il nostro nuovo campo,

qui metto valore 100, conferma, esci, esci, quindi su BOP ho messo 100, su RCD metto extra,

altri campi metto 200, qua non c'è, ok? Quindi adesso se io torno su BOP, extra altri campi, 100.

Quindi poi il legame va bin per bin, oggetto per oggetto, ma con voi si può parlare anche dicendo bin per bin, tanto abbiamo visto i bin.

quindi ogni singola istanza di bin ha il suo extra data tutto chiaro fino adesso

sì perfetti come lavorano sti extra data

lavorano lavorano lavorano che

lavorano, lavorano, lavorano ok

è una tabella innanzitutto di anagrafica dell'extradata

ok? quindi per renderci conto quello che

adesso ho fatto logout, login

quindi devo riaprirla, la maschera

tatatata, ratatata Quindi adesso torno in profilatura configurabili, così vediamo un po' come queste tabelle lavorano.

Allora, quindi abbiamo messo su pagamenti, tipi, pagamento, configura, extradata.

Allora, quindi noi qua abbiamo censito questa extradata, no?

Quindi a livello di anagrafica, quindi diciamo questo record che vediamo qui,

lo troviamo su select star from C extradata.

Andere prego, si ricollega al db ok

eccola qua, quindi se io cerco

stessa fronte extra data where di proprietà uguale extra pag

eccolo qua ok qui abbiamo il bin a cui è agganciato, il bin tipo pagamento, ok?

E poi quello che da profilatura leggete qui, eh?

Vede? Da qui?

Vi viene pure mostrato, eccolo qua.

Quindi, il bin a cui è agganciato, il codice dell'extradata che abbiamo dato, il tipo di extradata che quindi è quello che vi dicevo, D per scheda dinamica, poi ci sono le altre che sono Rino, Attacce, eccetera, a livello di quali possono essere i codici possibili direi. Extradata.

Bene, extradata.

Questi sono i tipi. Vediamo un po' se da qualche parte troviamo un asset, un qualcosa che ci aiuta.

Viene extradata.

Ah no.

Tutto tu. Grazie. Allora, dopo vediamo, voglio trovarvi una set dove elenca tutte quelle tipologie, diciamo che comunque sia D,

sarà per scala dinamica, poi dopo vi trovo una set così vi mettono in commento tutti

i tipi che ci sono, quindi comunque sono quelli che ci siamo

detti, script, attach e così via dicendo.

Quindi questo dice che tipo di extra 3,

in questo caso scala dinamica,

l'etichetta, e poi

questo qui, id, oggetto.

Che cos'è?

Nel caso di scheda dinamica, l'extradata viene poi salvato comunque sempre all'interno della sicherad.

Quindi tutto quello che noi disegniamo come extradata, ad esempio quel nuovo campo aggiuntivo che abbiamo messo,

e il valore 100 che poi abbiamo valorizzato, va a finire la definizione nella sikh rad e il valore nella sikh rad dati.

Esattamente come abbiamo visto oggi per i parametri.

Non c'entra nulla in realtà con la gestione dei parametri, la sia ben chiaro.

Semplicemente la ricicliamo.

Siccome è sempre comunque un rad, la modalità di funzionamento che c'è sotto, per comodità sfruttiamo la Sikiamo sulla sikerad andando in like su per il nome eccolo qua troviamo due chiavi perché perché

la prima come dire l'entri infatti vedete che kr parent k e null la seconda invece ad esempio

il campo aggiuntivo che abbiamo creato e quindi ha come parent il record di sopra e poi è infatti

un ET, un edit

che vuol dire edit testuale

che vuol dire sarebbe quell'edit senza

descrizione di cui dicevamo prima

KR target è un

target speciale infatti non è

Abbiamo visto oggi che ci sta il target A per aziendale, U per utente, quindi abilitazioni.

E qua c'è D.

D vuol dire, è un modo per dire al framework, guarda, questo qui è una scheda dinamica,

quindi includilo soltanto, cioè lavoraci solo quando parli di extra data di tipo scheda dinamica.

Non verrà mai visualizzato nella gestione dei parametri,

per quanto sia qua dentro sempre nella Sikera.

Se un esempio adesso mi prendo questo valore, krk, la chiave, e me la cerco sulla Sikera

dati, ecco qua, e mi viene scritto i valori che sono attualmente inseriti, insieme al valore

100 e al valore 200.

Come fa a sapere lui a chi è associato 100 e a chi è associato 200?

Perché c'è anche un campo sulla sicera dati nuovo che adesso vediamo,

che è il KD chiave, che serve proprio a questo scopo.

Cioè dice, guarda, il 100 è legato all'oggetto con chiave BOP,

quindi questa sarebbe la primary key dell'oggetto con chiave BOP, quindi questa sarebbe la primary key dell'oggetto.

Nel caso del tipo pagamento è questo, è un codice.

Quindi lui sa, nella sia extra data, sa che si parla del bin tipo pagamento.

Nella sia extra data, sa che questo è il valore di un bin del tipo pagamento quindi bop che sa che quindi

a questo istanza di tipo pagamento dovrà associarli l'ex data 100 tutto chiaro

il fatto che memorizziamo queste tabelle, la keyride e la keyride dati, diciamo che gestisce come se fosse la funzionalità che abbiamo visto prima per la creazione di un punto di...

non so se mi sentite?

si, si, sento, sento, vai avanti, vai avanti

l'argomento di stamattina, i chiavi, i parametri, l'abilitazione

la stessa

la chiave di profilatura

il concetto della chiave di profilatura

utilizza le stesse tabelle

stessa tabella ma anche dopo

stesse classi, infatti adesso noi torniamo

magari sul monitor sviluppatori

dove abbiamo creato

i nostri

i nostri parametri,

e vedete è uguale, cioè è fatto uguale, identico,

questo è localhost, però è fatto proprio la stessa identica maschera,

quindi sfrutta che cosa?

Sfrutta la tabella per salvare le informazioni,

però sfrutta poi anche le classi Java.

Questa maschera qui che vediamo, che ci permette di disegnare la nostra maschera dinamica,

sotto ha una classe che si chiama, questa è importante,

segnatevela, dynamic controller

è lei

che gestisce

questa maschera che vediamo qua

quindi così in maniera

come dire gratis

con la stessa maschera riusciamo a gestirci

più cose, quindi ci gestiamo

la definizione dei parametri

adesso abbiamo visto insieme la definizione dei parametri

e anche la definizione degli extra dati

a gratis, tanto alla fine a noi ci interessa soltanto

avere dei campi dove memorizzare dei dati

quindi a gratis ci

ricicliamo la stessa

cosa, dopo ovviamente questo consegue

che se riutilizzo questo controller

dynamic controller per fare la gestione

dell'extra data e anche gli extra data

vanno a finire sempre nella sicherad

e nella sicherad dati

ok extra data e anche gli extra data vanno a finire sempre nella SIGERAD e nella SIGERAD dati ok?

ok grazie

prego

poi dynamic control insomma c'è tutte quelle logiche

per cui che fa, va a leggere

la SIGERAD e tra virgolette

fa un parsing, no?

quindi lui va a vedere

va a vedere, no? rigiga per riga dice ok partiamo dal parent,

ok disegno il parent, che cos'è il parent? Il parent questo qui è un container, un pannello in

questo caso, vabbè disegno il pannello, poi cosa c'è? Il padre c'è questo, ah che cosa è il padre?

Un et, ah ok allora disegno un campo di testo e così via dicendo in cascata, d'accordo? Quindi se

questo qua fosse stato un radio button avrebbe disegnato un radio button.

E lo fa tutto in maniera dinamica.

Vediamo un attimo se riusciamo, senza intrecciarci troppo,

a andare magari in debug, anzi, forse facciamo prima così.

A vedere.

Eccolo qua, a vedere, vedete che sta tutto sotto un package RAD, quindi tutto quello che trovate qui dentro questo package RAD è funzionale a fare questa maschera qui, sia in visualizzazione che in modifica ok? perché quando qua sono in modifica perché posso inserire una riga, una colonna, un oggetto

quando poi passo

te ne so, dalla

dalla maschera di

parametri installazione

la maschera è la stessa, la differenza è qua

sono in view, cioè qua la uso

la maschera, la differenza è questa

qua la sto usando

di qua invece ci sta questa

bottoniera sono in modifica però il controller è sempre questo dynamic controller tutto ciò che

trovate dentro questo package psg x trad è funzionale a fare questo lavoro qui però la cosa più

importante è questa che trovate un package case vedete che ci stanno tutta una serie di classi che si chiamano keynoobjetat, bt, b, che object, che object, che object

perché?

perché corrisponde a quello che trovate su object type

ad esempio qui c'è scritto et che sarebbe il campo di testo

quindi cosa farà il dynamic controller quando va a leggere questo campo

dice ah, qual è il tipo et?

ok allora delego il disegno

alla classe che si chiama

che object è t

eccola qua

se noi l'apriamo

che fa dentro?

eccola qua

fa

qua che ha la larghezza eccetera

dove è?

allora sta

input

eccola qua

crea il campo di testo

input

mettendoci

vabbè

se abbiamo definito

quando uno che crea un campo di testo

gli può dire anche lunghezza minima, massima

è una stringa, è un calendario, è una data

vabbè, al di là di tutte queste cose così

insomma, qui dentro alla fine lui crea il campo di testo

l'input

se fosse stato un check

allora qui come object type avremmo letto ck

quindi lui cosa avrebbe fatto? avrebbe invocato la classe che object ck, è voluto questo prefisso suffisso, così è facile distanziarlo.

Quindi farà un'istanza di che object ck e qua dentro che farà? Farà sempre l'input, però di type checkbox.

Chiaro?

Insomma, diciamo da qui,

ecco, questo è importante,

dalle chiavi sapete già tutte quante le possibilità che ci sono, insomma,

di tipi, radio button,

TB e tab, eccetera, eccetera, eccetera.

Ok?

Ci sono diverse.

Ok. tb e tab eccetera eccetera eccetera ok sono diverse ok va bene un attimo pensare una cosa un attimo solo

Stavo pensando un attimo come procedere. Si graddati utenti, queste in realtà l'abbiamo già visto.

Quindi la tabella già ve l'avevo anticipata prima quali erano.

Quindi la tabella già ve l'avevo anticipato prima quali erano.

Quindi questo è quanto per quanto riguarda la profilatura configurabile.

Dicordano?

Ah, ecco il cosa volevo vedere.

Un attimo voglio cercarvi i tipi di valori che possono esserci qui dentro. Un secondo, senza che vi faccio vedere, girare come una trottola, interrompo un attimo la condivisione e vi cerco un set. Un secondino.

Eccolo qua.

Trovato.

Allora, la classe che crea la profilatura, quindi quello che trov ho detto, scala dinamica, touch, modelli stampa, non ve l'ho detto volutamente perché non è più supportato.

Vedete perché non c'è più, funziona più.

Era basato su Applet, gli applet sono morti, è morto anche questo.

E in più c'è tipo allineamento, che invece c'è, funziona ma non viene usato in Sardegna.

Tipo allineamento è quando ci sta ad esempio usiamo noi per

su alcuni clienti dove abbiamo

l'integrazione con anagrafiche di Sogei

quindi come suggerisce il nome

serve per allineare un'anagrafica rispetto

a una sorgente dati remota

ad esempio anagrafica nazionale di Sogei

questi qui sono i codici

che potete trovare

su questa sì, extra data

sul tipo

ok? che potete trovare su questa sì, extra data, sul tipo. Ok?

Finito, finito, finito, finito, finito.

Magari già giusto per...

Siccome adesso vorrei fare l'esercizio con voi,

però mi ricordo che qualcuno di voi ha detto che adesso fino alle 3 sta col cellulare, giusto?

non può stare al pc?

ricordo male?

ricordi bene

vado un attimo un po' avanti

su un argomento così poi quando si può

riattaccare col pc

facciamo un esercizio

allora

facciamo magari un'extradata di tipo script,

tanto ormai siamo nel pezzo con gli script.

E quindi, proviamo, eh.

Allora, qua sono sull'extradata, script, ipo script, gestione script, extradata script. Exata script.

Facciamoci, che ne so, tabella.

Sì, dai, facciamoci una tabella dove ci andiamo a scrivere dentro lo script,

giusto un attimo per vedere.

Così vediamo anche come si fanno gli updating.

Great table...

...256. Questa tabella script con una colonna

andiamoci a scrivere

non mi ricordo quindi mi aiuto

col manuale

come fare insert

bit delete insert tbutil Come fare insert? Update, delete, insert.

Ibiutile.

Ok, esempio.

Quindi ci sono questi metodi, updateNamedStatement.

Eseguo un namedStatement in update, delete, insert,

un namedStatement in una query in quale i parametri sono linkati in modalità nominale,

utilizzando la sintassi due punti nome e parametro.

Perfetto, quindi io copio non sapendo né leggere né scrivere,

e me lo metto qui dentro.

Quindi facciamo update, la mia tabella che si chiama tab underscore script,

anzi no insert, values, due punti, underscore script valios

due punti

due punti

torre

una mappa e dico che valore per adesso ci mette una cosa statica

adesso ci metto una cosa statica questo è lo statement

parametri valore uguale

e questo lo esegue vediamo un po cosa succede salvo

al solito qua vedete versione no? quindi qua devo pubblicarlo

per renderlo effettivo

ok

conferma

ops ops ops ops

ok conferma

esce

vediamo che succede

anagrafiche

no non è qui

ma è

qui

qui

ad esempio anche qui

lo posso fare anche con questo utente

pagamenti, tipi pagamento

ricerca

lancia script

vabbè, adesso vediamo perché è andato in errore questo ci fa comodo per vedere ricerca, lancia script.

Vabbè, adesso vediamo perché è andato in errore.

Questo ci fa comodo per vedere quando c'è un errore imprevisto,

quindi un errore che non è gestito,

viene mostrata questa che noi chiamiamo maschera rossa.

Ok?

Al di là del fatto che qui ci sta un codice criptico dell'errore, quello che in realtà voi potete fare sempre tramite Shift F12, torniamo su Shift F12, se scendete in fondo ci avete il logging mostra e fa vedere il log.

e fa vedere il log java lang string cannot be cast to bind parameter

ah, c'ha ragione, ha ragione

quando c'ha ragione

il problema dei computer è questo

che alla fine c'hanno sempre ragione

configura

extra data, ho commesso un errore nel mio script

perché quando ho fatto copy e incolla ho tolto un pezzettino di troppo

quindi duplico per creare una nuova versione

la prendo in gestione, rispetto al manuale

infatti, adesso un attimo che lo ritrovo

dove stava? lo so perso, eccolo qua. Rispetto al manuale,

esatto, devo fare dbutils string param,

questo l'ho tolto, l'ho cancellato.

dbutils string param, ciao, eccolo qua.

Ecco, salva, pubblica, esci, conferma, tornate nella grafica, confermate. se adesso funziona tipi pagamento ricerca

lancio script e che caspiterina

scusate stavo intrecciando qua quello era utente ap scurate sto indrecciando quello era utente ap

scusate un secondo un attimo

mi sa che sto indrecciando gli ambienti

fatemi chiudere un po' di roba

questo è un altro

questo logout e ce lo chiudiamo

questo va bene

questo è un altro script

non ci interessa

ok quindi era qua tipi pagamento

se no i log li vedo uno di una cosa e uno di un'altra, lancio script

shift f12

shift f12

vediamo un po'

di B di B

Db utils, qua c'è un refuso db utils, ci mancano S qui, ecco l'errore.

Quindi, extra data, gestione script, duplico, infatti qua db ut quasi beauty salva pubblica adesso ho sbagliato la query

giustamente

se hai fatto insert tab

ha anche ragione

vabbè insomma

sono abbastanza una schiappa a fare gli script

questo si è capito

insert into tab script values

e va bene

insert into e pubblichiamo insert into tab script values

finalmente sempre che ha fatto

vediamo un po'

select star from

perfetto, ok

questo è giusto per fare un esempio

insomma, exata ce ne sono diversi

questa è la potenzialità

del fatto che è un po' come se

rilasciassi un bottone in maschera

però senza dover fare un rilascio software

perché uno specialista

ovviamente con un minimo di competenze

tecnica insomma può mettere un bottone

il cui clicca del bottone

quindi quando l'utente volutamente

clicca su quel bottone segue quello script

va bene

e va bene ok un'altra cosa qui sempre su shift f12

c'è poi l'esport informazioni

l'esport informazioni vi esporta tutto quello che vedete qui

però in un xml

di pato

qui avete tutto quello che vedete qui però in un xml di pato il quale avete tutto quello che vedete anche un

presidico un bel si anche log

o

con loro

un attimo ragionare Poi, per quanto...

Allora, giusto un attimo anche così poi dopo facciamo l'esercizio.

nell'ambito sempre di cose, come dire, orientate intorno alla questione profilatura

ok

qua avete configurazione utilità

e avete un menu copia abilitazioni, a che serve?

Come suggerisce il nome, a copiare le abilitazioni da un utente all'altro, da un ruolo all'altro, da un ufficio all'altro e così via dicendo.

Quindi voi prima vi configurate un utente, mettiamo caso che vi, anzi, di solito questo è usato per ufficio ruoli,

vi configurate un ruolo nuovo, da zero, volete che quel ruolo sia una copia di partenza da un ruolo già esistente,

qui su sorgente specificate il ruolo, indicate il ruolo di sorgente delle abilitazioni,

su destinazione ci mettete il ruolo che avete creato vuoto,

e questo vi permette di copiarci i menu, i moduli, le abilitazioni,

quindi evitarvi di riconfigurare tutto dal zero.

Comunque se è più una roba da specialisti, ma intanto ve la dico così ce l'avete.

Sposta utenti, come dire, anche qua è abbastanza esplicativo, quindi spostare gli utenti da un ufficio all'altro, da un uomo all'altro.

Poi che altro ci sta? Relativo alle abilitazioni.

Relativamente alle abilitazioni c'è anche questo da dire.

relativamente alle abilizzazioni c'è anche questo da dire allora

se io vado alle abilizzazioni di un ruolo

ad esempio RAP

c'è questo link impostazioni che poi mi mostra una serie di chiavi di profilatura

normali, tradizionali

però questo link impostazioni

è tra virgolette particolare, nel senso

che

cliccando qui

tutte queste chiavi di profilatura

possono essere impostate normalmente

dal nostro utente amministratore.

D'accordo? Come possiamo fare in qualsiasi

altra chiave di profilatura. Però queste chiavi qui, tutte le chiavi che sono sotto impostazioni,

possono essere anche accessibili in autonomia, sono le uniche che possono essere in autonomia

accessibili da un utente normale. Cioè, se adesso mi collego con utente andesco rapi,

preferenze qui in alto impostazioni

mi rimanda qui

le stesse cose

ok?

perché questo?

perché qui dentro

impostazioni

ci andiamo a riportare

di solito tutte cose

che magari

può essere

utile

all'utente

personalizzarsi in libertà

ad esempio

quante

risultato di ricerca

quanti risultati vuoi per pagina?

20, 150, la larghezza della maschera lista valori,

la selezione la vuoi fare tramite bottone o link,

oppure anche, se andiamo su varie,

vuoi lo sfondo bianco o lo sfondo celeste,

campo grande e campo picco, quindi tutta roba di layout,

menu verticale, orizzontontale così via dicendo d'accordo sempre chiave di profilatura che però si lascia

l'utente spersonalizzare solo queste qui d'accordo quindi le saccede tramite preferenze impostazioni

preferenze impostazioni.

Questo può essere utile anche saperlo, tra le varie layout,

cosa si può fare, c'è anche come deve essere visualizzato il menu.

Di default il menu è verticale, cioè è questo qui, che siamo abituati a vedere fino adesso. Questo è un menu layout verticale. Tuttavia,

tra le impostazioni che si possono configurare c'è quello anche

orizzontale o gadget.

Vediamo un po' intanto orizzontale.

Orizzontale che fa?

È usato nel sanitario, solo nell'ambito sanitario è usato.

Quindi pronto soccorso, cose di questo genere.

Praticamente, adesso faccio logout, login

come mi viene mostrato il menu

così

non ho il menu

ho soltanto la possibilità di cliccare le applicazioni

quando clicco un'applicazione

viene aperta una nuova maschera

il menu viene messo nella barra in alto, così

in questa maniera

la differenza è che sfrutto sempre la stessa pagina

perché da qui io che faccio?

dico province

mi si apre la province ma sopra il menu rimane

quindi in qualsiasi momento adesso posso andare, che ne so, regioni

senza dover tornare sul menu principale

ok

l'altra modalità

è Cristo, chiudito tutto L'altra modalità è...

Ecco, sto chiedendo tutto.

L'altra modalità è...

Ma questa è una situazione, già che ci siamo.

Vedete come il menu orizzontale mette in risalto una modalità di come funzionano le PAP, come funziona la perpetua.

la chiusura delle pagine. Vi ricordate che vi ho detto che i controller una volta che vengono

istanziati al controller di dispatcher vengono messi in sessione? Ora guardate, adesso io apro

in sequenza, province, regioni, comuni. Provinci, regioni, comuni. Qua con la X uscite, chiudete,

la X sarebbe un modo per chiudere. Adesso chiudo. Vedete, vado su regione, chiudo ancora,

vado su province, chiudo ancora, esco.

Questo perché? Perché i controlli sono in sessione

e vengono messi a stack.

C'è una classe che si chiama proprio

controller collector.

Vedete anche javadoc.

È autosplicativa

comunque è lei che tiene questo stack

di tutte quante

i controller che mette in sessione

ok

e quindi poi gestisce tutto questo

apertura chiusura per cui poi

chiudendo un controller va a quello successivo

va a quello successivo fino a poi a finirsi

così un attimo

dicevamo l'altra modalità di lady low

di menu è quella gadget modalità gadget sa qui preferenze modalità gadget tutto qui

nella delle particolari la differenza è che nella modalità gadget i menu sa qui dentro

tipo a barra di start quindi potete cercare quello che volete

il menu sta qui dentro, tipo a barra di start, quindi potete cercare quello che volete e aprire il menu. La differenza per cui viene utilizzata a volte questa modalità gadget

da pochi utenti sinceramente. Questa tutta roba libera, cioè l'utente volendo si configura

il layout che preferisce, la libertà non è che mi viene imposto nulla per quanto riguarda

il look and feel, se vuole bianco,

rosso, verde, il libro ovviamente

mette i caratteri più grandi, più piccoli,

però di solito queste cose,

il gadget lo mettono pochi utenti.

Comunque la possibilità, anche se uno va

qui, su questa freccettina qui, in alto

a destra, di

aggiungersi dei gadget in questo

spazio bianco.

Che ne so, può aggiungersi dei gadget in questo spazio bianco che ne so può aggiungersi un calendario

quindi aggiungo il mio evento

ok

ha la possibilità

ha la possibilità

ha il tempo di aggiungersi il desto potente

adesso lo vediamo il desto potente

ok, così che cos' il desktop utente. Ok? Così.

Che cos'è il desktop utente?

Il desktop utente è una funzionalità a disposizione di tutti gli utenti, per cui

si accede da qui, al di là della modalità gadget che permette di accederci lì direttamente, vabbè.

Si accede da qui, al di là della modalità gadget che permette di accederci lì direttamente, vabbè.

Si accede da qui.

Preferenze, strumenti, desktop utente.

Svolge due compiti.

Il primo, quello di essere appunto un desktop a disposizione dell'utente che eventualmente...

può utilizzarlo come repository dei suoi file quindi c'è qua un tasto a lega veloce sceglie un

file lo carica lo approda volontariamente il utente cerci carica dei file la seconda funzione a quest

solve è quella più frequente invece è quella per cui magari delle elaborazioni che fa areas

che ne so di stampe ok possono magari richere molto tempo, quindi quando l'utente dice

ok, voglio fare qualche elaborazione, una qualche estrazione dati, quello che sia,

non è che l'utente clicca e sta lì ad aspettare la maschera,

se l'estrazione ci vuole due ore,

e sta lì due ore la maschera aperta.

Quindi che cosa fa?

Succede che in quel caso la funzionalità gli dirà

ok, è stata ad esempio pianificata la tua estrazione, la tua stampa, ti verrai avvisato quando la stampa sarà disponibile sul desktop utente, quindi poi verrà appoggiata sul desktop utente e l'utente se la potrà consultare qui.

Ok?

Va bene. va bene

comunque adesso siamo divagati rispetto alla profilatura

però intanto siamo andati come dire a un filologico

a filone nel guardare le varie

le varie cose

va bene

quindi tornando a noi invece sulla profilatura

possiamo fare l'esercizio

siamo tutti?

tutti pronti?

si computer moniti, perfetto Siamo tutti pronti? Sì.

Computer Monity, perfetto.

Allora, facciamo innanzitutto l'esercizio sulla visibilità, d'accordo?

Quindi magari l'idea è questa.

Ognuno di noi adotta un punto di menu di areas.

Adesso ce lo assegniamo a tavolino.

Fatemi un attimo cambiare la visualizzazione che non mi piaceva niente.

Verticale, ok.

Comunque entro con utente AP.

Ok, quindi adotta una, ci assegniamo insomma dei punti di menu e su quel punto di menu gestirà la visibilità, la possibilità di inserire un oggetto e la possibilità di editare un campo.

Cioè, ad esempio qua dice, l'obiettivo è togliere la possibilità di inserire nuovi comuni

inoltre non potrà modificare il campo

codice istat, perché è stato fatto sui comuni

supponendo che la cosa vogliamo fare

sulle regioni, che vorrà dire? Vorrà dire che vi dovete

togliere, qua ci sta

la possibilità di inserire una regione

e la possibilità di editare un campo

quindi ad esempio, lo aprite e vedete

prima, qual è un campo editabile?

la descrizione, ok, scelgo la descrizione di non renderla editabile. D'accordo? Questo come esempio. Vediamo insomma quali punti di menu possiamo fare questa cosa qui.

Ok.

Sulla provincia penso che già fosse stato fatto l'esercizio perché...

Adesso vediamo, eh.

Vendiamoci dei punti di menù che non sono stati toccati, se no è troppo facile.

Allora, no, scusate, devo entrare con un utente che ha il menu profilatura configurabile, quindi resta. no no no ok, allora qua ci abbiamo

campi codice

quindi magari qui

allora ci togliamo la possibilità

di cancellare

non so, Orani

diciamo province la possibilità di cancellare orani siamo province inibire la cancellazione e

prendere non editabile il campo descrizione

poi dopo magari lo assegno, dopo lo condivido così rimane, anzi lo metto magari anche su appunti.

Poi andiamo avanti.

Regioni, cosa abbiamo? a regioni possiamo fare anche

la stessa cosa

il campo potrebbe essere

qualsiasi

qui abbiamo

anche qua magari

la descrizione

quindi regioni

qua inibire la cancellazione

e rendere non editabile il campo di iscrizione.

Quindi non deve essere possibile eliminare una regione e quando si va in modifica il campo

di iscrizione deve essere ingrigito.

Poi, poi, poi, poi, poi, comuni e stati esteri

qua c'è tutto quindi non va bene

cittadinanza

qua possiamo magari inibirci l'inserimento

i campi anche

che cosa abbiamo sulle cittadinanze

ma sembra anche la descrizione

tanto

cittadinanze

inibire l'inserimento

rendere non evitabile il campo descrizione.

Hazl, AO e presidi.

Perfetto.

Anche la descrizione editabile, quindi su, qua deprisco invece pende hassle, a o e presidi,

quindi uguale, inibire l'inserimento e rendere non editabile il campo descrizione. base dopo oslo presidi che ci abbiamo classi esenzione

che anche questo intonso classi esenzione

anche questo intonso classi esenzione

descrizione editabile quindi qui

cristiano prende il menu delle classi esenzioni inibire l'inserimento e rendere non itabili il campo di iscrizione ultimo seiana I rapporti.

Per rendere, ok? Questo per me lo metto anche qui sul documento di appunti.

Quindi, come vi dicevo, ognuno adotta un punto di menu su cui farà questo esercizio e anche gli altri, quindi ognuno poi lavorerà sensibilmente.

sempre sugli stessi, quindi Orani lavora sul menu delle province, il menu sempre sotto anagrafiche

base, quindi qua dentro, anagrafiche, base, sono tutti i punti menu di questi, quindi

Orani sulle province e sul suo utente, quindi lavorate sull'utente che avete creato oggi,

oggi abbiamo creato il vostro ufficio, il vostro ruolo, il vostro utente, ok?

Potete lavorare magari, queste sono tutte abilitazioni utente,

quindi potete, che ne so, decidere voi in libertà,

ma io vi consiglio, fatelo a livello di ruolo,

quindi a livello di ruolo, ok?

A livello del vostro ruolo,

perché le abilitazioni abbiamo detto che possiamo dare a livello di ufficio,

di ruolo, di singolo utente.

A livello di ruolo,

quindi Orani avrà creato probabilmente R underscore Orani, a livello di ruolo sulle configurazioni delle province si deve togliere la possibilità di cancellare una provincia, quindi il tasto

elimina dovrà essere ingrigito e il campo descrizione quando si va in gestione di una

provincia, in edit di unacia, deve essere non editabile.

ARU, la stessa cosa per le regioni.

Poi Campus, Deprisco, Cristiano e Dejana fanno invece che si inibiscono sul proprio ruolo l'inserimento di Campus e Cittadinanze, Deprisco, Asla o Presidi, Cristiano, Classi e Sensioni, Dejana, Rapporto.

E poi si rendono anche non editabili sempre il campo di iscrizione.

Ci siamo?

Ok.

Domande?

No, sono ok.

Perfetto.

Sul vostro utente di oggi, eh?

Provate sempre qui sopra.

Ci sono problemi? Mi dite.

Ah, scusate, importante. L'utente che ha abilitato il menu della profilatura configurabile, con menu profilatura configurabile, si chiama corso underscore gbf, la password è sempre quella di oggi di formazione.

Adesso accetta con formazione, non entro con il punto esclamativo.

Lo viene in fallita, forse aspetta, è morta la VPN, forse.

Ah, ok, ok. Comunque è quello zero, il punto esclamativo. Sì, sì, sì, sì. No, sono ancora connesso.

Aspettiamoci, riprovo.

Magari provano anche gli altri vedere se entrano

ma ci provo anch'io

ora mi sbaglio

perché sono salvato

infatti per quello te l'ho segnalato

Sì? No, giusto, giusto.

Provo magari a chiuderti il browser, non vorrei magari...

Eh, provo a uscire e rientrare dalla VPN.

No, però la pagina la raggiungo, quindi la VPN è a posto.

No, provo a chiudere il browser e riaprire, non vorrei magari qualche cosa lasciando aperta la maschera.

Pulito anche la carccia, dai, non ti attendo.

Niente, non vi ho impallito, è il corriente.

Chiuse il browser, eh. Sì, sì.

Anche gli altri sono problemi?

No.

È tutto a maiuscolo.

Corson underscore GBS.

GBS. Ah, Fiden, Nescor, GBS. GBS.

Ah, Fidenze.

Sì, ho sbagliato città, ero a Savone io.

Ok, sono dentro.

Ottimo. Grazie a tutti. Sotto forse mi sono perso qualcosa. Sotto anacaciche entrando come corso e via tra i menu mi fa scegliere mi dà solo controllo

di gestione sto bagnando qualcosa vero allora come concorso gbf questo per tutti i ragazzi allora

Allora, voi andate con Corso JBF, perché è un utente, adesso ci vado pure io, è un utente in cui avete la profilatura configurabile.

Quindi dovete andare su configurazione avanzata, profilatura configurabile per crearvi i parametri tramite profilatura configurabile dell'esercizio.

dell'esercizio poi dopo l'abilitazione effettiva la dovete dare al vostro utente e dopo da lì dovete andare su una grafica eccetera forse tu intendi dire qui scuola sono andato in anagrafic in

profilazione avanzate allora aspetta che vengoono da te che sono sull'altro per dire questo dici qua

che non vedi

allora esatto esatto adenana grafiche base e non vedi tutti questi no

esploto base scusa

base come l'hai aperto?

ah ecco qua sul foglietto

sulla cartellina

no però io ho aperto una grafica

e mi da menu e devo selezionare qualcosa

tu come si entra in questa lista valori?

qui?

si

poi esplodi cartella

e poi arrivi dopo devi selezionare quella col pallino rosso.

Ok, io stavo inserendo un testo in uno dei due campi sottomenu e per cui mi portava una...

Ok, grazie.

Prego. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie

Grazie a tutti. Grazie. Io mi sono perso qualche passaggio, non riesco ad andare avanti.

Condividi lo schermo così vediamo.

In effetti anche io sono riuscito a mettere il non edit al campo descrizione,

ma non riesco a trovare

come individuo

l'inserimento

guardiamolo ad esempio

con

chi è il primo che ha parlato?

tu Mario?

io Daniele

vediamo intanto con Daniele

così guardiamo tutti

qualcuno ha completato l'esercizio?

io penso di aver finito

ok perfetto chi non aver finito Simone.

Ok, perfetto.

Chi non ha finito magari guarda come è Daniele, può essere utile.

Ok, dovreste vedere?

Sì, allora tu sei sul rapporto, perfetto.

Sì, esatto. Pass passo dopo andrai su configura.

Ok.

Allora, mi stavo andando bene.

Sì.

Adesso da qui tu cosa c'è? L'inserimento, giusto?

L'inserimento, sì.

Perfetto.

Allora, ok, inserimento e gli diamo default come hai indicato tu per mantenere il default non importa.

Come vuoi, allora default vuol dire che di default saranno tutti abilitati,

quindi a quel punto dovrai ricordarti di andare sul tuo utente e togliergli il check.

Ok, allora lasciamo così.

Intanto l'esercizio...

Ok, poi confermi...

e poi tu devi adesso

creare anche la chiave di profilatura

per disabilitarti il campo di iscrizione

io ho già avuto

l'aiutino che mi serviva

grazie

ci vediamo in campi?

si

ok

qua puoi andare su abilitazioni

già

quindi anche su radio

direttamente abilitazioni e qua aggiungerti il tuo campo.

Ok, questa parte.

Aggiungo?

Sì.

Qua la lista dei campi.

La descrizione che è questa.

Perfetto.

Scendi sotto, il tasto sarà nascosto sotto.

Perfetto. Nuovo? il caso sarà nascosto sotto per il nuovo non lo fa e devi scendere sotto e scolla un po sotto

perché fa nascosto due scroll bar si è ok posto per lì sotto la conferma

ok adesso lo seleziono perfetto. Ok, e confermo.

Yes, apposto adesso vedi un attimo di.

Quadmi con l'administrator di date.

Perfetto adesso esco ed esco.

Era il nostro amico.

Utente admin underscore formale di informazioni. era il nostro amico admi andesco for madri

mi farò

azioni

e Adesso devo andare, ricordami?

Allora, a livello di ruolo devi andare, quindi accesso, uffici ruoli, prendi in gestione il ruolo che hai fatto questa mattina ok roll

direi che bella nomenclatura che hai cercato

ok

è lui?

si

poi quindi ce l'hai sotto

esatto

funzionalità, risorse

poi andiamo profilo

perfetto e andiamo a rapporto era una grafica si ok

il tuo era abbiamo detto era No, rapporti, sì. Eccola, è il penultimo, mi sembra, il penultimo è il rapporto, sì.

Il rapporto bound, eccolo qua.

Dovrebbe essere questo.

Questo sì, quindi non te lo devi dare.

Non vedi il tab campi? Ah, perché il check... Allora, torna in profilatura configurabile. Scusami, ti sto aiutando io, ma fino a un certo punto, perdonami.

Non ti preoccupare.

Ok, qua è fatta. No, torna un attimo in profilatura configurabile. Siamo saltati un passaggio.

Sì?

No, no, proprio in profilatura configurabile con il punto di menu, dove eri prima.

Quindi puoi fare anche logout qui e riloggarti con l'altro utente.

Ah, ok.

con la configurabilità su quel menu applicazioni grafiche in alto

perché vai in controllo sinistra L'applicazione è una grafica in alto.

Perché vai in controllo a sinistra.

Mi ha fregato due volte prima.

Una grafica è base.

E poi rapporti.

E lui?

Perché non ci va?

Perché è con quest'ora ok configuriamo configura ancora poi campi

iscrizione campo era mancato un po su abilitazioni

era mancato un po su abilitazioni e su abilitazioni

radio abilitazioni

il radio

ah il check

l'avevamo messo però solo su parametri

ok

quindi li confermo a qui

ok perfetto

vai riprova adesso

adesso non è possibile

esco

si si

può uscire e tornare di là non c'è un'uscita rapida?

non devo fare sempre

la Xross è un po' più rapida

eh si però

l'ho visto

più di tutto

amministra com'era?

admin underscore formazione

e poi la passo sempre con la formazione Ok, adesso possiamo andare nuovamente nel nostro ruolo.

Cerchiamo il nostro ruolo.

bellissimo ruolo 0 1 e lui

io sono perso funzionale risorse ok profilo lettura configurabile poi Anagrafiche? Sì, perfetto. E poi il penultimo link è il rapporto bound.

Ok.

Eccola, adesso c'è i campi.

Ok.

Perfetto.

Editabile?

Devo mettere non editabile.

Esatto, e vai verificare adesso se sul tuo utente...

Fai logout e login col tuo utente e verifichi un attimo che è uscito fuori

vediamo tutto con digitale

e poi abbiamo detto sui sui rapporti dobbiamo andare in situazione base no grafiche base si male e poi era verrà rapporti eccolo qua perfetto l'interimento è ingrito, quindi a posto. Fai pure ricerca, prendi in gestione uno di questi record e la descrizione è fatta pure in digitale.

Perfetto.

Ok, grazie.

Mi ero perso un paio di passaggi.

Non c'è problema.

Qualcun altro?

Qualcuno ha parlato? Si, una cosa, mi sono perso un attimo,

ho fatto la configurazione con l'utente

corso GBF, poi dopo entro con

administrator, cosa va verificato qua?

Che in pratica posso fare, dic diciamo ancora l'inserimento?

Allora tu

con l'utente quello corso GBF ti sei creato le chiavi

in profilatura configurabile.

Sì, la profilatura.

Poi entri come

utente administrator

e sul tuo ruolo...

Scusami, non admiformazione,

ho sbagliato, admmiformazione, sono entrato.

Sì, admiformazione ti devi dare le abilitazioni, disabilitazioni, anzi in questo caso, all'utente tuo.

Poi con l'utente tuo...

Eh, questa parte è qua, quindi entrare con admiformazione e togliere al mio utente

di questo quasi sensi un case tensioni i birri all'inserimento quindi l'inserimento è una non

ricordo il pat sotto administrator per formazioni, no?

Poi non mi ricordo...

Ok, deve andare sul...

Devi prendere in gestione il ruolo, quindi su accesso uffici ruoli.

Ah, ok.

Ti prendi in gestione il tuo ruolo, poi vai su funzionalità risorse.

Ok, ok, quindi adesso...

Quindi il ruolo, codice ruolo...

Faccio ricerca...

Metto in gestione.

Funzionità risorse.

Ecco qui ci sono, funzionità risorse.

E poi lì sotto c'è un link, l'ultima profilatura configurabile.

Sì.

Profilatura configurabile.

Scegliere poi la classe. Anagrafiche central la classe sotto base o vedo centralizzata si è una grafica centralizzata

e poi dopo dentro ci dovresti avere qualcosa

per capire che classe esenzioni

si

esenzione class

ecco l'ultimo

esenzione

in una selezione

lì dovresti avere la capacità

di toglierti l'inserimento

e un tab campi

per inibirti

l'editabilità della descrizione

ce l'hai?

ok quindi

sotto a una grafica seleziono inserimento

non lo selezioni

già non è

di com'è?

esatto perché l'hai creato senza mettere i default

perfetto quindi questo vuol dire che non li odiamo

hai creato la chiave per deciderlo però non li ha valori quindi così non gli dai niente

mentre per campi sotto uscite campi dovrei selezionare per in modo di inibire descrizione quindi classe esenzione iscrizione lo vedo editabile devo fare

non editabile non è nato esatto conferma conferma e ora ti loghi col tuo utente verifichi che in

effetti non può inserire una classe di esenzione e non puoi modificare in modifica descrizione. Perfetto. Ok, grazie. Prego.

Quindi con corso JBF bisognava mettere la spunta anche sul default dell'inserimento?

No, ripeto, sì, forse per l'esercizio

ancora meglio

però no, nel senso dipende

quello che si vuole fare

se si vuole di default

dare l'abilitazione a tutti

solitamente sì, è così perché uno dice vuole mantenere

Dipende quando lo fai, se lo fai al tempo T0, certo che magari ha senso non mettere il default,

e vi dici al tempo T0 voglio che tutti quanti non possano inserire.

Nel caso magari della Sardegna, che uno lavora su già delle configurazioni esistenti,

magari vuoi mantenere la retrocompatibilità, quindi dici,

ok, voglio decidere chi può inserire una regione, però prima di farlo,

intanto metto il default che tutti quanti continuano a inserirla e poi dopo

puntualmente me la tolgo.

Ok, va bene, perfetto. Grazie.

Prego. Grazie. Ok, ci siamo tutti? C'è qualcuno che ancora non funziona?

Che non funziona?

Ok, noi ci siamo tutti allora andiamo avanti

andiamo avanti con gli esercizi

facciamo un bel esercizio sull'escript rhino nato in un secondo che mi riapro la guida, manco io mi ricordo tutte le funzioncine.

Allora, configura, script oggetti utilità.

facciamoci una cosa un po' più complessa un po' più arzigogolata

condivido lo schermo

condivido lo schermo

allora sul dp di formazione adesso creo una tabella schermo allora

sul db di formazione

adesso creo una tabella

questa me la faccio il drop

perché

troppo

tenevo

la pressione ogni tanto

ecco la connessione ogni tanto

Ah, così.

Allora, mi creo una tabella del tipo

create table esercizio script.

Ognuno dovrà scrivere dentro questa tabella.

In due colonne facciamo.

Ethername.

Qui dentro ci dovete scrivere l'asername del vostro utente. scrivere tipo la maschera

quindi tipo

se state lavorando

il vostro punto di menu sarà quello

che vi è dato il primo esercizio

quindi chi lavora sulle province

continua a lavorare sulle province

chi ha le regioni, le regioni, classi di sensazione

quindi quando si scriverà tipo

regioni, scriverà regioni

ok

e qua invece Quindi quando si scriverà tipo regioni, si scriverà regioni.

E qua invece ci mettete valore, anzi identificativo, ci mettete l'id dell'oggetto su cui state lavorando.

Cosa significa? Significa che se, ad esempio, state lavorando, questo è un po' complicato però lo facciamo insieme tanto non ci sta

però il discorso è questo

se ad esempio voi state lavorando

sulla gestione dei comuni

CMD si dovete mettere

il campo chiave

esempio se io lavorerò sui comuni

inserirò, farò insert

into

qui

il mio utente che si chiama

il mio utente che si chiama

lucidi

maschera

scriverò una cosa che mi faccia capire

che comuni

poi il valore è 001240

di quello che c'è in edit

questo è l'obiettivo finale

quindi fare uno script che

ogni qualvolta

ogni qualvolta

salvo

ogni qualvolta che salvo un oggetto

mi va a fare questa insert

facciamo un'extradata di tipo

non scuola, non un'extradata, facciamo uno scrittrino

di forsevo object

o anche aftersevo object, quello che sia

dove ogni volta che salviamo

quindi clicco ad esempio qua, conferma

sua cittadinanza, ok?

vado a scrivere un record qui dentro

ok? questa è una tabella

l'ho creata qui sull' metri di formazione quindi visibile a tutti

è chiaro risultato finale adesso vi aiuto ma è chiaro il risultato finale

sì allora gli script quindi lo

leghiamo, è sempre in profilatura configurabile, dovete andare, quello che vi dico è questo

intanto, quando selezionate il punto di menu, esempio qua su comunistati est, riconfigura,

non cliccate qua su script, dopo ve lo spiego che è stato quest'altro script, però quello

dove dovete lavorare è questo, configura, script, quindi prima cosa è questa,

quindi la prima cosa è questa seconda cosa

per prendersi l'utente è questo

anzi

anzi

vabbè, anzi, intanto

anzi, ne approfitto, guardate

questo è intanto per prendere l'utente

quindi

profile user

questo se me lo copio sulla cosa

quindi per prendere l'utente

è così

questo per prendere l'utente

poi da quello per prendere la username è questo

poi l'altra cosa che vi servirà

è la stringa in una stringa

questa qui è statica

quindi lo scrivere è statico

per prendere invece la proprietà

avete all'interno di scrittino l'oggetto binder.

Cioè se voi scrivete in qualsiasi momento binder,

ovunque, come vi pare,

qui, scrivo binder,

sarà un oggetto binder

che abbiamo visto

quando abbiamo fatto l'esercizio

del wizard

ha dei metodi per fare

l'asset property value

ma anche per fare

get property value

ok? e qua ci va messo il nome della proprietà quindi

var

ender.get

lo scrivo qua così

se abbiamo problemi di sintassi

get

property value

di

property name

o anzi

property name

ok dell'id

ora qual è il nome delle proprietà name, ok, dell'id.

Ora, qual è il nome delle proprietà di ognuno di voi?

Allora, adesso ve lo trovo io perché facciamo prima,

però vi dico anche come magari trovarlo, ne so.

senso al solito, vi dico come mettete caso che, adesso ve lo dico io ovviamente, le proprietà,

tipo qual è il nome della proprietà delle province, delle regioni, cittadine, eccetera,

però vi faccio vedere anche come si qualche cosa o controller ma anche magari il mapping

riuscite entrambi i modi o col controllo e con il ma il controllo abbiamo visto prima

quasi la classe controller apri la classe controlli sì. Oppure anche tramite mapping, riaprite il file di properties del mapping,

nel caso di SIA anche questo qui che dovessimo fare esercizi,

lo cercate, questo SIA anche province,

cercate il mapping,

quindi sapete qual è il bin,

il bin è questo qui,

province bin,

e poi da provincia bin aprite l'xml, i di provincia bin. E poi da provincia bin apriete l'XML.

Quindi provincia, ci siamo?

Quindi, provincia, provincia, provincia, provincia, di provincia.

Poi, regioni, adesso vado a memoria perché altri, a parte uno si scrive regioni, bin, più o meno c'è azzecca, quindi non la vita è scendentare, per intanto non metto regioni.

Regione.

Cittadinanza e bin di cittadinanza

oslo presidi

mi sembra più complicata

questa mi pare che sia azienda

azienda, azienda host, azienda host, classi e sensioni,

MySensezione, classe lin, XML, code, support, found.xml, codice e questo adesso me lo metto nella solito file appunti così se lo condividiamo

no

con questo è stato poi dopo come si fa a fare la insert questo lo trovate qui dentro ok oggetti

utilità di beauty nella cosa fate contro il click perché a volte alcuni browser sono un po bastardi

e fate il click di far una pagina bianca

non so perché su Chrome

Firefox non me lo fa

comunque con control click

me lo apre

e qua sotto c'è un esempio

che è quello che abbiamo fatto stamattina

quello che l'ho fatto oggi

ma in realtà poco fa

è stato il tipo scritto

eccolo qua

tutto chiaro? in realtà poco fa, è stato il tipo scritto, ok? Eccolo qua.

Sto chiaro?

Una domanda?

Ok.

Sono fatto.

Mi metto anche lo scritto della tabella, non perché lo dobbibiate creare ma solo perché così sapete quali sono

la definizione Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie. per vedere i log

shift s12

poi vai sotto

sotto dove? - Poi vai sotto.

- Sotto dove? - Scrolli sotto la pagina.

Sto ancora condividendo, se vedi il mio schermo...

- Ah, ok.

- Sotto c'è Logging, mostra.

- Sai che mi parte la...

- Ah, la mascherata è già schiantata in rosso, chiudila e poi prendi il CF12. Grazie.

Scusa, bisognava di un'informazione, giusto?

Bisogna entrare per poter eseguire...

Per creare lo script rino?

Sempre con admin, amministratore?

Ah, per crearlo sempre con un utente che ha la profilatura configurabile,

quindi corso GBF.

Ah, ok, scusa, sì, volevo dire quello,

il corso GBF, sì. Ok, grazie.

Prego. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Ok, come va? Ok, come va? Ok, come va?

come è riuscito?

anzi faccio una guerra

come è riuscito?

io mi sto qui se c'è ancora con la modalità di bugger.

Non riesco a farlo uscire? - Prova un attimo a condividere.

questo qua

ma tu vai su

abilato una maschera

ma se pure magari

ma c'è la login

shift f12 abituale ma sicuramente ma c'è la linea

c'è se f12 ora sono la prima maschera applicativa

ok al piatti dove la fase

Qua c'è il video che trovo. Ah, perfetto.

Perfetto. Ok, quindi adesso lo vedo che si rompe.

Faccio un po' così, eh.

Però qui dovrei avere il...

Faccio un po', fai mostro.

Ok, non si è diventato. ok scendi pure sotto tanto le fine

tanto sta giù

eccolo qua sarà questo stack trace

305

sarà il get message o a che parte

questo è il comando update

ora è quello qui - Allora, questo è il comando abdetto, ora, eccolo qui. - Esatto, adesso non la google.

- Ma fino adesso, me lo debalgo.

- Esercizio?

Ah, ok, usara name è scritto, ok.

- Ok, usara, quindi stai. Va bene, dai. Allora, continuo.

- Sì, sì. Altri?

No, aspettata scusami

è giusto usaraname

ho scritto male

giusto usaraname

vediamo

vedi un attimo

la definizione della tabella sta

allegata

actual 62

maximum

31 tu cosa ci hai messo Ah, scusami, c'è la sito che lo scrivi. Actual 62, maximum 31.

Tu cosa ci hai messo? La username, giusto?

Get username.

Fai a fare 62 su un campo di 30.

Ah, get username.

Eh, sa, bravissimo. Perfetto, mancava l'invocazione.

A posto. E stava bravissimo, perfetto, mancava l'invocazione apposta.

Ok, quindi probabilmente facendo user.gay username ti metteva la definizione della funzione.

Ok, altri?

ok non facciamo così

facciamo una pausa

ci ribecchiamo qui

alle 4 e 20

poi continuiamo l'esercizio

infatti vedete voi se avete bisogno di una mano

sullo script

facciamo pausa

senza che continuate

anche durante la pausa

facciamoci le 21 minuti di pausa

e poi dopo riprendiamo con questo esercizio

se avete problemi mi condividerò schermo

e vediamo, va bene?

ok ciao ragazzi, a dopo riprendiamo con questo esercizio se avete problemi mi condividerò schermo e vediamo va bene? ok

ciao ragazzi a dopo

ciao a dopo Grazie a tutti. Grazie. rieccoci presente

allora leggo

Rucampus sono riusciti

perfetto

più o meno

Chi parlava?

Potete una voce però lontana, molto lontana.

Anche io dicevo che sono riuscito a farlo.

Non lo vedo.

non lo vedo no, non lo vedo

se provi a condividere

ti do una mano Grazie. Ok, si vede.

Allora ho creato un account corso JBF, ho fatto la profilatura avanzata eccetera, magari lo vediamo direttamente. ok

ok

ok

ok

ok ok la volta qua configura perfetto è fatta questo Sì, no, no, ok, quello di esercizioni prima va benissimo.

No, script.

E poi campi.

Questo qua.

Ah, ok, tu mi stai facendo le idee di esercizioni prima, va bene.

Sì.

Abilitazioni, l'hai messa la spunta?

Sì. Abilitazioni.

Ok, perfetto. Ok, l'hai messo non editabile abilitazioni ok perfetto ok le mettono meditabili e funziona giusto

invece lo script no quello non ho visto sono dovuto a scollegare un'altra colla

non

questo come

magari si lo recupero dopo l'esercizio va bene chi ha difficoltà... Ascolta, come verifico il funzionamento dello script?

Dovrei averlo fatto, l'ho salvato?

Allora, sto facendo io la query sul DB,

ma vedo che non...

Leggo solo Aru e Ucampus che hai inserito.

Io ho salvato solo lo script, però non ho fatto nient'altro.

No, no, no, puoi fare...

Salvi lo script, pubblichi la versione

si pubblicata

perfetto

ci siamo messi nell'evento

io vado in un rapporto

quindi devo vedere il dettaglio di un rapporto

la funzione che hai implementato

qual è? before save object, giusto?

si

perfetto, allora si, conferma, vai sul rapporto,

fai conferma e vediamo.

Ok. Grazie. ho chiuso tutto

sto facendo l'oviene con la mia utenza

ok

se posso

appena posso mi avvisate

va bene ho da farvi vedere qualcosa che non trovo.

In particolare, approfitto del buco, insomma, interrompetemi.

dello script, ma mi escono fuori una serie di

errori

che mi invitano ad usare

i doppi apici

e non i singoli

ok, va bene

se vuoi

anche con i singoli apici

funziona insomma

le classiche cose, sì

doppi apici per le stringhe

va bene

se lo fai non è un problema

e dovrei aver salvato

non vedo niente

niente però. Fai un po' vedere un attimo lo script.

Anzi guarda,

non so che me lo fai vedere perché tanto lo posso

vedere anche da me. Lo puoi recuperare

nella tua tabella.

Dimmi un po' tu che

punto di minuciarei? Rapporti?

Rapporti, sì.

Vediamo un po'. Grafiche,

base,

rapporti, configura, configura, script, script.

Aspetta, mi sei chiuso tutto, maledetto.

Non sono l'unico allora.

No, no, ma ti scherzi

allora rapporti

configura

script

carica e ti carica

allora

get username

maschera rapporto

property name

getproperty rapporto

insert into

esercizio script

values username

maschera identificativo

script map username

maschera identificativo

allora va tutto bene

l'unica cosa

comunque sia

dobbiamo sempre...

Allora, ti condivido un attimo lo schermo io.

Ok.

Non me funziona già a prima botta, è soltanto da fare questo.

Adesso condivido.

Sì, considera che non è l'ambiente di sviluppo, ho scritto tutto su...

Sì, sì, sì, no, c'è un'altra cosa. Ok. l'ambiente di sviluppo ho scritto tutto su si si si così compilando a memoria

mi pare tutto corretto

l'unica cosa che manca è soltanto questa

ricordatevi che

non te lo faccio io

che sugli script

che si agganciano qui dobbiamo sempre ragionare

ad eventi

ok non ho specificato

ho specificato l'evento dove ci vogliamo agganciare

al confirm

possiamo usare quindi all before save object

all after save object

quindi semplicemente questo secondo me manca

perché adesso non te lo stai seguendo

per questo motivo

perché dobbiamo basta quindi mettere

tutto là dentro

questo qua dentro

vediamo un po salva

pubblica e prova un po fare logout login risale salvare un rapporto

Ma la getUser è case insensitive, no?

Come?

La getUser non è case, è case sensitive, giusto?

Sì, sì.

È che ce l'ha S maiuscola lui.

Sì, hai visto, ho trovato l'errore.

User ce l'ha S maiuscola, getUser. Sì, è unaato l'errore user, c'è la getUser.

Sì, è la compilazione a memoria.

Alla validazione.

Ok, anche un'altra cosa mi sa che questo,

useraname, ma questo perché ho scritto male io la tabella,

è useraname.

Allora correggi tu, così io poi.

Allora correggi tu, così io poi.

Get user user name, maschera identificativo, maschera identificativo.

Usera name è univoco, nessun altro avrà, userà quel nome campo. Ok, riprova pure, anche senza sloggarti.

Sì, sì, sì, confermo.

No, continuo a stare lì, provo a uscire e rientrare

conferma ora

no?

è undefined

è andato però

mi ha dato uno script undefined

javascript undefined

ok, no, quello secondo me sai cosa è che

sul before save object

siccome i before

servono per eventualmente

pubblica eventualmente per bloccare noi b foranno hanno caratteristiche di veto

quindi possono bloccare il flusso quindi sempre qua subito possiamo bloccare

salvataggio va sempre fatta una retarna di un qualcosa retarna true vuol dire

tutto ok quindi comunque deve es'hai seguito lo script

perché infatti adesso se vedo sul db

eccolo qua

ci sei

però poi dopo

quando è andato a recuperarsi

il valore di ritorno

gli ha trovato

perché non c'aveva un valore di ritorno

a posto

ok

va bene va bene

mi copio lo script corretto adesso

grazie

prego

altri?

un altro che vuole una mano

ti condivido lo schermo

così

dove sei?

aspetta

è che è rito

cioè io ho script

l'ho fatto

for save object

profile out is get user

username get username

ausl presidi

bindercat property validity

dei aziendosp

successio script

campo A

campo B

campo C

parameters

allora va tutto bene

l'unica cosa

se tu vai

sul manualetto

oggetti utilità

db utils fai control click sul manuale di db utils

scendi un po sotto vedi lui quando fa i parametri, eccolo qua, vedi che fa campo A dbutils.stringparam, cioè non ci metti direttamente il valore.

Ah, ok. Questo dici tu. quindi esatto

quindi ad esempio

di beauty string para username

di beauty string para maschera

e così via dicendo

e poi anche tu alla fine

mettici un bel return true Grazie. No, sto facendo l'esercito.

Ero convinto che le variabili le prendesse

direttamente.

Ah no, no.

Ho fatto pure prima lo stesso errore.

E' senza stringa,

l'username è messo tra apici.

Senza apici.

Tu dici così?

Yes.

E quindi anche qua?

Yes, uguale.

Vedete la serie che i computer fanno sempre... Sì, sì.

Secondo me adesso se tu fai salva, poi pubblichi la versione.

Qua si pubblica.

Dopodiché quando vado a salvare succederà quello che deve succedere.

Ma questo lo posso fare direttamente da qua o devo andare a cambiare utente?

Se ce l'hai abilitato il punto di menu ce la fai anche da questo qui

oppure quello che faccio io è avere, anche se dopo un po' mi intreccio,

avere una pagina aperta in incognito così sono logato su due utenti contemporaneamente.

Ah, qua puoi pure chiude, tranquillo,

puoi andare di là direttamente sull'utente.

Sì.

Così.

Cioè, comunque... 5 perché in realtà

questo

scusami vai pure su una grafica

una grafica

già è vero base poi tu sei a slow presidi giusto? perfetto scumi vai pure su una grafiche cos'è base

poi tu sei

aslo presidi

giusto?

si

vai

prendi

fai ricerca

prendi in gestione un risultato

poi premi

fai ricerca

prendi in gestione un qualsiasi risultato

e fai un conferma

ok fa ricerca, prendi in gestione un qualsiasi risultato e fai un conferma.

Missing select keyword.

Missing select keyword.

Torno un po' sullo script.

Ci ho fatto caso.

Aspetta un attimo.

Nessi forse acchiappato quello sbagliato.

Dove sei? Dove sono?

Configurazione. Grazie.......

...

...

...

allora in scritta update forse l'altro in set

non aspettano secondo one second

a valo questo è una cosa si può dopo crito ma poi update name statement

update penso che sia solo questo qui è solo la la s su un value value

che dobbiamo

Che dobbiamo fare?

Comunque, sto per andarci nel, bisogna fare così.

Vero?

No.

Ok, prendi pure in gestione, con il tastino freccia, versione 3.

Tu dici questo?

si, vai e fai values

values

ma si, sono tanti valori

e vi facciamo la stessa storia

salva

poi sulla versione pubbliche

clicchiamo poi sulla versione pubblica a questo punto usciamo Grazie. vai conferma

vediamo un po' sul db

adesso controllo io

perfetto, ci sta

ottimo, funzionato

leggo sulla tabella c'è

corso underscore gbf aslavo presidi 209.06 Ottimo, funzionato. Leggo, sulla tabella c'è CorsonDiscorgeBF AslaoPresidi

209.06.

E' quel numerello che è uscito qua sopra.

209.06.

Perfetto.

Ok. Qualcun altro?

Grazie. Prego.

Se mi hai risposto.

allora

chi rimane?

allora ci sta regioni

fatte

regioni fatte

cittadinanza fatte

os le presidi fatto

rapporto fatto

Cristiano tu ok

esistono attimo riprendendo come è caduto un po tutto l'amberato alla connessione

ok Grazie a tutti. Grazie.

Grazie. Grazie. Grazie. silenzio

sì aspettiamo un attimo

è che mi sembrava

che si fosse

disconso a tim

perfetto

scusate se vi ho svegliato

no no

figurati

aspettiamo un attimo insomma

Gianfranco se hai bisogno di una mano ce lo dici

e poi dopo insomma andiamo avanti colimo, anzi vabbè facciamo una cosa,

nel frattempo vi do anche l'altro esercizio, poi Gianfranco quando ha finito lo script

attacca anche un nuovo esercizio, che è già finito e va avanti, facciamo così dai.

Il nuovo esercizio, ma tanto è molto semplice, e poi è l'ultimo perché fatto questo parliamo di un altro argomento completamente diverso.

Simone, scusa, ho avuto problemi col pc, sto seguendo dal cellulare, continuate pure e vi seguo.

Ah, va bene.

Non si blocca completo.

Va bene. continuate pure vi seguo va bene va bene

allora l'altro esercizio ragazzi è molto

facciamo così un attimo

per concludere gli script

tanto la stessa cosa anche tu

Federico giusto?

si

sei un po' indietro

per concludere una questione degli script

intanto vi volevo far vedere questa cosa qui

a livello di codice intendo

tutti quei

db utils, binder eccetera

che vedete, che vi ho detto ad esempio il binder

voi lo mettete, per magia

avete il binder, perché ce l'avete?

perché in realtà il tutto

sta qui dentro, psgx

inizia

l'izer

psgx inizia l'izer psgx inizia l'Aizer ok

se vi ricordate vi dicevo che questa è la classe

che viene fatta di inizializzazione

del modulo di PSGlib

quando viene fatta la start up di PSGlib

il progetto di PSGlib

sul vostro workspace viene

lanciata questa classe, vedete?

DBUtils, FileUtils, LookupUtils

DBUtils è sempre quello che avete usato

anche service-utils avete usato, ok?

quindi l'avete usato perché?

perché sono censiti qui dentro

ora

qui

poi avete l'associazione praticamente

cioè quando voi scrivete

service-utils

altro non è che un placeholder, diciamo,

e poi richiama la classe Java vera e propria, che è questa qui, utils script service, quindi

qua dentro ad esempio avete il metodo, voi avete usato il metodo get user, mi pare?

No, create map su service utils, create map, eccolo qua.

serviti scritto ma eccolo qua oppure avete usato anche profile utile questo qui e qui qui ci sta il metodo get user eccolo qua ok quindi altro non è che un wrapping alla fine di classi java alla fine

classi java data andate ad invocare inoltre avete anche sempre i binder. Il binder, questo vi viene iniettato in realtà, adesso questo lo vediamo, questo viene iniettato da default service.

Questo lo troviamo dove viene iniettato.

grazie

grazie

non qua after create call script

eccolo qua

rapid binder

eccolo qua binder infatti questo

vale binder

ok

quindi c'è questo metodo

call script Quindi c'è questo metodo col script che invoca lo script e ci wrappa dentro questa variabile binder e ci mette il binder.

Poi col script se andiamo in cascata a vedere, vedete? Viene invocato da cosa? Dagli eventi.

After create, after load, after remove, after save, before save, ok?

Ad esempio, quando ci sta l'evento di before save, viene invocato lo script equivalente e vi viene bindato dentro binder, quindi per questo avete l'oggetto binder.

Questo c'è utile per fare poi tutta una serie di operazioni, quindi contestualizzate all'oggetto.

Questa era una cosa che volevo dire, insomma.

Poi, l'altra cosa che volevo dirvi è questa.

In profilatura configurabile, lo script lo abbiamo legato

qui, su

configurazione avanzata e profilatura configurabile

va bene, prendo una a caso in realtà, tanto anche i pazienti va bene

è tanto giusto farvi vedere

e poi dopo andavate

su configura script.

Ok?

Però in realtà c'è anche questo script, nella maschera prima, questo script.

Qual è la differenza?

Quando andate su configura e poi andate su script, lo script viene legato al bin.

legato al bin. Quando invece usate lo script che è qui, lo script viene legato al controller.

La differenza sono due sostanzialmente. La prima è importante, se legate lo script a livello di bin avete poi la certezza che quello script,

verrà eseguito in qualsiasi contesto

sia che la manipolazione del bin avviene tramite controller

cioè tramite interfaccia grafica

sia che intervenga tramite servizi web service ad esempio

quindi se voi aggiungete una validazione sul before save object

quella validazione avete la certezza che verrà valutata in tutti i canali possibili di interazione col bin

quindi potente

lo fate invece a livello di controller quando

volete che quella operazione che inserite valga soltanto da interfaccia grafica. In quel caso,

però, adesso torno ad aprire il manuale, se lo fate a livello di controller gli eventi cambiano,

quindi non avete più il before save object, after save

object, eccetera, ma le funzioni si chiamano semplicemente in maniera un po' diversa, quindi

avete, avete, dove cavolo era qua, controller, eccolo qua, oggetti controller

avete before find

prima della ricerca, before confirm

prima di un salvataggio, before cancel

anzi no, before confirm è

sì, prima di un conferma

prima di un salvataggio in generale, inserimento

o variazione, before cancel

vuol dire prima di fare annulla

before delete, prima di fare di

min after delete, eccetera, eccetera, anche before exit, avete delle funzioni diverse.

In questo caso, inoltre, il riferimento all'interno dello script avviene tramite la variabile controller.

Non avrete la variabile binder, come abbiamo fatto adesso, perché appunto non lavorate legato al bin, ma avrete però in compenso, ad esempio esempio la variabile controller variabile controller vuol dire avere un'istanza del vostro, ad esempio

che ne so, corso v3

quindi se qua potete poi

una volta che avete la vostra

distanza controller invocare anche

metodi pubblici del vostro controller

ok?

questo è giusto per completare la parte di script

quindi i fini

dell'esercizio avremmo potuto

usare quello anzi

assolutamente sì

anche quello

esatto

un secondo solo scusatemi

un secondo solo Grazie a tutti.

...

...

...

...

...

...

...

......

...

...

......

...

............... eccomi, pardon

ok, va bene?

quindi questo è per concludere gli script

ultima esercitazione

divertiamoci un attimo

con

con le scale dinamiche

con un'extra data

banalmente

sempre ognuno per la propria gestione che si propria gestione di cui ormai si è appropriato,

quindi chi per le province, chi per le regioni, eccetera, aggiungetevi, se lo ritrovo, un'extradata di tipo scada dinamica.

Ok?

Quindi, ad esempio lo faccio sui comuni, andate sempre come profilatura configurabile. Sempre tramite profilatura configurabile, comuni

configura

extradata

ok

vi censite un extradata

due raccomandazioni

il nome

forse non posso cancellarlo

credo gli oggetti

vediamo un po'

allora la prima raccomandazione è il nome Anzi, questo adesso forse non posso cancellarlo, credo gli oggetti. Vediamo un po'.

Allora, la prima raccomandazione è il nome, non mettete spazi, caratteri strani, mettete solo lettere e numeri qui, ok?

Quindi, extra, uno, al massimo, lettere e numeri.

Qui etichetta quello che volete.

Ok.

Non fate subito conferma, andate qui su oggetto, doppia freccia, poi dovete fare conferma, configurazione,

poi un conferma, disegna e qui cercate un attimo di disegnarvi un qualcosa potete mettere quello che volete inserisci lì

e poi potete mettere un qualsiasi elemento

esplorate un attimo, sensazione descrizione

combo box, check, d'accordo?

poi insomma

esci, conferma, esci

tutti quanti i conferma che servono mano a mano che uscite e in definitiva poi

fate un conferma qui

e quindi vi inserisce la riga poi anagrafica conferma finito

e poi vedete insomma se vi funziona l'extradata sulla maschera, d'accordo?

Ok, ci proviamo.

Perfetto. Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie. Grazie a tutti.

Grazie a tutti. disegniamo il campo che vogliamo aggiungere nel campo nome cosa deve inserireire non univoco era nel campo nome si va messo del del quando aggiunge un elemento un

nome univoco fatto con un codice basta che sia insomma lettere numeri magari un punto non

descor questa roba qui che grazie mi ha bocciato l'andes, mi dice che il nome non deve contenere caratteri speciali o iniziare per un

numero. L'ho chiamato text underscore extra. Questo però dov'è essere quando vai a definire un

elemento di... In extra data proprio il primo campo. Non extra data sì, come ho detto solo nome,

lettere e numeri. Invece quello che diceva Federico mi sa che era sul nome del campo, giusto?

Posso condividere?

Sì, quando ho scritto una edit...

Esatto, una edit, invece lo scorrere lo può mettere.

Sì, chi è che diceva che doveva condividere?

Sì, condividete tranquillo.

Sì.

Ok. ok sì, sì, è un errore questo?

sì, ok, fai pure non me lo fa più correggere

eh, fai pure pulisci, e rincomincio

ah

ok, vai

quindi senza test, senza l'underscore

sì, sìcore senza underscore

il resto va bene

ok senza spazio

ok allora mi devo

ridivertire

ok

no configurazione

ok

ok

ok

ok Grazie. anche punto e non vorrei che poi me lo dopo che ci ha fatto tutto

meglio andare sul sicuro

questo è tutto ora do conferma

l'etichetta

metti cibo

sembra buono

vai su una grafica

una grafica

il tab

il primo tab

e anche un conferma qui questo è il tab, il primo tab, ed è anche un conferma qui, questo è il tab padre, giusto per conferma, è a posto.

Vai, vedi un po' se funziona, vai rapporti tu, quindi basta che vai...

Ok, andiamo qui, base rapporti, base rapporti, ricerca...

Si vede il tasto extra prova a fare

prova a fare la ricerca

cioè a cercare proprio

un rapporto

poi extra

extra

extra data

perfetto

va bene buone notizie

nonostante il lunedì

buone notizie

ok grazie prego Va bene, buone notizie, nonostante il lunedì, buone notizie.

Ok, grazie.

Prego. Grazie a tutti.

Grazie. Posso far vedere quello che ho fatto? Certo. Allora, aspetta, adesso tu schermo qui.

Ok, quindi vedi, dovresti vedere.

Quindi sono andato su un...

Configurabile, sotto sopra, mezzo...

Eccolo qua.

Eccolo qua.

Configurabile, un video, un'occhiei, 32, configura. eccolo ok conferma, va a configurare, disegno, e ho fatto solo un capo di escrizione francese.

Pronto, faccio.

Ma fai un attimo, esci, fai esci, esci.

Esco?

Sì, fammi attivare una cosa.

C'erano due prima, descrizione inglese e descrizione francese.

All'altro non sto provando.

Aspetta, non vedo. Ok. prima descrizione questo provando ancora bene probabilmente questa pagina

ma anche perché no ma qui si è noto di tutto e questa è questa ecco è colpa di

hanno spento il load balancer

un attimo che scrivo a dei colleghi in chat

vediamo un attimo

vi mando la foto

allora

scatare fatto

stavolto Grazie. stanno facendo qualcosa volutamente oppure se hanno hanno aggiornato adesso mi

da 404 mila mi login come se forse deve far partire il contesto

va bene ma se volo di niente faccia con gli utenti andavo su c'è di ansa cliccato

su bottoncino extra ma prima di una finestra per una chiesa

per magari appena ritorna su. Aspettiamo proprio un minuto, poi se non torna su intanto andiamo avanti e poi quando torna riprendiamo. Grazie. Ah, non parto, allora facciamo una cosa, andiamo avanti e poi dopo ci torniamo, non appena ci assiste l'ambiente, così faccio vedere, io posso lavorare sul locale, faccio vedere utilizzando il mio ambiente in locale.

Allora, individuo.

Allora, come dicevo, l'argomento dopo, che sta anche nelle slide che vi ho condiviso, è della reportistica, però a questo punto, siccome sono le 5 5.20 direi che lo possiamo anche iniziare direttamente

come primo argomento

domani mattina

quindi nel frattempo magari

vi mostro alcune

cose, diciamo che

tutta la questione della profilatura l'abbiamo conclusa

non c'è altro da, insomma, ci siamo visti

in tutte le sfaccettature, anche la profilatura configurabile

eccetera, quindi non c'è altro da insomma ci siamo visti tutte le sfaccettature anche provato la configurabile eccetera eccetera quindi non non c'è altro da da da raccontare il profile writer ve lo detto oggi

il profile manager per lo fatto l'abbiamo fatto nell'esercizio quindi profile writer per scrivere

le chiavi e profile manager per per andarle a prenderla a leggere il dynamic controller anche come classe che si occupa di fare tutto il disegno

e poi vi ricordo anche che nello stesso package dove sta il dynamic controller

quindi il package RAD

qui dentro c'è il core, dentro case, quindi per ogni chiave qui dentro avete la risposta

su tutto

su come funziona ogni singola

ogni singola chiave

quindi

siccome la profilatura abbiamo

completata

poi dopo ci torneremo in realtà su alcuni aspetti

della profilatura che in realtà abbiamo saltato

ad esempio le chiavi di profilatura

per dimensione, le date

di validità

delle chiavi di profilatura.

Perché? Perché tanto

poi un altro corso che facciamo

è il corso sulle anagrafiche centralizzate,

quindi un po' funzionale,

poi diamo anche uno sguardo

ai B, alle classi, però comunque

siamo un po' minimo per capire come funzionano

queste maschere, bisogna un paio di chiacchiere su queste maschere, bisogna farle,

e poi con il corso delle anagrafiche sui parametri ci torniamo,

per valorizzare quali i parametri e le abitazioni delle anagrafiche,

quindi poi quella sarà una scusa per ripassare.

Però, diciamo, per concludere anche il mondo GBF,

che ripeto, GBF, ABF, PSG Lib,

tutti sinonimi della stessa cosa,

che sarebbe la cartella PSG Lib che avete nel vostro workspace.

L'utilità, questo già ve l'ho detto,

vorrei vedere alcuni punti di menu utili.

Inizializza numerazioni. Questo potrebbe essere utile per il localhost, perché altrimenti faccio vedere.

Eccolo qua. Inizializza numerazioni.

serve per ricreare le sequence

se voi fate ricerca

vi mostro tutte le sequence che sono su Aries

tutte

e può essere utile per ricrearle

perché magari che ne so

in realtà normalmente non si usa mai

soltanto nel caso in cui

faccio un recupero dati su una tabella. dei comuni, la sequenza magari era 1, recupero 1000 comuni e la sequenza 1 è rimasta, dopo che

succede che se la sequenza non la ricrea o non la riallineo, la sequenza comincia a staccare il numero

2, 3, 4, comincia ad andare in overwrite sul record che sono già stati censiti. Qua invece

potete selezionare fare anteprima

infatti già è disallineata ad esempio

e vi dice che il valore previsto

però è disallineata in questo caso in un'altra forma è un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra forma in un'altra in un'altra buchi, quindi dice che il valore previsto come fa a sapere il valore previsto? semplicemente fa una max sulla tabella

dice la max è questa

quindi dovrebbe essere

probabilmente da 0,9

quindi la prossima valore deve essere 10

invece la sequence risulta

un centinaio di posizioni più avanti

quindi sta creando dei buchi

il problema più che altro è quando il valore assegnato

è minore del valore previsto

perché in questo caso

può rischiare, si rischia di andare in update

quando va ad inserimento

perché vi ricordate che vi ho fatto vedere

che il persistent manager

quindi quando poi

JDBC persistent manager

che era l'oggettino che poi di fatto andava a creare

le nostre insert, update, eccetera

gli statement,

in realtà come fa a sapere se può andare in insert?

Perché lui va sempre in update come prima cosa.

Quindi prima va in update,

se l'update ritorna più di un record,

lo va in insert.

Quindi se la sequenza non è allineata

e lui prova ad andare in update su un numero che esiste,

gli dice sì, ha aggiornato un record, a posto.

Però in realtà no, in realtà lì magari

durante l'inserimento chiaro quindi qua si può fare un anteprima e poi si fa inizializza ok

come fa a sapere queste cose perché esiste una tabella che si chiama

è l'ex start from C sequence quindi perché noi in realtà

teoricamente, poi dopo non è detto che

in realtà, considerate che tutto quello che vi dico

è areas in quanto prodotto

non è detto che tutte le cose che si fanno

quando si ragiona a prodotto debbano rimanere

in un contesto in cui si ragiona a progettio

quindi quando tutto, in questo caso si parla di progetto Sardegna,

quindi è tutto relativamente, ci sono necessità diverse quando si lavorano a livello di progetto.

A livello di prodotto invece bisogna fare altri ragionamenti,

quindi ad esempio le sequence non le creiamo e basta.

Le creiamo, quindi facciamo create sequence come abbiamo fatto,

però poi anche le andiamo a censire all'interno di questa tabella

per avere una situazione di tutte le sequence che ci sono sul database.

Per ciascuna sequence poi li associamo qual è la tabella dove lavora e qual è il campo chiave.

È questa cosa qui che ci permette di fare questo, perché lui che fa?

Va a vedere sulla tabella di sequence questa sequence,

quale tabella è? Sa comune, qual è il campo cmd? Ok. Faccio select max cmd from sa comune. Il valore è questo? Ok. Qual è il punto di menu utile.

Path at man touch, mentre ci ritorniamo più avanti quando parliamo di attach, importazioni, non ci interessa.

Agente demoni sono oggetto di slide ad hoc.

Questo è il locale, quindi non tutto ha senso, tabelle di base, ci torniamo,

reporting oggetto di corso,

questo l'ho spiegato anche ai vostri colleghi,

ci sono, c'è questo menu nuova tracciabilità variazioni,

che permette di creare, no, nuova tracciabilità variazioni, no, era tracciabilità variazioni che permette di creare no, nuova tracciabilità variazioni no

era tracciabilità variazioni

tracciabilità variazioni

che è

un punto di menu

che permette di creare

di tracciare le modifiche che avvengono su una tabella

ok?

quindi supponiamo che io voglio tenere traccia

di chi mi fa insert, update, delete

della tabella,

faccio sempre esempio della comunità,

ma tanto va bene per capire.

Come funziona? Io cerco la tabella.

Vengo mandato qui, però questa tabella già esiste.

Allora, aspetta, ne prendo un'altra.

Prendiamo sa-rapporti.

Porto, sa-i. Rapporto, sa rapporto.

Cosa posso fare? Io posso dire, guarda, voglio tenere traccia di chi mi fa inserimenti, di chi mi fa le variazioni, di chi mi fa le cancellazioni.

Riguardo le variazioni, voglio tenere, vabbè, in generale voglio tenere traccia sulle variazioni di chi mi cambia il campo categoria, di chi mi cambia il campo codice, descrizione, confermo.

Che succede? Lui mi va a generare automaticamente tre trigger sulla tabella.

rapporto

4

eccolo qua trigger ah però è localhost

scusate, quindi di qua

localhost è qui

eccolo qua

crea un trd per la cancellazione

trd per l'inserimento

tr

tru per l'update.

Questo è il testo del trigger.

È un modo per creare dinamicamente dei trigger.

Che succede?

Se adesso vado ad esempio su una grafica e base, rapporti abbiamo detto,

Rapporti abbiamo detto. Descrizione. Confermo. Qui va a popolare una tabella che si chiama auditing log

where l tabella uguale rapporto

valore precedente questo valore nuovo questo con lo stessa cosa è visibile anche da qui, con un tasto log.

Si accede all'auditing, d'accordo?

Quindi questo è configurato in Sardegna su alcune tabelle dell'HR, quindi sapete che la tabella è questa qui, sa-auditing-log.

Semplicemente sono una serie di trigger che vengono creati in maniera dinamica in base alle configurazioni.

Registra tutte le modifiche o solamente l'ultima traccia?

Tutte, tutte, tutte.

tutte tutte mi deve essere sullo stesso qua

Pippo Pluto, ritorno indietro

magari metto

amministratore di condominio

torno indietro

conferma

hold era questo e ignora questo

poi in realtà adesso se cambio

esempio anche la categoria

se fa più di un campo

poi fa una sintassi per cui, ho cambiato solo categoria, cambio la categoria e anche nel stesso tempo questo.

ho cambiato più di un campo

nello stesso momento

allora lui creerà

un record separato

da questa tilde

raggiuna tutto a tabella

quindi qua troviamo sempre

nome, colonna

valore, colonna

della tabella

tilde e così via dicendo

poi anche il monitor

lo visualizza in maniera molto brutale, sempre così, in questa maniera qui.

Semplicemente un visualizzatore di quello che sta sulla tabella.

Ok?

Poi, in traccia dell'ora e minuti, utente e così via dicendo.

utente e così via dicendo.

Poi appunto siccome questo metodo di auditing è molto centrato sulle tabelle,

c'è la potenzialità che poi ovviamente te ne traccia,

dato che è un trigger anche di insert up data che uno magari fa direttamente su SQL di Viro, ma ne non è.

Comunque, visto che era molto tabellocentrico

e poi stata creato un altro punto di menù che questo qui nuova tracciabilità variazioni che

invece è una maschera diversa dove le tabelle oggetto di cifra di tracciatura, mentre qui sul vecchio auditing possiamo tracciare qualsiasi cosa, qualsiasi tabella, lui non gli importa, sono rilasciate da laboratorio.

Perché? Perché proprio una delle richieste che c'era era

io non voglio leggere RA categoria, voglio leggere categoria del rapporto,

io non voglio leggere RA desk, voglio leggere descrizione del rapporto,

con qualcosa di più user friendly.

E quindi è stata creata questa gestione che si chiama nuova tracciabilità variazioni, per cui

le tabelle infatti non è un tasto libero

ma io lo devo scegliere.

Ad esempio qua in questo ambiente io sono il local host

l'unica tabella che posso tracciare

è questa, ok?

Perché e poi dopo

c'è tutte le informazioni di corredo

che scrive una tabella

che tracciala in un certo modo, però questa nuova gestione

non è attiva in Sardegna,

era così un attimo per dirvi, perché qua c'è scritto tracciabilità variazioni, nuova tracciabilità variazioni,

non può dire che roba è, questa qua è più nuova perché ha questa funzionalità in più,

in Sardegna utilizzano la vecchia, tracciabilità variazioni.

Vedete qua il look and feel è un po' diverso, poi dopo ci arriviamo, è oggetto del corso,

anche questa visualizzazione diversa delle maschere.

Personalizza menu lo vediamo domani con i report, per un filatura configurabile abbiamo visto,

gestione dei modelli di stampa non ci interessa perché non sono manco più supportati,

profilatura lookup

lo vediamo dopo quando facciamo i tabelli generico

oggetto comune lo facciamo più avanti

metadati ve l'ho fatto vedere

web service lo faremo più avanti

fine, quindi diciamo

che di tutto che facciamo più avanti

quindi non ci sta, ecco, ah

messaggistica interna

messaggistica interna, questa magari ve la posso

ve la posso accennare

qui in alta sinistra, quando siete sulla pagina principale del menu, c'è questa busta gialla.

Se cliccate vi aprirà la maschera per lo scambio di messaggistica interna, cioè tra utenti.

Banalmente ad esempio sono quest'utente qui, anzi ancora meglio.

Entro come administrator magari, vado qui e voglio scrivere al mio utente.

Si chiama.

Si chiama.

Letto messaggio e un testo.

Se mi riloggo con il mio utente,

ecco qua, messaggio non letto

ok? questo qui

insomma ci si scambia tra utenti dei messaggi

l'utilità di questo strumento

al di là di farlo come una sorta di chat

in realtà

ci sono due potenzialità

la prima, innanzitutto che i destinatari

possono essere multipli

o addirittura magari essere inviati a tutti gli utenti che risultano loggati in quel momento all'interno del sistema.

Oppure anche un gruppo di utenti, un gruppo di utenti ben definito.

Però poi la possibilità di mandare anche allegati, di mandarli in modalità news.

La modalità news invece è manda a tutti gli utenti a prescindere, non è una selezione

non un gruppo, non quelli collegati

tutti quanti

per esempio che ne so

uno dei vostri colleghi infatti diceva ad esempio

se uno deve mandare un messaggio d'avviso

attenzione il sistema verrà avviato questa notte

si può anche ricevere

una ricevuta di ritorno

quando viene fatta la lettura del messaggio

e il messaggio può essere anche inviato in HTML.

Altra funzionalità,

......

...

...

...

......

...................................................................................................

....................................

che si chiama configurazione log applicativo in sardegna è attiva soltanto per tracciare i login

però questa maschera qui praticamente può si fa nuovo si può attivare uno di questi tipi di log

in sardegna attivo la login quindi ogni volta che un utente fa un login fallisce una login o fa una logout, viene tracciato su una tabella che si chiama

si chiama, sto sul db locale, app log and l where l operation uguale L, quindi login.

Vedete?

Login, logout, logout.

Logout xclosed vuol dire che è stata fatta la logout,

però tramite la chiusura di questo qui, della X del browser, ok?

Quindi senza fare una esplicitamente logout, ma perché si è chiuso il browser.

Quindi comunque la logout non scatta

soltanto se uno clicca fisicamente logout

ma anche quando scade la sessione

HTTP

fail login

ok?

queste informazioni qui

poi per ogni evento

viene tracciato anche ovviamente la data, l'ora, minuti, secondi

quando è avvenuto

la web app dove questo è avvenuto

poi questo campo lo capiamo

meglio nei prossimi corsi e basta vado a facendo la terna dell'utente con che ha scelto l'utente

e poi

e poi questa informazione del thread ma questa cosa serve veramente a poco

va bene

però tra le altre azioni ci sarebbe addirittura

anche la possibilità di tracciare

azioni su controller

vuol dire che si può mettere sotto

il solito widget

per fare la selezione del menu

io posso dire

anagrafiche

e seleziono il menu

voglio tracciare tutto quello che sta sotto anagrafiche, selezione il menu dico voglio tracciare

tutto quello che sta sotto anagrafiche

base cittadinanza

e può tenere traccia di

solo in find

solo in view, solo insert oppure tutti

cioè a prescindere tutte le azioni che compri

sul controller, inteso come clicca su ricerca

clicca su conferma, clicca su elimina

e così via dicendo

e poi altri tipi di azioni sono clicca su conferma, clicca su elimina e così via dicendo.

Poi altri tipi di azioni sono i cambi di parametri e poi tutti i service manager.

Service manager vuol dire che tenerebbe traccia, poi non è che abbia molto senso, però lo fa.

Ad esempio, ogni volta che su un applicativo qualcuno fa,

come nel nostro caso del corso del Wizard V3,

un service manager save

sul codice,

questo lo traccio.

Sarebbe set.

Get, sarebbe get object, remove, sarebbe

delete, find sarebbe find.

Quindi tiene traccia di tutte queste cose qui.

Va bene.

La tabella vi dicevo che è la C underscore uplog.

Spodifiche, vediamo quando parliamo dei demoni.

E credo che stiamo a posto così, vediamo intanto l'ambiente

se è tornato su, non mi ha risposto nessuno, fine, non ci sono altre cose ma ormai

a 20 minuti dalla fine del corso

non è che ha molto

20 minuti non ce la facciamo

quindi

tutto il resto

non ha senso iniziarlo

ci sono domande in generale

sulla giornata di oggi fac facciamo proprio 45 minuti di

recap generale di quello che abbiamo fatto stamattina giusto così spolverare e poi si

hanno ci attacchiamo domani come è giusto una considerazione prima di iniziare il recap riguanti del recap. Sì. Riguolando gli script. Sì.

Diciamo sì, sono potenti,

però possono essere anche pericolosi,

nel senso che se posso eseguire qualsiasi script,

cioè qualsiasi

statement SQL,

potrei anche veramente, mi dici, un drop table.

Non viene affatto nessun controllo

effettivamente

su cosa c'è dentro

quello script.

Non lo so so vediamo però comunque se quello uno strumento in mano a noi cioè specialisti barra programmatori però si vediamo se ci sta

qualche cosa non penso perché alla fine fine allora vediamo ti ci dicevamo che il tutto sta su TSGX initializer, c'è il censimento di Boutils, non mi ricordavo, è questa qua, questa è la classe associata a DbUtils.

Quindi qua dentro c'avete tutti i metodi che invocate poi dall'escriptrino, quello loro script mi pare che era update name statement,

date name statement che fa

che fa

prepay statement to the update

no?

fa esecutare, sì, quindi quello che metti fa

sì, sì, confermo

ok

altre domande? generale Ok?

Altre domande?

Generale?

Parto con la carrellata e poi so se vi viene in mente qualcosa.

Quando si sale l'ambiente...

avevo fatto lo script

però a momento non mi risulta ancora giusto

ancora giù

ok grazie

allora quindi quello che abbiamo visto

oggi

insieme è la profilatura

quindi abbiamo in realtà questa parte qui

l'avevamo già

già riassunta insomma abbiamo creato un utente, abbiamo visto cosa intendiamo come eterna, l'associazione di un utente, di un'azienda, che è il censimento dell'Eterne.

Fatto quello, abbiamo poi abilitato all'utente i moduli, applicazioni, menu e via dicendo.

Quello che abbiamo fatto quindi è dare a profilare l'utente,

quindi abbiamo attivato delle chiavi di profilatura che abbiamo detto possono dividersi in parametri e abilitazioni.

I parametri sono legati a livello di azienda e sono quindi generalmente opzioni di comportamento del nostro applicativo. Le abilitazioni invece indicano una capacità di accedere, modificare,

vedere, fare, usare una funzionalità del nostro applicativo e quindi si declinano a livello di ufficio, ruolo, utenti.

Quando lavoriamo a livello di ufficio e ruoli,

che è la cosa consigliata,

viene poi gestita la risarietà,

quindi quello che facciamo a livello di ruolo

poi si riflette su tutti gli utenti di quel ruolo.

Ecco, questo recap mi ha fatto ricordare

che abbiamo visto come si fa, ad esempio,

un'abilitazione a livello di ruolo.

A livello di ufficio è identica,

la differenza è che si prende il gestione un ufficio,

però non abbiamo visto come si fa

a livello di singolo utente.

Vediamolo, approfittiamo.

Come si fa un'abilitazione a singolo utente?

Come vi dicevo, in realtà,

quando si parla di singolo utente,

in realtà poi si va a lavorare sulla terna, perché un utente è un utente dal punto di vista andare in configurazione, accesso utenti,

e poi andate su ufficio ruolo. Quindi qua prendete ad esempio la terna su cui volete fare la singola autorizzazione e cliccate qui sul tasto abilitazioni.

Poi vedete che qua torniamo qui, torniamo sempre applicazioni, menu, funzionalità, risorse,

si torna qui, quindi poi la maschera è la stessa che trovate sui ruoli, la differenza qual è?

Quello che fate qui varrà solo esclusivamente per questo utente quando lavorerà per questa terra.

Fine.

Per questo è di solito una configurazione che si sconsiglia.

Si consiglia sempre di lavorare a livello di ufficio e ruolo perché così non bisogna stare a ripetere.

Se lavorate sempre a livello di utente poi dopo c'è il rischio di dover ripetere per ogni utente la stessa profilatura.

Ok, insomma ci è servito questa parecata e ok poi abbiamo fatto la prova

di crearci quindi anche un abilitarci quindi tutti quanti menu poi abbiamo visto come si legge abbiamo

visto come si fa una chiave di

profilatura vi ricordate quindi dal monitor sviluppatori ci siamo creati una chiave di

profilatura un checkbox e poi ci siamo andati a leggere qui nel nostro wizard tramite questa

classica utilità profile manager get profile manager è un metodo poi GetProfileManager ha tutti i metodi

per fare il get

del tipo formato che ci aspettiamo

se è una data, se è un booleano eccetera

diciamo se è un parametro o un'abilitazione

e poi gli diciamo il nome della chiave

che abbiamo creato

i parametri di installazione

abbiamo detto che sono dei parametri

però

che hanno valore per tutta l'installazione, quindi non cambia il valore d'azienda ad azienda e quindi un esempio classico sono i parametri riguardo alle polisi di sicurezza dell'applicativo.

Abbiamo visto la profilatura configurabile che è un tipo particolare di profilatura che permette di creare dei parametri che altrimenti non sarebbero previsti nel rilascio del prodotto.

Quindi si possono creare delle profilature per gestire la visibilità delle maschere,

l'inserimento, modifica, cancellazione, visibilità dei campi, editabile, non editabile, obbligatorio,

visibilità dei bottoni dei tab o aggiungere anche informazioni aggiuntive in maschera e quindi di extra data. Poi questo abbiamo fatto pure esercizio.

Insomma, possiamo aggiungere due cose principalmente tramite profilatura configurabile.

Dei campi in più tramite le extra data, senza rilascio di modifiche software,

o logiche di business in più, quindi tramite le scriptrino.

Abbiamo detto che però le scriptrino quando vengono agganciate,

devono essere agganciati, che si possono

poi abbiamo detto agganciare anche a livello di controller

o a livello di bin, a seconda se vogliamo

rimanere, aggiungere

la nostra funzionalità, la nostra logica di business

è solo il controller, quindi solo

la pagina utente, o se vogliamo

mettere a livello di bin e quindi ha valore

per tutti i canali, maschere

e web service ad esempio.

Con ogni caso, in entrambi i casi quello che si fa è agganciarci a degli eventi che espone il framework quindi esempio di forse obbiettate

seve obbiettate b ford letta per dilite così via dicendo quando tutti gli eventi tipo b forra sono eventi che poi

che hanno diritto di veto, quindi possono interrompere un flusso,

quindi bloccare ad esempio un salvataggio, bloccare una cancellazione e così via dicendo.

Quindi bisogna tornare sempre un return true se acconsentiamo,

oppure un return true se acconsentiamo, oppure un messaggio con il messaggio di errore.

Ah, ecco un'altra cosa che mi è venuta in mente,

con il ripasso, possiamo anche tornare in realtà a The Warning.

Possiamo anche tornare a The Warning.

Per tornare a The Warning lo trovate sempre e comunque nel manuale degli script. script validate ecco che valide tre salt

se voi fate se poter fate retar result warning, poi il messaggio, quella stringa che voi tornate verrà visualizzata con un messaggio in giallo, in alto.

Quindi in realtà in questo caso restituirete all'utente un messaggio, però senza bloccare il flusso, quindi il salvataggio comunque continuerà.

Ovviamente sempre comunque questo lo potete fare sul before save object.

continuerà. Ovviamente sempre comunque questo lo potete fare sul before save object. Altre cose che potete mettere è error o fatal, ma in entrambi i casi è considerato un errore bloccante.

Warn no. Poi sugli extra data abbiamo detto che ci sono cinque tipologie principali che sono

allegato, quindi per allegare un file della nostra gestione, per chi è la nostra provincia, rapporti, cittadinanza, quello che avete usato.

Tabella generica, ma lo comprendiamo più avanti quando parliamo di XMPI.

Codici locali, che serve per associare ad una gestione più codici alternativi.

Script, l'abbiamo visto, ho fatto io l'esempio, quindi possiamo lanciare uno scriptrino, quindi in questo caso lo script non viene eseguito perché c'è un evento, lo scatenarsi di un evento, ma viene eseguito perché l'utente comunque è quello che ci permette di aggiungere dei campi di campi aggiuntivi che poi comunque vanno a finire sempre sulla sic e rad sic e rad dati quindi poi

torna nella gestione che abbiamo visto con con i parametri

Per quanto riguarda i campi extra, io posso aggiungere i campi, aggiungo il campo notte, dove andrà inserito, che è delle notte per un comune, però questo campo aggiuntivo c'è solamente l'atto interfaccia utente, poi l'atto...

diciamo l'auto bin viene persistito

questo adatto, bisogna agganciarlo

in qualche modo

ottima domanda, allora

visualizzato sì, visualizzato

solo maschera

l'auto bin non devi toccare nulla

ci pensa tutto

il framework e lo fa

a livello

sempre di service manager

quindi ad un certo punto

service manager poi delega

default service abbiamo detto

esatto

e lui che sa che si carica

quando viene fatto

vi ricordate che

sul wizard noi facciamo

service manager get object

quindi ci carichiamo il nostro binder

il binder serve anche a questo in realtà tra le cose che fa quando noi carichiamo il nostro binder. Il binder serve anche a questo in realtà. Tra le cose che fa quando noi carichiamo un bin, diciamo di caricare un bin, lui va anche a vedere se ci sono degli extra data configurati, sì, me li porto in pancia.

binder base e qua dentro

sa se

utilizza l'extradata e se li va a caricare

quindi diciamo questo poi collegamento

tra bin

ed extradata a livello di

java viene fatto dal nostro binder

anche per questo è importante sempre

cercare di lavorare

di non lavorare direttamente con il bin

abbiamo detto un esempio che è per

poter avere gli eventi, ma questo è un altro

esempio in realtà, perché è il binder che

essendo appunto un raccoglitore, un collettore

raccoglie anche al suo

interno tutti i binder, tutti

gli extradata che sono in relazione con

il nostro bin, quindi è lui che ha

la responsabilità di creare il collegamento, tu il bin

non lo devi toccare. Poi

lato base dati,

come fa a sapere lui quali sono collegati? Perché ci sta la tabella che abbiamo visto oggi,

si è extradata, quindi questa tabella qua è il nome del bin, quindi cosa fa il profile bin der base? Dice, ah io sono il bin dei pazienti, mi chiamo SiancpazienteBin, sulla si extradata, ho qualche extradata mio, sì, eccomi qua.

E poi si fa il caricamento.

Ok?

Ok, grazie.

Prego.

Va bene ragazzi, allora, se ci sono domande

direi che possiamo

staccare e ci

ribecchiamo insomma domani alle 9

e incominciamo subito con

i report

ok

perfetto

buona serata ragazzi

ciao buona serata ragazzi ciao buona serata

l'ambiente è ancora giù giusto

aspetta controlliamo

penso di sì

però se tu vuoi condividimi

vuoi dirmi qualcosa di mio

no no volevo compilare

non

ho fatto salvato riscrivere un test di editor che mi è caduto la sessione pensavo fosse un

mio problema invece ho scritto ai colleghi del problema quindi penso adesso cioè per domani

sicuramente lo ritirano su ecco se mi dà errore sta http status 404 come proprio che fa la web app ok va bene grazie a tutti a

domani ciao Grazie a tutti.


-----------------
VIDEOLEZIONE 07 :
-----------------

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie. buongiorno a tutti

ciao buongiorno buongiorno

ma allora ricolo Buongiorno. Allora,

Vipi,

Vipi,

intanto vediamo un attimo,

non c'è fatto ancora caso, se l'ambiente sta su,

spero di sì.

Ah, prima, Vipi, altrimenti

che si fa?

Allora.

Io

chiedo scusa, ma

stamattina

mi hanno dato un incarico importantissimo, per cui seguirò indifferita. di comprimere i tempi di quest'altra cosa però è più facile che poi mi

mi passi la notte a seguire la lezione tranquillo ok ok allora

l'ambiente è su.

Noi siamo quasi tutti.

Manca Maurizio, mi pare.

Aspettiamo un minutino, intanto io qua preparo tutto e poi iniziamo con la reportistica.

Grazie a tutti. è giusto una cosa che mi è venuta in mente

ieri per concludere la questione

profilatura

ad esempio

noi abbiamo lavorato

sulla profilatura configurabile

mostrare i campi

nasconderli

non renderli editabili no e questo

ve l'ho accenato venerdì la parte di visibilità sta sempre qui nel profile binder base ok quindi

nel profile binder base vi ho detto quando viene fatta la set property fatta la di una proprietà, a un certo punto fa validate before banning e va a verificare se è editabile, checkeditable.

Quando va a fare checkeditable va a verificare la visibilità della proprietà.

E qua adesso riusciamo a capirla un po' meglio questo metodo, getPropertyVisibility, determina la visibilità di una proprietà in base alla

profilatura, se presenta un profilatore. Lui praticamente inizia a chiedere la visibilità

a tanti soggetti, ad esempio prendi tutto, lo chiede, InteractiveVisibility la chiede

al bin, quindi al bin, al metodo getPropertyInfo che abbiamo implementato durante gli esercizi,

al metodo getpropertyinfo che abbiamo implementato durante gli esercizi.

Può e se la prende.

Poi va a vedere se esiste appunto una chiave di profilatura configurabile a livello di utente.

Va a vedere se c'è una chiave di profilatura configurabile

a livello di parametro e così via dicendo.

E poi alla fine la va a chiedere anche ai visibility delegate

che sono dei delegategg e che possiamo

registrare attaccare al binder ok tipo listener che possono influenzare la visibilità quindi poi

dopo lui che cosa fa a un certo punto quindi acquisisce tutte queste visibilità e poi fa

una sorta di merge come vi dicevo il merge in realtà che fa è la più stringente in centro

merge in realtà che fa è la più stringente vince.

Quindi se uno dice che il campo deve essere editabile e uno dice che non è editabile, il risultato è non evitabile. La più stringente vince.

Vabbè, questo era giusto per concludere, per darci un minutino.

e concludere cosa la profilatura ecco anche maurizio e possiamo buongiorno buongiorno e

possiamo quindi iniziare con il nuovo argomento molto semplice allora anche un attimo per parlare

di progetti workspace diciamo che ieri dopo dopo ci torniamo però ieri abbiamo lavorato tutto

all'interno del progetto psg lib ci torneremo nel progetto di segreto però ieri abbiamo lavorato tutto all'interno del progetto PSG-Lib

ci torneremo nel progetto PSG-Lib

però ieri abbiamo parlato tutte le cose di PSG-Lib

quindi del framework, GBF eccetera

adesso di cui andiamo a parlare

la reportistica invece appartiene al progetto che avete sul vostro workspace

GBF Reporting

che cos'è? il sistema ARIA si include il modulo per la gestione della

report istica si chiama bf reporting jbf reporting reporting insomma sono sinonimi che consente la

definizione di report custom secondo le esigenze aziendali il principale vantaggio di questo modulo

consiste nel fatto che il report che producete tramite questa funzionalità

è praticamente identica al resto dell'applicativo.

Entrambi innanzitutto, sia il report che gli altri punti di menu normali, appunto, sono accessibili tramite il punto di menu.

Che quindi dobbiamo abilitare al nostro utente, come abbiamo fatto

nell'esercizio di ieri. Inoltre, sia i report personalizzati, che adesso andiamo a definire,

ma anche le maschere applicative, permettono all'utente di inserire dei filtri, filtri che

nel caso delle maschere applicative serviranno per fare una ricerca, nel caso dei report

serviranno appunto a produrre dei report. Esistono quattro tipi di reportistica, visualizzazione dati,

esportazione dati, just per report e business intelligence. Visualizzazione dati sono, sia

nel caso di visualizzazione dati che in esportazione dati, si parte con la definizione di una query,

ok? Questa query può anche accettare eventualmente dei parametri con la sintassi simile a quella che abbiamo visto ieri negli script, due punti nome e parametro. La differenza sostanziale tra visualizzazione

dati e esportazione dati è nell'output. Nel caso della visualizzazione dati, l'output

del report è una maschera di risultato di ricerca, quindi noi definiamoiamo una query magari anche con dei parametri

con degli input che deve inserirci l'utente

l'utente preme conferma

il risultato successivo è

un risultato di ricerca

ok? così

poi dopo come tutti i risultati di ricerca

può magari sotto in basso

ai risultati di ricerca

ci sono tutta una serie di bottoniere per fare l'export

in pdf, in excel, in csv ok lo puoi esportare eventualmente però si parte da un risultato di ricerca ci sono tutta una serie di bottoniere per fare l'export in pdf in excel in csv ok lo puoi esportare

eventualmente però si parte da un

risultato ricerca diversi invece

esportazione dati l'input è sempre lo

stesso sempre una query che può essere

parametrica ma al conferma viene

direttamente lanciata l'esportazione in

formato excel quindi

Il mio nome di dati non vengono mostrati mai in maschera, direttamente è prodotto in Excel.

La discriminante solitamente con cui scegliere l'uno o l'altro sono la numerosità dei dati.

Se ho un milione di record, preferisco fare un'esportazione dati piuttosto che una visualizzazione dati.

A che serve mostrare all'utente in maschera un risultato di ricerca di un milione di record?

Non è niente.

Quindi report, visualizzazione dati, esportazioneportazione dati si parte da una query. Il report di

tipo Jasper Report invece viene disegnato

a parte, diciamo in questo caso Arias è

un mero esecutore, tutto il disegno e

la progettazione del report avviene

tramite il tool, tramite l'IDE Jasper

Studio, quindi con Jasper uno si disegna il

suo report, generalmente uno si disegna

un pdf, quello che sarà poi un pdf, esporta tramite Jasper Studio il file grxml, che sarebbe il sorgente di Jasper e quindi poi esegue il report e fornisce il risultato,

che potrebbe essere qualsiasi.

Generalmente al 99% quando si fa un Jasper è per produrre un PDF, d'accordo?

Però tecnicamente con Jasper si può fare un po' di tutto.

Si può fare un po di tutto

ultimo, report di business intelligence

permette ad un utente di definire un report di analisi dati

selezionando dimensioni e misure di analisi

definendo colonne, righe di tipo formula

ed un template JASPER per la rappresentazione

ora questo lo vedrete nei corsi

più avanti farete anche dei corsi più specifici sull, sulla MC, sanitario eccetera, questo lo vedrete per chi fa controllo

di il mondo della MC, quindi controllo di gestione, ok? Questo non lo vediamo, lo vedete

più nel dettaglio quando affronterete il corso con questo modulo verticale. Una cosa

importante da dire è che i report personalizzati non devono necessariamente

essere report pubblicati e lanciati da un punto di menu, ma possono anche essere definiti

come report sostitutivi. Qual è il suo scopo in questo caso? In questo caso io ho

un report già presente all'interno dell'applicativo perché rilasciato dal laboratorio

di sviluppo non mi piace

lo voglio sostituire

quindi che faccio?

mi disegno il mio report

lo carico poi come report sostitutivo

in modo da rimpiazzare appunto quello di default

previsto da Aries

anche la sostituzione si fa tramite profilatura configurabile

vediamo un attimo tutto questo

quindi facciamo un po' adesso faccio prima io e poi dopo anche voi

Grazie. Grazie a tutti. Grazie. Mi ho abbandonato così di... Ok. Adesso?

Sì, ci sentiamo.

Perfetto, ok.

Vi ricondivido.

Ok.

Allora, stavo dicendo, adesso facciamo l'esercizio per chi può, chi non può, tranquilli, insomma, potete poi seguire la registrazione.

Però prima di vedere questo, allora, innanzitutto un attimo,

mi devo ricollegare un po' il piano, immagino.

Sì.

Allora.

Sì.

L'ambiente è tornato su, volevo farvi vedere ad esempio su configurazione avanzata,

se è sempre la nostra configuratura configurabile, prendo ad esempio un punto di menu che ha,

la logistica, che ha dei report definiti per stampare ad esempio un ricevimento, ecco qua c'è un tab report,

uno può dire ok, queste sono le stampe che produce la maschera di gestione dei movimenti

e ricevimenti della logistica, io dico no, guarda questa stampa dei movimenti io la voglio rimpiazzare e lo rimpiazzo con questo report che mi sono definito,

ok? Questo intendiamo dire con report sostitutivo, d'accordo? Si va qui e si dice guarda questa

qui non usare quella di default, utilizza quella che ho definito io, giusto per vedere.

Però adesso invece vediamo come si definisce un report.

Però adesso invece vediamo come si definisce un report.

Allora, il punto di menu è questo, sotto avanzate, reporting, report personalizzati.

I report sono sovra aziendali, quindi quando si definisce un report, il report è per tutti.

Poi dopo vediamo come si... tutto quanto il flusso, ok?

Dalla definizione fino all'esecuzione da parte dell'utente.

Quindi, questa è la maschera di ricerca,

dei report, io vado ad inserirne uno nuovo,

report underscore ap,

lo definiamo inizialmente visualizzazione dati

abbiamo una attivazione larga posizione esecuzione in questo caso essendo di tipo visualizzazione date l'unicoica possibilità è voce di menu.

Quindi perfetto, è quello che volevamo fare.

Conferma, altrimenti qui sarebbe uscita fuori l'opzione sostitutivo e quindi me lo sarei potuto giocare nella profilatura configurabile

per sostituire un rapporto esistente.

Una volta confermato, si accende il tasto configura.

E qui noi possiamo mettere la nostra query.

Incominciamo con qualcosa di semplice, ad esempio,

selex star from a comune.

Conferma.

Esci. C'è un tasto

test

per fare delle prove

non ho definito parametri

quindi non ne vedo

e questo è quello che vedrebbe l'utente in questo momento

perché il parametri non ne ho definiti vedrebbe soltanto il tasto ricerca fa ricerca

ed ecco vedete quello che avviene che viene popolato praticamente un risultato di ricerca

le caption ovviamente di default sono avendo fatto se le extar sono le intestazioni delle colonne della mia della mia query e l'utente quello che potrà fare è esportare questo risultato di ricerca come tutte le pagine di tipo risultato di ricerca, tutte quelle che abbiamo visto fino ad oggi

hanno questa bottoniera in fondo che mi permette sempre di fare un'estrazione in Excel.

Ok.

ok

questa è visualizzazione dati paginata non si nota differenza tra tra la maschera del del report e quella delle altre maschere più tradizionali

iniziamo però magari a dargli un po' di effetto in più, quindi ad esempio,

se sto facendo una query, adesso mi preparo qui una query sull'ASA comune, magari voglio filtrare iniziamo con qualcosa di semplice diciamo voglio filtrare

il like sulla descrizione voglio fare un filtro like sulla descrizione siamo

con qualcosa di semplice questo pari a fare where cm desk like in qualcosa passato come

parametro come farò faccio così configura where cm desk like

questo e poi metto

filtro descrizione

e mi concatenano questa stringa per fare una ricerca in like in full like sinistra e destra

il te lo che chiamo definisco il parametro filtro descrizione.

Conferma.

Esci.

Guardate qua, vedete questo tasto filtri?

Prima era spento, adesso si è acceso.

Perché abbiamo inserito un filtro e quindi mi permette di disegnarmelo questo filtro.

Come me lo fa disegnare? Sempre sulla nostra scheda dinamica.

Torniamo qui sempre.

Però funziona leggermente diverso in questo caso.

Posso fare inserisci riga e questo al solito.

Inserisce elementi e questo anche al solito per dire come voglio gestire questo filtro, nel mio caso sarà un campo di testo, quindi sempre un elemento senza descrizione.

ringra e qui vedete c'è una combo box

il nome, adesso non me lo fa mettere in maniera libera

ma mi dice guarda

selezionamelo tra i possibili parametri che ho visto

poi si crea un nome tutto suo

quindi qua adesso l'unico che abbiamo messo come filtro

è il filtro di descrizioni

quindi questo rimane

quindi devo associare il mio widget

ad un filtro, ad un parametro.

Confermo.

Esci.

Esci.

Se adesso faccio test,

vedo i miei parametri, i miei filtri.

Vedete che sembra sempre una maschera di ricerca, no?

Tassari.

E proprio qua. Ok. che sembra sempre una maschera di ricerca no tassari

e roba scriviamo solo s forse mai

quello con le s ok ci siamo fino adesso

una di particolare c'è che ci si perfetto

adesso facciamo un qualcosa un pochettino di più particolare ma semplicemente perché ancora non l'avevamo non l'avevamo visto nelle maschere

dinamiche ad esempio facciamoci un filtro sulla regione.

Quindi facciamo un filtro che in input l'utente specificherà la regione e filtra tutti i comuni di quella regione.

che la regione e fitta tutti i comuni di quella regione quindi innanzitutto cosa dovrò fare devo fare qua and cm reg uguale due punti il prozione devo creare il play solver del del parametro conferma esci filtri

mi inserisco una nuova riga

però qua in questo caso adesso non è che la regione lea vogliamo far scrivere a manina

lea vogliamo far mettere tramite un lookup

c'è la grafica delle regioni quindi vogliamo farle scegliere tra le possibili regioni che sono censite al sistema

quindi in questo caso adesso inseriremo un elemento edit con descrizione.

Con descrizione sarebbero i lookup.

Quindi, label regione.

Il formato dipende dalla chiave primaria del nostro lookup.

cioè dai nostri elementi

noi vogliamo inserire un qualcosa

che viene preso dalla tabella delle regioni

che è la sa regione

che è un rgd

come chiave primaria

rgd è un varchar

quindi qui

string

il lookup abbiamo detto che si chiama sa regione

e quindi

questo è quello che selezioniamo qui.

Parametro, nome, lo mettiamo associato non a filtro descrizione ma a filtro regione.

Ok, conferma.

Esci.

Esci.

Test. esci esci test ecco, vedete abbiamo un look up

se io clicco qui adesso

vedete mi mostra

regioni anche inteso come paesi esteri

comunque mi mostra

Abruzzo

sono tutti stranieri

caspiterina, la regione normale ci sta?

Molise, trovato, ok, insomma ci sono un po' di stati e un po' di regioni, comunque accensisce da quello che troviamo sulla tabella delle regioni, d'accordo? Quindi adesso io, ad esempio qua cerco per

Sard, mi seleziono la Sardegna, faccio ricerca, ok sì, Sassa, Ricaglia, Nuoro, quindi mi

fa vedere tutti quanti i comuni, mi cerca tutti quanti i comuni della sardegna d'accordo

no visto ad esempio come come funziona adesso il look up

il look up all'interno di una scala dinamica, quindi quell'edit con descrizione.

Hanno proprio censito le regioni qui,

cioè gli stati come regioni invece di come comune.

Vabbè, scelta

secondo io capire se c'è un qualche codicello che identifica

9 10 11 12 13 14 15 16 17 19

perché sono anche le province autonome ok quindi diciamo che tutto

ciò che è inferiore a 200 è una regione

ok quindi questo è

questo è quanto ci siamo? domande?

perfetto

allora

e questa è la visualizzazione dei dati

nulla di particolare

però adesso vi facciamo un attimo

prima di andare su esportazione dei dati

completiamo il giro

quindi supponiamo che adesso noi abbiamo fatto il nostro report

bellissimo

e stupendo e lo vogliamo pubblicare quindi renderlo fluibile ai nostri utenti. Come si fa? Due step. Il primo step è quello di andare su configura, vedete qui in alto c'è scritto versione, quindi come vi ho detto ogni volta che leggete versione vuol dire che, si fa pubblica, conferma, dovete vedere il lucchetto insomma, a posto, pubblicata, esci, ecco qua che infatti è tutto ingrigito.

diciamo pubblicato il report per renderlo però fruibile ai nostri utenti

abbiamo detto che dobbiamo creare anche un punto di menu

perché quel punto di menu poi lo abitiamo agli utenti

e gli utenti tramite quel menu sapranno come lanciare il report

come si fa questa operazione?

per farla bisogna effettuare innanzitutto la login con un utente amministratore e adesso vediamo una nuova funzionalità

sotto avanzate

configurazioni avanzate

personalizza menu

questo permette di creare dei menu

personalizzati, custom.

Adesso magari vediamo brevemente quelli possibili.

Comunque si parte innanzitutto nel definire su quale tastone, su quale applicazione vogliamo pubblicare il punto di menu.

Ad esempio mettiamo su tona grafiche.

Poi bisogna inselezionare su quale sottocartella vogliamo metterla, ad esempio su base, quindi esplodiamo cliccandoci base.

E poi a questo punto facciamo inserisci.

Inserisci abbiamo queste opzioni.

Collegamento.

Collegamento serve per creare un link ad un menu che già esiste.

che già esiste ok quindi ne so io qua su base voglio mettere una shortcut che mi apre il punto di menu di reporting lo posso fare creando un interendo un

collegamento d'accordo cartella invece per fare un subfolder ok quindi io ho

su base voglio creare una sottocartella

e poi dentro quella sottocartella metterci altri punti menu

lo posso fare così

con cartella

controller invece

quando

sinceramente secondo me

l'utilizzo è veramente marginale

comunque teoricamente è questo

ma lo vediamo magari che sia più facile

spiegarlo

vi create qui il vostro punto di menu

e qui mettete il mapping del controllo e da lanciare

qui generalmente è perché magari il programmatore, il sviluppatore ha creato la gestione

ma non ha creato il punto di menu, quindi il punto di menu ve lo create a parte

è un po' un modo per rilasciare una funzionità applicativa

però con la possibilità di usareasciare una funzionalità applicativa però con la

possibilità di usare effettivamente quella funzionalità

applicativa solo sul cliente dove questo menu

verrà personalizzato e creato

perché viene scritto il mapping e quindi poi viene

creato il punto di menu, quindi fino a quando viene

creato il punto di menu la funzionalità c'è ma

non si vede

ecco

poi abbiamo vabbè, di Fipo URL, URL vuol dire niente, clicchiamo qua e diciamo,

diciamo, apri www.google.it, quindi una pagina web, qualsiasi, utilizzato ad esempio generalmente in realtà per aprire ad esempio siti intranet

controller controller plugin questo lo vedremo più avanti quando parliamo dei plugin all'interno

di arias workflow lo vedete più in dettaglio in avanti con il corso su workflow comunque serve

appunto per pubblicare dei processi di workflow che saranno avviabili tramite il punto di menù.

Voglio pubblicare il mio punto di menù per lanciare un report,

quindi faccio inserisci report.

Report, attualizzazione, dati AP.

E vi dico il report da lanciare, lo seleziono tra quello che ho creato,

che adesso mi sono già dimenticato, ma mi pare fosse report underscore AP.

Eccolo qua.

Confermo.

Esci.

Dovrebbe essere qui dentro.

Eccolo qua ora col personalità menu quello che abbiamo fatto è creare il punto di menù un

po come la profilatura configurabile dove creavamo la chiave di profilatura qui

uguale abbiamo creato il punto di menù ma non è abilitato a nessuno e adesso il

passo dopo è abilitarlo a qualcuno quindi c'cio accesso uffici ruoli faccio l'abilitazione a livello di ruolo

il mio ruolo rr_ap

ricerco

menu

Abbiamo messo tona grafiche. Infatti vedete che adesso qui ho report visualizzazione dati tra i disponibili che mi posso abilitare.

Me lo porto a destra.

Chiudo.

Logout.

Mi loggo.

Con utente underscore ap.

Sotto base ho

report visualizzazione dati ap

eccolo qua, io se ci clicco

vedete che mi parte

lo stesso report

che abbiamo appena definito, quindi

filtro, ricerca

e ho i miei risultati

d'accordo?

tutto chiaro?

sì, posso chiederti una cosa o no? D'accordo? Tutto chiaro?

Sì, posso chiederti una cosa?

Allora, sulla parte del menu che hai fatto vedere prima, quando hai creato la voce di menu, ho visto che sotto c'erano diverse checkbox, tipo inserimento, altre cose.

A cosa possono servire?

Allora, perfetto. Allora, intanto vi voglio dire questo che ho notato vedete qua questo

pupazzetto che vedete qui sul foglietto vedete che gli altri non ce l'hanno questo serve per

distinguervi i report che sono stati rilasciati dalla bt dal sviluppo a quelli che sono stati

personalizzati ok questo così faccio logout.

Ok, quindi per tornare invece la tua domanda,

adesso mi riloggo quindi con amministratore.

Avanzate, personalizzate il menu.

L'unici due casi in cui può aver senso quei checkbox,

i checkbox li vedete sempre,

però ci sono soltanto due casi che hanno un senso.

Anzi no, tre.

Controller plugin, però controller plugin, vi ripeto, vediamo quando facciamo il plugin.

Nel caso di controller, quindi io definisco che deve aprire un punto di menu,

e io già da qui li posso dire, guarda, questo punto di menu aprimelo, ma aprimelo soltanto in modalità ricerca.

Quindi l'utente non potrà ne inserire

non potrà modificare non potrà cancellare

eccetera eccetera

quindi è il caso in cui

quella funzionalità può fare più di

una cosa e la vuole limitare

esatto e questa cosa c'è senso

anche nel collegamento singolo perché nel collegamento

singolo

io creo un link ad una pagina che

già esiste quindi ad esempio io qua creo il

mio collegamento, anagrafiche, poi dopo al solito qua c'è il look up per cercare tre

punti di menu, quindi vuole creare un collegamento al punto di menu dei prodotti che sta qui dentro

gestione prodotti eccolo qua

e qui posso dire guarda

si creiamo il collegamento però soltanto in

ricerca quindi è un collegamento

solo di visualizzazione insomma non ci può fare

inserimento non ci può fare modifica

serve soltanto questo

in questi casi qui. Poi c'è anche il controller plugin, però poi lo vediamo più avanti.

Ok? Non riuscivo a capire nel caso del report a cosa potessi fare.

No, no, no, è solo... cioè il dopo di check, beh, li mostra sempre, però è solo...

soltanto quando è di tipo controller, insomma, il senso.

Ok, grazie mille.

Prego.

Altre domande?

Ok. ok

allora facciamo un attimo una prova con

l'esportazione

l'esportazione dati e poi fate voi

un bel reportino

allora

nuovo

esportazione dati.

e qui al solito la partenza è la stessa

quindi sempre che bisogna definire una query

ok?

adesso che ne so, la prendiamo su

paziente

vabbè, paziente

ok?

appena di fare la sua paziente quanti pazienti ci stanno?

Voglio fare il download di 10 milioni di record, quanti ci stanno?

Non leggo niente, che?

Ah, 2 milioni.

Non leggo niente, che?

Ah, 2 milioni.

Ah, facciamo.

Select star, con questa paziente.

Where, row nam, minore di?

Facciamo di 100.000 100.000

tanto qua potete fare quello che volete

è una query, quindi tutto quello che vi permette di fare

Oracle, voi lo potete fare qui dentro

tranne update, insert

provate a fare update, insert, drop

qua dentro vi blocca

potete fare solo query, però dei query quello che volete

insomma, dei code

switch, case

il limite è oracle

ok, creato

confermo

non vediamo i filtri

tanto li abbiamo già visti

vogliamo soltanto testare

come si esegue il report confermo non vediamo i filtri, tanto li abbiamo già visti vogliamo soltanto testare, vedere come

un attimo viene fatta la

come si esegue il report

quando l'utente esegue un report di tipo esportazione

ecco qua

quello che vede è questo

solo questo

se ci fossero stati i parametri, insomma avrebbe visto anche i parametri

però di base non c'è ricerca

c'è soltanto un radio button

che è Excel selezionato

e la possibilità di fare conferma

quindi al conferma mette una vita

ecco qua sto scaricando pensavo che era più piccolo 100.000 record

invece già 4 mega

si deve fare anche la conversione

quindi è verosimile che ci metta molto

no, più corto sai cosa?

è il star

che mi ha fregato

perché select star vuol dire tutte le colonne

le colonne sono 200 sul paziente sono più di 250.

Infatti bello grossetto, vabbè.

Ti do ancora 10 secondi brava, vedi la minaccia funziona

quindi aprendoli

insomma si vedete qua

ho avuto paura

eccolo qua

ok, quindi il nostro report di tipo esportazione

quindi non c'è possibilità per l'utente di scegliere il formato non c'è possibilità per l'utente di scegliere il formato,

non c'è possibilità per l'utente di visualizzare i primi dati,

viene fatto un'estrazione.

Il report di tipo Jasper Report, senza che lo vediamo,

perché tanto non abbiamo un Jasper, comunque fondamentalmente quello che vi interessa sapere è questo.

Innanzitutto qua nel caso del Jasper avete anche l'opzione sostitutivo, quindi un Jasper può essere un report sostitutivo e quindi torniamo a quello che dicevamo prima, che è la potenzialità dei report sostitutivo quindi un jasper può essere un report sostitutivo e 15 torniamo a quello che dicevamo

prima che la potenzialità dei rapport sostitutivi però quando andate in configura in realtà l'unica

cosa che potete fare definizione va bene e caricare il vostro xml il grxml ok quindi in questo caso il il report gbf reporting diventa un mero contenitore e poi esecutore però tutta la

quella lavoro di definizione della jasper eccetera ve lo fate a parte tramite per studio ok

come vi dicevo

giusto un attimo anche per vedere un po' di classi Java

tutto quello che

sta

tutto quello che abbiamo visto sta dentro

JBF reporting

che forse è anche uno dei più piccoli moduli

di Arias, non ci sono grosse

grosse cose qui dentro

però

il punto di ingresso

sono gli entry point diciamo con cui interagire con questo

modulo sono due. V3 report personalizzati DIN e V3 report personalizzati STAT.

Quindi la differenza sta nel fatto, come è scritto qui, la differenza sta nel fatto dei scritto qui

la differenza soltanto nel fatto dei filtri ok dovrebbe essere scritto qualche

paico scritto qui contro di stampa di report con filtri dinamici

controlli di stampa di report con filtri statici d'accordo quindi in base al

fatto che vi deve mostrare i filtri dinamici quindi avete configurato dei

filtri vi mostrerà un controller

o l'altro che poi fondamentalmente non fa altro che duco firma report find eccetera e seguire il report

se non è modalità test, execute, action download, però quello che volevo farvi, eccolo qua, report delegate, execute report.

Questo report delegate viene, quindi si crea questo oggettino che si chiama report personalizzati delegate, che viene generato in base ai dati del vostro report.

Quindi se state eseguendo un report di visualizzazione dati,

ci sarà un modo per eseguirlo,

se è espostazione dati, un altro modo e così via dicendo.

Fondamentalmente, all'interno,

eccolo qua,

non fa altro che alla fine ridursi a fare un po' di if qua e di if la nel senso andrà a vedere se il

report è un report config jasper oppure è un report config estrazione dati oppure business

intelligence oppure visualizzazione dati così via dicendo quindi in sostanza la cosa importante da sapere è questa che ognuno dei tipi che vedete

sui report

tra le tipologie insomma

di report che potete creare

ha un suo oggetto che si chiama

report config

poi una sigla

UD e D

ok ecco

Una cosa un po' più al di fuori di questa parte.

C'è una limitazione sulla versione di Jasper Studio che possiamo utilizzare?

Stiamo utilizzando attualmente una libreria?

Ottima domanda, ottima domanda.

La risposta è sì.

La libreria...

la libreria allora qui come libreria

abbiamo la 4

ok

come libreria di esecuzione

però non è che va di pari passo

con l'idea

siccome in realtà

i report nel nostro caso

li fanno gli specialisti più che altro

me lo segno e ti faccio sapere

te lo faccio sapere, la versione dell'IDE

un attimo non mi sovviene

intanto me lo segno

attualmente c'è

Jester Studio 619

però non so se la libreria

è simile come versione

diciamo non vanno di pari passo

però insomma mi sono segnato

così chiedo a chi fa i report

che cosa utilizza

va bene?

grazie mille

prego

quindi dicevamo

quindi avete un oggetto per ogni tipologia

che ha un metodo exec report

e l'exec report fa quello che deve fare quindi

esecuzione effettiva del report ad esempio qui visualizzazione dati che cosa fa recupera la query

con tutti i parametri eccetera

e poi

esegue quindi si crea tutta una serie ecco lo stanno state 7 per si crea un esalt set se lo

cicla ci popola un'array list e questo risultato che torna e di fatto è questo quello deve tornare

poi si va a leggere ovviamente anche metadata in modo da costruirsi le colonne, le caption, eccetera

però fondamentalmente quello che torna è la lista dei risultati

se io vado su report config

ed

e crea report

sempre che si prendeva query

e poi eccolo qua grappa la query in questo oggetto query to excel che poi fa il bright to excel e quindi generale excel

query query

to

generate

excel

ecco qua, si prende la connessione

segue la query

si cica nel result set e poi in base a quello che trova

su result set insomma

si

va a scrivere le varie celle sull'Excel, ok?

Scusate un secondo.

Ok, quindi questo è

è GBF reporting, non è niente di trascendentale in su.

non è niente di trascendentale.

Una cosa che è interessante evidenziare,

che qua lo vediamo, ma lo vediamo spesso più che altro,

è questo.

Vedete che quando va a fare...

qua lui prende la query,

ad esempio sulla report, configurazioneazione esportazione dati.

Lui prende la query, poi su questa query ovviamente ha bisogno di una connessione, però vedete che fa lui?

Lui dice, va a verificare se è definito questa connessione entità. Se non è definita, lui prende una connessione dal pool, come abbiamo già visto nei nostri esercizi.

Se è definita invece, la connessione la prende dall'entità.

Che cos'è questa entità?

Infatti se noi andiamo qui, configura, vedete, c'è entità, anche

su visualizzazione dei dati, esportazione dei dati, c'è questa lookup entità, che serve?

Un'entità applicativa si chiama, si definisce sotto configurazione, sistema, demoni, entità

applicativa. Le entità applicative vengono state in diversi contesti, entità applicativa.

Le entità applicative vengono state in diversi contesti.

Adesso vediamo questo intanto, che è quello, ad esempio, che viene utilizzato per i report.

Poi ci sono tanti altri tipi.

Adesso quindi ci concentriamo solo quello dei report.

Io potrei crearmi una nuova entità applicativa, ad esempio, perché magari il mio report fa una query, sì però quella query la deve fare su un

database che è diverso da quello dove sta girando

Darius, ok? Quindi di default il report

fa una select sul db

dove gira Arias, però nulla vieta

che magari il mio report deve

pottingere i dati da

un altro database, quindi cosa posso fare?

Vado qui, creavo un'entità applicativa

verso altro db

tipo database,

altro db, e dico che è un database esterno,

e poi qua vi spiego, vi spiego tutte le, i parametri

di connessione a quel db, quindi il driver, l'url di connessione, quindi

il plot, la porta, il seed

l'utente, la password, eccetera, d'accordo?

Quindi che cosa avviene? Poi una volta

che ho definito la mia

entità applicativa, la posso

indicare qui dentro. A quel

punto, tutto

ciò che richiede una connessione

la connessione non viene presa

dal pool di Arias

ma viene presa dall'entità applicativa

interrogando quel DB

chiaro?

sì

ok

perfect

allora io direi di lasciare a voi

edo scusa

l'entità applicativa l'hai fatta con

l'utenza che hai permessi

per le profilazioni, giusto? Non come admin?

Allora, in realtà qui non è un limite, l'entità applicativa la puoi fare anche con l'utente sia applicativo che amministratore, ok?

È consigliabile farlo con l'utente amministratore comunque.

Ok, ok.

Un po' pericoloso, per quello chiedevo. Ok, ok. Come puoi crearne una nuova, puoi editare anche quelle esistenti. Per quello che dicevo io quindi l'utente normale poi accede a quel menù e dai l'abilitazione quel

menù anche l'utente normale poi riesce a lavorarci e come dare la carta di credito alla moglie

esatto esattamente quindi ok

insomma con questo è la scusa per vedere entità applicative

poi in realtà entità applicative

le vedremo

le vedremo in almeno altri due

in altri due contesti

in altri due contesti

va bene?

allora io direi

fate voi una prova quindi andateeto, configurazione avanzata e reporting, report personalizzati, magari anche con l'utente quello appunto admin formazione, ve lo create, in maniera che poi direttamente vi personalizzate il punto di menu, ve lo abilitate al vostro utente che avete creato ieri, personale, quel punto di menu, e poi dopo entrate con il vostro utente personale

e verificate insomma che funzioni

tutto. Createvi magari

un report di tipo visualizzazione dati

che è un po' più immediato.

La query potrebbe

essere ad esempio

Fatemi un attimo Pounce Hub. Allora facciamo, ma incominciamo un attimo

allora facciamo

ma incominciamo un po' a divertirci

ma poi la dobbiamo affrontare

divertiamoci un po' con la

sapaziente però

non tornandoci tutti quanti i campi

magari che ne so, facciamo PZPB, PZCogna, PZNome, basta, ok? Tanto non ce ne frega.

Anzi, vabbè, facciamoci i quelli fondamentali, va?

Sesto, quindi, sesso, comuni di nascita e cfis, fiscale, ok?

e ci fisca fiscale ok e facciamo un bel filtro sui campi il Z-Cheat.

Adesso ve lo metto sempre nel nostro

foglio di appunti.

il campo che contiene la cittadinanza, quindi magari fatevi un bel, fate un visualizzazione anche qua in test andiamo qua così metto qua nel mezzo

quindi questo qui

fate una where sul pzcit

il pzcit sarebbe il campo della cittadinanza

e quindi noi sappiamo che esiste

la tabella

delle cittadinanze

la maschera di gestione di cittadinanza

e abbiamo fatto anche l'esercizio

il lookup si chiama sa underscore

cittadinanza è che abbiamo fatto anche l'esercizio, il look up si chiama sa underscore cittadinanza, quindi definitevi la query che filtra su nelle slide ho scritto R underscore il vostro cognome

ma giusto per evitare di

di calpessarvi i piedi

però non siamo alla fine tantissimi

quindi datevi un codice insomma comunque abbastanza

ecco non chiamatelo tutti quanti report

ok?

il codice del report datevi un nome

abbastanza distinguibile

ok?

ok va bene è tutto ok costanza distinguibile ok? ok

va bene Grazie a tutti.

Grazie a tutti. Grazie. mi sentite

sento che io

non ero già parlare no Grazie.

eccoci

sicuramente l'entità che dobbiamo usare scusate sono intromesso come scusa

che hanno l'entità non dovete metterla perché entità la mette soltanto quando

deve essere un altro database in questo caso è quello locale quindi entità

così perfetto grazie scusa niente scusa sera interrotta la connessione

quindi l'esercizio quello la di creare un report visualizzazione dati

dalla quari paziente che hai messo, giusto?

esatto, portando da questa quari paziente

con l'obiettivo di

filtrare i pazienti

in base al campo

che sarebbe

accettato

sono una curiosità

puoi fare la quari su esercizio script

sulla tabella

di ieri così un po lo chiamete e ieri sera poi salisse

vedere

poco seri esenzioni

dato non c'è poi magari dopo ci torniamo

ok Dopo l'esercizio del rapo ci torniamo, così vediamo uno sguardo. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie. domanda la cittadinanza

il stringa

il parametro

la cittadinanza

vediamo subito

la tabella

cittadinanza

cittadinanza.

La chiave primaria, CTD e Varchar, stringa, sì.

Ok, perfetto. Grazie a tutti.

Grazie a tutti. il parametro nella quegli due punti nome parametra basta giusto esatto esatto due punti nome parametro

perché non me lo ritrovo poi nella maschera di inserimento della di text

ok si in quel caso è perché non riesce a trovare forse capondo mancano i due punti

forse c'è uno spazio

i due punti questo c'è uno spazio

su due punti con cittadinanza ho scritto come per cavolo si può vedere un confermo

anche perché ho verificato la query che ha prima del tasto per easy che funzionava.

Simone, scusa, a me non compare di configura.

Forse sto ribbonando menu.

Configurazione, avanzate, reporting, report personalizzati, giusto?

Ok, fai nuovo.

Addivin di formazione.

Sì, sì, va bene.

Crea un nuovo report, no?

Ah, ok, quella è la ricerca, appena la prima visualizzazione compare la ricerca, giusto? Sì, sì, va bene. Puoi creare un nuovo report, no? Ah, ok, quella è la ricerca appena.

La prima visualizzazione in combattere la ricerca, giusto?

Sì, sì, è sempre la ricerca.

Quindi fai nuovo e l'inserisci un nuovo report.

Come tipo metti visualizzazione dati.

Ok, infatti riuscite già... Riuscite già, realtà.

Sì.

Ok. no nulla no no no no resta visualizzato nel progetto con il dei parametri ok dimmi quando visualizzi

non c'è uno spazio tra i due punti

e code cittadinanza?

cioè uguale

due punti spazio

si grazie

a posto grazie Grazie Grazie. il nuovo punto di menu

dove lo creiamo?

sotto avanzate reporting

dove volete lo potete creare

quindi

il punto di menu era configurazione avanzata

personalizza menu, poi dopo dovete posizionarlo

dove volete

l'unica cosa ricordatevi

dovete prima selezionare l'applicazione

a destra, c'è una combo e poi dovete cliccare quindi dovete aprire il folder dove

volete mettere

dove volete mettere il nuovo punto di menù

applicazione selezioniamo anagrafica se conviene negati così lavoriamo continuiamo a lavorare su quello che ci siamo abilitati ieri

Sì, sì, mettetelo su una grafica. una volta che imposti nella combo a destra nella drop down sulla destra il punto

e poi devi andare su

inserisci report

o inserisci collegamento

inserisci il report

ok perché non me lo fa fare

chissà perché

prima clicca su un folder

dove vuoi metterlo

ok

poi dovrebbe illuminarsi metterlo ok

dovrebbe illuminarsi

sotto le grafiche non posso metterlo proprio però si illumina però Grazie. Simone scusa quando faccio il test

dovrebbe compare il mio sheet

diciamo con il nuovo campo

su cui fare la query

però quando

la ricerca dovrebbe funzionare

mettendo italiana

cittadinanza

non c'è niente?

no, dice nessun risultato

fammi condividi

per lo schermo

italiani in upper

sì, sì, sì, sì

Un attimo a vedere.

Il cimballatissimo, Nanzio, se scese.

ok però aspetta qua in questo caso il pizza cheat è un campo che in for in kiko la tabella faccia tira cittadinanza ok quindi qua ci dobbiamo mettere il ma il codice il codice il codice se vuoi fare in tanto la prova il codice se lo vuoi scrivere literal

aspetta

200 forse

è 100

però è 100 come codice

però lì deve essere messo l'id

e l'id del

qrct

codi uguale 100

999 100

l'id 999 100 se scrivi dovrebbe funzionarti 9 9 9 39 scusi

9

9 9

9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9

9 9 9

9 9 9 9 9 9

9 9

9 9 9 9 9

9 9 9 9

9

9 9 9 9 9

9

9 9 9 9

9

9 9

9 9 9 9

9

9 9 9 9 9 9 9 stiamo facendo tutte le

ecco fuori si infatti mi ricordate da fuori? si infatti tu mi ricorda tirato fuori

ok perfetto

ok quindi ora la seconda parte

quindi dobbiamo creare

cioè quell'edit

tu hai fatto edit senza descrizione

lo devi trasformare in edit con descrizione

sempre sotto questa maschera giusto si, quindi fai su filtri

fai su filtri

tu te lo cancelli questo qui

e invece di aggiungerti un elemento

esatto, ah ok

fai si inserisci riga

qui questo si personalizza

ti selezioni la riga in maniera che diventa gialletta

poi inserisci elementi, edit con descrizione

ieri abbiamo fatto un esercizio senza descrizione

seleziona prima la riga deve diventare gialletta

seleziona la riga che hai creato

ok poi fa inserimento

elementi edit con descrizione

esatto poi

grazie prego

con Allora, io ho agganciato tutto, anche al ruolo, però poi vedo la voce dei menù, ci ci vado ma non vedo una maschera di ricerca anche io sto cercando di capire perché uno dei due che mi condivida

con il

poi pure tu daniele

la serie vai avanti tu ah no se vuoi condivido io

tranquillo

è perché mi hai iniziato prima tu a spori il problema

dovresti vedere

ok

i volontari facciano un passo avanti

tutti gli altri fanno un passo indietro

no no scusa perché non è collegamento

ah no si è giusto

allora sono tornato indietro sono tornato indietro a verificare che il menu avesse agganciato.

Ok, allora, questo...

Dove siamo?

E questo è quello che vedo come utente.

Ah, no, sai cosa potrebbe essere? La query l'hai pubblicata?

Bravo, lo vedi che hai già hai già risposto

contro la tre cose pubblicato la la query sulla versione ragione quel passaggio

bisogna uscire sì infatti bisogna uscire e rientrare come corso JBS.

no non era profilatura configurabile adesso ho visto allora avanzate una grafica avanzata

torna sempre sui report personalizzati quindi vai su configurazione avanzate reporting report

personalizzati riprendi il tuo report si aspetta reporting report personalizzati eccolo qua il mio Il mio report era est-report01.

Configura.

Sicuramente la versione 1 non è pubblicata.

Eccola lì.

È simpatica.

Ok.

Adesso c'è il lucchetto, quindi puoi riprovare subito.

Dove è già funzionare. Dove sei?

No.

Se l'ho chiuso.

Ho chiuso.

Ecco.

L'ho chiuso, nella mia immensa bontà l'ho chiuso. si sa che si vede anche pure famiglia dell'attimo funzionale ci siamo

ma ita mettilo su descrizioni e codice descrizione nel caso la metti sul secondo poi

scriverita sul secondo questa descrizione vita e poi puoi aprire sì ok se c'è 200 conferma è fatta

esportazione quindi dovrebbe fare un export di circa 2 milioni di regole come interrompo chiudo interrompibile ormai lui andrà procederà per

la sua strada ok e disurabilmente ignorando qualsiasi tentativo di interruzione lascia pure è lanciato io dovevo mettere un limit alla query

no no no

va bene

no va benissimo

dovevamo trovarci una cittadinanza

diversa dall'italiana

eh sì infatti

vediamo un po'

chi ci sta sulla sua paziente

immagino il mondo cercherò sì Vediamo un po' chi ci sta sulla sua paziente.

Immagino il mondo, cercherò.

Sì, è l'importante che abbia funzionato.

Metteremo a punto.

Città, la sua cittadinanza.

per curiosità, vediamoci un po'

eccolo

ha fatto uscito?

sta, lo sta scrittando

per la fine non ci ha messo neanche tanto

a posto

vediamo quanto spazio

occuperà qui

questo rap

quindi dobbiamo sempre ricordarci

di pubblicare la query

e poi dopo il funzionamento è al solito come tutte le versioni

quindi se poi voi volete modificare la query

la potete duplicare la versione

quindi fate la versione 2

la modificate fino a quando voi non pubblicate la versione 2

gli utenti continueranno a lavorare con la versione 1

lo scopo della pubblicazione poi alla fine

al metto della prima è questo non può lavorarci solo quando è pronto pubbliche la rende

disponibile a tutti

e si può non capire non mi ha verificato sia pubblicato vai condivide condivide

ok

ho messo un rapo come se è un punto di venure porti canosi non sento e poi facciamo inizio ok

per l'intimo di spazio

vabbè tutto

che incolla

e

ed è pubblicata

ok perfetto

non ho capito qual è l'errore, non ti lo fa partire?

Allora, non parte il pop-up, mi fa vedere il report.

Eh sì?

Sono stato un po' troppo.

La visualizzazione è da tipo C di menu, ok, prova un attimo a eseguirlo perché non ho visto cosa ti fa quando esegui.

No, quando esegui dal punto di menu.

Dal punto di menu? No, non parte il digitale.

Esplo, esplo, rientro con il mio utente.

Report, report.

Un attimo perché vedo il ritardo.

Ah, vedi il ritardo.

Hai cliccato adesso su report.

Ah, ok. Non parte.

Cioè se io clicco Sto cliccando

Non è che ce l'hai sotto su qualche

Su qualche altro tab

Guarda chiudo tutto

Eh però non può chiudere il tato queste cose qui

Esatto, riprova a cliccarci

Niente

ok va un attimo con administrator poi vai su configurazione avanzate personalizza menu

se ti rende andare qua allora si vai sul punto di menu che hai creato, quindi seleziona fino a destra anagrafiche.

Anagrafiche, l'avevo messo.

Stai in fondo, mi sa che stava.

Ah, è la portistica.

Selezionati questo, ok, poi fai modifica.

ok, selezionati questo, ok, poi fai modifica ok

come l'hai creato?

allora, ricreamolo nuovo

qui esci

fai pure

interisci

ma intanto adesso per eliminarlo è un po' complicato, poi ti spiego perché.

No, fatti inserisci una pure reportistica, come stai facendo prima.

Inserisci dentro, ah, dentro reportistica, ok.

Reportistica, lo clicco, spronunziamo.

Report.

Report.

Ok.

Etichetta.

Due. Etichetta. Due, esatto.

È requis da indicare.

Ok, questa è la REC.

Sì, visualizzazione è fatta indicarci.

Ok, conferma.

Ok.

Prova adesso che esce pure.

Me la doveri associare un attimo?

Sì.

Ok, quindi dov'è rai in accesso,

vicio ruoli,

il cartonso.

Certo.

Un'altra. Supportistica. ok ok ok

ok

ok.........

...

...

...

...

...

...

...

...

...

...... ho messo Antiglia olandese spero che lo sia oh ce n'è uno

ce n'è uno

c'è uno in Sardegna

che è veramente

Antiglia olandese

perfetto funziona

allora senti, invece per la cancellazione

ok

allora sì, la puoi fare

però il discorso è questo

prima di cancellare un punto di menu

non lo facciamo, però te lo dico come cosa

lo puoi cancellare solo se non è stato mai abilitato

siccome tu già l'hai abilitato

prima dovessi disabilitarlo, toglierlo agli utenti

e poi dopo potrai cancellarlo

ho capito perché è relazionato sull'altro utente

sta bene, perfetto.

Direi che ci siamo tutti, giusto?

Qualcuno ha avuto, adesso non so di preciso, ma qualcuno, al di là di chi magari non ha fatto, non ha fatto, non ha fatto,

dico qualcuno che ha fatto, ma ha problemi.

Abbiamo visti tutti, giusto?

C'è qualcuno che ancora ha problemi?

Perfetto.

Io ho fatto una curiosità però.

Sì, vai.

Quindi continuiamo allo schermo.

Nel punto di quella, quando non creiamo, diciamo il punto sul menu.

Se abilitiamo anche che ne sono ricerche, inserimento, modifiche, eccetera.

Poi ci appagiano i bottoni sotto quando facciamo il report.

No, dovrebbe provarci, ma no.

Quello di lui dovrebbe avererebbe avere come dicevo influenza solo quando

è di tipo controller

quindi tipo report

vai vai prova prova

sul tipo report

dovrebbe

ignorare

vai pure sul punto di menu no

ma no ok perfetto si va a scusa sono arrivato alla creazione del look up poi a un certo punto

dovrei fare il test

giusto?

tu adesso devi

tu fai il test

e vedi se funziona

sono questa maschera così come

sta condivisa qua adesso

tu fai una prova sul test e vedete funziona

però mi esce l'edit giallo

condividi condividi Grazie. ancora vedo nero

non è un po ma sono le ore a piazza che non è lentissimo

ecco adesso vedo ok qua perfetto poi definito il la maschera dei filtri adesso qua esci

esci poi dopo adesso non ti sto seguendo è diverso comunque un tasto test

e fai la prova quasi tu magari come cittadinanza non metterti italia cercati

la germania tedeschi a sardegna ci stanno sicuro tantissimi

nessuno ok comunque

veramente non c'è manco un tedesco

apri

cioè tu hai messo il valore qualcosa perché purtroppo

vedo il ritardo cittadinanza l'hai valorizzata?

no, no

il codice no

no, no, no, fai Germania, cerca poi apri la lista valori

seleziona il primo

e ricerca

no ecco

ah perché forse non avevo fatto

il codice quindi non avevo fatto il codice

quindi non prendevi il codice

ma solo Germania

comunque poi sezionare

la lista valori

quindi quello serve soltanto per prefiltrare la lista valori

perfetto

adesso tu torni sulla maschera di anagrafica del report

dove c'è il tasto test

poi torni un attimo sul tasto configura dove c'era il tasto test poi torni un attimo sul tasto configura

dove c'è la tua query

e verifica che hai pubblicato la versione

in alto c'è la versione

e poi dopo ci sei il query

esatto, fatto quello

poi vai con l'utente administrator

sotto il menu

configurazione avanzate personalizza menu e ti crea un punto di menu lì sopra.

Ok, ok, grazie.

Prego, adesso facciamo insieme.

Adesso ti dico perché ti vedo in ritardo le maschere, quindi non ti riesco a... però me lo dici quando... Se ti sei...

Secondo me sta fecciando, ma potrei pure chiudere.

Sì, sì.

Se posso tanto, posso guidare anche a voce, insomma.

Tu mi dici dove sei.

Ho fatto chiudi, esci dalla query,

però sta...

Ok.

Sta caricando la tua esit potete giudere una finestra

lascio fare

bisogna tornare in anagrafica del report

Per fare la pubblicazione del...

Prima la pubblicazione, la versione devo fare.

Ok, ok.

È sempre come informazione, giusto?

Sì, può rimanere con quest'utente.

Ok.

Quindi rimando in gestione il report, vai su configura,

e ti pubblichi la versione.

Ok, se è invadato il pc, io io penso che nella fase devo riavviare che sta

ma benissimo non riesca neanche passato a un tabba un altro

ok grazie

mi sapevo

bloccando mi sembra come come come come

come ci ricerca ricerca

come

si c'è il tuo report

ma posso fare pure una cerca flat senza mettere

puoi fare anche ricerca magari ti ordini per i di far ricerca

idea

e ti becchi ancora così che fa un giocistro

crisi

ti pari con c'è

cristiano

che pare non ci sono

ecco la porta chris era questo il primo sito e primo al primo

argiuno

faccio pubblica devo fare pubblico, devo prima fare la versione configura pubblica, poi in alto c'è il tasto versione e lì sopra la pufai pubblica

pubblica, lucchetto, aspetta il lucchetto

non uscire il lucchetto. Fai pure conferma. Pubblico conferma.

Ma in realtà mi sa che già si te l'ha fatto il lucchetto, però giusto per essere certo,

fai conferma, ecco il lucchetto.

Adesso vai, sempre con un utente di tipo, con un privilegio di amministrazione,

vai su configurazione, avanzate, personalizza meno

cioè sopra informazioni

perché vedo in ritardo ma però è

Allora, sei sul primo principale, configurazione avanzata e personalizza menu.

Ok, cioè con un'informazione vado bene.

Sì, sì.

Poi una volta che tu personalizza menu, in alto a destra c'hai una combo box per selezione dell'applicazione.

Metti una grafiche.

Poi... una combo box per sceglie dell'applicazione, metti anagrafiche, poi,

esplodi un qualche subfolder e poi fai inserisci il report,

inserisci report

non collegamento report

report

esatto

poi dopo

si chiede di selezionare

metti un'etichetta

devi selezionare il tuo report

e basta, confermi

non so forse perché non mi sono messo su un folder potrebbe

a riaprire e richiude i pazienti magari giusto per sicurezza non riapri e chiude i pazienti

cliccando sulla cartella si inserisci non avevo fatto forse selezionava

e ora non esce

a fare una cosa è un cio di esempio che so base esplode qualcos'altro

non devi selezionare il punto di meno perché se se se se i punti di meno non ti funzionerà sicuro la decisione la cartula sulla cartella vuoi pubblicare non sui punti di menù ok non

devi selezionare meno anche in un caso regione solo su base che si riuscire a che

la cartella report?

Non mi carica niente.

Non fare niente, aspetta.

Cioè esci?

No, no, no, fermo.

Riprovaci, inserisci.

Perché mi portavo in ritardo.

Vai solo con il mouse su inserisci vai su soluzione perché mi porta poi di ritardo vai solo con il mouse inserisci poi fermati poi dammi tempo che adesso

illuminato clicca sul report

aperto no non fa niente

niente provo a rientrare

no no no

rilugami

ho acceso perché

oh

Urla è spento, lo vedo.

Che grigio.

Fai invece, come non so, controller?

Scusa, è lo stesso problema che ho avuto anch'io prima.

Io ho risolto cliccando a sinistra su un paio di voci di menu e poi riposizionandolo su anagrafiche.

Forse questo, non cliccare sul più, cliccaano sulla cartella sulla cartella clicca la cartella

cioè tipo che esatto così vai pronto fa inserisci report asica

i pazienti

come faccio scegliere di worth e come territorio rapport

ma con un cerco il numero.

Ecco qua.

Conferma.

Ricerca.

Pur Chris, non serve sull'abitazione,

questi qui ricerca e inserimento, serve solo per i controller,

non per i report. Comunque si può confermare.

Conferma pure.

Poi dopo. non per il report, comunque si può confermare conferma pure poi dopo poi dopo

sempre rimanendo con l'utente amministratore

ti abiliti questo nuovo punto di menu

al tuo utente

personale

ok quindi

devi entrare col mio utente

no no, tu adesso rimani con l'amministratore e con l'amministratore abiliti al tuo utente non ho sentito rimanere ma tu adesso rimani come amministratore

ea con l'amministratore ability al tuo utente al tuo ruolo il punto di menù che hai appena creato

ok quindi sotto qua c'è ufficio ruoli perfetto

azienda fm

devo ricercare giusto ricerca

tente cristiano

ecco questo

ok menu

personalizza menu e meno meno meno meno usciti meno giusto abitare

grafiche perfetto

test di coltello

te lo abiliti

abilita di tutto va nel dubbio

abilita di tutto

e poi dopo con il tuo utente

adesso ti sloggi e fare login con il tuo utente normale e vedi un attimo se funziona il report

ok qualcosa autoconvittando mi posso uscire un video conflitto Grazie. Posso anche qua cercare Francia, cittadinanza Francia o Germania, benissimo quello che sia.

La prima, prima Germania.

E tu apri?

Sì, sì, la prima apri.

Puoi sbiancare, tanto è 216, puoi mettere, no, devi sbiancare prima il codice, poi cerchi Germania.

in soli

ok ricerca perfetto ottimo ok prego

ok abbiamo fatto

il

il

il

il senso my reporting ragazzi

questo è reporting

abbiamo visto anche le classi

quindi

classi importanti sono questi due

controller personalizzati

quindi quando voi poi eseguite un report

da punto di menu

vi viene aperto uno di questi due controller

personalizzati stat o personalizzati din

in base a se avete definito

dei filtri o meno

e

e poi la cosa importante

è questa

che ogni report, tipo di report

ha il suo report config

vedete? grd, bovd, ecc

d'accordo?

e qui dentro c'è tutta la logica per fare l'exec report

questo per le classi, finito, non è che c'è nulla di che

Lato di B, giusto per vederlo, la definizione del report è questa tabella qui, S underscore, se lec underscore from SR report.

Quindi qua dentro trovate l'anagrafica dei vostri.

Non vedo la condivisione, scusa Simone.

Ecco, perfetto, grazie.

Ricondividiamo. Non vedo la condivisione, scusa Simone. report, quindi qui trovate fondamentalmente quello che inserite sulla maschera d'estate,

quindi il tipo che è un codice, quindi un codice sarà esportazione, uno sarà visualizzazione,

cosa significano questi tipi, lo vediamo quando parleremo delle tabelle, come capire che questo 02 è una visualizzazione dati, questo 03 è una esportazione dati, così via dicendo,

lo capiremo quando parleremo delle tabelle generiche,

e se l'esecuzione da punto di menu o sostitutivo è fine.

E fine.

Direi per adesso così.

Ok, quindi reporting, non c'è altro da dire. Tutto chiaro?

Tutto chiaro?

Io direi di farci i nostri 15 minuti di pausa.

Quindi ribecchiamoci in torna alle 11.05.

E poi parliamo di attach.

Va bene?

11.05, sono 12 minuti di pausa, per favore.

11.10.

Va bene.

Ciao ragazzi.

Ciao. Grazie a tutti.

Grazie a tutti. Grazie. Grazie. Grazie. Grazie. Grazie. Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie.

Grazie. Grazie. Grazie. Grazie. Grazie. Grazie. siamo tutti giusto

sì

sì

ci diamo un minutino intanto io qua chiudo un po' di roba, non mi serve più.

Qua chiudo là. un un

ok

allora

quindi

abbiamo concluso le slide

ok?

di queste 0.3

ve l'ho già caricato ieri

nel materiale didattico

insomma

reportistica

finita

ora

con la reportistica

possiamo un attimo

giusto per completare

a livello di base dati

introdurre

il concetto di attach

così vediamo un attimo

perché qua

la tabella SR report

è solo una grafica

una domanda che potreste

avere prima la query filtri tutta questa roba qua doveva finire per capire dovevano a finire queste

cose qui mettiamo sui report dobbiamo introdurre il concetto di attach che sono gli attach in areas sono tutti i file che sono gestiti in area quindi che ne so un report

che viene prodotto dalla procedura un'estrazione un file che allega volontariamente l'utente no

magari che ne so su movimenti di ricevimento fatto che l'utente, magari che ne so, sui movimenti di ricevimento,

fatto che l'utente allega lo stanzionamento della bolla d'accompagnamento al movimento.

Quindi insomma, tutti i file che gestiti da Arias

vengono chiamati anche semplicemente a touch

e vengono salvati all'interno della base dati.

È successo. Salute. Vengono salvati all'interno della base dati.

Vengono salvati all'interno della base dati, d'accordo?

In che modo?

Allora, le tabelle in gioco sono tre.

La prima è, la tabella si chiama si underscore attacce tipo cos'è è l'elenco di tutte le tipologie di file che areas in grado di gestire e quindi tutti i file in area sono tipizzati hanno

sono stati un tipo ok questi tipi sono rilasciati dall'abitudine laboratorio di sviluppo su

aria non è possibile definirsi dinamicamente sono questi e quindi che ne

so

ecco il gruppo dell'hr della plera applicativa dell'hr ha rilasciato questa

tipologia carri cedolino quindi tutti i file agganciati a questa tipologia sono

relativi ai cedolini

questo è relativo al CUD, questo è relativo a

boh, ci sta qua

documento però

ce ne sono diversi, poi alcuni hanno

un senso più funzionale, altri sono

di supporto

all'applicativo, ok?

insomma, comunque

al di là di

touch stampe cliniche

insomma, quindi ogni file

è associato ad un

tipo

questa è la prima tabella

il tipo non è altro che un codice

di iscrizione, niente di più

poi quando viene

salvato un file all'interno di Arias

le tabelle che vengono popolate sono due

la prima è

from c attach file

questa tabella è la tabella

diciamo di

anagrafica del file

infatti che cosa ha?

ha tre informazioni principali

il tipo appunto il nome del file e la chiave. Cos'è un documento che è stato scannerizzato

il tipo è ma movmag quindi fa pensare proprio che sia un documento è stato scannerizzato ed è legato

al movimento di magazzino quindi con molta probabilità questo qui cosa sarà sarà l'id legato alla tabella ma mov test

che è la tabella di testate

del movimento di magazzino

where metti di uguale

eccolo qua infatti

ok?

quindi perché questo avviene?

perché ovvio che questa è una logica applicativa

nel senso

le aree ha rilasciato

questo tipo di movimento

questo tipo di attach

quindi sa che tutti i file che hanno questo tipo di attach sulla chiave metteranno l'id della tabella mm of test.

Quindi in questo modo l'applicativo internamente ricostruisce i collegamenti, quindi è proprio il programmatore che ha implementato questa logica.

questa logica ok quindi tipo di pixel file la chiave dice è un'informazione che il programmatore decide di salvare qui dentro perché lui sa come trattarla quindi quasi sempre si salverà l'id

perché poi recupera lui e questo è il nome del file caricato questa diciamo la testata della della

della della della della tattacca la grafica della touch questo record ha un campo che è atd, che è una sequence, con questo atd andiamo

sull'ultima tabella che è select star from c underscore attach where atd uguale quell'id che ci

siamo copiati. Adesso qua è vuoto perché alcuni file

non sono stati diversi tutti i file

però al di là di questo con quell'id

insomma la si attach file

accendate sulla si attach

la si attach cosa contiene? contiene fisicamente

il file, il blob

ok? il blob contiene

è lei che c'è il blob

quindi blob

e informazioni diciamo

anagrafiche del file sono distinte

sono su due tabelle distinte

ci siamo?

facciamo un esempio

un esempio classico è

ve l'ho fatto intravedere ieri

è

questa pagina qui ve la faccio vedere Ve l'ho fatto intravedere ieri, è...

Questa pagina qui ve la faccio vedere più avanti con gli esercizi che dobbiamo fare.

È preferenze strumenti desktop utente.

Desktop utente, ve l'ho fatto vedere ieri, che vi dicevo che è un'area dell'utente,

che l'utente può scegliere di allegarsi dei file da solo oppure ci va a finire magari elaborazioni lunghe eccetera

ad esempio

alleghiamoci un file

anzi mi faccio un file

vabbè, sì, ce l'ho già, esempio csv

quindi mi allegho un file

ok?

dal mio desktop

esempio csv

ok? sono caricato questo file dal mio desktop. Esempio csv.

Sono caricato questo file.

Vediamo come è andato a finire questo file sul db.

Lo cerco per nome perché non so come si chiama, quindi from tattach file

where

where

t nome file uguale esempio chiamato

tempi c'è se un discorso sv.d esempio le scorci sv.txt

e che tochia sto

esagerato

vabbè

sfruttiamo l'indice

e filtriamolo anche per

la vediamo intanto quanto ci mette

se no aggiungiamo una condizione in più

condi non ha funzionato stavolta, capito che è un bluff ok, lo interrompiamo

filtriamo, prima ancora che per nome file

per attitipo

l'attitipo in questo caso

è quello scritto qui sopra

quindi si, underscore user desktop e allora sei tu

Quindi così non posso aiutarti. attendiamo eccolo qua

ok

questo è il nostro file infatti abbiamo caricato

oggi 11.19 perfetto

quindi questo file che abbiamo caricato

sul desktop utente viene

tipizzato con questo tipo

user desktop quindi tutti i file

tutti i file

che gli utenti caricano sui propri

desktop utenti vanno tutti a finire su AssetHatchFile con questo tipo, si underscore user desktop.

La chiave in questo caso che sarà? La username dell'utente, in maniera da distinguere che questo

file è sì un file caricato sul desktop utenteente ma per l'utente admin informazione ad esempio

questo è il nome file ora se io mi prendo la pid

me lo cerco su

e attaccio

c'è il blob apro

modalità testo

questo qui è quello che

è il risultato del blob

però vedete questo è il file

perfetto

ci siamo? ci sono domande?

ok quindi tabelle si attacce domande? ok

quindi tabelle

si attach tipo

si attach file

e si

e si underscore

attach

quindi tornando

all'esempio

alla definizione

dei report

tutta la parte

relativa

che query ho messo

che filtri ho creato

come li ho disegnati

eccetera

vanno a finire proprio sulla si attach file

con tipo

un tipo

un tipo che non mi ricordo quindi cerchiamo sulla si attaccio tipo guerra t codice like

report cerchiamo il tipo relativo ai report

Sì, sì, sì, sì.

Sì, sì, sì.

Attaccio report personalizzati.

Sr underscore report pers.

Eccolo qua.

Cerchiamo ad esempio magari per il mio report.

Torno sulla sr report che è l'anagrafica dei report, cerco per rp codice

uguale, il mio report l'avevo chiamato report underscore ap, quindi questo è l'id del mio

report, quindi tornando sulla set attach file, filtro tutti i file di questa tipologia

and at chiave uguale l'id del mio report

l'apice marciar

eccolo qua

e adesso quindi adesso prendo l'id di questo report

di questo attach

vado sulla si attach

e che caspiterine

mi vedo il blob

eccolo qua, vedete un xml alla fin fine

è un xml

dove c'è vedete il tag

è un xml che si crea lui

quindi ho scritto la query

questa era la mia query

filtrando per le regioni

quindi lui si è creato

formattato in xml

scusate

dove ci sta un tag SQL e poi anche un tag fields con tutta la lista dei fields.

Ok?

Tutto qui.

I filtri invece,

i filtri invece,

i filtri invece vanno a finire su quest'altro tipo di attach

che è SRFiltriReportPers

cerco per la stessa chiave

e qui ottengo questo ID

se lo apro con

quello che ho fatto sulla scheda dinamica

creando una riga

mettendoci un edit con descrizione

un edit senza descrizione eccetera

si trasforma

ecco, quei soli due campetti che ho inserito

che vi ricordate filtravo i comuni in base a una like sulla descrizione, eccetera, si trasforma, ecco, quei soli due campetti che ho inserito, che vi ricordate, filtravo i comuni in base a una like sulla descrizione e alla regione,

si tramuta in tutto questo popò di XML. Non è altro che la serializzazione dei biggianti.

nulla di che ci dice ci dice cobbia radici dice il nome filtro descrizione tipo di volere scala

dinamica oggetto e quindi abbiamo visto che è di presa descrizione ci dice l'opposito nella

riga 1 colonna 1 tipologia string e così via dicendo d'accordo la sensazione del bene colore non lo specificato comunque lo va a scrivere ok domande

questa era quella che potevamo editare potevamo editare inibili l'inserimento e modificare inibili

la modifica sulla descrizione giusto questo questo qui che

vediamo adesso farebbe il filtro quindi sarebbe

adesso ci vado a partecipato andare già di qualche quindi quello che per intendo e ci vado

su configurazione avanzate reporting report, report personalizzati, cerco report ap, filtri.

Questo è la serializzazione dei miei filtri nel mio report. Quindi i filtri che ho disegnato

qui nel mio report, quando salvo, vengononato qui nel mio report quando salvo vengono

serializzati all'interno della

si attach in xml

ah ok ok ok

ok perfetto

grazie

mentre la query che ho su configura

questo qui va a finire sempre sulla si attach

però non con la tipologia sr

filtri report persoologia sr filtri

report perso ma sr report perso sempre in xml abbiamo visto un secondo che abbiamo un sorso d'acqua D'accordo?

Questi sono gli attacce. Poi ho un esercizio sull'attaccia a livello di codice lo facciamo più avanti, quindi vediamo un attimo poi anche un attach a livello di codice, come lo posso gestire, come lo posso far caricare, scaricare, ma più che altro lo vedremo a livello di API,

che poi comunque sono anche nel code snippet,

già dei documenti che ho condiviso.

Ok, va bene.

Allora, sempre per completare la parte degli attach, quindi,

vi faccio vedere un punto di menu che ieri avevo saltato di...

proposito che era sotto sistema compagnia sistema pat attachment a che serve sto menu

fate ricerca vi fa vedere tutti i tipi di attacce quindi il contenuto della presente

della tabella si attacce tipo quindi tutto il contenuti tipi di touch selezionando un tipo di attach

potete fare un po' di cosette

ad esempio

comprimere e decomprimere

ok?

che serve quindi, che succede?

se noi diciamo che sul tipo

mp, mp vogliamo comprimere

lui prenderà tutti i

attach marcati come tipo

m underscore pmp

e fa una compressione in gzip,

per salvare spazio sul db, quindi fondamentalmente.

Crypta-decrypta invece serve per cifrare e decifrare gli attacchi,

quindi in questo caso a che serve?

In caso magari sono file con contenuto sensibile, per cifrare e decifrare il contenuto del file.

E in ultimo, entità applicativa di storicizzazione.

Questo è molto utile, anzi, sono due entità applicative.

Questa qui, intanto abbiamo detto entità applicativa, è definita entità applicativa di salvataggio.

Questa è di distoricizzazione.

Perché?

Se applicativa di salvataggio vuol dire che quello che mettiamo qui,

se ad esempio noi qua indichiamo un altro DB dove salvare,

lui il blob invece di salvarlo sulla siattach,

come abbiamo visto, lo salva da un'altra parte,

lo salverà su un altro DB.

E per questo è il motivo per cui è disaccoppiata

la definizione del file su Asiatouch File

e il contenuto vero e proprio.

Perché il contenuto inteso come blob effettivo,

come binario del file, può essere effettivamente

in realtà salvato in qualsiasi parte.

Lo possiamo indicare tramite l'entità applicativa di salvataggio.

Oppure possiamo lavorare su l'entità applicativa di salvataggio oppure possiamo lavorare sull'entità applicativa di storicizzazione e in questo caso cosa gli diciamo?

gli diciamo, no, guarda, salvalo sul db

salvalo sulla set touch file

però poi magari tutti i file più vecchi di una certa data

ok

o di una certa elapsed

bisogna però indicarli un tipo di identità, muovimili, spostameli su un'altra entità applicativa, su un altro supporto.

supponiamo magari che ne so

le lettere di dimissione

ok

ha senso magari

tenersi sulla base dati

gli ultimi sei mesi

perché magari

possono essere ancora consultate

frequentemente

Tutto ciò che è più vecchio magari di sei mesi lo possiamo spostare su un altro supporto.

Magari poi quando l'applicativo dovrà caricare quei file che sono stati spostati su altro supporto ci impiegherà un po' più di tempo.

Però chi se ne frega, sono file vecchi, vengono consultati raramente.

Allora attivo l'entità applicativa di storicizzazione.

Quindi sposto i file, che vuol dire che li cancello sulla seattachcia, quindi come blob, e lì me li copio da un'altra parte. Poi, cosa fa l'applicativo? L'applicativo

ogni volta che c'è, che un file viene recuperato e letto, che cosa fa? Va a vedere,

ok, devo recuperare un file di tipo, non lo so, questo qua, si schedule ed report, ok, va a vedere, qua,

AT Entita Store è valorizzata? Sì, ok, allora il file non lo recupero sulla sethatch, ok?

l'entità applicativa abbiamo visto stamattina che si definiscono

sotto sistema

demoni entità applicativa

però questa mattina abbiamo visto quella

di tipo database, quindi per fare

su altro database, però in realtà

ci sono diversi tipi, ad esempio ci sono

questo, vediamo la secondo

caso d'uso in cui viene usate

appunto in applicative, che sono

file system

file system dir vanno a braccietto

sono uguali, file system dir la differenza

è che supporta, la file system

vi chiederà di indicare il path

quindi che ne so, il path fisico

dove salvare questi file

vi salverà sul file system

raggiungibile dal tomcat

generalmente il file system di cui si parla

qui è un disco di rete

quindi qua si metterà

il path dove è stato montato

il disco di rete

file system dir è uguale

sempre il path dovete indicare

a differenza che avete dei placeholder del tipo

dollaro mese, dollaro anno per poter creare una struttura di sottocartelli ftp sf tp e tutti questi ftp

sono pure questi abbraccetto dipende sono tutte differenziazioni per gestire le policy di sicurezza

ma queste quattro insomma servono per gestire l'upload di un file su un server FTP, quindi anche qua si dirà l'indirizzo del server di FTP eccetera eccetera e le credenziali per poterci accedere.

quindi creare un'entità applicativa tipo ftp e la metto qui sulla storizzazione

addirittura qua sull'entità applicativa

ecco che il file non lo trovo più

sulla si attach come blob ma lo troverò

sull'ftp

poi l'applicativo è trasparente

l'applicativo dopo ripeto in base alle

configurazioni che legge qui dentro lui sa

dove andasse a recuperare quel blob quindi

se un blob lo deve trovare sulla si attach quando lo deve mostrare all'utente oppure se deve andare

di pescare sulle ftp e poi in ultimo ci sta tipo plugin lo capiremo più avanti nei corsi comunque

diciamo che si possono sviluppare supponiamo magari ad esempio che noi vogliamo spostare i

nostri file o li vogliamo salvare all'interno di OneDrive di Microsoft

non esiste ad oggi un sistema per fare

questa cosa qui, io però

mi posso sviluppare un mio plugin

dove mi gestisco tutta l'integrazione

con OneDrive di Microsoft, quindi con

tutte le API REST di Microsoft

ve lo sviluppo e poi lo indico qui dentro

ok

l'ultimo, l'initivo cestino, è un'entità applicativa di pulizia,

perché se io indico qui che questo tipo di attaccio

me lo deve storicizzare su un'entità di tipo cestino,

quello che ottengo è che in realtà invece di spostare i file

su un altro supporto, li cancello.

Cestino vuol dire non metterli da nessun pozzo,

non li metti da nessuna parte

ok? C'è una domanda?

Se diciamo decriptare i dati

la chiave di criptazione

dove si trova?

Allora, l'entità

allora, vediamolo da qua, vediamolo, e dalle classi dove si trova allora l'entità allora

vediamolo da qua

vediamolo

e dalle classi

allora

l'entità di storicizzazione

ok

diciamo

se volesse con un po'

lo stesso concetto

che abbiamo visto ieri

con la k-object

e t

k-object

e d

vi ricordate

o anche oggi

con report config

e d

report config

vd

ok

quindi entità di storicicitazione avrete entità

o regge c d e f ftps insomma pi plugin c cestino di database immagino ecco qua

se ci sono entità di tipo database qui trovate tutto qui dentro ok? innanzitutto quindi qui trovate

il tipo

cosa fa ciascuna

file system

ciascuna entità

quindi praticamente ogni entità

implementa questi metodi qui

ok?

la configurazione dell'entità

però in realtà riuscite anche a capirlo facendo shift f12,

comunque la configurazione d'entità è gestita dal bin entità bin,

l'entità bin è lui che va a salvare sul db e qui trovate la chiave, ok?

In generale, se vedete ad esempio il metodo store store vedete insomma come lui va ecco fa in clip text e se

vedete il metodo retrieve ecrito text ok

tip

poi dopo andando a vedere, c'è una classe java,

quindi fate un main e riuscite a criptare e decriptare.

Altre domande?

ok quindi giusto per vedere

l'ft, no, l'file system

tipo file

move

non fa niente, save, ecco save

e fa il new file

del path che è stato indicato

ok? e poi su quel file

lui ci va

a scrivere

ok?

tutto qui

un'altra di che upload farà la retrieve

di quel file input stream

e così via dicendo

poi dopo ripeto

il bin che sottende la tabella la tabella si chiama

che underscore

select star from si andescor entità

entità enti

enti app mi vuoi aiutare?

ce la prendiamo dal bin, entità bin

andiamo a prendere il memento

entità app

questa è la tabella

qua dentro ci sono tutte quante le entità, poi in base alla tipologia di entità che è stata creata potremo trovare alcuni campi valorizzati, altri meno, ok? Per esempio, che ne so, il driver del DB ha senso soltanto

nel caso del DB, il DB alias anche, il DB user DB password invece no, potrebbe aver

senso, sarebbe username e password, potrebbe aver senso anche nel caso di FTP, adesso qua

non ce n'è neanche uno, ok? Quindi comunque poi tutti i campi sono cifrati e le logiche di cifratura le trovate qui dentro all'interno del bin.

Bene?

Ok, ci siamo, quindi ci siamo.

Va bene. ci siamo va bene tutto chiaro touch c'è perfetto allora andiamo avanti

Simone scusa

la tabella quella è dove stavano

la query usata per i filtri

per il report

SR report pers

allora SR report pers

questa è la query SR report pers

per le query

per vedere la query che abbiamo definito

sul report

il filtri è

SR

filtri report pers port se risr

filtri report perso

abilista quest'altra dove stanno

in che prezzo

prego ok un secondo scusami

Ok, sì, va bene.

Ok, altro argomento allora.

New topic.

Demon e agent. Allora, l'applicativo non è costituito solo da maschere, quindi molte delle procedure applicative in realtà agiscono in background, quindi sono magari attività batch, attività costanti,

che l'utente neanche si accorge avvengono. Questi tipi di attività in background possono essere ad esempio attività che si occupano di inviare mail,

di produrre stampe, di avanzare processi workflow, di gestire l'integrazione tra software, tra sistemi esterni.

workflow, di gestire l'integrazione tra software, tra sistemi esterni. Essendo spesso queste operazioni molto onerose, queste attività girano su una web app dedicata e non condivisa con le normali web app dove lavor ad oggi abbiamo fatto, di formazione, dove abbiamo fatto i nostri prove, test, eccetera, quindi abbiamo interagito con le maschere applicative, viene chiamata web app utente.

Esiste però, affiancata a questa, anche una o più web app che si chiamano web app non è possibile fare login, non è possibile accedere a maschere

perché si occupano solo e solamente di

solo e solamente di eseguire

questa attività batch

e di background.

Poi in base alle esigenze

il cliente a carico di lavoro si potranno avere più o meno web app demoni, come ho detto,

la loro creazione viene effettuata in fase di installazione, quindi in fase installazione di

Arias si decide quanti demoni, quante web app demoni si deve avere e quante web app utenti si deve avere.

quante web app utenti si deve avere.

Però la web app daemone di per sé,

quando uno la installa, è semplicemente una web app, cioè sta lì.

E quindi è un contenitore.

Sta lì, non fa niente. È un contenitore

su cui potenzialmente

potranno girare le nostre attività

di background. Ma la scelta

esatta di queste attività, quindi

cosa far girare, dipende invece da noi tramite un'opportuna configurazione di oggetti denominati demoni o anche demone server.

girano dei demoni un demone è un oggetto che si occupa di compiere costantemente e senza interruzioni una particolare attività quindi lui gira sempre fa solo una cosa lui è stato ogni

demone programmato per fare qualcosa e fa solo quella cosa le possibili tipologie a disposizione

sono stabilite da laboratorio di sviluppo.

Ogni modulo può quindi rilasciare un nuovo tipo di demone.

Ad esempio, qua vi elenco alcuni di JBFX MPI, abbiamo un demone per il workflow.

Quindi noi abbiamo rilasciato dal laboratorio di sviluppo un tipo di demone,

un workflow, che noi abbiamo implementato al suo interno,

le logiche che cosa fa questo demone, gira costantemente per vedere se ci sono dei processi di workflow che noi abbiamo implementato al suo interno, le logiche che cosa fa questo demone,

gira costantemente per vedere se ci sono dei processi di workflow che devono essere portati

avanti, che devono essere completati, terminati eccetera. Poi abbiamo un demone tipo C-Agents,

vediamo dopo cosa vuol dire. Abbiamo il demone Sysched Report, cos'è? È un demone che si occupa

di fare le stampe.

Ad esempio, quando noi facciamo una stampa, un report, un qualcosa su Arias,

il report non viene seguito sulla web app utente,

viene lanciato sulla web app utente,

però poi il funzionamento è simile a quello che abbiamo,

quello sulla stampante di casa.

Quando voi stampate 10, 20, 30 documenti, documenti cosa fate mandate in coda di stampa poi dopo c'è la stampante che fisicamente si smazza la coda e stampa quasi

similmente è il demone delle strampe quindi voi dite di lanciare un report il demone si schede

report che gira sotto nella sua web app demone gira costantemente e si va a vedere. C'è qualcosa nella coda di stampa da stampare?

No.

Adesso?

No.

Adesso sì, stampo.

Fa sempre questo lavoro.

Va costantemente a verificare la coda delle stampe.

Poi abbiamo anche tutta una serie di demoni per gestire le integrazioni,

demoni HL7.

orion eccetera

ok

il demone, quindi

capitolando, abbiamo web app demoni dove girano

dei demoni

i demoni girano sempre

sempre, quindi non si fermano mai

nel momento in cui parte la web app

partono e incominciano a girare e fanno quello che devono fare

però

esistono alcune attività in background

che non devono essere eseguite

costantemente, ma piuttosto devono essere eseguite ad intervalli regolari. Ad esempio

magari devo lanciare un'estrazione ogni primo del mese, devo fare una qualche attività ogni

giorno la mattina come prima cosa, o magari solo il weekend perché è un'operazione onerosa,

quindi lo voglio fare quando c'è meno

carico sulla base dati a questo scopo vengono utilizzati definiti gli agent gli agent sono

delle sorte di subattività che girano all'interno di un demone di tipo si agent quindi a differenza

dei demoni queste subattività possono essere

pianificate o si dice anche schedulate per poterle eseguire in determinati momenti della

settimana, del mese, della giornata. Quindi cosa farà il demone Sea Agent? Il demone Sea

Agent comunque girerà costantemente, perché quello è il suo lavoro, gira sempre il demone,

però ha delle particolari logiche per cui lui

andrà a verificare

la pianificazione degli agent

quindi diciamo che ne so adesso sono

le 11.49

gira il demone, si agent dice sono le 11.49

devo

martedì 12 aprile

devo eseguire un agent? No

ok sono le 11.51 devo eseguire un agent? Sì ok, sono le 11 e 51. Devo eseguire un agent?

Sì, ok, lo faccio partire.

Quindi ogni istante,

a ogni iterazione, il demone,

va a verificare se esistono

degli agent che sono stati pianificati per partire

in quell'istante. Se sì, li lancio.

Altrimenti continua a valutare,

a valutare, a valutare, a valutare.

Quindi diciamo che, per completare, poi se ditemi se ci sono domande,

quindi per concludere in maniera visuale,

questa è la struttura che abbiamo per le funzionalità demone.

Abbiamo la nostra web app demone,

che è un contenitore di demoni,

e poi abbiamo il demone particolare di tipo si agent che a sua volta un contenitore

che contiene al suo interno gli agent che sono gli sono stati assegnati attivati pianificati eccetera

question

Any question?

Questa web app daemon è a livello di sorgenti,

diciamo,

reposite è lo stesso.

Bravissimo.

È un modulo particolare.

Sì, è uguale, identica, spiccicata.

C'è solo un flag, adesso,

adesso vediamo quando facciamo l'esercizio,

che il flag sta nel file applications properties,

vi ricordate abbiamo detto application properties,

l'abbiamo già visto per due scopi,

lo startup delle applicazioni, cosa voglio far partire,

e vi ricordate anche per il pool,

per dirgli numero minimo e numero massimo connessione,

viene usato anche per fleggare il tipo di web app,

quindi se è una web app utente o demone.

Però i sorgenti, cioè il deploy è lo stesso.

Proste domande?

Ok.

Allora, direi di farci una girata sul db

anzi no

facciamo prima

no, facciamo prima l'esercitazione

faccio prima l'esercitazione

quindi l'esercitazione ci dice

di voler

creeremo

un nuovo

una nuova web app no, no, un nuovo una nuova web app

un nuovo demone

tipo

sia underscore agent

e su quel demone lì

ci andremo a collegare

degli agent, quindi praticamente andremo a fare

questa cosa qui

su questa parte qui, ok?

poi in virtù di queste operazioni

vediamo cosa succede sulla base dati

d'accordo?

un solo Allora, quindi definire un nuovo demone occorre andare su, questo tramite l'utente amministratore, sotto configurazione sistema demoni, demoni.

In questo caso vogliamo crearlo, quindi faccio nuovo.

Quindi server, qui diciamo il codice

essere un codice mnemonico

quindi un codice univoco, identificativo ecc

quindi esempio dem underscore ap

analista programmatore

performazione ap

quindi poi dobbiamo dirgli il tipo di demone

che vogliamo creare

qua se io faccio la lista valori

sono i tipi che sono rilasciati

da applicativo, quindi non me li posso inventare

i tipi, i tipi sono questi

sono rilasciati da applicativo

ok?

ad esempio il nostro caso è

seandescoragents

ok?

qui

è un tipo da demone per fare l'agent manager, quindi per gestire gli agent.

Stato attivo.

Data di attivazione, vabbè, lo mettiamo che ne sono da sempre, che sono 1970.

E poi qui ci sono due importantissimi campi, che sono l'utente di profilatura e l'applicazione web.

Iniziamo dall'applicazione web. Come abbiamo

detto noi qua stiamo creando un demone, ma un demone gira dentro ad una web app di tipo

demone. Quindi i quali dobbiamo dire, guarda, così faccio l'install valori, cosa mi dice

il sistema? Mi dice, guarda, ad oggi sono installate queste tre web app di tipo demone

su questo ambiente di formazione. Su quale vuoi farlo girare? La scelta assolutamente

dipende dal carico, no? Quindi che ne so, se la carica 166 ci ha segnato un demone, sulla

164, 165 ci ha segnato 100 demoni, inutile che continuo a caricare il muletto qui, no?

Parato sulla 166. Vediamo con le query come capire queste cose.

Quindi, esempio qua, adesso li seleziono la 166.

La web app, questa qui.

Intanto confermo.

Ah, campi obbliettori.

L'ultimo campo importante è quello di profilatura per l'esecuzione.

A che serve?

Perché in generale il nostro demo,

è vero che esegue attività

in background, ma queste attività in background potrebbero essere qualsiasi cosa. Potrebbe

fare degli insert, degli update, farà sicuramente magari degli insert alcuni, alcuni altri faranno

update, alcuni altri faranno solo select. A prescindere dalle operazioni che fanno, interagiscono

col sistema e per poter interagire con il sistema e interagendo con il sistema come dire modificando i dati ok

più semplice scusate più semplice utente che indichiamo qui sarà l'utente con cui lui farà

impersonificherà

quell'utente che noi indichiamo qua dentro

quindi ad esempio se io indico qui

corso JBF, tutte quelle operazioni

ad esempio di insert, di update

le farà

con questo utente

quindi che ne so, magari sulla data di variazione di un record

ci andrà a finire questo utente altra cosa importante magari se il mio se il mio demone andrà a fare magari dei salvataggi

no utilizzerà magari il service manager save che abbiamo visto nel wizard lo farà quel salvataggio

con questo utente se l'utente non è abilitato a salvare quell'elemento, darà errore

quindi per questo è importante

dargli un utente di profilatura

cosa si fa quindi generalmente?

si crea un nuovo utente

non lo metto questo, però vi dico

generalmente quello che si fa, si crea

un nuovo utente ad hoc, lo si marca qua connessione solo da servizi, in maniera che, vi ricordate, questo vuol dire che l'utente non può effettuare la login applicativa da maschera, quindi usato soltanto da servizi, come in questo caso per i demoni, e poi gli si darà un'opportuna profilatura, un'opportuno ufficio ruolo, eccetera, d'accordo?

Sotto claro? Sì. un opportuno ufficio ruolo eccetera d'accordo modo claro sì

vedete mi da waring attenzio brown warning è per carino e lui se ne frega il

giusto dice giustamente è meglio che lo metti solo da servizi poi se questo qui in realtà uno vuole fare il farci anche l'applicativa ok quindi così io ho creato il demone

altri campi quello mail amministratore da montante amministratore da me per messaggi

eccetera questi potete ignorare infatti non sono manco di talport qui questi li potete ignorare

infatti non sono manco editato

questi li potete proprio ignorare

vengono calcolati poi in automatico in base all'associazione del demone

questi qui sono invece in un senso

in un senso per modo di dire

è praticamente potete indicare

se il demone va in errore

va in errore

quindi

il demone delle stampe deve fare una stampa e la stampa va in errore lui seg errore quindi demone delle stampe

deve fare una stampa

e la stampa va in errore

lui segnala l'errore via mail

o via messaging

messaging è questa qui

la messaggistica interna

che abbiamo visto ieri

ok

gli manda un messaggio

questa qui

gli manda un messaggio

per dirgli

per comunicargli l'errore

tutto qui ok ok vi manda un messaggio per dirgli per comunicargli l'errore tutto questo

ok

ok grazie quindi ne siamo una sorta di notifica che diventerebbe soltanto più

che altro diventava uno spam più che tanto alla fine tutte le cose no mi metto

gli alert poi quando dice dice Vicento lo marchi

sullo spam, comunque questo

serve a questo, poi dopo qui

però lo vediamo meglio sulle tabelle

quando vediamo poi le tabelle

comunque qua dopo ci sta log e monitor

serve perché per consultare

i log dei demoni

ok?

ora

ragazzi vi chiedo un attimo

una cortesia

il demone è così insomma

quindi non c'è altro da fare

abbiamo definito il demone

adesso il passo dopo dell'esercizio è

su questo demone

adesso vogliamo attivarci degli agent

così vediamo anche come si pianificano

però vi chiederei un attimo

proprio 7 minuti

di tempo quindi ci rivediamo qui a 12.07, avevo precisato che ho bisogno di sette minuti e torno subito da voi, d'accordo? Quindi sette minuti di pausa.

Ok, va bene, va bene, va bene.

Grazie a tutti. Grazie a tutti. Sì, ecco, scusatemi, sono andato un po' lungo.

Ok, però ci sono.

Ok, ricondivido subito lo schermo.

E torniamo nella maschera dove eravamo, quindi ci eravamo fermati qui.

Abbiamo creato il nostro demone di tipo C-Agents, l'abbiamo attivato, l'abbiamo associato alla nostra web app di

e li abbiamo associato il nostro utente in cui ci siamo giusto

però la vpn non ci sta un secondo scusa connect ok condivido perfetto adesso associamoli questi agent al nostro nuovo demone come si fa ovviamente

non è che il nostro obiettivo è far girare degli agent vedere come fa, poi dopo un agent noi ce lo creiamo, vediamo come si sviluppa

un agent, ok? Però per adesso ci basta sapere insomma un attimo come si attiva. Quindi bisogna Attivazione. Cerchiamo il nostro demone. Come l'avevo chiamato? Demap, eccolo qui.

E qui mi vengono mostrati tutti gli agent che posso potenzialmente attivare. Anche ad esempio questo qui elaborazioni per riepiloghi ed export

lo seleziono

prendo la riga, la seleziono

tac

poi

i passi a seguire sono

attivarlo

stabilisco una data

d'inizio, quindi io potrei mettere una data nel passato

oppure posso dire guarda che ne so

diciamo che il nostro agent lo vogliamo schedulare

ogni

ogni weekend

ogni weekend

a partire dal primo maggio

io qua scriverò

01 05

2022 ok? voglio far partire ogni weekend alle 8 del mattino quindi

lo faccio partire con un'ora di inizio alle 0800 poi qui sotto li dico la periodicità

esecuzione unica quindi vuol dire che viene eseguito una volta, la gente poi muore. O giornaliera, quindi tutti i giorni, ogni due giorni, tre giorni,

quali sono i mesi, settimanale, quali sono i giorni, mensile,

qual è il giorno del mese, ok?

Quindi un po' di tutto, insomma.

Nel nostro caso abbiamo detto il weekend,

quindi faccio settimanale e gli dico guarda parti tutti i sabati, tutte le domeniche, di tutti i mesi,

a partire però dal primo maggio in avanti alle ore 8.

Confermo.

Ora il nostro agent che si chiamava elaborazioni per epiloghi export e per...

Ma quanti ce ne stanno?

Madonna.

Ecco, questo qui è quello che abbiamo abilitato scusatemi, ma ce ne stavano di più

non ne avevo visto

ok, vedete che gli è uscito fuori

questo check che mi fa capire che gli è stato

associato e qui lo stato attivo

è S, sì

se io lo prendo in gestione

ok

mi dice che la prossima esecuzione utile è proprio il primo maggio. Perché? Perché botta di fortuna, il primo maggio è anche domenica,. Poi le successive quali saranno? Saranno il 7 maggio, perché sabato, alle 8, l'8 maggio alle 8, 14 maggio alle 8, 15 maggio alle 8 e così via dicendo.

anche una data fine, gli dico guarda però ad un certo punto, che ne so, dopo il 30 luglio spegniti, quindi metto una data fine, oppure gli posso dire guarda parti alle 8, ma da quando

inizi a partire, poi continuo a partire ogni 60 minuti, una volta all'ora, però dopo questi

60 minuti, magari dopo le ore 22, fermati.

Quindi alle ore 8 parti, ogni 60 minuti giri,

arrivata alle 10 ti fermi.

Ok?

Giusto un attimo a vedercele un po' tutti,

però queste insomma sono tutte le possibilità di pianificazioni che possiamo fare.

Ok?

Perfetto.

Per togliere un agent agent quello che bisogna fare è

disattivarlo

e preme il tasto scollega

ok

scollegandolo

praticamente lo togliamo

dal

dal girare

il demone ap

non lo farà più girare

non lo valuterà più

tra quelli che deve lanciare

adesso me ne metto un altro

tipo questo qua, agente degli indicatori

ma giusto?

un attimo per

me lo collego così adesso vediamo

sul db cosa succede

quindi metto questo perché è più

identificato e più facile identificarlo

vediamo un po' se è solo uno.

Sì, solo uno, c'è solo questo.

Quindi dicevamo alle ore 8, attivo.

Ripeti ogni 10 minuti, sabato, domenica.

Ok, conferma.

ok vedete che adesso è uscito fuori il check ho tutto chiaro intanto come sulle maschere

adesso vediamo il db per adesso tutto c'è domande dubbi

dopo la delusione che ci hai dato non ce ne sono qual delusione sono in ritardo

appena ricordato che il primo maggio è domenica. Ah cavole, cavole.

E' vero, non ce l'ho manco...

Ecco, adesso mi sono autodeluso anch'io,

perché non ce l'ho detto,

l'ho detto ma senza pensarci.

Vabbè, e com'è, festività non goduta, no?

Eh, almeno guille, ribagata.

Eh, almeno pagata.

Eh, sì, purtroppo sì.

Quest'anno è andata così.

Non so che peggiore era l'anno scorso,

l'anno scorso mi sembri di ricordare che era a Natale

sono tutti sabato e domenica

24-25

mi ricordo però

è sempre il weekend

va bene

quindi questo è la maschera

ok? a livello di maschera queste sono le operazioni

che bisogna fare quindi per la creazione di un demone

e l'associazione di un agent

lato DB

che cosa significa?

e questo è un po' più interessante

lato DB

poi dopo queste

queste qui in realtà

le avevo già fatte, eccolo qui

se quale GBF sono tutte qua dentro, le query che abbiamo visto.

Queste le ho fatte anche con i vostri colleghi.

Il numero sto riscrivendo per quello, vi do quello che ho dato anche a loro.

Allora, Selecstar, le tabelle che abbiamo visto sono

C underscore demone server e l'anagrafica del demone lì per intenderci

qua dentro noi avremo il nostro il brando per il codice guardi s codice uguale underscore ap

underscore ap eccolo qua

è l'anagrafica del nostro demo

quindi abbiamo detto stato

s, questo è la username dell'utente

che deve essere utilizzato per la profilatura

ah ecco una cosa importante che mi dimenticavo

l'utente di profilatura

che mi è scelto come profilatura

questo è importante

quando lo censite

oltre alla

questione che vi ho detto, utente da

servizi, va bene, deve avere o una sola

terna, o una sola terna, oppure una terna

deve essere marcata, se ce n'è più di una,

una deve essere marcata con ufficio

abituale. Perché questo? Perché ovviamente

non è che il demone può far scegliere

la terna al momento in cui utilizza l'utente, no? Quindi, quindi per questo motivo siccome il demone è stupido, a parte lui diceva in sostanza l'utente, non è che può capire quale terna deve scegliere per poter lavorare con quest'utente, quindi deve essere o una sola oppure quella di destra.

fault deve essere marcata.

Poi,

il tipo dell'agent,

e va bene,

e la web app.

Eccola qua, vedete? La web app.

Questo è l'id

della web app a cui abbiamo legato il demone.

Con questo id, cosa ci

facciamo? Andiamo

su un'altra tabella che si chiama select star from C underscore web app.

E cos'è? Questa tabella censisce tutte le web app che sono state installate sul DB in generale. Per esempio l'ambiente

di formazione in pratica ha 4

web app di cui

un utente, vedete WA tipo U

questo è l'host

la porta, il patto, che è un po' di informazioni

e

3 web app di tipo D

demone

e questa è la 166 a cui noi abbiamo

legato il nostro demone.

Quindi demone server e webapp sono unite tra di loro tramite questo yd.

Quindi ad esempio se io volessi sapere quanti demoni sono su ciascuna webapp, semplice join su yd=dswebapp ydcountar

e quindi ciò che la webapp 164 ha 4 demo, la 165 ce ne ha associati 3, la 166 ce ne ha associati 5.

D'accordo?

Poi, fatto il daemon e server, abbiamo la terza ultima tabella che è la selector from agente questa è la tabella dove vengono censiti tutti i possibili

agenti rilasciati da btu quindi ci va a vedere tutti gli agent censiti, lasciati dal laboratorio e che quindi noi potenzialmente erano quelli

che qua potenzialmente possiamo legare ad un demone

per vedere quelli ad esempio legati al nostro demone

dobbiamo filtrare per il campo sa server

quindi questo campo detiene l'associazione verso un demone

quindi faccio wear s underscore server uguale m ap prova agente degli indicatori

infatti noi qua questo qui ci siamo associati

Quindi ci dice che è attivo, che è di tipo classe, può essere di tipo classe o di tipo plugin, però come vi dicevo i plugin li vediamo più avanti.

che dirci e in qualche modo, vedete queste sigle qui, MN, hanno tutto un significato loro,

che in qualche modo cerca con un campo solo di andare a riportare questa pianificazione.

Ad esempio in questo caso NNS, SS, vedete che saranno i giorni della settimana, quindi adesso, sabato e domenica.

Periodo ripeti, 10, sarebbe quello che abbiamo indicato qui, ogni 10 minuti, e così via dicendo.

Periodo next ci dice, in base alla configurazione che abbiamo fatto, qual è la prossima data in cui l'agent verrà eseguito.

Quindi che succede? Cosa succede fisicamente?

Il demone, abbiamo detto che il demone is the agent,

è un demone che gira sempre e valuta ad ogni istante, ad ogni iterazione,

se ci sono degli agent che in quel momento devono essere eseguiti.

Quindi ad ogni istante cosa fa?

Devo far partire l'agent?

Sì, lo fa partire, gli fa fare il lavoro che deve fare.

Quando l'agent ha sì, lo fa partire, gli fa fare il lavoro che deve fare. Quando l'agent ha completato il suo

lavoro, lui aggiorna questo campo periodo next con la data della successiva esecuzione. Quindi in

pratica il demo, ne altro non fa, che ogni interazione andrà a valutare questa data qui, periodo next, dice oggi è il 12 aprile

ore 8 devo farlo girare?

no, oggi è il 16 aprile

ore 8 devo farlo girare?

eh sì

ok, è scritto qua

va bene?

va in polling

bravissimo, va in polling

sulla si agent

sulla sa periodo

poi qua ci sono gli altri periodi tutto quello che vedete periodo

sono tutti i campi che vanno a

insomma vanno a serializzare su DB

queste configurazioni qui quindi inizio, fine, ripeti,

il periodo data da, data a, periodo mesi,

quindi questi sono S per ogni mese dell'anno che va a essere eseguito,

quindi con la di, naturalmente, trascendentale.

Questa è, sta classe exec, è la classe Java che che fa il lavoro cioè quando qua è stato

rilasciato questo agent

ok? e poi questo è anche un agent

di report in questo stato

nel caso dei report di business

intelligence, quelli che vi dicevo che sono usati

dal controllo di gestione

ok? che succede?

lui dice, ah devo eseguire questo agent

perfetto, va a recuperare

la classe exec, che è la classe java

ed esegue quella classe

ovviamente deve avere una particolare

interfaccia, adesso vediamo

ok

quando è terminato, ricalcola

in base a tutti questi

saperiodo, saperiodo da ripartite eccetera

ricalcola la data di periodo next

e lo aggiorna

chiaro? ci sono domande

c'è una domanda più a livello codice java ogni demone corrisponde a due credo li vediamo ottima domanda 23 di rotta ok c'è anche un'altra si

di agent sono eseguiti sequenzialmente o sono in parallelo di gestire cinque demoni in massimo in parallelo.

Adesso lo vediamo, allora. Vediamo un po', innanzitutto, allora...

Ah, dimmi, intanto c'è un'altra domanda, così facciamo tutte le...

C'è una testa, c'hai?

Eh, no, no, però...

Ok, allora iniziamo con quella... No, però... innanzitutto quindi prima ci dicevamo che la differenza tra una web app utente e demone

alla fine si riassume in un flag sull'application properties

quindi sull'application properties c'è in particolare questo

web app tipo applicazione, ora qua è B

però in realtà i tipi che potete usare in produzione

sono quelli che abbiamo visto sull'as web app, quindi U utente di demone.

B è un tipo speciale che funziona in caso di debug, come in questo caso, che in pratica both, vuol dire both, quindi potete usarlo sia come web app utente che come web app demone.

Questo perché? Perché sarebbe una rottura di scatole e i programmatori avere una sia una web app utente sia una web app demone quindi mettendo b potete sfruttare la stessa la

stessa web app qui dentro per farli fare sia lavoro da utente che da demone però in produzione o u o d ok sul web xml vedete che quando facciamo partire

areas fa tutta una serie di

giri, rigiri, carica look up

fa tutta una serie di operazioni eccetera

voi sapete che quando

voi censite una web app, sulla web app li potete

dire

potete censire le servlet, no?

esempio

una server che noi già abbiamo visto era il controller dispatcher, il controller dispatcher

che lo usiamo per i nostri controller, quindi per andare sulle maschere applicative

che hanno un mapping che finisce con.do, però alcune server, voi le potete anche dichiarare

se la trovo

ecco qua, scusate, sta qua sotto

la potete anche dichiarare

come load on startup

quindi che vuol dire

quando c'è la clausola non startup

questa server viene caricata in fase di startup

poi c'è anche l'ordine eccetera

ok?

quindi questa classe qui

avrà un metodo

un metodo init che fa tutte le inizializzazioni che vediamo quando parte Arias.

Quindi tutto questo qui, carica il pool di connessioni, carica il lookup, tutte queste cose qui sono fatte in fase di startup

da questa servlet che è dichiarata

su web.xml, questo è standard insomma

quindi c'è una servlet

e c'è un metodo init, perfetto

qua dentro tra le cose che fa va proprio a verificare

ecco

se il tipo server è demone o no

ok?

se la web app è di web app tipo applicazione

lo va a leggere dall'application properties ok? quindi dice se la web app è di web app tipo applicazione lo va a leggere dall'application properties

ok?

quindi dice se la web app è tipo D o B

vabbè quel bot

allora cosa fa? si recupera l'id della web app

l'id della web app lo trovi sempre

cioè quindi se stesso

l'id di se stesso lo trovi sempre sull'application properties

subito sotto

cioè vanno a coppia insomma, ok?

non guardare i dati

questo è un po' di sviluppo

quindi un po' di cose sono a cavolo

però qua ad esempio nel caso nostro

supponiamo di avere

l'application properties

della nostra

web app

166

ok cosa avremmo? avremmo praticamente 166 ok

cosa avremmo?

avremmo praticamente qua ha scritto 166

web appd e qua d

vediamo

quindi lui che fa? va a dire

ok sono la 166

si fa una query sulla tabella di demoni server per tirarsi giù tutti i demoni che gli sono stati associati.

Poi, vabbè, si riempie una lista, per ciascun demoni...

per ciascun demone che gli è stato associato lui crea intanto un thread eccolo qua che si chiama

di a nome del demone di tipo daemon application

questo è il runnable che viene passato

da daemon application

è il nome che dà intanto a questo thread

questo è il primo thread

il nome che gli dà è

da2.com

il codice del daemone

quindi nel nostro caso è

da2.com

daem.com

ok poi il codice del demone, quindi nel nostro caso è di a due punti, dem underscore ap ok?

poi

qua dentro il demone application quindi avrà un metodo

run

ok?

si va a recuperare

a partire dal codice

un po' di informazioni tipo che tipo di demone è

il nome del demone e altro

però poi

cosa fa lui?

se non è stopping eccolo qua

startdemon if not stopping

vediamo un po' chi lo chiama

vabbè privato

ecco qua

stavamo sul metodo run quindi

perché non trovavo il punto, lui dice se non è stopping, quindi se la web app, questo è importante, va a verificare, siccome questo gira sempre, sempre, sempre, sempre, ogni tanto c'è un thread slip, ovviamente, cioè non è che gira proprio costantemente, per quale motivo? numero uno la vendiamo al cpu al 100% ma numero due soprattutto il demone non sarebbe in ascolto

dello stop delle web app

cioè se io faccio lo stop della web app

tramite il pannello

di amministrazione del tomcat

se un thread gira sempre

non si ferma mai e quindi non è mai in ascolto

di un interrupt exception che può venire dallo stop

della web app

blocca tutto

lo stop non ce la fa finire quindi se non sto stoppando la web app lui

che cosa fa va a verificare se lo stato del demon intanto è attivo si attivo lo istanzia

istanzia però il demone inteso come demone

quindi lui adesso su DA

per intenderci questo DA demon application ha creato quindi

un thread di tipo demon application generico

dentro il run di demon application

cosa fa? va a vedere in base al tipo di demone

istanzia una classe diversa

dove si va a ottenere questa classe?

questa è un'altra tabella

questa non la stavo a dimenticare

select star from

si demone tipo

un po' come la touch tipo

e qua vediamo che

il nostro demone si agent

è associato a questa classe agent manager.

Quindi che cosa farà con questa riga qua?

Lui va a istanziarsi una classe di tipo agent manager.

Perché tipo sia agent nel nostro caso.

E la ranna in un altro thread.

Questa volta con nome di due punti e questo qui

questa classe qui è quella reale che fa il lavoro che deve fare cioè se poi noi andiamo quindi l'istanza

una classe tipo agent manager che se noi andiamo ad aprire anche lei a sua volta un metodo run e qui dentro start fa un po' di cose, comunque il discorso che lei fa

la ricerca

degli agent che deve poi

magari ci torniamo più nel dettaglio

eccolo qua, process queue agent

va a fare una query per andare a cercare

tutti gli agent

da eseguire, vabbè dopo poi ci andiamo più nel dettaglio

sull'agent manager, però il discorso è questo

quindi, ricapitolando

web application

starta un oggetto demon application

quindi un thread

per ogni demone definito

a sua volta demon application

nel suo metodo run

starta, va a vedersi qual è

va a ricavarsi la classe java

legata

e starta un thread nuovo di due punti su quella classe Java reale che poi sarà quella che effettivamente farà il lavoro.

vado ad esempio qui su sistemi demoni

mi prendo in gestione il mio demone

ap

e faccio

e lo disattivo

quindi metto il toggle check qua e faccio conferma

è questa classe qui

demon application che ha le logiche

con cui ferma il demone

perché infatti qui abbiamo detto che

quando non si stoppa, ogni 10 secondi

lui cosa fa?

va a valutare lo stato

se S è attivo, ok

lo starta come abbiamo appena detto

quindi mi starta ad esempio la classe agent manager

Se lo stato è N, il thread daemon è diverso da null,

quindi vuol dire che il daemon l'avevo fatto partire,

però adesso lo stato è N, lo ferma.

Ok?

Mi serve per gestire, quindi i thread sono due perché

un thread è il thread vero e proprio che fa lavoro,

in questo caso degli agent,

e un thread è di controllo del thread.

Ok?

Ok. Chiar Ok? Ok.

Ok.

Perfetto.

Questa era la prima domanda, quindi thread praticamente sono due.

L'altra domanda, l'altra domanda invece è sugli agent,

dicevi quanti agent può eseguire,

e quindi torniamo adesso su questo agent manager quindi abbiamo detto che nel caso sia agent la classe demone questa agent manager che

avrà a sua volta un metodo run e che fa questo fa start poi vediamo che è questa si esecuzione, ma non ci interessa, ecco, se lo stato è

running, quindi anche lei va a verificare, insomma, se posso girare, ok, anche lei fa poi ogni minuto

una pausa, ok? È importante, mette sempre gli slip in qualsiasi thread, perché così per intercettare interrupt exception

qui, se è running

ok

che fa?

fa process queued agent

process queued agent

ora qua ci andiamo a

diventa tutta una serie di interfacce

interfaccette, comunque

fa questo get queuedgent, cioè va a vedere gli agent da mettere in coda.

Vediamo un po'.

Allora, adesso è una premessa, il motivo per cui sono fatte tutte queste interfacce qui è completamente inutile. Il motivo è perché per un periodo c'è stata la volontà di, vi ho detto, vi ho spiegato all'inizio,

nelle prime slide, che Arias è Oracle Dependent, quindi funziona solo su Oracle.

Per un periodo c'è stata anche la possibilità, la volontà di farlo girare anche sul database di IBM, di B2.

Però non è mai andato in porto quindi alcune cose vedrete che ci sono

delle classi dao servono appunto per rastrarsi dal db nostro caso è sempre oracle agent manager dao

ok quindi senza che ci andiamo a vedere ignorate tutta tutta sta roba qua è solo per intrecciare. Quindi comunque, cosa fa quindi qua dentro?

Anche guardando le classe q, getqdagent abbiamo

detto.

Eccolo qua. Fa una

query sulla siagent

per tutti gli agent attivi.

per tutti gli agent associati al mio server

dove il periodo next è minore uguale della sysdate

quindi dove la data di prossima esecuzione è minore uguale della data in questo momento

si carica una lista di d

che quindi poi

torniamo di qua quindi eravamo arrivati su process crew agent quindi qua abbiamo

la lista degli agent per ognuno di loro per ognuno di loro va a fare

la create agent

la create agent

cosa fa?

si tira su il record

della si agent

ok? quindi si va praticamente a

crea un oggetto

agent che altro non è che

un bin che mi rappresenta

è un bin di comodo che mi rappresenta è un bin

di comodo che mi rappresenta

il mio record sulla siagent

ok? quindi mi rappresenta tutta questa roba qua

una volta

creato l'agent

agent execute

fa execute, crea l'executor, l'executor che vuol dire? Vuol dire che crea l'agent, cioè che crea il thread, scusate.

da gente ecco tutto un altro agent eccolo qua

dove c'è ospitino target agent loc non è questo questo è un loc sull'agent, la started agent, link agent to server,

else,

ecco, no, scusate, non l'ho visto,

agents.run,

questo è, di fatti,

invoca il metodo run

del mio agent, ok?

Quindi invoca il metodo run

in questo caso,

esempio di indicatori engine agent,

io ad esempio, se prendo questa classe qui,

la cerco,

ho metodo run.

Quindi invoca questo metodo run. Adesso lo vediamo,

un agent lo implementiamo.

Preventi ci invoca il nostro metodo run.

Lo trovo in debug un po' più chiaro.

Comunque,

poi, una volta che ha completato il suo giro, imposta la data di periodo next, come ci dicevamo. Tutto questa cosa qui gira all'interno di un pull, eccetera.

executing pool, executing pool, quindi tutto in un thread pool, eccolo quindi un thread pool che ha una thread pool size,

una thread pool size,

è iniziata, ci arriviamo,

thread pool size che è una costante, 5, ce l'abbiamo fatta. Ok?

Quindi contemporaneamente un demone, si agent,

questa è la classe che è collegata al demone, si agent,

un demone, si agent può gestire massimo 5 thread

in parallelo, lo stesso momento

quindi supponiamo che i nostri

che dobbiamo

cosa non si verificherà mai, però mettiamo caso

perché già non si verifica manco 2 agent

nello stesso momento, però supponiamo che dobbiamo

eseguire

10 agent nello stesso momento

quindi lo stesso

ora, lo stesso minuto, lo stesso giorno, lo stesso mese

per poterlo fare

già sappiamo che dovremo creare

due

demoni

quindi nella nostra web app dovremo creare due demoni

tipo C-agent in maniera

che 5 siano su uno e 5 siano su un altro

ok?

ok ok ok pensiamo che sarà già un piano predefinito se non sapere quali quali job devono essere eseguiti per potremmo poi dimensionare bene quanti demon esatto creare esattamente

perfetto

nel caso della Sardini in realtà questo è un aggiornamento

ovviamente è già stato fatto perché ci sono già

varandrà rivalutato

nel caso un giorno si rilasceranno

nuovi demon, nuovi agent

e così via dicendo

ok?

perfetto

allora

questo è come gira il tutto.

E... vedere questa cosa qui anche poi dopo facciamola nel pomeriggio dopo pranzo quindi facciamo continuiamo con l'esercizio ok ultima cosa voglio dirvi questo solo agent assegnati prima quando

abbiamo visto come lui si va a calcolare la coda degli agent ecco qua quando lui va a farti la query su la si agent

cercando tutti gli agent attivi

la cui periodo next è minore uguale a si z ecc

lui fa

versa server uguale se stesso

quindi il demone, quindi nel nostro caso esempio

va a cercare demand e score ap

versa server

perché esistono poi un tipo particolare di agent

che vanno a finire sempre qua dentro

sulla seagent

ma che non sono agent pianificabili

sono chiamati batch agent

sono praticamente degli agent che si riconosce perché hanno questo qui sulla sea periodo, xxxxxxx.

A di là che qua trovate che alcuni sono valorizzati, ma in realtà solitamente non si valorizza,

è per questo quindi la sua server rimane a null ed è per questo che lui ci mette questa condizione.

Sono degli agent che magari servono per fare una operazione one shot.

Supponiamo che magari sono su una maschera applicativa.

Quella maschera applicativa ha qualche funzionalità che richiede di eseguire un'operazione, una tantum, quindi non pianificata, una tantum.

Però quella operazione, quella funzionalità, quindi tutto a discrezione del programmatore è quello che sto dicendo, non è che una cosa

che fanno tutti, il programmatore magari stabilisce

è stata fatta in analisi

tutto quello che è stato fatto, insomma considerato che

quell'operazione è pesante ed è bene

che venga eseguita sul demone

però non è che vuole

dare l'honor all'utente, ah vabbè ma adesso

vatti a creare l'agent, lo attivi

lo pianifichi, capito? Non vuole dargli

questo honor, però dallo stesso tempo vuole che quel carico di lavoro passi al demone.

Può creare al volo, poi vediamo come, un demone, un agent tipo batch agent.

In quel caso viene scritto sempre qui dentro la si agent, con server a null,

e in pratica il primo demon tipo siagent che passa

che gira in quel momento

se lo prende in carico e lo esegue

ok?

quindi esegue sempre comunque

questa classe che è scritta qua dentro

sono chiamati agent di tipo batch

quindi non vengono pianificati

vengono semplicemente scritti su altri agent

eseguiti e poi

basta, poi muoiono

quindi volendo si può anche eliminare

questa riga

in realtà la riga si elimina sempre

se non si elimina

se non si elimina è perché è andata in errore l'esecuzione

tutti questi qui che vediamo Si elimina automaticamente, se non si elimina è perché è andata in errore l'esecuzione.

Tutti questi qui che vediamo, non tutti, quelli di xxx,

quindi tipo questo qui, si chiama run batch, però non è un batch, perché vedo che sta nn, di tutti quelli che sono x sono rimasti qui perché sono rimasti andati in errore.

Quindi in quel caso la riga rimane per indagini, insomma.

Ok.

Questo è quanto.

Allora.

Ehm...

Possiamo fare un ripirogo sullo stack su cui lavorano gli agenti, quindi agenti, money, server, software?

Sì, come no, certo, assolutamente.

Allora, ricapitolando, innanzitutto noi sulle nostre ambienti, insomma, ad esempio questo di formazione, abbiamo delle web app e queste sono censite sulla tabella si web app.

Alcune web app possono essere utenti e alcune web app possono essere demoni,

a differenza che sull'utente ci accedono gli utenti sulle maschere di login, eccetera,

sul demoni invece le maschere applicative non sono accessibili e svolgono queste web app e solo lavoro di background, eccetera.

Queste web app demoni possono compiere, quindi,

un determinato lavoro in base ai demoni server

che li vengono creati.

Quindi, ad esempio, nel nostro caso abbiamo creato

questo demoni AP, l'abbiamo associato alla web app 166

e questo demoni abbiamo scelto di crearlo di tipo cagent.

Quindi questo demone qui avrà il compito di eseguire degli agent, però io qua potevo

dargli anche un'altra tipologia, sia l'HL7, syscadreport, cwebservice,

ognuno di questi

agent, tipi di

demoni,

sono rilasciati

e previsti da BTU.

Ad esempio, prendendone

un altro, il

demone syscadreport,

è un demone rilasciato da BTU e se io mi vado a cercare sulla tabella si demone

tipo con tutte le tipologie possibili demoni è associato alla classe demone stampe se io me la

prendo che cosa farà questo demone una volta che l'avrò creato? Avrà un metodo run, eccolo qua, che fa una query sulla tabella della coda delle stampe e fa le stampe.

E segue.

Tam, tam, non leggete qua agent non è un agent, però lo abbiamo chiamato così.

Comunque, il rischio è questo un demone e stampa.

Però non l'abbiamo chiamato così.

Comunque, il riscosso è questo è un demone e stampa.

Quando ha finito, aspetta 5 secondi,

rifà un'altra volta la query per vedere la coda delle stampe,

c'è qualcosa? Sì.

Stampa, e così via dicendo, d'accordo?

Sempre, ininterrottamente.

Oppure magari, che ne so, il demone del workflow.

Se avessi creato un demone del workflow, questo è il demone, la classe che sarebbe stata eseguita, metodo run, che fa, anche qui, fa una query, si popola una lista dell'attività che deve eseguire, quindi fa questa query, ok.

e per ogni attività nella lista

esegue e porta avanti

il processo di workflow

quindi questo fa un demo, un demo è un ciclo while

implementato in un metodo run

quale classe deve invocare

il

areas

dipende dall'associazione

di demone tipo, quindi qua abbiamo

una tabella che ci dice il tipo di demone e quale classe

corrisponde

nel caso di agent manager, di classe agent manager, quindi demone di tipo C-agents,

l'agent manager che cosa fa sul suo metodo run? va a popolarsi

eccolo qua nel suo run

la lista degli agent che devono essere

eseguiti

per ciascun agent

che è stato pianificato per essere eseguito

lui ci invoca poi

il metodo run che va a ricavarsi

dalla tabella in questo caso

si agent

quindi la classe di questa di questa qui

in sostanza questa è la situazione che abbiamo web app demone che fa girare dei demoni e nel caso del

demoni tipo si agent fa a sua volta girare degli agent come avviene tutto ciò abbiamo detto che quando parte la web app una qualsiasi web app

viene startata la servlet web application metodo quindi in it dalle cose che fa per startarsi va va a verificare, a un certo punto si fa da sola una domanda e si dice da un certo punto si fa da sola una domanda e si dice

quindi metodo init, eccolo qua

sono

sono un demone, sono una web app

di tipo demone o di tipo bot

e questo lo vede perché lo va a leggere

sull'application properties

poi va a leggere sull'application properties poi se sì qual è la mia web app id e anche questo se lo

legge sull'application properties una volta ricavata supponiamo che 166 come sull'ambiente

informazione fa una query sulla si demone server where dswebapp uguale 166.

Quindi in buona sostanza si tira giù tutti i demoni che gli sono stati associati.

Stanno associati 1, 2, 3, 4, 5 demoni.

Che cosa farà?

Con questa lista,

eccolo qua,

crea 5 thread, sono cinque demoni un thread per ogni per ogni demone con questa sintassi da due punti codice del demone con un runnable fisso che è sempre lo stesso per tutte 5

cinque crea creerà un rune ball che si chiama da mon application ciascuna istanza di demo

un application nel suo metodo run cosa fa invece dice se sono attivo e tre demone in

al quindi ancora non ho fatto partire il demone, cosa faccio? Mi chiedo, ma io devo far partire ad esempio il demone flussi.

Ah, flussi.

Flussi è un demone di tipo siagens,

quindi va sulla sidemonetipo a cercare qual è il demone tipo si agent

è questo qui

la classe associata è agent manager

quindi come dicevamo

torniamo a quello che dicevamo prima

lui qua schedula un altro thread

che si chiamerà adesso di due punti

il cui runnable però è agent manager

quindi la classe classe scritta qua

dentro e che puoi fare nessun lavoro ma più chiaro si no mi aveva confuso un po questa parte dei dei

demoni società web app che avviano di fatto altri

mi sembra di capire, se ho capito bene stavolta

che avviano altri demoni

si, si

praticamente tu c'hai

come c'hai la

web app

e poi

ho il demonet server

che poi

a livello di java

dici giusto?

si

poi avrai da

underscore ad esempio il nostro demone che ci siamo creato

dem ap

che però è un'istanza di

daemon application

e poi questo daemon application

a sua volta

istanzia

di due punti dem app lo chiamano stesso modo però di a questa classe qui che legge

qui dentro manager che poi nel caso del nel caso degli agent questa qui appunto gli agent

dei demoni si agent a sua volta scadola agent farà poi un thread pool di 5 abbiamo detto dove avrà tutti i suoi agent 1 agent 2 eccetera

schedula gli agent in questo diciamo è il giro ok


-----------------
VIDEOLEZIONE 08 :
-----------------

Grazie a tutti. Grazie a tutti. Grazie. Allora, scusate.

Buon pomeriggio.

Buon pomeriggio.

Ciao, buon pomeriggio. Aspettiamo Mario e poi iniziamo.

Grazie. Grazie. Allora, ok, siamo tutti.

Sì, ci sono qui.

Eccoci qua.

Allora, riprendiamo dove c'eravamo interrotti.

Quindi avevamo fatto la configurazione di un demone, associandolo al web app 166 e l'attivazione di un agent.

In realtà la configurazione non è proprio finita, perché a volte, in generale, questo è uno di quei casi

per completare una configurazione

è necessario anche il riavvio di Arias

per far sì che la web app

recepisca le configurazioni

come in questo caso appunto

il fatto che abbiamo associato un nuovo demone

diciamo le casistiche

possono essere dove serve un riavvio

dove si può stabilire a priori se serve un riavvio o meno, sono solo due,

che sono l'aggiunta di un demone e il caso di modifica di un parametro di installazione.

Questi due due a priori

poi dopo il resto come dire dipende

magari dalla singola funzionalità

banalmente, quando siamo programmatori

se io creo un singleton che

alla prima istanza si tiene in memoria

qualcosa di una variabile

il singleton va ammazzato

Se non ci sta un qualcosa nella funzionalità che rigenera il singleton, l'unico modo per rifarlo è riavviare.

Quindi al netto di cose particolari delle singole gestioni, quelle che vi posso dire è

Demony, riavvio.

Parametro installazione, riavvio.

Modifica la installazione, riavvio.

Esistono due modalità per fare il riavvio di Arias, che sono

o il riavvio della singola web app,

utilizzando il manager del Tomcat, il pannello di amministrazione del Tomcat,

oppure semplicemente riavviando tutto l'application server, quindi cartella BIN del Tomcat,

cioè sta no, shutdown SH, startup SH.

Allora, il riavvio, sicuramente il riavvio dovrete riavviare, ad esempio, il vostro Tomcat su Eclipse. Sul cliente, diciamo di solito, sono cose comunque sia che fanno i sistemisti, a essere sinceri.

Poi, per carità di Dio, se voi siete tecnici quindi voi avete anche la voglio dire

il rabbi di application server che significa bisogna scaricarsi un client ssh ad esempio

putti individuare la cartella del tomcat e invocare i metodi shutdown startup del iscritti

shutdown e startup del tomcat ok quindi nulla di particolare però in sardegna so che gli script che anche per una questione di

comodità ci sono tutta una serie di

script di utility tipo quei classici

shutdown all, startup all

che fanno insomma un po' di ragionamenti

in più di questo di semplicemente

shutdown startup quindi sicuramente

quello dell'application server,

di come gestire l'application server sarà oggetto di corso

da parte del gruppo sistemistico,

penso ai vostri colleghi sistemisti.

Quindi, adesso non è quello il discorso,

non vi spiego come fare il ravvio,

anche perché appunto non lo so in tante mia sinceramente come funziona.

Però è per intenderci tra di noi,

bisogna ravviare il Tomcat e l'Areas.

E per avviare l'Areas o si ravvia l'Application Server, quindi tramite SSH,

scelle SSH e comandi, oppure tramite il manager del Tomcat.

Noi adesso per fare l'esercitazione sfrutteremo il manager del Tomcat.

Quindi non riavvieremo tutta l'application server ma solo quella singola web app

ok come fare innanzitutto bisogna individuare la web app la web app la 166 qui noi abbiamo

internet è caduto l'internet andiamo un po' ha fatto

su su

niente

ok

Quindi la 166, noi ce l'abbiamo su questa porta,

hostex, su questa porta, e questo è il contesto.

Quindi l'url, url, è questo qui.

Allora, sul demone dovete andare, adesso la vediamo,

sulla pagina di info, non su maillogin.du,

perché se ci andate su maillogin.du,

come vi dicevo, sulle web app utente non c'è,

non ci andate, non vi ci fa andare.

Vi da un 404.

L'unica pagina che avete a disposizione sul demone è questa, slash info.

Vi vengono chieste le credenziali dell'utente administrator, proprio administrator, che è proprio lui.

Quindi, diciamo, root.

proprio administrator proprio lui quindi sono brutto questa è una pagina come dice il nome stesso info che fornisce un po di informazioni riguardo questa istanza di aria ok ad esempio questa è utile

per individuare il tomcat se dovete fare un riavvio dell'application server dove sta quale parte del file system si trova il

server scritto qua poi qua alcune cose relativamente al nome che è stato dato l'application che quello

che trovate anche qua dentro è questo vua nome libbi dell'applicazione 66 e poi questo qui invece è un...

questo lo capiamo quando facciamo le modifiche al DB.

Comunque questo è un identificativo univo che ho generato in fase di startup.

Applicazioni, questo ci fornisce le stesse informazioni

che possiamo ottenere dallo Shift F12,

quindi l'installato.

E poi queste sono informazioni,

ad esempio, di qual è la base dati. Questo

è interessante, questo link, connessioni disponibili massimo in uso, vi fa vedere lo

stato del connection pool. Cosa ci dice, ad esempio? Ci dice che le connessioni massime

sono 50, quindi il pool massimo può crescere di 50 le connessioni minime sono 10

perché 10?

perché in questo momento sono in uso

due connessioni

e disponibili nel pool ne sono rimaste 8

se andate su dettaglio

vi fa anche un grafico

questo a voi va per scarica

non sta a fare niente

però vi fa anche un grafico che questo a voi va per praticamente scarica, non sta a fa niente, però vi fa anche un

grafico, ecco che vi fa vedere connessioni create sono 10 e sono rimaste 10, le massime che ha

creato sono queste quindi diciamo è sempre stato sotto al 10

e qualche volta vedete adesso zoom un po vedete qualche volta il minimo ha superato quindi forse un 11 l'ha fatto

questi questi piccoli picchi sopra la linea verde ok quindi questo vi fa vedere

mi fa vedere

lo stato delle connessioni

poi vi ha anche un po' di informazioni

il tempo per creare una connessione

eccetera

poi poi poi

qua non ce l'abbiamo

perché è una web app demone

però vi farebbe vedere

la sessione, possiamo vederlo sulla web app utente

la web app utente ha una maschera simile

speculare

no, ingo no info utente ha una maschera simile, speculare,

ingo no, info, fa vedere,

collego,

qui sul link sessioni utenti vi fa vedere,

eccolo qua la lista degli utenti che sono collegati in quel sistema e che cosa stanno facendo,

quindi vedete il controller che ha istanziato

quindi qua adesso c'è soltanto la login e il menu

perché ho fatto solo la login

poi

richieste in code

questa è la memoria, lo stato della memoria

IP

quindi massima e libera

la possibilità di lanciare un garbage collector

perché ci ho cliccato?

ok, ha fatto veloce

ok, quindi infatti ho una giornata a 6 giga

richieste in corso

tendenzialmente questo numero deve essere sempre a 0

cioè praticamente

vi fa vedere le richieste HTTP

ok?

cioè, o meglio, le richieste HTTP ok? o meglio, le richieste HTTP

che in quel momento stanno elaborando

quindi adesso non ce la facciamo a

riprodurre perché servirebbe una

richiesta insomma che richieda qualche

decina di secondi in maniera da darci il tempo di andare

qui, comunque vi fa vedere

la data, l'utente che ha fatto la richiesta

la sessione HTTP, il controller

e l'azione su cui si è fatta la richiesta e il thread.

Parametri VM vi fa vedere

tutte le system properties,

le system properties della Java,

quindi a prescindere vi fa vedere quelle.

Quindi ci trovate di più,

quindi la username, questa è un'altra inform informazione utile username dell'utente linux

un po di tutto fa vedere la versione della java

come a quel catalina beisa la versione della java qualche parte

eccolo qua java home

eccola qua, java home g181

eccetera eccetera eccetera

ok

web service lo vediamo più tardi

log, log vi fa vedere

esattamente la stessa cosa che potete vedere

con shift f12, quindi cliccate

volete vedere 500 righe, volete vedere 500 righe

volete vedere 1000 righe

e poi qua sotto c'è log

in realtà è un po' diverso perché i log che vedete

sulla info sono tutti log

quando fate Shift F12

invece è un po' più intelligente, vi filtra

i log del vostro utente

quindi non vedete tutti, qua se fate mille vedete tutti i log di tutti gli utenti che in quel momento stanno lavorando,

se catturate il log dal shift F12 vedete solo i vostri, quindi più mirato.

Informazioni GMS, se è attivo GMS, in Sardegna sicuramente attivo,

qua in un'informazione anche l'hanno attivato.

Quindi JMS, insomma i vari application server, anzi più corretto dire le varie web app, sono collegate tra loro per scambiarsi messaggi JMS.

Apriamo giusto una parentesi.

JMS è una cosa che noi utilizziamo per fondamentalmente condividerci le cache.

Cache di vario tipo, ad esempio il lookup, quando voi mettete, che ne so, mi apro una maschera con un lookup, io qui

scrivo fm.hub, la prima volta fa la query per andmi per andare a pescare il valo

azienda col codice fm la prima volta la

seconda volta è cache ok metto carica

perché ce l'hai in cache

e quindi lui dice lui mi mostra qua

azienda formazione gbfxmpi perché si è

cacheato che l'azienda con codice FM è questa, che non fa la query la volta dopo.

Si cache la descrizione.

Che succede però se io la descrizione la cambio?

Che la cache deve essere allineata.

Ovvio che se io cambio la descrizione dell'azienda su questo ambiente qui,

dell'azienda su questo ambiente qui la cache è mia

interna, quindi cambio

la descrizione e mi aggiorno

anche la cache, perfetto

però a tutti gli altri Tomcat, tutti gli altri application server

che non stanno qui, chi glielo dice

che ho cambiato la descrizione

si sparano dei messaggi

GMS, quindi avvisandosi

ah ho cambiato e aggiornato la cache

ah ok, allora me la giorno anch'io se vi interessa la gestione GMS viene quindi avvisandosi. Ah, ho cambiato aggiornato la cache. Ah, ok, allora me la

giorno anch'io. Se vi interessa la gestione

GMS viene attivata qui sul PSGX

Initializer.

Quindi quando parte l'applicativo di

GBF,

eccolo qua no, si

on init

init chi cavolo lo chiama?

ok MS runneval, ecco qua, PSGX initializer, questo qui, lo fa con un thread a parte, quindi quando parte PSGX,

reattivo GMS, schedula un thread che poi in parallelo avvia GMS.

Quindi si stanzia un serverino GMS, ogni web app si stanzia un suo topic GMS

con cui poter ricevere tutti questi messaggi.

E qua vedete ad esempio per cosa viene utilizzato praticamente,

ecco tipo lookup manager, questo è l'esempio,

quindi per la cache, per pulirsi la cache dei lookup,

pure anche profile manager, anche per pulirsi,

anche le profilature hanno una cache,

è sempre quella che dicevamo prima,

ma in realtà anche le profilature tipo azienda,

alcune profilature insomma sono cache, tipo i param parametri installazioni che dicevo prima eccetera le definizioni di abit

di bin insomma qua c'è un po di di cosette ma questa stessa cosa init jms a il blocco

multiple vi ricordate che ieri quando vi spiegavo facevo vedere i parametri riguardanti

le polisi di sicurezza, complessità della password eccetera

tra le opzioni ma non è attiva

in Sardegna c'è anche il blocco la login multiplo

per bloccarsi le postazioni sfrutta GMS

cioè GMS

senza GMS l'applicativo funziona perfettamente ci sono clienti che

gm se nemmeno c'è un attivo però in sardegna è attivo ok alla peggio non può succedere con

ripeto quella cosa queste fondamentalmente gm se ci si accorge che non è attivo per queste cose qui

però sinceramente nemmeno meno uno ci fa caso e se uno cambia la descrizione non è quella.

Però c'è e potete vedere qui dalla pagina di info, se la ritrovo, la pagina di info, le web application che lui riesce a raggiungere.

Ma in realtà qua lui non riesce a raggiungere manco una perché lui è se stesso vedete istante se stesso

quindi non raggiunge nessuno però questo ambiente di formazione quindi quasi sinceramente non ha

probabilmente neanche hanno configurato nulla insomma hanno

oppure no oppure perché stessa no no no per quanto è qua vi viene viene elencata le web app

vengono elencate quindi questo è 24 100 scuro 20 4 gente scuro

quindi lui ad esempio se vado di qua che questo invece il demone anche qua c'è la informazione gms

no lui ce la fa invece vedete il demone ci dice che riesce a raggiungere riesce a colloquiare con

quest'altro con quest'altra distanza del demone con con quest'altra istanza del demone, con quest'altra e con anche con l'utente.

Qua può forse andare a avviare o qualcosa del genere.

Va bene? Qualcosa andata storto.

Va bene.

Genera thread dump, serve per generare un thread dump.

Ah, già va, ok.

Quindi è utile spesso quando si mette in incrocio con le richieste in corso.

Supponiamo che c'è una richiesta in corso che girerà da 30 minuti,

dice che è successo, che sta a fare?

Eh, qua, quando è su richiesta in corso vi dice il thread.

C'è una thread dump e in base al thread name vi vedete che cosa sta facendo.

Ok? c'è una thread dump e in base al thread name vi vedete che cosa sta facendo. questo vi fa vedere se sono informazioni tra store

questo vi fa vedere se sono configurati

se è configurato un GKS

quindi un case store

dove sono contenuti certificati

non ce ne sta manco uno

configurato perché viene usata la cacerta

report installazioni vi fa vedere se ci sono

delle personalizzazioni sull'installazione

rispetto all'installazione base. Con personalizzazioni intendiamo cosa? Faccio un esempio banale. La pagina di login.

Si mettono, viene personalizzata, quindi vieneornato un look up cosa intende dire aggiornato proprio

quello che dicevo cioè se ad esempio qua ho utilizzo un look up sulle aziende io adesso

la grafica azienda vado di cambio la descrizione il look up deve essere la cache look up deve

essere aggiornata e quindi ve

lo vedete qua dentro quante volte è stata aggiornata la cache vedete che ad esempio l'azienda manco

manco ci sta va bene poi dopo indici full text lo vediamo quando facciamo già off e anche questo

seggiare lo vediamo più avanti ok adesso queste insomma le informazioni che vi possono tornare utili. Sul demone c'è un link in più che è quello che ci interessa che è questo qui, demoni gestiti. Questo è un link in più che ha soltanto la web app ovviamente di tipo demone, c'è scritto 4.

vi vengono elencati i demoni che sono stati associati

quindi vedete che adesso

non ci sta il mio demone demma p

perché l'ho creato

ma non avendo ravviato

la web app nemmeno lo sa

e perché non lo sa?

perché l'abbiamo visto questa mattina

la lista dei demoni

demoni viene caricata in fase di startup dalla web application, quindi in fase di startup.

Lui dice sono un demone? Sì, ok, mi faccio la query per tirarmi giù i demoni. Una volta

che si carica questa lista di server, è finito. Per lui, demoni che deve partire in questi

istanti sono 5, io 5 ne faccio partire. Ti aggiungo il sesto, devi riavviare, rifarà la query, ne troverà 6, a quel punto ne farà partire 6.

E qui vediamo un po' quello che ci dicevamo oggi, vedete che thread daemoni ci sta daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemtmp, daemt, daemtmp, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemt, daemmp, d, amc stampe, d, amc stampe, d'accordo?

Qua rivediamo quella visualizzazione di thread che dicevamo prima.

Se uno di questi demoni tipo sia agent, quindi solo loro ovviamente,

se uno di questi demoni fosse stato in esecuzione un agent,

l'avremmo visto scritto qui a fianco.

A fianco ci sarebbe stato il nome della classe agent,

quindi quello che troviamo,

quasi agent come la secsec.

Ok?

In questo momento non stanno facendo nulla, non hanno agent da far girare.

Ci sono domande qui esiste anche un dettaglio del demone agent capire quali

agent quali processi quali tre soli esecuzioni nel demone agent

e quali sono stati attivati se quelli che stai seguendo lo vedi qua adesso non ce

ne sta nessuno quindi quelli che seguo effettivamente qua quelli attivati cioè

quindi quelli che li sarebbero stati associati sarebbe la pagina dove oggi eravamo su quando

abbiamo fatto l'attivazione quindi configurazione si sentiva proprio a quelli

in esecuzione no a tutti qua solo qua verso qui

poi lo vediamo ci sta anche un monitor è però tanto comunque il risultato sarebbe lo stesso

perché in questo momento non è a nessuno in esecuzione

magari adesso ci facciamo da quando lo possiamo vedere solamente informazione

però adesso quando vediamo come si crea come si scrive un agent lavorerò in

locale in locale lo possiamo vedere

ok altre domande

qual è dove il riccardo per far vedere gli agenti in esedizione

ecco qua demoni gestiti a demoni gestiti polin che p no 44 vuol dire che sono

sono quattro va bene quindi questo adesso noi innanzitutto facciamo sì che diventerà che

diventino 5 perché noi vogliamo associarli intanto il nostro come si fa come dicevo noi

scegliamo l'opzione più facile più pigra noi andiamo sul manager ok

questo tomcat ci chiederà le credenziali del tomcat

questa è la nostra web app da emone stop

attendiamo pazientemente

lo stop e poi facciamo start

non fate mai reload

perché reload fa stop e start di seguito

se mettete in mio caso che c'è un errore durante lo stop

e c'è un errore durante lo stop o c'è un errore durante lo start

voi state lì bloccati

non sapete se si è bloccato lo stop o se si è bloccato lo start

con il jbf manager che vediamo

questa è un'altra web app

che è utilizzata dall'installer per fare l'installazione

l'installer è stato oggetto di un altro corso

comunque in generale l'installer insomma è software come vi dicevo che effettua il deploy

delle web app sotto i tomcat e utilizza questo JBF Manager come ponte per fare la

creazione del UAR sul Tomcat.

Quindi non ha valore o senso, cioè non ha

funzionalità per aria, una volta che

installato, non dovete mai

ravviarlo. Grazie. e ci metterà un po'

per fare la start

ovvio sapete che insomma

nel momento in cui lo avviate

se lo avviate una web app utente

ovviamente è dato un disservizio

no? perché

gli utenti non potranno lavorare su quella web app

se avviate una web app demone

tendenzialmente il disservizio

è più limitato, perché? perché

appunto non è trasparente per l'utente

il lavoro dei demoni, neanche se ne accorgono

se lavorano o meno

ovvio che se noi fermiamo un demone per due ore

se ne accorgono, perché magari ad esempio

avete fermato un demone dove ci sono le stampe

le stampe non escono mai

però

di solito l'avvio di un demone

richiede magari 4-5 minuti

e poi 4-5 minuti

se ne accorge nessuno Grazie. fatto, started application of context path demone

quindi torniamo adesso qui sulla nostra pagina di info.

Stato avvio applicazione 231.

Ecco vedete, demo il gestito è su 5.

Clicchiamo ed eccolo qua il nostro dem ap.

Va bene?

Tutto qui.

Un secondo solo, scusate.

Quindi tutto qui, insomma.

Per quanto riguarda il giro di creazione, configurazione di un demo e un agent,

insomma, così abbiamo completato.

Con il riavvio, adesso il nostro trattore demo sta girando ed eseguirà, quando pianificato,

quell'unico agent che li abbiamo associato, li abbiamo attivato.

Per vederci un po' magari di altre tabelle di eMonitor,

andiamoci a vedere queste due tabelle

che si chiamano

dai

se le

star from

si underscore

esecuzione

che cos'è sta tabella?

esecuzione che cos'è stata bella o esecuzioni ogni volta e un agent viene eseguito

base alla sua pianificazione l'esecuzione viene tracciato

su questa tabella quindi viene dato un id di esecuzione viene scritto qual è l'agent bel tipo

come dicevo può essere classe o plugin poi vediamo questo vuol dire plugin poi più avanti quindi

questo è il diciamo il codice dell'agent il plugin il nome del server che ha fatto girare quell'agent, la classe legata all'agent, data di start dell'agent, data di stop,

e questo non ha senso soltanto su alcuni tipi di agent che fanno magari delle operazioni,

nelle tracce magari ho fatto l'operazione 1 di 100, 2 di 100, 3 di 100, alcuni lo usano, altri no,

di 100, 2 di 100, 3 di 100, alcuni lo usano, altri no. L'utente di profilatura dell'agent, la descrizione e questo max fa scopa con current. Sì esecuzioni, poi, per esempio se mi prendo magari l'esecuzione questo qua, solitazione dell'agent

l'agent di solitazione, questo è l'id, con questi id di esecuzione io posso interrogare

esecuzioni

log log where

l esecuzione

non ho copiato col cavolo

ma ho copiato l'id

e nell'ambito di quell'esecuzione

mi fa vedere

il log che ha generato il log potrebbe essere un log di errore, oppure anche informativo, sono degli errori e quindi ci mette uno stack trace, in altri ci scrive soltanto avvio, fine. Va bene? Vi sono queste tabelle qui per vedere che cosa succede.

Queste tabelle poi, volendo, si possono consultare qui.

Agent log.

Cercate sempre un demone. Potete cercare tutti i log generati da un demone, oppure generati da un singolo agent.

Mettiamo tutto senza filtri.

Va bene, e qui consultate i log.

Monitor agent invece vi fa vedere una situazione dello stato attuale.

Ora considerate che qua è un ambiente di formazione, quindi a un certo punto le attività sono state troncate,

quindi alcune magari risultano in esecuzione, ma in esecuzione non sono, ok?

Perché magari in quel momento, pum, sono state troncate.

poverette

uccise e ammazzate

questi sono tutti i batch agent penso

no, qui no

comunque questo potete vedere esatto

la visualizzazione

le visualizzazioni

le esecuzioni in quel momento

ok? in questo momento

quindi diciamo qua più che altro in questo momento la fotografia di quando hanno fatto il dump

c'erano questi agent

in esecuzione

visualizza tutte le esecuzioni vi fa vedere

anche penso quelle secondo questa visualizzazione vi fa vedere esatto vedere anche quelle completate

ok non solo quelle in corso quindi fa vedere presente quella vi visualizza quella tabella di esecuzioni che abbiamo appena visto.

Va bene?

Ok, ok, ok. Ok, queste le tabelle le abbiamo già dette.

Quali sono?

Si debbano i server, si agenzie, web app e così via.

Finito.

Quindi parte configurazione, manutenzione eccetera adesso andiamo più nella ciccia cioè

vediamo un attimo se noi mettiamo caso vogliamo creare un nostro agent come si fa un demone quello

quello che ve lo posso far vedere cioè non lo facciamo perché tanto un demone sinceramente

l'ultimo demone che sarà stato fatto su Arias

sarà 5-6 anni fa

non sai che se ne fanno

però ve lo dico

ma tanto non è nulla di trascendentale

perché tanto basta

semplicemente andare a vedere

su altri demone tipo

prendermi ad esempio il demone delle stampe

che avevamo preso prima

vedete che la classe di 102 righe prendere esempio il demone delle stampe che avevo preso prima

vedete che la classe di 102 righe quindi alla fine che cosa bisogna fare bisogna semplicemente creare un demone che estende questa classe abbrac demon tutta

la logica la mettete nel metodo run

in questo caso fa una query e poi dopo lancia

chiama Argent ma non è un Argent

comunque lo lancia

infatti lo stanzia lui da solo

per fare poi dentro la stampa effettiva

ok?

quindi questo è un demone

quindi un giorno se volete creare un nuovo demone

vi create una classe java

estendete abstractdemon

nel run vi implementate la vostra logica

e poi

lo censite qui dentro

nella sitemon etipo

fine

in realtà anche l'agent è molto

semplice, però questo lo vediamo perché

l'agent è una cosa un po' più

cioè quella per l'agent vengono fatti

diversi

ok? per diversi motivi

quindi però anche l'agent

alla fine è quello

si crea una classe java, si implementa una particolare

interfaccia che nel nostro caso però sarà

questa, agent interface

e anche qui alla fine come per i demoni

semplicemente il metodo run

si va a implementare la propria

logica, anche qui poi

la nostra agent deve essere censito

all'interno della tabella si agent. Solo

in quel momento poi l'agent

diventa utilizzabile.

Ok? Quindi adesso

facciamo questo però ci spostiamo nel mio

ambiente locale ovviamente.

Quindi

iniziamo nel creare l'agent.

Se c'è una domanda ditemi.

Allora l'agent lo creiamo sempre nel nostro package.

Quindi nel nostro package si sar facciamo new.

New package magari. Agent anche cesar agent creo

una classe che magari ma chiamiamo

cesar agent

dobbiamo implementare l'interfaccia

agent interface

agent interface

e implementiamo i suoi metodi

allora e implementiamo i suoi metodi. Allora, il metodo dove metteremo la ciccia è questa qui.

Ok?

Fun.

Ci vengono anche effettati questi due metodi, idAgent,

possiamo assegnarci, e userInterface.

A che servono?

all'user interface è molto utile

perché ci passa l'utente di profilatura del demone

l'abbiamo visto prima

quindi sicuramente qua dentro se dobbiamo fare

il service manager save

un update

bisogna prendere una connessione, ci serve l'utente

quindi l'uservante ci serve

l'idagent invece serve

poi vediamo come

per scrivere i log, quindi quei log che vi stavo facendo vedere.

Se vogliamo tracciare i log, quando andiamo a scrivere sui log, oltre al messaggio, al livello, se è error, warning o info, bisogna anche dirgli, sì ma tu che sei?

Sei l'onidagent x.

E nel run ci mettiamo ins, quello che dobbiamo fare.

Supponiamo, ad esempio...

Vabbè, tanto io direi che...

possiamo farci

creiamoci, che ne so, facciamo un agent

che ogni volta che gira

crea un nuovo

corso, ok?

quindi lavoriamo sempre sui corsi

come si fa? quindi

primo step

prendo una connessione, connection manager, abbiamo detto, punto, get connection, utente, e ce l'ho, perché ho UI e' out 999

poi qua facciamo

mi crea un nuovo corso

service manager

anzi no, prima del service context

devo ricordare, devo crearmi

service context

sull'utente

sempre wii

su questo context ci metto

la mia connessione

a questo punto posso crearmi il mio bin vuoto, object

course.class.getname null context e questo mi dà il mio binder.

Faccio corso, set, value, quello con tre parametri.

Ode, codice del corso.

Il codice del corso ci mettiamo una cosa, abbiamo detto del tipo, facciamo come wizard, quindi era corso, riprendo un secondo, wizard, ok,

Non so, non si prendo tutto.

Corso faccio, aspetto la descrizione, ad esempio corso ci metto

agent

underscore

che è sempre la nostra sequence

e poi lo salvo

fine niente di più

poi facciamo con action commit

Ok? Questo è il nostro agent. Gira, prendo una connessione, vi lascia una connessione al è un service context e poi tramite service manager crea un codice corso

con agent underscore

è il nostro progressivo

quindi

a ogni interazione dell'agent dovremmo vedere questo

su nostra tabella dovremmo vedere un record nuovo

con queste informazioni qui

ok fino adesso adesso vedere un record nuovo con queste informazioni qui ok finesso

adesso dobbiamo censire il nostro agent all'interno della si agent come possiamo fare sempre tra allora

fate potete fare una insert sinceramente direttamente sulla si agent ok detto però

faccio vedere il metodo un po più più più carino se fate una insieme dentro la si agent copiandovi

un record che già esiste va benissimo però il record il modo più ortodosso è questo andate sul

monitor sviluppatori

Quindi andate sul monitor sviluppatori, quello che vi ricordate avevamo utilizzato per creare i parametri, quindi sempre stessa cosa, selezioniamo l'applicazione, nel nostro caso stiamo lavorando su una grafica centralizzate e poi qui avete altro agent.

Nuovo.

E qua, create il vostro agent.

Vedete che in questo caso il numerello vi viene staccato descrizione agent di formazione abbiamo detto di tipo classe per adesso e qui ci mettiamo

il pat completo della nostra classe java quindi si sa al punto agent punto di ragento

conferma fine

adesso se io vado sul mio

db, sul locale

quello che fa questa

questa maschera non fa altro che fare ecco connessione pure sul localhost incredibile

quello che succede che fa quella maschera semplicemente where

order by

e creare questa riga qui.

Quindi il nostro agent di informazione di default ovviamente non attivo e con la classe di esecuzione questa qui che ho indicato.

Siamo fin adesso?

ora ora

devo attivare questo agent e associarlo ad un demone abbiamo detto

ok

vediamo un po' qua dei demoni

ce ne saranno e ce ne saranno pure parecchi

senza che mi sto

a creare un nuovo demone

questo è un ambiente di sviluppo

quindi tutta roba un po' così

però

io ho questo, questo è il mio

di Simlucid

vediamo cosa c'è ad oggi associato a questo demone

perfetto, niente.

Quindi questo è quello che voglio usare.

Però devo vedere se questo demo è attivo.

È attivo ed associato alla web app 999.

Perfetto.

Quindi adesso io cosa faccio?

Guardate, intanto prima di tutto facciamo quello che abbiamo fatto questa mattina,

quindi adesso vado sulla mia, sul mio localhost.

Configurazione, sistema, agent attivazione, mi cerco il demone lucidi, eccolo qua, e gli attivo il mio agent che si chiama,

li attivo il mio agent che si chiama, eccolo qua, agent di formazione, vedete, lo vedo qua in lista,

perché è nella T-agent, non è attivato da nessuno, quindi lo vedo qua in lista tra i disponibili.

Lo prendo in gestione e gli dico che deve, lo stato deve essere attivo,

la data inizio è, lo metto nel passato, quindi deve partire subito. Facciamo partire adesso 14.51,

facciamo partire ogni minuto, tutti i giorni, ogni giorno.

confermo

ok lui di default

perché 14.51 è passato

quindi me lo mette ovviamente dice 14.51

nell'inizio, ha ragione, quindi dice

le prime 14.51 disponibili è domani

ha assolutamente ragione

quindi rimetto

14,55

intanto è giusto per

ok

15,15

no forse perché lui comunque di default va sempre

comunque qua c'è il tasto bello, forza schedulazione, e lui lo mette adesso.

Bene, così, siamo pronti.

Quindi, il discorso è, lo facciamo partire subito, ogni minuto.

Ok?

Quindi, abbiamo fatto il censimento dell'agent, l'abbiamo associato al demone,

ora bisogna, quindi lato web app abbiamo finito la configurazione,

ma c'è una configurazione lato eclipse, diciamo.

Quindi, come vi dicevo,

il nostro application properties,

dobbiamo dirgli che il tipo applicazione è B,

quindi bot, quindi questo mi permette di usarlo sia come demone sia come utente.

Come webappd io ci metto quale?

E' quello associato a questo demone che voglio far partire, che abbiamo detto essere 999, un 39.

Questo è quello che mi metto qua dentro.

E riavvio.

e riavvio sentiamo pure un po' di punti debug così vediamo un attimo che succede

un punto di debug qui

metto un punto di debug

qui metto un punto di debug qui

e metto un punto di debug stop e riavvio Grazie.

ecco qua, web application

dice il tipo server, l'ha letto e b

si recupera anche la web app, abbiamo messo 999

e quindi ci fa la query che dicevamo

con questa query ci popola una lista

eccolo qua, il demone che deve seguire

quindi popola una lista. Eccolo qua, il demone che deve eseguire.

Quindi,

che cosa fa dopo?

Per ciascun demone nella lista,

schedule, crea un istante di demone application e ci schedula un thread.

Quindi qua siamo su demone application,

dice lo stato S? S 3 da monennal si ok

il nome da amone che agent manager perché il nostro di

da monessim lucide di tipo

da monessim lucide di tipo

agens quindi la classe agent manager la istanzia

ecco qua un'istanza di agent manager e poi la schedula su un nuovo thread

nuovo thread

ecco che adesso siamo è partito agent manager quindi metodo run per lui che andrà a controllare se ci sono dei degli agent da eseguire quindi farà un po di

cose se fa start

si salva un'esecuzione, ha aggiornamento un'esecuzione, se ci sta però al di là di questo, che fa? Ecco qua inizializza il thread pool di 5 che dicevamo, qui processa gli agenti in coda, cioè che fa?

gli agent in coda, cioè che fa?

Va a fare la query per andare a cercare se ci sono degli agent da eseguire.

E esegue la query, in questo momento gli dice che deve eseguire

il nostro agent, approvere un pelo.

Va, sono le tre.

Quindi adesso, ah, sa che deve eseguire questo agent

il nostro agent

ci siamo creati noi

mi metto un punto di debug pure di là

si sarà agent, mi metto un debug

qui run

poi

ed fa

dice per ogni agent che devo processare

prepari log e tutto il resto

c'è log all'esecuzione

crea l'agent inteso come istanza

quindi adesso qua ci avrò agent to execute

c'è le informazioni dell'agent

che l'agent si sarà agent

inizializza un po' di cosette

tipo ad esempio qual è il codice

qual è la descrizione

si tira il periodo eccetera, e poi finalmente lo manda in esecuzione.

Crea un executor a partire dall'agent, eccolo qua, executing pool, thread pool execute, quindi lo schedula il mio agent all'interno del thread pool, quindi adesso se faccio play, ecco il cavolo che è successo, ah eccolo qua, scusate sta qua, non mi ci si è fermato, eccolo qua, vedete è partito il mio agent all'interno del thread pool dell'agent manager, si è bloccato tutto

quindi abbiamo adesso il nostro agent

che sta girando

che farà

prende la connessione

salva

commetta

fatto

qua adesso siete tornati in debug su demon application che

da mon application comunque sia questo continuerà sempre a girare però adesso che

dice dice stato s si tre demon però è diverso da un al perché l'ha già

schedulato quindi basta di qua e disattivo no e attivo il thread da monesta girando si

basta, di qua è disattivo o no?

è attivo il thread demone sta girando?

sì se abbiamo attivo il thread inizializzato

verifico anche se il thread sia in esecuzione

se così non fosse decremento

il numero di tentativi di avviare il demone

se aggiungi il numero massimo di tentativi si disattiverà il demone

ok, questo è un polling per verificare

se il thread che sta girando

sta anche funzionando.

Quindi se non sta funzionando, se non è alive, lui prova a restartarlo.

Questo è per se un thread muore.

Se un demone nel thread muore, ovviamente il demone si ferma.

Quindi questo è un modo per dire, se per qualsiasi motivo, perché un'eccezione di inaspettata,

il thread è morto, provo a riseguirlo per 5 volte.

Se non ce la fa, do errore, mando la mail all'admin,

ecco quando prima avevamo visto, questo è uno degli esempi

per cui viene mandata la mail degli admin e poi va avanti.

Nel nostro caso è tutto tutto ok quindi fa semplicemente uno slip adesso 10 secondi

prima di ricontrollare nuovamente sono attivo non sono attivo sono attivo ma sono

bloccato eccetera che quindi siamo un application farà sempre queste cose qui

vedete mi è tornato un'altra volta

in dosis da ragged

perché l'ho pianificato per partire ogni minuto

quindi adesso ogni minuto mi entra qua dentro

quindi qua faccio play

e tra un minuto mi rientra

nel frattempo

andiamo a verificare la nostra bella tabella

che era questa qui

qua agent 18 agent 19 una tra poco franca agent

agent 20 ok

qua vediamo adesso perché siamo in debug

quindi non riporta proprio preciso però insomma

ogni minuto adesso lui farà

agent 18, 19

eccetera

non è precisissimo perché ovviamente l'abbiamo fermato

in debug

se io vado su

tabella select star from esecuzioni, eccolo qua, è partito già, a 120, 37, 4,45, ok?

Adesso ogni minuto lui parte, perché abbiamo schedulato che partire ogni minuto.

Ora nella nostra si esecuzioni, quindi abbiamo tre esecuzioni,

con le a data di inizio e di fine.

Tutto chiaro?

Ci sono domande?

Niente?

Ok. niente ok a posto

un secondo solo, scusatemi Ok, quindi questi sono gli agent, nulla di particolare insomma.

Allora, un secondo e voglio controllare una cosa,

interrompo un'imo la condivisione

se non si vuole fermare

come scusami?

se si vuole fermare

l'agente

dalla configurazione

l'unico modo è questo qui

l'unico

modo è questo quindi andare sempre sulla configurazione della gente e disattivarlo

poi si conferma quindi adesso si disattivo e confermo adesso perché

ho sblogato fatto logout aspetta un attimo cioè abbiamo ravviato mi ricollego qui

mi ricollego qui configurazione, avanzare

sistema, agent

attivazione

quindi per il mio demone

lo spengo, l'agent

metto disattivo

e confermo

finito, quindi sarà, rimane collegato perché non abbiamo

premuto il tasto scollega però lo stato n di lui niente a questo punto quando andrà a fare la query

l'agent manager cercando quelli adattivo vedete qua filtra per alcuni attivi s quindi me lo escluderà

e quindi non smetterà di andarmi ad inserire.

Ora volevo un attimo cercarvi come si scrivono i log, questo può essere utile, per quale appunto, quale si è fatta un'esecuzcuzione ora se noi andiamo a vedere sulla tabella si esecuzioni non c'è nulla ok perché noi non scriviamo log nostro agent

adesso voglio farvi vedere un attimo come si fa a scrivere sui log però senza che faccio la caccia al tesoro perché un attimo devo rivedere su un agent di esempio secondo solo

tutto Grazie. ok

ok

adesso lo metto nelle slide

c'è una seconda interfaccia

che si chiama

monitorable agent interface quindi

eccoci allora c'è questa Grazie. monitor ebole agent interface che ci dà questa interfaccina qui intanto meno reattivo il mio

agent anche se no facciamo una modifica poi meno reattivo allora quindi qui oltre agent interface ci mettiamo un bel monitor ebola

gente interface ci dà dei metodi in più più un metodo in più che agent context questo agent lo assegniamo come come variabile globale e qui possiamo fare ad esempio

context punto get

no, questo lo chiamiamolo in maniera diversa, agentcontext.agentcontext.getlogger.loginfo, Salvo il corso con codice corso. Vediamo che succede. corsi che abbiamo che sto mettendo mettendo con quest'utente quest'utente è quello che sulla si

da moni server

è

è marcato come utente di profilatura

ok?

quello che mettete come utente di profilatura

poi fa il lavoro

qualsiasi esso sia

quindi ad esempio qua facciamo un inserimento

e lui inserirà vedete come utins

è lui

quindi comunque qui ho aggiunto questo log

adesso ripristino

l'agent

e riavvio. Riavvio perché ho modificato l'agent, solo per questo qui, ho modificato il codice dell'agent, ho aggiunto un interfaccio. Grazie a tutti. Ok.

Ok.

Quindi le nuove esecuzioni dovrebbero, vediamo un po', 15,14, forse questa ad esempio già, eccolo qua ok

domande

tutto chiaro

grossomodo sì

ok nessuno dei demoni e sugli agent non c'è altro

da dire

vi esporto questa slide intanto ve la carico su Teams, la metto su podf, allora stampa,

la 0 4 di slide perché ho cambiato idea la faccio la faccio la quarta posizione

la quarta posizione che la faccio più avanti

comprato idea in corso di corso in corso di corso

allora corso di corso. Ok.

allora allora allora secondo allora

Allora XMPI, non alle modifiche al DB.

Vediamo un po' come si fanno le modifiche al DB, secondo me questo è un argomento che si riesce sicuramente a fare entro oggi, senza altri argomenti che

poi siamo costretti sicuramente a spezzarli tra oggi e domani, quindi invece questo qui

dovrebbe essere un argomento che riusciamo a fare entro oggi. Allora, datemi un secondo, prendo un bicchier d'acqua

e vi condivido lo schermo

un secondo

Grazie a tutti. Allora...

Liquibase

meglio modifichiamo il DB in generale

ma tutto ciò che sviluppiamo

ad esempio prendiamo

gli esempi che abbiamo fatto durante il corso

quindi abbiamo creato la tabella del corso

degli esami, degli studenti

abbiamo creato sequence, foreign key, primary key abbiamo fatto delle modifiche alla struttura dati.

Quindi dobbiamo, in qualche modo, abbiamo fatto ovviamente sul nostro DB di sviluppo, dobbiamo rilasciarle al cliente.

In Arias esistono ad oggi due modalità per esportare le modifiche al DB. Ve le spiego tutte e due, però la prima non ha senso nel vostro caso.

Perché? La prima è tramite XML di versione.

E perché secondo me non ha senso nel vostro caso?

Perché ha senso fino a quando, come noi, lavoriamo su un prodotto. Quindi dove

noi lasciamo diverse versioni, abbiamo quindi, in nostro caso, clienti che hanno una versione

del nostro prodotto diverse tra loro. Qualcuno è stata la 2014, la 2015, la 2014-1, la 2014-2,

la 2014-3 e così via dicendo. Quindi noi leghiamo le modifiche

al DB

alle versioni di major

o di minor

perché abbiamo tanti

rami di sviluppo paralleli

in questo caso il vostro ramo di sviluppo

avrete una linea di sviluppo

che è la linea del progetto

della Sardegna

sicuramente rilascerete cose

ma rilascerete cose su quella versione

quindi quando rilasciate un bug fixing

non è che rilasciate una nuova major

perché la Sardegna

qualcun altro deve installare quella major

no, un cliente è quello

ok, quindi

in quel caso lì, secondo me, ve lo spiego

ve lo faccio vedere ma

non ha senso ecco

quindi comunque tramite XML di versione poi vediamo come e in quel caso

fondamentalmente c'è un nostro formalismo con cui esportiamo le modifiche al db quindi che ne so la

creazione di una tabella all'interno di un xml

questo XML poi dopo viene passato sempre da quel tool che vi dicevo

della BFinstaller che fa le installazioni

e lui è in grado di passare quell'XML

quindi può trasformare quell'XML nella PLSQL per creare la tabella

l'altro modo è invece quello che secondo me servirà a voi

e che usiamo noi appunto per tutto ciò che facciamo quando

facciamo bug fixing noi non facciamo il smr di versione noi facciamo lì qui facciamo utilizziamo

questa libreria che si chiama liqui base è una libreria standard open source ben documentata anche

quindi c'è stato documento sul sito ufficiale, ed è quello che noi utilizziamo

ad esempio ogni volta che rilasciamo un add, un correttivo, quindi sulla stessa linea di sviluppo.

Una volta che noi stacchiamo una versione major, ad esempio, su quella major dobbiamo fare un bug fixing,

e quindi rilasciamo una, noi la chiamiamo add, ma sarebbe una patch, quindi correttiva,

noi rilasciamo in quel caso una modifica liquibase

poi quando stacchiamo

successivamente una nuova major

allora riportiamo queste modifiche

all'interno di questo XML di versione

perché appunto dopo noi

leghiamo tutto

scusate un secondo

mi chiamano un secondino solo

perdonatemi Ok, scusate, quindi queste due modalità.

Ora, il primo metodo lo vediamo, ve lo spiego, però, ripeto, non vedete poi voi,

però ve lo spiego, ve lo faccio vedere, però senza entrare troppo nel dettaglio,

mentre di questo vi faccio vedere proprio un esempio di esecuzione,

nel dettaglio mentre di questo vi faccio vedere proprio un esempio di esecuzione anche perché mentre questo qui non possiamo fare un non possiamo materialmente fare un test di esecuzione da modifica

al db perché richiede l'utilizzo di questo tool dell'installer ok per poter poi eseguire una

modifica invece le qui base vedremo che è molto più semplice e testi testare ed eseguire modifica

al db perché le modifiche al DB, la differenza è questa.

Mentre queste qui tramite XML richiedono l'installer,

le modifiche al Libby Base invece vengono eseguite in automatico dalla web app. Cioè la web app quando parte verifica lo stato sul DB ed eventualmente crea,

in tempo reale le modifiche Liquibase, ok?

Però le modifiche Liquibase ovviamente è una cosa che abbiamo introdotto di recente,

da 5-6 anni, ok?

Quindi non è che le modifiche Liquibase sono in grado di ricreare tutto lo schema di Arias, ok?

Però partono con la web app e quindi poi eventualmente la allineano.

Allora, quindi, intanto vi dico la prima.

Si fa sempre tramite monitor sviluppatori.

Facciamoci proprio la simulazione di crearci le modifiche al DB,

in entrambi i casi, sia con l'XML di versione, sia con Liquibase,

delle nostre modifiche, delle nostre tabelle che abbiamo creato.

Ora non proprio tutte, tutte, perché qua sta foreign key, primary key,

ci mettiamo una vita, magari lo facciamo soltanto di Eqs3, quella sulla Sard Corso cerchiamo di esportare.

Quindi esportiamo la tabella del corso, la primary key e basta, questo qui è un author table per aggiungere una colonna qui, quindi andrà insieme.

qui quindi andrà di insieme quindi monitor sviluppatori vado su localhost Allora, anagrafiche centralizzate nel nostro caso.

Prima di tutto noi in teoria dobbiamo fare... Che è successo?

Sì, è un legato a un'azienda.

Vi dovete loggare.

Vi dovete loggare. Dovete loggare vi dovete loggare

loggare

i paletti in effetti bisogna ci sta da fare il login per le versioni arias

flash

flash grafica centralizzata

ma non è questo

ah ok, bisognava essere loggati

non mi chiedete perché, però bisognava essere loggati

questo invece nel programma è un altro

un errore diverso

allora

tutti gli xml delle modifiche

al db vanno a finire

su tutti i progetti, questo vale, attenzione,

tutti i progetti, PSGlib, si anche acquistilo, tutti i progetti hanno un percorso sotto package padre,

repository modify

ok?

e poi ogni versione che abbiamo staccato

adesso siamo la versione

2015, ha un suo

XML

che è

contiene le modifiche di quella versione, quindi qua nella 2015 ad esempio ci sono state queste modifiche al DB,

che vedete sono tutto con formalismo suo, quindi questa qui cosa fa?

Aggiunta campo Sapersinkrypto, quindi dice che, senza entrare nel formalismo, però abbastanza si capisce,

sulla tabella questa, deve aggiungere una colonna questa, con questa dimensione, un label di tipo varchar e così via dicendo. L'XML adesso vedremo, non lo dovete scrivere voi, per questo non ci vado tanto nel dettaglio, perché lo scrive tutto in automatico il monitor sviluppatori.

vado tanto nel dettaglio perché lo scrive tutto in automatico il monitor sviluppatori però il monitor sviluppatori per poterlo scrivere questo xml poter velo generare o anche modificare ok

per poterlo fare deve sapere questo file dove si trova per dirgli al monitor sviluppatori dove dove il file, intanto mi copio il percorso, bisogna modificare il file debug.properties.

Ha fatto il corso con me e sa che il debug.properties è il file dove deve essere censito il db,

la base dati dove si deve collegare, d'accordo?

D'accordo? Quindi qui abbiamo anche la possibilità di specificare dove si trova il percorso del nostro, il sursa in realtà, dobbiamo soltanto dirgli, del nostro progetto.

Quindi nel mio caso è, proprio a livello di file system, quindi questo è il mio core space,

slash slash siank, perché è il nome del mio progetto,

siank, slash source, poi dopo si arrangia lui da lì in avanti

quindi slash slash source, gli manca questo

gli manca

poi dopo si arrangia lui a localizzare questo file XML

di cui vi sto parlando

riavvio. Grazie.

Ok.

Ok.

Un secondo sopra, scusatemi che... Ok. ok quindi adesso riapro il mio monitor sviluppatori

grafiche centralizzate, gestore versioni.

Se io faccio ricerca, vedete, mi fa vedere tutte le versioni che sono state create.

Quindi noi che cosa facciamo?

Ad esempio,

io faccio un secondo solo perché devo dire

no demoni Grazie. ok

allora scusami

quindi mettiamo caso che voglio rilasciare una mia

20

16

nuova versione

devo dargli il nome del file

cioè del file quale, dell'xml

quello che vi ho fatto vedere

adesso me lo copio da qui

nuovo

diciamo versione 2016

00

21600

conferma

una volta stabilita la versione

che succede?

che di qua

faccio un bel aggiornamento

refresh

forse ancora devo metterci qualche modifica

giustamente, ok, ho creato la versione

ha anche ragione

adesso ci devo mettere qualche modifica giustamente, ok, ho creato la versione, fa anche ragione.

Adesso ci devo mettere qualche modifica al db, quindi come fac compilazione oggetti, come si suggerisce la parola che fa, fa la compilazione di package, trigger, eccetera. E la modifica deve essere sempre presente,

perché quando uno crea le tabelle, modifica le tabelle,

crea le colonne, premere key, eccetera,

gli oggetti si possono scompilare.

Ok? Se io ho un trigger che lavora su una tabella,

quella tabella li cambio le colonne, il trigger scompila.

Quindi devo ricompilarli.

Quindi una modifica c'è sempre.

Creiamo la modifica che servono a noi. Ad esempio, voglio creare una modifica al DB

su questa tabella stasaroc corso. Di cosa faccio? Faccio nuovo, Oracle, dbms, oracle

db2, ignoratelo, come vi dicevo. Condizione addirittura qua si può condizionare per la versione dell'oracle, tutto l'oracle, tutto oracle,

e poi dico che tipo di modifica voglio fare, posso anche fare uno script tlsql a secco,

ok? Può addirittura delegare l'esecuzione ad una classe, quindi mi verrà chiesto di indicare una

classe java, poi magari faccio vedere che interfaccia deve implementare, lì dentro la mia classe Java faccio l'insert, l'update, quello che devo fare.

Non volevo fare, io sono delle opzioni, non volevo cliccare, ok.

Compilazione oggetti è quella modifica che abbiamo visto che già prevede.

Exportabelle è utilizzato quando la nostra modifica al DB non è di tipo struttura,

ma è di tipo dml, esempio, voglio rilasciare il mio agent, il mio agent l'ho inserito sulla siagents, oppure, anzi lo possiamo anche vedere, perché qua nel nostro esercizio abbiamo fatto una modifica che necessita una modifica di tipo exportabelle, perché sarebbe il lookup, ilup noi l'abbiamo aggiunto l'abbiamo aggiunto

il lookup sugli studenti dentro la si lookup

però devo esportare questo lookup

anche sui clienti, quindi è una seranoma modifie

tipo exportabelle

ok?

Fatemi chiudere un po' di roba perché se no questo via, questo via.

Siamo esportate le tabelle.

L'altra invece è tabelle, quello che ci interessa a noi.

Tabelle.

Vogliamo esportare una tabella.

Ma che cavolo sbaglio da che canto.

Tabelle, ok.

Tipo G esecuzioni

se vogliamo fare questa creazione

prima della compilazione oggetti o dopo la compilazione oggetti

ma generalmente prima

devo fare una tabella

quindi creo

creazione

tabella

corso

testo

facciamo creazione corso questo

facciamo creazione

filtri e ci cerchiamo la tabella che vogliamo esportare

Ok, fa in like. Ok, quindi ci fa in like, quindi ci va a vedere anche quella studente.

Noi ci interessa questa e vogliamo andare a esportare le colonne, le chiavi primarie e basta di questa, perché costrainte questa qui non ne ha,

cioè costrainte ma che gli entrano dentro, quindi qua c'è la possibilità di esportare anche dalla padre i costrainte verso la figlia,

ma noi al massimo lo facciamo qua qua sulla studente magari ha senso

sportiamo anche questa

colonne primary key, constraint verso

genera tabelle

in genere non si inserisce

il drop table preliminare

si, volendo

si può fare

prima di tutto fa il drop table

se la tabella è vuota

si

già così funziona

insomma

volendo si può mettere il drop table

ha fatto

perché è uscito fuori

Sard studente adesso

ah ok giustamente perché è uscito fuori Sard studente adesso?

ah ok giustamente perché siccome gli abbiamo detto

di esportare i costraint

questa è la tabella che va in costraint

con la corso studente

ok

esci

esci

Ecco vedete che fa? Lo genera lui l'XML.

Quindi ha creato la tabella saccorso con tutte quante le definizioni delle colonne.

Primary key, dicendo qual è la primary key, poi saccorso studente che digenera le colonne,

primary key e poi anche la definizione delle foreign key.

Conferma.

Esci.

conferma, esci, e adesso se noi rinfreschiamo questo package modify, Eccolo qua. Abbiamo un Sianc 2016 XML che se apriamo conterrà esattamente le nostre modifiche al DB.

Creazione tabella corso, creazione, questa qui, dov'è?

Vabbè no, questa qui abbiamo messo tutto insieme, abbiamo selezionato entrambe le tabelle nell'unica modifica.

scusate, abbiamo messo tutte insieme, abbiamo selezionato entrambe le tabelle nell'unica modifica, quindi il titolo è questo.

E come dettaglio crea la tabella stata al corso, la tabella stato al corso studente, le primary key e le foreign key.

E poi sotto ci sta la compilazione oggetti, che questa la mette di default. Ok?

Ok?

Ci siamo? La compilazione oggetti di quasi tratta cosa fa la compilazione oggetti semplicemente

compila i pegg e ci trigger eccetera per ogni singolo modulo rispetto a quelli che

sono gli oggetti censiti recensiti per ogni ogni modulo quindi si anche ai suoi oggetti che sono ad esempio questi

qui sautidi sa paziente la compatibilità eccetera

di sg lib ad esempio del framework ne altri

quindi abbiamo ad esempio lì si chiama psg ex

si chiama psg ex no si chiama ex

20 16 00

altri gbf, sutiti, security eccetera

quindi ognuno modulo ha i suoi

poi l'associazione tra

moduli

e oggetti

sta su una tabella che si chiama

R from C modify obj.

Eccolo qua.

Quindi qua è censito che l'applicativo magazzino, ad esempio, ha questo package.

Quindi oltre a rilasciare, a creare un package, lo si censisce qui dentro,

oltre a creare un package, lo sicensisce qui dentro,

in maniera che poi in automatico, ma soltanto per avere l'automatismo,

vada a finire qui dentro nella compilazione oggetti.

Viene fatta semplicemente perché, cioè viene fatta a prescindere.

Quindi quando noi rilascieremo sempre la versione 20.16,

facciamo una serie di modifiche al DB

come ad esempio qua si creano delle tabelle

eccetera. La creazione di quelle

tabelle potenzialmente

non è detto che lo faccia, potenzialmente

può scompilare, può

disinvalidare questi package

i package di questo modulo

e quindi sempre a prescindere

alla fine

il monitor sviluppatori

vi piazza questa

compilazione oggetti alla fine.

Poi fondamentalmente qua vedete che è un riferimento a...

Adesso cerchiamo questo file, anzi prendiamo questo un po' più recente,

2013, ok.

Sa compatibilità, sax trigger, se lo cerco, abbiamo detto che il package

si chiama SQL2013, eccolo qua, c'è il testo del trigger.

Quindi la compilazione che fa? Lo risegue, lo rilancia.

Ok?

Ok, grazie.

Prego.

Questa è una cosa interessante interessante una cosa nuova

che può servire

mettiamo caso che

c'è da fare una modifica

su questo package

e lo si vuole rilasciare come versione

ripeto, secondo me non ha senso

però, che cosa bisognerebbe fare?

beh, ad esempio

questo qui, che cosa

occorre fare? Beh, ad esempio questo qui, che cosa occorre fare? Allora,

stiamo sul nostro package modifai, creiamo, creeremo un package nuovo che si chiamerà

SQL21600, mi copio dalla 20.13 la versionee precedente me la metto sulla 20 16

faccio le mie modifiche

ok

e qua nel xml banalmente di solito faccio così tanto

ecco ci metti ci mettiamo

e ti perici

quindi così facendo abbiamo anche diciamo anche uno storico il

lavoro e sto procedure che sono state fatte cosa volessimo fare un rollback

questa è semplice farlo se se riprendere da un'altra versione precedente...

Volendo dovresti rilasciare una nuova versione, dove qua ci rimetti 20.13, però in realtà il rollback tu lo fatto soltanto, no in realtà non ce la sai a farlo

l'XML appunto

questo secondo me non ha senso nel vostro caso

questo XML di versione, perché appunto serve

quando rilasci una nuova versione

siccome l'installazione la fai con l'installer

e l'installer che poi si parsa

questo XML e trasforma tutte queste

indicazioni in chiamate, plsql eccetera, cosa farà l'installer? Dice adesso sul DB del cliente

è installata la versione 2015, qua c'è la versione 2016, ok, eseguo le modifiche 2016,

quindi migro l'ambiente in 2016. Una volta che lui si è marcato l'installer che ha installato

la 2016, questo XML per lui non esiste più. Quindi per fare una rollback tu dovresti fare la versione 20-17

nella 20-17 e mettere lì qui

di usare la versione precedente

capito?

ok

ma ripeto, è molto complesso

ma è complesso per un motivo, noi abbiamo un motivo

perché abbiamo 30 rami di sviluppo

cioè 30 versioni diverse

supportate contemporaneamente

ok? quindi è ovvio che

dobbiamo gestirle tutte queste cose qua

e nel nostro caso

voi avete una linea di sviluppo che procederà

verso il futuro

però comunque

è importante comunque conoscere

quindi no nel caso del rollback

no fai prima a rieseguire sul DB

a lanciare lo script su apri-tod

e rilanci lo script

corretto, insomma, per rispondere

a queste domande, però in realtà noi adesso vedremo

Liquibase, su Liquibase il rollback lo puoi fare

su Liquibase il rollback lo puoi fare, volendo

perché appunto

lì in realtà l'installazione non viene

fatta dall'installer, non c'è versione

la versione non esiste, ecco

è tutto molto più fluido, fondamentalmente

con Liquibase l'unica cosa che fai è creare delle tabelle, creare delle SQL e delle PL SQL qua invece è tutto molto incasellato, strutturato

preciso, quindi

io so in questa maniera qui che

la mia tabella stasarcorso è stata

ufficialmente rilasciata

nella versione 2016 di Sianc

questo è lo scopo che noi abbiamo

noi abbiamo bisogno questo scopo

perché gestiamo diverse versioni

nel vostro caso probabilmente

no, ecco, questo è quanto.

Però, quindi, nel nostro caso, magari quella flessibilità liquid base,

quando poi si ragiona a tante versioni,

può essere appunto un po' complesso,

aggiungere un altro tipo di complessità,

che è il capire, magari è stata bella,

in quale versione l'ho rilasciata,

in quale ramo di sviluppo sta.

Ecco, in questa maniera qui, con questo formalismo che ci siamo creati, lo sappiamo.

Basta cercare all'interno, questa hardcourso, lo cerco all'interno di questo package,

rifai,

e quindi andrò qua e dico, ah, è stata rilasciata con la versione Sianc.

Sianc. Sianc è in T16

ok?

poi un'altra modifica

interessante come vi dicevo è quella di tipo

classe, qui praticamente

dovete andare a indicare la classe

di query da questi quali sulla classe di della modifica al db la classe la modifica al db

non è altro che una classe java che implementa l'interfaccia ad esempio

no No.

Stavvicino dovrebbe starli in... implementa l'interfaccia db modify class interface.

Vedo alcuni.

ad esempio vedete ho usato molto spesso

recuperi dati eccetera

perché magari

si vuole fare qualche modifica al db

che comprometteva i dati che già esistevano

allora si faceva prima un recupero dati

e quindi

è una cosa un po' più complessa

quindi vedete che c'è stata tutta una serie di

per darsi un po' di libertà

fondamentalmente qui c'è questo metodo execute

qui dentro potete fare di tutto

qui ad esempio esegue delle insert, delle query e così via dicendo

la cosa

importante da vedere è questa che quando definite quando definite una modifica di tipo classe, andiamo a cercare, quindi qua dentro,

modifere positori modifai

ma niente questo è sempre come viene creata

questo è sempre che lo fa il monitor sviluppatori

ecco qua

potete mettervi dei parametri

ok adesso qua in questo caso

la classe non se la prende

però sono parametri

sono parametri comma separated

quindi param1, param2

ok?

volete ad esempio appunto

utilizzare magari la stessa modifica al db

però in contesti diversi

ok tutto qui poi dopo lui fondamentalmente cosa farà il framework a vedere questa classe

gli passa qua su set parameter quello che legge qua dentro su parameter ok quindi poi la logica per

cui dovete fare lo split per comma e vostra e poi in base a quei parametri vi passa anche

la connessione al db da utilizzare e poi invoca il metodo execute e voi potete fare quello che vi pare.

Quindi questa è un'altra modifica importante.

Compilazione oggetti, quella che crea in automatico, già l'abbiamo vista.

Export tabelle.

L'export tabelle ok questo è importante ok

perché ad esempio nel nostro caso vogliamo esportare vogliamo esportare

vogliamo esportare il nostro lookup SasaRstudent e lookup ora è importante questo

se io

supponiamo che devo esportare due lookup

adesso in questo caso è uno

mettiamo caso che ne avevo due di lookup

io non devo fare due modifiche di exportabelle

per dirgli di esportarmi il primo lookup e il secondo lookup

l'exportabelle è un tipo di modifica come la compilazione oggetti e una tantum, cioè per

versione. Quindi adesso noi abbiamo riusciato la 20.16 ok posso fare una modifica per una tabella,

una modifica per una tabella, una modifica per la foreign key, tutto quello che voglio. Però poi

la compilazione oggetti e l'export tabelle è uno solo. La compilazione oggetti la fa la fine,

che è quella che crea addirittura da solo. L'export tabelle lo dobbiamo fare noi un attimo

prima di chiudere la versione. Cioè, mentre le modifiche, ad esempio, di creazione della

tabella, la posso fare mano a mano. Oggi ho finito il mio sviluppo, la 26 la rilascio

tra un anno, mettiamo caso, dico una cavolata. Ho finito il mio sviluppo, la 26 la rilascio tra un anno, mettiamo caso, dico una cavolata.

Ho finito il mio sviluppo, intanto creo la modifica al DB per rilasciare la mia tabella, quindi il mio sviluppo in 26.

Perfetto.

L'export tabelle invece, essendo cumulativo, cioè fa l'export di tutte le tabelle di sistema di areas, quindi intendiamo si lookup per lookup up si che rad per le chiavi di profilatura

si agent per gli agent quindi lo fa lui in automatico ok non è che lo faccio oggi sapendo che la versione

la lascio tra un anno perché esporterei una fotografia di oggi quindi export abelle si fa una

volta sola poco prima di staccare la versione. Quindi quando è arrivato il giorno in cui bisogna lasciare la versione si stacca, si fa questo

export tabelle.

Non so se è chiaro.

Adesso vediamo che fa. Io confermo, mi dice export

portatabelle.

Eccolo qua.

Lui che succede?

Queste sono le tabelle che lui conosce.

Queste sono tutte tabelle.

Quando vi dicevo questo è rilasciato ad esempio

i tipi demoni sono rilasciati

dal laboratorio di sviluppo, gli agent sono rilasciati

dal laboratorio di sviluppo, i lookup sono rilasciati

dal laboratorio di sviluppo, ecco come si rilasciano

perché sono tutte tabelle

di sistema

ok

tutte tabelle di sistema, diciamole così, tutte tabelle di sistema dove al massimo noi dobbiamo inserirci

un record, quindi se voglio lasciare un lookup io inserisco il mio record sulla silucap e

poi lo esporto. Un'altra cosa importante, l'export va per modulo, quindi rispetto alla SILU-CAP, Sianc esporterà i suoi look-up, Acquisti esporterà altri look-up, GBF esporterà i suoi look-up e tutti poi vanno a finire nel calderone della SILU-CAP, dopo ci pensa all'installer e a mettere tutto insieme.

dopo ci pensa all'installer a mettere tutto insieme. Come fa a capire e a differenziare? In base al prefisso, quindi abbiamo detto che ogni modulo ha un suo prefisso, quindi ad esempio si anche noi stiamo creando tutti con sa underscore,

gbf sono quelle tabelle che abbiamo visto che sono si underscore, c web app, c demone.

Acquisti, ad esempio, è acu underscore, magazzino è ma underscore, e così via dicendo.

Questa associazione, perché è quello che poi vediamo qua, è all'interno di un file che si chiama che si chiama.ini config table

ad esempio prendo quello di Sianc

eccola qua, vedete?

qua è scritto, questo è cablato

quindi non è che bisogna toccarlo, questo è stato scritto

15 anni fa e questo

quindi dice tutte le condizioni con cui

capisce quali sono

gli agenti Sianc, tutti quelli che avranno

un codice da 35 miliardi in poi

quali sono

i tipi attach, sono tutti quelli che incominciano

per standard score, quali sono

i look up di Sianc, tutti quelli che incominciano per standard score, quali sono i lookup di Sianc? Tutti quelli che incominciano

con standard score e così via dicendo

ok?

quindi poi si seleziona le tabelle

che si vuole esportare

io non voglio esportarle tutte, esportiamo solo

la silu cap

si lo cap lo mettiamo tra l'export e segui

e vediamo che fa

è questo perché di b sviluppo mena esportirittura a 44, quindi non soltanto il nostro.

Vabbè, esco, confermo e andiamo a vedere adesso che ha combinato sul nostro XML.

Sul nostro XML qui abbiamo la nostra modifica per creare le tabelle stasar corso.

Sui nostri XML qui abbiamo la nostra modifica per creare le tabelle stasar corso.

Abbiamo qua sotto la modifica, sempre quella della compilazione oggetti, che ci ha messo lui.

Nel mezzo, ecco qua, nel mezzo, le tabelle di sistema.

Ora, lui ha creato un XML per ogni tabella di sistema ora lui ha creato un xml per ogni tabella di sistema quindi lui che ha fatto ha creato un nuovo package table 26 e dentro ci ha messo l'xml di tutte le tabelle di sistema in

teoria però io l'ho selezionato solo silucap quindi mi aspetto che mi abbia creato e popolato solo quella della SiluCup, refresh, un bel refresh, quindi adesso io qua ho table 2016, eccola qua, e infatti ok, ok, quindi eccola, va, effettiva, qua dopo uno dovrebbe andare a depurarla a mano, però va,

qua dopo uno dovrebbe andare a depurarla a mano quindi qua ovviamente

ha creato solo 26 perché solo quello

gli ho esportato

e qua dentro troverò tutti

i look up

che incominciano per standescore che lui

che a lui

non risulta

io abbia mai esportato

e ci può stare che ne siano 44

questo è un tipo di sviluppo mio locale quindi può essere che

non li ho mai esportati ok di tutta azienda osp insomma lui fa tutta

una serie di di cose tra cui troveremo sazard corso

la sard student lk era ok questa è la nostra

va bene dopo lui l'installer si partirà con questo XML e lo tradurrà in

questa qua

lo tradurrà in questo

insert into silucap

seconda domanda?

chiaro?

è un po'

ha un po' una sua complessità questo tipo di modifiche

cioè dal punto di vista delle modifiche

è complesso però appunto

noi perché abbiamo le esigenze

di strutturarle queste modifiche quindi non è tanto la questione motivo per cui c'è tutto questo

non è tanto la questione di rilasciare la modifica al db ma legare la modifica al db al rilascio di

una versione major minor quello che sia va bene allora dai facciamoci 20 minuti di pausa, 16.20, riprendiamo e vediamo le altre cose sulle modifiche al DB, d'accordo?

Ok.

Ok, va bene. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie

Grazie a tutti. Grazie Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie. Presente.

Perfetto.

Allora.

Secondo. ok ok

ok

ok e papapapam papapam

ok

allora condivido lo schermo.

Quindi come abbiamo appena visto prima della pausa, quelle relative al rilascio di un XML di versione che si può fare tramite monitor sviluppatori.

Però dicevamo che invece per tutte le altre casistiche, quindi dovrebbe essere quelle più attivanti nel vostro caso, noi utilizziamo la libreria open source Liquibase.

Quindi possiamo pure andarci

qui.

Vabbè.

e quindi ha tutto un suo sistema

è sempre basato su XML

comunque sulla definizione di un XML

questo è il link alla documentazione ufficiale

con cui sono illustrati tutti quelli che sono i formalismi

con cui andare a creare tabelle, modificare

tabelle, creare package e quant'altro. Comunque facciamo un esempio calzante così lo vediamo

insieme. Questi sono i quattro passi principali per poter fare una modifica Liquibase. La

prima, come vi accennavo, le modifiche Liquibase sono in realtà

eseguite dalla web app, cioè la web app quando parte, e poi vediamo dove, una delle cose che fa,

tra le varie cose che inizializza, così di sempre web application, oggi web application abbiamo visto

quando ad esempio inizializza i demoni, tra le mille cose che fa, fa anche la verifica delle esecuzioni delle modifiche Liquibase.

Come fa a farla?

Allora, prima di tutto, ciascun modulo, quindi ciascun progetto, deve censire il changelog master, che è una sorta di indice di tutte le modifiche al db che devono essere eseguite.

Ogni modulo censisce il proprio changelog master tramite questa chiamata, che dovete individuare.

Ora, la chiamata viene sempre piazzata all'interno del modulo dell'initializer.

Quindi, ad esempio, nel caso di Sianc, l'initializer è Sianc initializer.

Quindi qua dentro, ad un certo punto, farà questo hotdb.

Eccolo qua.

hotdb modify register changelog master.

Ci siamo?

Quindi, questo è il primo step, individuare i changelog master. Ci siamo? Quindi questo è il primo step,

individuare i changelog master.

Eccolo qua, questo è il file changelog,

lo possiamo anche vedere.

Quindi changelog, changelog,

si, anche changelog master.

Quindi qua è il changelog master, un altro che un changelog si, anche changelog master ok?

quindi qua è il changelog master un altro che un changelog che include

ah prima di tutto, scusate

premessa perché dopo è scontato

di liquid base lo si conosce, quindi

ogni modifica

giusto per darci due terminologie

anzi mi apro magari un changelog

un changelog di esempio qua si anche non c' esempio, quasi anche questo qua l'avevo già aperto.

Allora, una modifica al db, come ad esempio qua la creazione di una tabella,

viene chiamata change set

quindi non è altro che un XML

dove come tag padre

c'ha change set

un identificativo univoco

che identifica questa singola

modifica al DB

qua sta creando una tabella

quindi questo è un change set

posso avere uno o più change set

vediamo che qua c'è un'altra modifica

qua un altro change set

raggruppate all'interno di un change log più change set, vediamo che qua c'è un'altra modifica, qua un altro change set, quindi un'altra modifica

e così avvicendo, raggruppate all'interno di un change log. Quindi qui ad esempio è stato creato un change log

relativo alla creazione di questa tabella che si chiama shtm status. Per creare la tabella è stato fatto un change set che mi crea la tabella, un change set che mi aggiunge il constraint, un change set che mi crea un indice univoco e così via dicendo.

Tutti questi change set afferiscono a questo change log.

Il change log racchiude n changechiude n modifiche. Questi changelog devono essere poi linkati,

tramite questo chiamato include, all'interno del changelog master. Facciamo un esempio pratico chiaro finesso?

sì perfetto

allora facciamo la prova

qui su si anche quindi che mi faccio

allora qua ho individuato il changelog master

intanto

step 2

creiamo il nostro chainset

ok? allora creiamoci proprio quindi

io qui dentro mi creo

un nuovo changelog,

voglio racchiudere,

una serie di modifiche al DB,

che saranno quelle del nostro corso.

Qua non c'è un formalismo,

qua potete scrivere quello che volete,

solitamente si mette un qualcosa che faccia capire il contenuto della modifica.

Per esempio,

Caesar Corso,

è inizializzata con quella del bin, via.

Mi copio e incollo un chainset già esistente, giusto così parto,

non è che mi metto a riscrivere tutto e lo pulisco e quindi

diciamo che io ho

questo è il mio changelog

e la prima cosa che voglio fare

questo me lo metto commentato così lo riscriviamo

ma

utilizzandolo

me lo allargo, eccolo qua

e quindi questo è il mio changelog

e dentro voglio censire

image change step. Il primo change step che devo creare è quello relativo alla creazione

della tabella sa-sard-corso, quindi potrò chiamarlo ad esempio, con un id devo dare,

Questo deve essere univoco, mi raccomando, che ne so, si sa corso, sa sard corso, ok?

Ok, sa sard corso, ok?

Autore, mettete il vostro nome, vediamo, questo qui esce fuori su un pannello per capire quando ci sono i problemi per

dare la colpa a qualcuno capito questo è l'obiettivo dell'autore ok quindi chainset id author e poi ci ci serve un altro attributo qui che qua non c'è ma ce lo prendiamo da un altro xml

lo troverò

da un altro xml

eccolo qua context

importante context

Context, importante context. Context uguale, con questa sintassi qui, acquisti, metto i del modulo di acquisti

Vabbè acquisti c'è tutto un modo tutto suo, dove cavolo è?

ODB modifier Acquisti

Facciamo la ricerca qua

secondo me eh sì, secondo me

perché non sono aggiornato

prendo un altro

contabilità

inizialize, scusatemi

pure qua è

allora

e qua è commentato

come cavoli fanno la contabilità

oddin bimodify

change log

ah giusto

niente scusate

il motivo è semplice

che sto su un branch

che questa cosa è mntz

sto su un branch dove non ci stanno

le modifiche di webase giustamente

questi sono branch nostri

ok, comunque sia

supponete che in realtà

quello che avete voi è così,

quindi qua è il changelog master,

e quello che dovete mettere su,

se io faccio una modifica qui dentro, in questo changelog master,

e qui arriviamo al dunque di quello che volevo farvi vedere,

qui su context application, due punti, dovete mettere questo qui, che sta

registrato subito prima nella riga tramite quest'altro metodo, module support register,

quindi tutta questa roba qui, per intenderci, application due punti, questo, ok?

application 2.0 è questo, ok?

Perché?

Vediamo il perché.

Però adesso ci serve sapere questo,

che una modifica change set la possiamo legare ad un'applicazione.

Il nome dell'applicazione ce lo becchiamo sempre sull'initializer,

alla riga sopra dove viene fatta la registrazione del changelog master.

Quindi in questo caso, ad esempio, mi metterò siank.

Poi c'è anche in realtà il no module, poi vi dico che roba è.

Però, generalmente, al 99% dei casi, dovete mettere il nome del modulo.

Perché?

Perché poi, siccome, come vi dicevo, le modifiche al db partono con la web app,

ma partono con la web app in maniera asincrona,

cioè la web app sale mentre sale la web app,

fa le modifiche al DB, quindi praticamente crea un thread a parte,

che succede?

Che l'utente può cominciare ad utilizzare l'applicazione.

Mettiamo caso che però io ho una sola modifica, che è sul modulo degli acquisti.

E nel mio areas è installato acquisti, pronto

soccorso e ADT. Nel frattempo magari la modifica su acquisti richiede 10 minuti per essere

eseguita, un PLSQL ci mette 10 minuti. La web app intanto parte, così intanto il pronto

soccorso usa la web app, ADT usa la web app e così via dicendo, d'accordo?

Però c'è ancora questa modifica al DB in corso di acquisti.

Che cosa fa quindi? Se io qua scrivo acquisti, cosa farà?

Poi vediamo le classi, comunque questo sistema di Liquibase, che fa?

Blocca tutte le pagine solo di acquisti, quindi gli utenti di pronto soccorso continueranno a lavorare

tranquillamente, ADP continuerà a lavorare tranquillamente

se una persona invece

tenta di accedere ad una maschera

ad un punto di menu di acquisti, gli verrà

mostrato un messaggio di servizio

al posto della maschera che verrà scritto

tipo attività in manutenzione

a installazioni in corso, tornare più tardi.

Ora, non è il nostro caso perché creiamo una tabella e ci metto un secondo, però potenzialmente

una modifica al DB può richiedere del tempo. Allora, perché io devo bloccare le persone

che non sono impattate dalla mia modifica al DB? Allora ci sta questo sistema selettivo.

Per cui dico, questa modifica è

di Sianc, quindi blocca tutti i menu di Sianc, questa modifica è di acquisti, blocca tutti

i menu di acquisti, così via dicendo, in maniera che se blocca acquisti, nel frattempo

è pronto soccorso lavoro, questo in soldoni. C'è anche però la sintassi no module, no

module vuol dire, guarda, non bloccare nessun modulo è questo semplicemente, però fate attenzione quando lo mettete perché appunto

se poi mettete no module però

faccio un esempio, se io nella mia modifica faccio un alter table ad una

tabella, l'alter table di quella tabella mi scompila 100 package e qua ho messo no module non funziona più niente

quindi è bene invece dire

no guarda questa è di acquisti

fa la modifica

scompila 100 package

ma ho la garanzia

che quei 100 package sono usati da acquisti

quindi acquisti comunque non sta lavorando

non c'è problema

nel frattempo ci metterà il tempo a ricompilare

i queibase, tutti quanti package, ci può mettere tutto il tempo del mondo perché tanto non do un

vero e proprio di servizio, nel senso gli altri utenti pronto soccorso e dittì continuano a lavorare,

acquisti avrà questa maschera di servizio che gli dice di attendere.

Se mettiamo uno module via libera tutti, quindi poi può succedere un casino

chiaro sta cosa dell'application context quindi no module non blocca nessuna

applicazione va dritto per dritto ed esiste anche una invece blocca tutta

applicazione finché non finisce cioè blocca a tutte le applicazioni finché

non finisce di fare l'aggiornamento allora no però ecco questa è una cosa importante il blocco

avviene seguendo le dipendenze cioè dipendente nel senso come dipendenze dei progetti java quindi

quando andate su build path quindi faccio un esempio io vado su punto acquisti, build path, dipende da centralizzato, questi sono i progetti librerie, quindi li potete ignorare, centralizzato, PS su application metto Sianc, io non solo blocco Sianc, ma blocco

anche tutti i moduli che dipendono da Sianc.

Quindi ad esempio anche acquisti in cascata

verrà bloccato, perché acquisti dipende da Sianc.

Quindi se faccio una modifica al db su Sianc, si

Sicuramente è una modifica che in qualche modo avrà impatti anche sui moduli che dipendono da Sianc e quindi li bloccherà anche a scata anche loro.

Quindi in soldoni per rispondere alla tua domanda, se tu qui metti PSG-ext, che è il framework, o PSG-lib, non mi ricordo, un attimo, vediamo un po'.

PSG-ext initializer, OTB, e PSG-ext, se tu scrivi qui PSG-ext praticamente blocchi tutto, tutto perché framework e tutti i moduli dipendono dal

framework tutti ok ok chiaro grazie ok nel mio caso ci mettiamo uno modulo per fare l'esercizio e quindi

fine

per l'intestazione del change set

tanto ci basta, questo è il corpo del change set

ora, un change set

al suo interno

deve avere due

tag figli

imprescindibili

un tag di precondition e un tag di esecuzione della modifica vera e propria.

Precondition a che serve?

Semplicemente per valutare se è necessario davvero fare la modifica.

Ad esempio, se io devo creare una tabella, prima dovrò verificare se la tabella già esiste.

Perché la tabella potrebbe già esistere?

Semplicemente perché vi ho detto che le modifiche al db le segue

all'avvio. Quindi

io riavvio arias una volta

e mi esegue la modifiche al db.

Riavvio arias la seconda volta

e lui prova a ricreare

la modifica al db.

Quindi è importante metterci la precondition.

Così dico, no, guarda, la seconda volta parte,

dice, ho creato la tabella, sì, ok.

Vado avanti

ok

quindi bisogna mettere ad esempio

questo

precondition

not table exist

la mia tabella e qua ci metto il table name

sasard corso

e vi dico

la precondition

viene valutata, quindi la precondition viene valutata

quindi la precondition dice non esiste la tabella

se fallisce, quindi la tabella esiste

allora mark run

appunto la marca come modifica

già eseguita

se invece la tabella non esiste

vi dico

fai la create table e adesso vediamo come si fa è chiaro

se considerate che questa cosa qui come dicevo sta tutto qua quindi se voi cercate

liquid base precondition e buon note exist ad esempio

precondition table note exist ad esempio

xml example ecco questo questo è quello generico che questo va

un esempio generico di precondition, però ci sono anche quelle proprio

table, eccolo qua, perfetto qua sotto, avevo il precondition quindi precondition già

come dire pronta all'uso addirittura lo potete fare anche se il di bms è oracle, non è oracle,

ci interessa il nostro caso però c'è tutta una serie di ecco, column exist, table exist, view exist,

ci si può sbizzarrire a usarlo, ok?

Quindi adesso vi faccio un esempio per vedere come funziona la modifica Liquibase,

come si crea, però poi avete la libertà, insomma,

di usare tutto quello che vi permette di usare Liquibase.

Quindi, quindi, quindi, quindi quindi

precondition non fail mark run quindi se non esiste la tabella la marca come eseguita poi vediamo sotto ci sono tutta una serie di tabelle dove vengono a finire

queste cose dopo le vediamo e quindi se esiste e non esiste allora fai la create table, la create table alla fine è questa roba qui

proprio quindi create table è, cediamo un nome

la bella dei corsi

la sard corso e creo le varie colonne

no però la faccio così però me ne creo un'altra tabella perché altrimenti la tabella mia già esiste

perché

Sard Corso

sta sullo stesso database

tabella

la chiamo

Sard Corso 2

ok?

lb

di cui base

giusto per crearne

una parallela

altrimenti

quindi c'è

Rcode

di Varchar

di 11

eccetera

eccetera eccetera

description VARCHAR di 256, ma non le metto tutte

e CRD, giusto un attimo per vedere. Questo potrebbe essere il mio primo

change set, un altro change set che posso fare è per corso pk

ad esempio

il set

copiamoci proprio quello

primary che existe

la copio da qui proprio

questa è la precondition

onfail

onfail c'è diverse

cioè i stati che potete avere sono diversi

però quelli che utilizziamo noi è

mark run

quindi mark come eseguito

primary keyname

è questo

ontable

sassard corso è questo on table sarco

lb

sarco

anche perché

se no mi da anche qua conflitto

ok

se non esiste però la creo

e tra create primary key liquid base

di chi

abbrama di chi add per ammari che possiamo usare semplicemente

ovviamente poi ci sono tante opzioni

ok?

utilizza quello che gli serve

table name, table space name, table space eccetera

sul table space poi vi dico una cosa

quando vediamo come

se seguono le modifiche al db.

Ok, percorso lb.

E poi uno continua così via dicendo. Questo changelog che abbiamo creato con

questi due change set, cosa dobbiamo fare?

dobbiamo andarli a linkare nel nostro changelog master quindi che facciamo?

facciamo un include

aspiterina

è proprio qua la spiserina bene?

ok

poi questo è il metodo

come dire

preciso

ok?

se no volendo

il liquibase

e così si fate molto prima

perché questa è una gran rottura di scatole

anche andare a dire

column, column, column, column

ok? è una gran rottura di scatole

Liquibase ha anche

come

come azione direttamente proprio SQL.

Ok? Così.

Pam.

Quindi banalmente voi qua scrivete,

proprio così,

per la Prameriki,

io posso pure scrivere SQL.

SQL

sbattiamo

qui

per table

meglio eh

utile soprattutto magari

questo lo usiamo, le SQL

più che altro per ad esempio

per fare gli insert, quindi ad esempio

l'insert silucap

anche l'insert sulla silucap

e Liquibase tecnicamente vi dà il suo taggettino XML per fare un inserimento, una tabella.

Però capite bene che non è proprio una cosa felice, no?

Andarsi lì a censire colonna per colonna, valore per valore.

Quindi uno ha già la sua bella insert, ctrl-c, ctrl-v, no?

E la sbattete qua dentro.

Un tag SQL. Ok? ctrl c ctrl v e la sbattete qua dentro un tag sql perfetto

quindi

torniamo alle slide

passo 1 change log master

aggiungere il production set

scrivere la propria modifica al db

secondo i mortiformismi

fatto

adesso non ci rimane che testare questa modifica al DB, secondo i mortiformismi, fatto,

adesso non ci rimane che testare questa modifica.

Come si testa?

Allora, innanzitutto butto giù il riavvio.

Ora, normalmente, ripeto, in ambienti di produzione,

è a riavvio,

vediamo quando entriamo il punto, facciamo un po' di debug,

anzi facciamo adesso, adesso che riavvio. Comvio comunque è a riavvio normalmente in produzione

che vengono eseguite le modifiche al db

in modalità debug no?

in modalità debug le modifiche al db partono solo manualmente

se lo fate voi

tramite un pannello che adesso vi faccio vedere

ok?

quindi

per individuare intanto un po' il punto

web application Quindi, per individuare intanto un po' il punto,

web application.

Eccolo qua.

Eccolo qua.

Lui fa, vedete, fa is use or db modify.

Se ci andate a vedere, va a vedere se l'applicazione è in debug

ok? ma qua adesso sta false perché

l'ho messo io sul mio

workspace, ok? quindi un po' modificata

di roba. comunque va a vedere, questo dice

praticamente, se deve usare le modifiche

al db e la discriminante è se sono in

debug o no, ok?

se non sono in debug faccio

start update

start update crea un nuovo thread dove fa

start ok siamo nella classe odb modifia tutte queste modifiche di cui base che vi ho detto

girano qua dentro quindi 8 db modifia questa è la classe regina delle modifiche Liquibase.

Che cosa fa?

Prepara il changelog.

E come fa a preparare il changelog?

Andando a interrogare, abbiamo detto che ogni modulo registra il suo changelog master,

ok,

e lui se li va a leggere,

se li va ad acquisire,

si acquisisce change log master,

e poi fa execute modify,

execute modify,

prende una connessione al db,

e vabbè,

si crea una istanza di

Liquibase,

ok?

Quando si istanzia un'istanza di liquid base

praticamente

eccolo qua

poi ci torniamo su questo pezzo qui sopra

però per adesso si stanzia un'istanza di liquid base

e si va a

tirare su

dove cavolo sta

eccolo qua, si tira su questa istanza di Liquibase

però non mi torna

dove sta il changelog? ah ok, eccolo qua, infatti io passo qui il changelog

si creano le istanze di Liquibase passandoli i changelog master che sono stati registrati.

Ok.

Una volta fatto questo,

una volta fatto questo, adesso lo facciamo a pezzi, ok?

Dopo ce ne torniamo nel dettaglio.

Una volta fatto questo, fa

una volta che si è caricato

tutti i changelog da fare,

invoca questo metodo LiquidBaseUpdate

che esegue fisicamente

tutti quanti i change set.

Ok?

Però, siccome nel nostro caso,

questo è quello che succede

in produzione, d'accordo? Quindi

WebApplication dice se sono in produzione

faccio start update start update fa partire un nuovo thread dove si va a leggere change log master

e segue dice di eseguire fisicamente le modifiche al db ok e poi vengono seguiti insomma i change set questi soldoni nei ambienti di sviluppo questa

cosa non accade quindi questo pezzo qui non lo fa questo perché le modifiche devono essere

eseguite a mano e vediamo come

Grazie a tutti.

ok

quindi dobbiamo andare su questo monitor qui

quindi partendo da localhost

l'ennesimo modulo

monitor che si chiama

hdm. contro il panel punto

e c'è un errore

e ha un po che errore. Vediamo un po' che errore è. Non ho chiuso un tag XML, perfetto. Riga 27, colonna

9. Quindi andare su questo pannello non serve solo per eseguire la modifica, ma anche per

testarla. Qui in esempio è scritta male, quindi vediamo un po' che ho scritto.

Linea 27.

Non ho chiuso il tag create table.

Scusate.

Eccolo qua, create table.

Va bene.

Buttiamo giù e ripartiamo.

Scusate un secondo.

Ok, ripartiamo e vediamo. ok aggiorniamo

contro l'r

non mi aiuti

allora che vuole

allora che vuole Non vi piace qualcosa sul mio SQL.

che cosa ho sbagliato? Fatemi un attimo vedere un esempio qua.

Se è quello.

Vuole un punto e virgola alla fine.

Ho messo il punto e virgola. Grazie. Grazie. era appunto e virgola ok questo è un punto e virgola qua sulle sequela alla fine del sequela

quindi comunque siamo arrivati qui contro il panel, cosa ci fa vedere?

Quello che ci interessa nel nostro caso è le nuove modifiche, poi magari vediamo in generale.

Nel nostro caso vogliamo testare la bontà della nostra modifica al DB.

Quindi qua ci vengono elencati i due change set nuovi.

Quindi abbiamo il change set, abbiamo detto creare la tabella 1 il pk

cosa devo fare? prendo in gestione

esempio il primo, così

mi viene fatto vedere il chainset

mi viene anche fatto vedere come

il chainset viene trasformato

da Liquibase

nel

nel create table dove caspite rinasta eccola qua crete table ok e clicco e segui

si pensa

si si si si ok, finito

quindi adesso quella modifica

poi in produzione in realtà non ci mette così tanto tempo

perché le modifiche vengono fatte automaticamente, però qua quando fa con l'esecuzione manuale sì.

Questa modifica va a finire su storico esecuzioni.

eccola qua però qui non la posso vedere

mi viene soltanto censito il fatto che è stata eseguita questa modifica

webase

lo stato executed

oppure mark run se la precondizione fosse stata soddisfatta

la data e quando le file il percorso

e qui anche autore come

dicevamo prima

vado alla successiva

seguo

e quindi c'è di qua

ok

me l'ha messa mark run perché me l'ha messo mark run

perché perché ho messo mark

ah perché qua sbagliato perché not exist ovviamente non ho messo

comunque sia qua perché markrun

perché siccome non ho messo il not

lui dice se esiste

la primary key no

on fail metti markrun quindi è fallita

la ricerca di questa primary key

quindi ho messo markrun

qua devo mettere not exist

quindi se non esiste

la crei, se esiste quindi in quel caso è fail

metti mark run ok una cosa importante una volta che una modifica liquibase viene eseguita non

la potete modificare cioè adesso io l'ho modificata ok non posso rieseguirla

è andata

quindi casomai dovete fare

un nuovo chainset

invece mettete sotto

ad esempio, non ne so, chainset

con la versione corretta, date uno al 3D

univoco

vedo

e lì implementate la correzione

d'accordo?

se uno modificava l'errore rimane qui sugli errori

e qui allo stesso modo

adesso non so se queste funzionano

non è adesso ci vuole essere che schiantano

comunque infatti perché

secondo me non ce l'ho

non sono allineato

con gli ambienti, questo non di B così

poi vi faccio vedere dove ha finito

queste modifiche, quindi questo file non ce l'ho

questi file elencati qui dentro per questo

schianta, provo di quest'altro

non ce l'ho, comunque fondamentalmente

se una modifica che viene eseguita va in errore

se state in fase di

sviluppo, vuol dire perfetto

vuol dire che il test

è fallito, quindi vedete qual è l'errore

correggete la modifica

al db, in quel caso la potete correggere

quando dicevo che non potete correggerla

è fin quando

una volta è rilasciata

se stiamo in test

mi sono accorto che è sbagliata

quindi mi è andata in errore

la modificate e la rieseguite

vedete qual è l'errore

un tag formattato male

un alt table scritto male

lo correggete, tornate lì

tornate qui

dettagli e lo rieseguite

fino a quando non vi passa su storico esecuzioni

e vi viene eseguita

ok?

quindi se volete ad esempio se vogliamo sistemare la mia modifica

io adesso vado qua

me ne elimino

però adesso devo modificarla.

Vedo, avviare.

Adesso proviamo a rilanciarla. Grazie. ok giorno

Ah, ho cancellato quella sbagliata, la modifica, porca paletta, ho cancellato la modifica sbagliata.

Ah, ho letto Simone Maranalto, porca paletta no porca paletta

ho cancellato la modifica sbagliata

ho cancellato la mia

puoi dare la colpa a qualcun altro?

no no

questa è la mia domanda da farti assolutamente

no no qua fortunatamente

sto su DB locale quindi

come dire pago le conseguenze

di tasca mia

scherzavo ovviamente

no no ma che scherzi, quella è la regola numero uno

del diagramma

del diagramma di flusso

allora

allora

allora

vediamo un po' se mi aiuta

sextas timest stamp la texta from

nata di change log log select

......

...

...

...

...

...

...

...

...

......... il stamp di oggi 12 aprile quindi 2000

204 12 core sono 17 dimmi che ce l'hai

ok ma guai cavolo ho cancellato

ho cancellato quello qua

questo è trova cancellato

no no secondo

al

al

al

in un valido

no no

no non è valido Grazie. Query for object. pericolo 1

forse ho cancellato la giusta aspetta ok

05

1 in meno quale è meno 05, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07, 07,

Non ho scritto "non ce l'ho dato giusto"

"questa è quella che avevo, pk, sasard, corso"

Non ce l'ho dato giusto

Non l'ho cancellato giusto

E allora che roba è questo errore?

Che non gli piace.

Può cambiare l'ivd.

Vediamo se è questo. Grazie. era quello era quello

vedete? perché?

allora se una modifica vi va proprio in errore

quindi la trovate qua su errori

si la potete correggere

la sistemare

eccetera tranquillamente

però se in realtà questa modifica qui che è successo

a noi ci è andata

ci sarà completata con successo

solo che è stata messa come mark run

come già eseguita

quindi siccome lui ormai si è marcata che questa modifica

lui se l'è eseguita eseguita quindi siccome lui ormai si è marcata che questa modifica lui se l'è eseguita

a lui non piace

a lui non piace

al liquid base, questo non lo ricordo infatti

infatti per questo vi dicevo che una volta

rilasciata la modifica assolutamente non la potete

più toccare e dovete cambiare

l'id, quindi crearvi casomai

una nuova modifica che corregge la precedente.

Quindi qua praticamente abbiamo risumulato questa situazione, perché una volta che una modifica è rilasciata ed eseguita,

l'id deve essere diverso, non gli piace che gli andate a cambiare le cose sotto il sedere.

Quindi adesso gli ho cambiato l'id e quindi la posso rieseguire.

Vediamo adesso, ecco adesso executed perché gli ho messo la

clausola not. Andiamo a controllare giusto per select star from sard corso e

lb e vediamo se ha anche creato la chiave primaria

eccola qua, speak up, start, corso, lb ok?

ok, perfetto, questo è per le modifiche

adesso vediamo come funziona

soprattutto le tabelle

e sono importanti

tabelle di Liquibase

però ecco, questo è come si fa una modifica

al DB con Liquibase

poi dopo la granularità

dei chainsets

e fare un chainset per tabella

uno per modifica, eccetera

questo sta a voi

per dirmi in soldoni

nulla mi vieta a me di fare una cosa di questo genere

cioè se faccio una cosa di questo tipo

all

all

ok

poi faccio un bel

SQL vado qua, ctrl c, nulla mi vieta di fare questo, quindi questa è la mia modifica liquid base, tutto quanto, nulla mi vieta qual è l'in conveniente nel fare questo poi supponiamo che

funziona la modifica

supponiamo che questa modifica che fate

funziona perfettamente

ve lo siete provati in test e apposto

poi in produzione per qualsiasi

caspiterina di motivi

i motivi possono essere come ben sapete

la qualsiasi, anche cose che nessuno avrebbe mai previsto

la prima tabella questa la fa giusta, la fa giusta, la qualsiasi, anche cose che nessuno avrebbe mai previsto.

La prima tabella, questa la fa giusta, la fa giusta, la fa giusta, la fa giusta,

questa schianta per qualche motivo.

Che succede?

Che poi non la potete più riseguire, perché se la riseguite,

poi vi andrà in errore queste qui, perché già le eseguite.

Quindi per questo conviene sempre comunque spezzettarle le modifiche così, questa una volta che

sta eseguita, se faccio un change set dedicato a

questo, una volta che l'ha eseguito, sta a posto

non l'eseguo più, questo maleseguito

sta a posto, non l'eseguo più

questo qua non l'ha eseguito

è andato in errore, ok, rieseguo solo questa

ok?

giusto per

ecco, la granularità non c'è lì,

mette insomma sulla granularità o come organizzare i change set.

O se usare, ecco ad esempio, la sintassi di Liquibase,

che è Table o fare direttamente SQL e poi dentro di Riettev.

Agustibus, degustibus.

Ok.

Allora. Agustibus, degustibus. Ok, allora, le tabelle coinvolte da tutto ciò sono

queste ve le scrivo qui perché queste al ai colleghi non le date ovviamente

uso e consumo di sviluppatori a livello e bello allora tabelle sono select star from database change log questa è una tabella di liquid base proprio che

lui ben si crea da solo

per connessione versa

ok quindi queste sono tutte le modifiche ad esempio fatte in ambiente di formazione

ok

quindi qua praticamente trovate quello che vedete

su storico esecuzioni in questo pannello

quindi sono le modifiche eseguite

ci viene riporto

una tabella di GUI-BASE

si salva l'ID del change set

l'autore, il percorso del file

la data di esecuzione

lo stato

eseguito o non eseguito

tutta una serie di informazioni tutte sue

qui si salva anche il context

ora vedete che in realtà il context

questo è un context ad esempio sbagliato

non serve a niente

qua ad esempio hanno scritto acquisti

invece abbiamo visto che il nome corretto è questo qui

quindi scrivere no module

no module name

acquisti ha lo stesso effetto

non bloccate niente

la sintassi che non usiamo è quel no module

che vi ho fatto vedere

però insomma il discorso è

qualsiasi cosa mettete che non è

un'applicazione vera

scrivete pippo avete lo stesso effetto

o bloccherete l'applicazione pippo

pippo non esiste quindi non bloccate nulla.

Poi che altro si salva?

Niente, nel bolso non so cosa sia.

Questa è una tabella tutta ad uso e consumo di Liquibase.

Poi un'altra tabella ad uso e consumo di Liquibase è selextar from database change log lock.

Questa se la crea sempre anche Liquibase,

ed è una tabella stupida, nel senso che è una tabella utilizzata per fare un lock.

Cioè, tutte le modifiche che fa liquid base le fa prima di tutto andando a scrivere

un record qui dentro va a scrivere tipo adesso per vedere non lo possiamo vedere però insomma

è tipo lo che è un flag lo che d'uno lo che l'ho grant e

ci va a mettere

lo che va a mettere ad esempio l'indirizzo IP

della macchina che sta loccando

se su internet troviamo

esatto, 1 Lock ed lock granted, ah la data, ecco lock granted della data è l'ora in cui è stato preso il lock

e lock buy invece da chi è stato preso

generalmente ci mette tipo l'ip e il nome della macchina

ok? quindi chi ha acquisito il lock

perché fa questo? perché in questa maniera

ad esempio nel nostro caso

siccome abbiamo detto che Liquibase parte quando parte una modifica, quando parte Arias, appena parte Arias parte una modifica, se io cioè un casino. Quindi utilizza il meccanismo interno di Liquibase che va a scrivere all'interno di questa tabella questo

lock per fare un semaforo. Quindi il primo che parte acquisisce il lock, dice chi è e quando l'ha preso

e inizia a fare le modifiche al db. Tutti gli altri si mettono in attesa che viene tolto il lock.

Mettiamo caso che ho due Tomcat e 10 modifiche liquibase da fare.

Il primo Tomcat che parte, locka, l'altro aspetta.

Il primo Tomcat fa le 10 modifiche liquibase, le esegue, le completa, toglie il lock.

Il secondo Tomcat con quel punto parte,into di fare quelle dieci modifiche ma quando le provo a fare diciamo no, qua è tutto fatto, nel frattempo

qualcun altro l'ha fatte quindi non faccio niente, questo è il giro. Quindi questo è di lock ah una cosa importante

il secondo tomcat che sta in attesa

attende per un massimo di 30 minuti

dopo di che

fine, schianta, cioè avanti

il liquid base a quel punto annulla tutto

non fa le modifiche, torna un'eccezione

il liquid base, ok?

e lato nostro blocchiamo quel tomcat

non lo facciamo lavorare nel dubbio

ok?

diciamo non dovrebbe mai succedere la mod modifica di Liquibase arriva a durare così tanto, partiamo da questo presupposto.

Comunque, questo è il timeout che si impone, che si auto impone, eh, Liquibase.

di qui base ok

altra tabella

database

change log

error

Questa tabella in realtà non è una tabella di Liquibase, anche se il naming lo ricorda.

È una tabella che ci siamo creati noi, dove ci andiamo a riportare

le modifiche andate in errore

perché questo?

perché se no il comportamento di default di Liquibase

è che se una modifica va in errore

lui ci riprova

sempre per sempre perennemente

cioè va una modifica in errore

faccio partire Arias

mi segue una modifica Liquibase

va in errore

riavvio Arias lui dice ah c'è una modifica da fare LiquidBase, vai in errore, riavvio arias,

lui dice, ah, c'è una modifica da fare, anche se è andata in errore,

lui ci riprova, 9 volte

su 10 tornerà ad andare in errore.

Se è andata in errore c'è qualche cosa,

c'è un motivo per essere andata in errore la prima volta.

Quindi è per evitare che LiquidBase incomincia a rieseguire

quella modifica perennemente

ed anche per averla noi,

per accorgersene. Quindi,

questo ci permette di avere qui questo tab errori.

Questo tab errori ce l'abbiamo perché siamo noi che quando una modifica di qui base va in errore,

lo andiamo a riportare in questa tabella.

Quindi l'obiettivo sarebbe che c'è un errore, viene segnalato, uno va qua,

dice fammi vedere i dettagli, adesso qua perché sto sul mio ambiente,

dice andato in errore per questo motivo qui ok sistemo poi cliccando qui ok c'è un tasto marca come seguito ok il marco come seguito marca la modifica come seguitela e la toglie, perché magari c'è stato un errore, ok, mi sono collegato con Todd, con SQLDV, l'ho sistemato, la marco come eseguita.

Così la toglie dagli errori.

Sto chiaro finora?

Sì.

Tutto chiaro finora?

Sì.

Quel refresh di questo liquidez a tua vista

cosa serve?

Allora, questo arriviamo dopo

quando facciamo un po' di debug.

Però per adesso, per quello che ho detto, tutto ok?

Tabelle, eccetera?

Sì.

Tutto ok?

Perfetto.

Ultima tabella.

Ultima tabella è questa.

Si hdm status. A che serve?

Praticamente ogni volta che voi mettete un context, quindi se scrivete qui sul context application pippo, lui quel pippo lo va a scrivere dentro sta tabella, shdm status.

E su quel pippo lui ci gestirà poi quel blocco che vi dicevo.

Quindi gestisce praticamente su ogni context.

Context, lo stato. Available o Locked? Sono due listati che può avere.

Anzi no, sono tre, scusatemi. Available. Locked, error. Available è una situazione normale, vuol dire che quell'applicazione è fruibile, ma si può usare.

Locked vuol dire bloccata, quindi ad esempio se faccio una modifica su i tenghiri dei cespiti, ok,

i TN Ghiri dei Cespiti ok

tutti i menu di Cespiti

avranno la maschera

attività in manutenzione

error vuol dire che una modifica

al DB che aveva come application

i TN Ghiri dei Cespiti

è andata in errore, quindi la maschera

che in quel caso viene mostrata all'utente

è proprio questa, è tipo

il menu non è accessibile

contattare l'assistenza

o cose di questo genere, comunque il menu

rimane comunque bloccato anche in caso di errore

ok?

però come vi dicevo, se voi mettete un'application

che non esiste, lui lo va a scrivere

vabbè, lo tiene traccia, la traccia

però poi lato maschere non avete

non ha nessun effetto, perché quando

io apro una maschera di contabilità, lui andrà

a interrogare la si hdm status,

andando a cercare come è lo stato di IT e inghiride.

IT e inghiride è contabilità, available,

non va a vedere questo contabilità che è scritto qui.

Questa tabella qui, come vi dicevo

adesso la vediamo con il debug

viene gestita dall'equibase

quindi quando fa una modifica

accende, spegne, blocca

e sblocca queste applicazioni

però lo potete fare anche voi

o anche quanto controllare

tramite sempre questo monitor

stati degli applicativi

quindi cliccando qua metto non disponibile

cliccando qua diventa disponibile

vedete qua vediamo anche la gestione

di dipendenze, guardate

se io spengo JBF Flow

si spegne solo JBF Flow

se adesso spengo Sianc

vedete come mi ha spento tipo ad esempio anche

centralizzato

non mi ha spento in cascata acquisti, ma per un motivo, perché

adesso questo è il modulo, cioè il monitor funziona, diciamo,

più che altro non per bloccare, ma per sbloccare, ok?

Però perché in realtà quello che fa Liquibase è proprio questo,

se io blocco Sianc,

eh, non me lo fa, eh, con il monitor mi sa non lo posso fare, eh, con il monitor non lo posso fare, con il monitor non lo posso fare, insomma questo è più che altro è per sbloccare, infatti questo è pensato per sbloccare, cioè ho una modifica in errore, la marco come eseguita, se quella modifica era legata ad esempio a JBF Flow JBF Flow ce l'avrò in questo stato

vado qui e dico ok, tutto sistemato

tutto ok, lo sblocco

quindi volevo farvi vedere come faceva

va beh, Liquibase invece

fa tutti i ragionamenti che vi dicevo, quindi

se blocco Sianc

acquisti e contattività

stabilità, contro gestione, centralizzato, sono tutti quanti dipendenti,

quindi blocca anche questi.

Lui mi ha fatto solo un livello, non so perché mi sono centralizzato.

Infatti questo è fatto più per sbloccare che per bloccare questo monitor.

Comunque qua vediamo lo stato che troviamo su questa tabella.

Fine.

Quindi abbiamo visto tutte le tabelle che stanno dietro

queste tab, non ce ne sono altre.

Un po' chiaro?

Sì.

Ok, perfetto.

Allora, adesso torniamo e vediamo appunto come invece gira sotto dato Java.

Allora, per vederlo, l'ottimo sarebbe proprio andare in debug, altrimenti dobbiamo andare in debug mnemonico.

allora fatemi un attimo ragionare come possiamo

fare faccio così

questo è il mio

questo è il mio working space

faccio quello che mi pare

metto un debug qui

andiamo in debug

mi creo un'altra modifica però prima

anche la stessa

mi importa poco

però li metto application

quindi mi chiedo ho creato una nuova modifica. Ok, e partiamo.

Adesso per simulare, insomma, mi sono messo questa apparticolazione.

update fuori dall'IF, così lo fa sempre a prescindere. Eccolo qua, start update.

Quindi come dicevo, lo schedula su un thread a parte, quindi entriamo dentro questo start e lui si crea questo oggetto, la base changelog.

sta pensando ok quindi log

lui qua dentro c'è tutti

ecco i changelog

i change set

che sono stati caricati da vari changelog

che sono registrati

questo è il mio db

quindi c'è anche ad esempio

questo sasard corso pk2 pk3 vari changelog che sono registrati, no? Questo è il mio db, quindi c'è anche ad esempio questo

Sazard Corso Pk2

Pk3 Sazard Corso

eccetera, ok?

Poi dice execute modify

Poi va a getliquibase

Cosa fa getliquibase?

Allora innanzitutto si va a leggere

da l'application properties

sempre application properties

l'informazione, questa è opzionale

ora in realtà viene sempre indicata

sull'application properties

lo troviamo

il nome del table space

che contiene i dati, il nome del table space

che contiene gli indici

nel mio caso ad esempio qua è

lavoro e indici.

Quindi, semplicemente perché dopo lui creerà le tabelle, ad esempio,

sul table space dati e creerà gli indici sul table space indici.

Questo serve per distinguere.

Questo viene indicato sull'application properties.

Se c'è, c'è. Se non c'è, non c'è.

Altrimenti, se non c'è, se non c'è altrimenti se non c'è lui

non specifica il table space

poi

inizializza un exec

listener

un execution listener

su Liquibase, vedete?

questa execution listener

ci permette di essere in ascolto

degli stati

del change set

cioè will run

sta per eseguire, lo eseguirà questo change set

perché lui controlla il change set

dice devo eseguire la modifica o no

innanzitutto, la devo eseguire?

sì, ok, allora qua ad esempio

sfrutta questo will run

prima di eseguire, dice ok, ricordati di mettere

come table space

se è una create table, questo qui space per una creta table questo qui sono una crete index

questo qui ok run l'ha eseguita ok l'ha eseguita l'ha eseguita l'ha eseguita, l'ha eseguita, allora lui che fa?

Allora, anzi, prima di vedere questo, l'ha eseguita ed è fallita,

vediamo prima questo, c'è più senso logico.

Quindi l'ha eseguita ed è fallita, allora lui cosa fa?

Va ad inserirla, vedete qua c'è l'inserimento sulla database changelog error che vi dicevo.

Ok?

Quindi modifica eseguita, fallita

andata in errore, la marca sulla database

change log error

e poi che fa?

va a vedere il context

perché i context in realtà poi si possono concatenare

perché non lo facciamo mai

però tecnicamente sui context mi pare che si può mettere pure

si può mettere pure si può mettere pure

no aspetta non è per questo però mi pare comunque i contexti possono pure

no è questo è questo che conti i contexti possono anche tecnicamente essere più di uno però noi

non lo facciamo sinceramente poi se volete sperimentare. Quindi va a vedere i context e sui context dice se è un application, quindi application due punti, quindi lo dicevo prima, quindi non so chi è anche che è ad acquisti, si è anche eccetera.

caso in cui la modifica è andata in errore, fa set application status e va a scrivere sulla iHDM status questo record qui, ad esempio, contabilità application error, è anche la data in cui è

stato toccato, la data in cui questo è successo. Torniamo indietro

stavamo qua

ok

questo è un errore

poi in realtà anche qui non lo usiamo noi

come context addirittura uno potrebbe

non bloccare tutta l'applicazione

ma bloccare un singolo controller

un singolo mapping

faccio un esempio

magari tocco la tabella dei comuni blocco solo la pagina di gestione del comune addirittura.

In quel caso lì il context va scritto così, faccio vedere, ma così, del tipo mapping, due punti, sianc.comune.

punto 2 non lo usiamo neanche noi steggio l'abbiamo fatto ma non lo usiamo il motivo è semplice perché

alla fine della fiera in realtà è impossibile che una qualche tabella abbia impatti solo se la toccate

solo esclusivamente per quel punto di menù è impossibile anche comuni banalmente se ci pensate

per quanto una grafica stupida e lo usano i pazienti lo usano i soggetti comuni nascita da residenza domicilio indirizzi rapporti possibile quindi si blocca

direttamente l'applicazione ok questa cosa anche qui trovate il bin potete bloccare solo il bin

in quel caso addirittura che cosa cosa accaderebbe accaderebbe che funziona tutto per l'utente però

se fate il service manager voi,

fate service manager save, ad esempio,

di un bin che è bloccato,

vi schianta a voi, il programmatore,

quindi non serve a niente.

Sarà fatta all'epoca quando è introdotto Liquibase,

tutte queste cose qui, ovviamente,

sulla carta si fanno certe cose,

poi dopo, quando si inizia a utilizzare,

si affina.

Quindi, in realtà, application, punto, fine.

Non esiste altro.

Quindi questo è il caso di fallimento.

Quindi fallimento fa due cose.

Inserisce lo stesso change log error

e allinea la tabella si hdm status.

Se invece la modifica è andata con successo,

semplicemente lui,

qua fa le stesse cose, questi due metodi, cambia il fatto che

non c'è un parametro in più ma che ignoriamo

in ogni caso se viene invocato il metodo run

quindi la modifica è stata eseguita

nel dubbio, magari non ci sta, ma nel dubbio

noi la eliminiamo

dalla database change log error

in caso fosse una modifica che è stata

rieseguita dopo

ok?

se invece era la prima modifica sulla base change log error non ci sta ok serve

per pulire la change log error tutto chiaro finora ci si è perfetto quindi qua crea questo change exact listener e vabbè.

Poi fa questa cosa qui, questa cosa qui in realtà era un workaround sul funzionamento di Liquibase.

Liquibase in realtà tra le modifiche, questo ve la dico, ma io so così, non faccio tu chiacchiere perché tanto la potete ignorare,

si fa scrivere un MD5, un checksum, si fa scrivere del file.

Perché lui ha un controllo, non so per quale motivo, di default,

che se il checksum di un file, di una modifica che lui ha eseguito,

quindi ad esempio c'è questo XML a Qcontest XML,

lui si calcola il checksum che è X, la esegue, perfetto, lui quasi salva che x

se un bel giorno

ricalcolando l'xml

perché magari l'abbiamo modificato

lui risulta che è y

si incazza, cioè proprio non è che

blocca tutto, torna a

2000 eccezioni. Ora, il che potrebbe anche avere un senso, è un po' per tutelare il fatto che dice

io ho eseguito la modifica a tot giorno, a tot ora, era questo, tu adesso me l'hai cambiata, che è successo?

Mi sta bene. Il problema è che in realtà c'era un bug su Liquibase, per cui anche se il file non cambiava,

il checksum sì. Il motivo era perché in realtà il checksum non viene fatto soltanto sulla base del file ma tiene in

considerazione anche alcuni parametri della macchina addirittura mi ricordo all'epoca quando vedi questa

anomalia in considerazione tipo anche il processore il nome dell'architecto dell'architecto del

processore cose questo genere ok quindi alla fine siccome noi non ci interessava questa funzionalità di Libby base abbiamo disattivata quindi add valid check sum any serve per disattivare

questo controllo di Libby base quindi questo serve per questo quindi poi va

avanti torna un'istanza di Libby base

base

e poi niente poi segue modifico e adesso lui che fa si cicla nuovamente tutti i status che deve seguire e per ognuno di loro

verifica se deve essere eseguito

e vabbè

adesso dovrebbe entrarci in una

perché l'ho aggiunto quel pk3

quindi dovrebbe entrare almeno per una

metto qui dentro

eccolo qua

dovrebbe essere pk3

si sa il corso

pk3 esatto

la deve eseguire

perché l'ho creata nuova

quindi lui prova a eseguirla

cosa fa qua?

la stessa cosa più o meno

che abbiamo visto prima

quindi

va a leggersi i contesti

e in questo caso

sulla shdm status

va a mettere il valore

locked

quindi per bloccare le maschere

come vi dicevo

ok?

fatto questo blocco va qua sotto

e al costo si sa come partito l'agent va qua sotto

e allora questa è una realtà questa è una cosa nostra. Ci loghiamo sulla tabella si applog il fatto che sta eseguendo una modifica al db.

Questo più che altro ha scopo per capire ogni volta che viene fatta una modifica al db.

Questo è semplicemente per tenertici traccia di questo.

Quindi questo non serve a niente, è solo di log, su tabella.

Quindi va avanti.

Eccolo qua, fa update questo

è

effettivamente il lancio

della modifica di Equibase

ora che fa lui? Io adesso faccio

ho fatto play

cosa ha fatto?

vedete qua?

Successfully acquired changelog lock.

Quindi ha acquisito il lock sulla database changelog lock.

Adesso già l'avrà anche rilasciato.

Comunque per dire che va a scrivere su questa tabella.

Ha provato a fare la modifica PK3,

la quale è fallita è fallita perché viene effettivamente ricreava

la stessa chiave primaria e quindi l'avrà messa a mark run ok a questo punto cosa fa

cosa fa?

rileggi i contesti e

e

e

e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e

e e e e e e

e e

e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e e ah no, fine no

usciamo da qui

va bene, va bene, va bene, va bene

usciamo da qui

ok, va sul finally

quindi ha fatto le modifiche al db

e adesso cosa fa?

fa e adesso cosa fa? fa

fa

la reload

del lookup

questo è importante, che vuol dire

reload del lookup? abbiamo visto no?

insieme che i lookup vengono caricati

vi ricordate?

in fase di start up all'inizio appena parte l'applicativo

fa carico lookup, carico lookup fa carico lookup carico lookup carico

lookup vi ricordate quindi lookup si ricarica all'inizio proprio all'inizio se nella mia modifica

il db lookup io inserisco un nuovo lookup è troppo tardi ormai che lookup se l'hai già caricati quindi

questo load from db lo fa sempre e comunque insomma li ricarica se nel caso ci fossero nel frattempo dei nuovi look up inseriti tramite una modifica Liquibase.

Eccolo qua, carico look up, carico look up, bla bla bla bla bla bla bla bla.

Ok.

Allora, questo lo potete ignorare nel senso che...

Anzi no, scusami, questo non... Sì no, questo lo potete ignorare nel senso che, anzi no, scusate, questo lo potete ignorare, voi no, però lo capiamo meglio, questo è l' cifratura delle tabelle che abbiamo implementato in virtù da GDPR all'interno dell'applicativo, quindi a soluzione applicativa.

In Sardegna invece la cifratura viene fatta a livello di database con Oracle...

con una soluzione di Oracle

viene fatta a livello di database la cifratura dei dati

questa invece è una funzionalità

che lavora a livello applicativo

quindi questa non è attivenza degna

quindi non ci interessa entrarci nel merito

però ci interessa comunque saperla

perché ci sono delle attenzioni

che bisogna fare comunque sul codice

a prescindere che si usi o meno

però questo ci torniamo poi dopo quando facciamo

XMPI.

Ultima cosa, ricompila gli oggetti.

Quindi più o meno, cioè più o meno,

farà quello che avevo detto ad esempio sulle modifiche

che facciamo sull'XML di versione.

Ricompila gli oggetti, che forza.

Perché comunque aggiungere una tabella,

toccare una tabella, fare una stessa tabella,

può scompilare gli oggettiti che quindi vanno ricompilati.

Quindi lui qua dentro si va a recuperare per ciascun applicativo quali sono i suoi oggetti e li ricompila.

Eccolo qua, e li ricompila.

Finito.

Quindi per rispondere alla domanda di Federico, giusto?

Sì, quello sulle viste, quel bottone.

Esatto, questo qua, cliccare qui, fa esattamente a manualmente, rifà, rifà, rifà, questo qui, quello che sta dentro il funnel

fa questo

però manualmente nel caso che

questo come si può dire

in evenia perché magari

nel caso classico qual è?

mi è andata una modifica in errore? ok la correggo

la rilancio quello che sia

magari la mia modifica creava un look up

però se il look up

lo crei tu adesso manualmente perché

è andato in errore io ormai il refresh automatico di look up l'ho fatto qui quindi se tu che devi

cliccare qui e lanciarlo ok esegue questo pezzottino di fari chiaro

chiaro

tutto chiaro ragazzi questo ci siamo

ok perfetto queste sono le modifiche al db non c'è

non c'è

non c'è altro da dire Facciamo questo, non dobbiamo in altri 10 minuti.

Come fa la pagina? Dov'è che la pagina controlla?

E l'utente può visualizzare la pagina?

sempre nel controllo del dispatcher, quindi mi ho detto che se il nostro utente scrive

accede sulla pagina dei comuni ad esempio quindi entrerà nel metodo service

e fa, mi avevo detto che qua lui va a prendersi il controller name quindi prende il mapping a

partire dal mapping cerca il controller eccetera però fa anche questo eccolo qua

però fa anche questo, eccolo qua se attive le modifiche liquid base

quindi in debug

non ce l'avete, però in produzione

si, va a verificare

il controller

che mi sta chiedendo l'utente che risulta

bloccato

e per capirlo

fa

queste serie di query

però lui dovrebbe andare anche a vedere

in base all'application

qua il mapping

aspettate un attimo

available

si è qua

ah ok fa due volte prima lo cerca per controller

per mapping, quello che vi dicevo

però non lo si usa

e poi va per

application status

quindi cerca per l'applicazione di quel controller

se gli risulta loccato, o meglio, se non gli risulta available a posto, se non gli risulta available, gli mostra una pagina in base allo stato, quindi ci sta hdm-error-locked-unown, eccetera.

Quindi error, che ne so, che cosa scrive? Ecco, aggiornamento è stato eseguito.

Per cause tecniche, aggiornamento ha prodotto un errore e pertanto non è possibile ripristinare la funzionalità.

Ci chiediamo cortesemente di contattare il centroassistenza, ok?

Viene fatto quindi qui dentro.

Qua dopo c'è

invece

ah sì questo qui

ok se è bloccato psgx

come vi dicevo

bloccare psgx vuol dire

bloccare tutte le pagine

quindi la pagina che verrà mostrata è quella di

close browser

quando addirittura finisce l'aggiornamento

gli dice

vi dice di close browser, quando addirittura finisce l'aggiornamento, l'aggiornamento è eseguito,

questa attività sarà disponibile chiudendo e riaprendo il browser, perché bisogna proprio

riniziare da zero, cioè è bloccata pure la login per intenderci.

col psgex, con psgex bloccate

tutto

c'è un'altra cosa che volevo dirvi

aspetta un attimo

poi abbiamo finito

eh

ah sì

però questo in realtà fatemi pensare.

Sì, sì. Allora, supponiamo che è installato su un ambiente Arias alla versione 2015.

Vi lasciate anche un add, un patch, un bug fix alla 2015.

Quindi 2015 add 1.

Questa verrà installata tramite il tool che dicevo install l'installer

cosa fa l'installer questo giusto perché è bene sapere cosa succede sotto

acqua mi sa che il manager non me lo fa vedere il bilanciatore vero

Non me lo fa vedere il bilanciatore, vero?

No, mi manda su Arias.

Vabbè, vediamolo sull'ambiente.

Aspetta un attimo, forse riesco ad andare direttamente sul Tomcat. Grazie. ok ok

che fa il Tomcat?

allora io ho già una web app Arias

ad esempio qui installata

ne installo una nuova, più aggiornata, diversa

viene fatto il deploy di una web app

che si chiama nello stesso modo

ma con una versione diversa, vedete?

questa è una funzionalità di Tomcat 8, non è nostra

qui su Tomcat 8 è possibile per una web app

deployare la stessa web app però su versioni diverse

la versione è una stringa qualsiasi

nel nostro caso ci abbiamo messo

anno, mese, giorno, minuti

ore e minuti

e secondi

ore e minuti

del momento in cui è stata fatta l'installazione

quindi questa web app è stata installata

il quattro

l'11 aprile

l'11 aprile ieri alle 20.29

quindi questo spiega perché c'è stato il disservizio

qualcuno stava lavorando

quindi

che succede?

oggi installo una web app

che farà

l'installer, crea un'altra web app

quindi troverò qua un'altra riga areas, duplicata,

però ad una versione di oggi, quindi 4 aprile, 12 aprile, 12 aprile 2022, d'accordo?

Perfetto.

Quindi avrò due versioni della stessa web app, una più aggiornata, una nuova.

Perché questo? Per garantire lo deploy, quindi per garantire la continuità di servizio,

perché tutti gli utenti che sono collegati nella vecchia web app continueranno a lavorare nella vecchia web app.

Gli utenti che si collegheranno per la prima volta verranno invece indirizzati dal Tomcat alla nuova web app.

Poi non appena un utente che lavora sulla vecchia web app farà logout, alla prossima login utile verrà indirizzato sulla nuova web app. Poi non appena un utente che lavora sulla vecchia web app

farà logout, alla prossima login utile,

verrà indirizzato sulla nuova web app.

E così via e dicendo.

Fino a quando non ci saranno più sessioni sulla web app vecchia.

Quando non ci sono più sessioni sulla web app vecchia,

il Tomcat fa l'undeploy della vecchia versione.

E quindi a quel punto sarà attiva solo la nuova.

Perché vi dico questo?

Perché quando lui va a verificare se un'applicazione è bloccata, lui dice la web app attuale è una web app obsoleta,

intesa come la vecchia versione, oppure una web app nuova? Quindi va a verificare, insomma,

nuova quindi va a verificare insomma qua dentro c'è sta più di una e io chi sono la vecchia la nuova per sapere questo e la veste alla vecchia la nuova sulla si web app

eccolo qua si scrive qua dentro in questo campo running code

questo qui

quello che viene scritto

qua

va a comparare questo

con quello che risulta sul Tomcat

questi qui invece li potete ignorare

i demoni non gestiscono lo deploy

quindi questo che vi sto spiegando è solo per le web app utenti

i demoni vengono semplicemente cancellati e ricreati nuovi, tanto come vi dicevo i demoni di servizi non

ne crea se un attimo vanno giù, ok? Quindi quello che conta è questo, quindi dice, se is locked for

is locked for not

se non sono una web app vecchia

allora va a vedere

quello che vi dicevo, controllo e status

application status eccetera

se è la web app vecchia

se la web app vecchia,

anche se è tornata available la maschera,

mi mostrerò quella maschera di need sign out,

cioè gli dico, guarda, giusto per capirci,

è stata fatta una modifica su acquisti, quindi ha bloccato il menu

di acquisti, l'utente è andato lì e dice attenzione

la modifica è in corso, ok?

o lo aspetta, nel frattempo il pronto soccorso lavora

la gt lavora

quando la modifica al db di acquisti è terminato

non è che gli sblocca la web app

o meglio, la sblocca

a chi è collegato sulla nuova

web app, la nuova versioneova web app la nuova versione

perché sta già sulla nuova versione

a chi sta sulla vecchia web app

li mostrerà attenzione

la tua maschera è cambiata nel frattempo

fai log out

e rifai login in modo da essere

rindirizzato sulla nuova versione

chiaro?

si tutto qui chiaro? sì

tutto qui

non fate le altre domande altrimenti finiamo a mezzanotte

no no no assolutamente ragazzi

no no no

no no

no no ma ripeto io lo capisco che non è neanche facile stare a sentire

eh sì

però va fatto esatto ci tocca va bene ragazzi quindi questo è quanto

per le modifiche ci becchiamo allora domani mattina e proseguiamo con con altri argomenti va bene

bene ok ho fatto una serata ragazzi. Buona serata. Ciao a tutti.


-----------------
VIDEOLEZIONE 09 :
-----------------

Buongiorno a tutti ragazzi, buongiorno, scusate il ritardo, buongiorno.

Buongiorno.

Buongiorno.

Allora, iniziamo subito, però prima di iniziare, anche in virtù di quello che ci siamo

ieri, noi adesso attualmente facciamo un paio di pause

facciamo una la mattina

intorno alle 11

o un pomeriggio intorno alle 4

preferite spezzettarle

quindi fare solo due pause la mattina

o due pause il pomeriggio

ditemi voi

a tanto fine come

per

stare più vigili

non lo so, ditemi voi

a me sembra che sia anche una

giusta preferenza da parte tua

visto che poi alla fine

sei tu a parlare per tanto tempo

insomma

per me va bene continuare così

però se volete possiamo fare

una pausa di 5 minuti

adesso 10 e mezzo facciamo 5 minuti

poi dopo rifacciamo quella un po' più lunga

sì, per me va bene

proviamo oggi

proviamo poi al limite

perfetto, poi vediamo i giorni dopo

come domani

se continuare così

va bene, lo facciamo così

proviamo a fare una pausa più corta e poi una più lunga

se è mattina e pomeriggio

va bene, ok

altra cosa, altra domanda

avete tutti adesso un ambiente di sviluppo

scaricato

un'idea, configurato

sì, io sì

allora

io ho l'ambiente di sviluppo scaricato, ma sinceramente ho qualche perplessità sugli agganci fra Eclipse, Java e via discorrendo. non li vedo come li mostri tu

quindi

mi starà sfuggendo sicuramente qualche cosa

ok un attimo diamo lo sguardo

una cosa intanto magari

tu intanto apri il tuo eclipse

collegando la workspace

che ti ho scaricato

poi magari condividi la schermo e vediamo

altri?

Maurizio?

io ho scaricato, me l'ho configurato ancora

quindi hai scaricato l'Eclipse Workspace

ce l'hai sulla tua macchina lo zip?

scompattato pure?

si si si

ok perfetto

allora io ho scaricato tutto quanto Sì, sì, sì.

Quindi questo vuol dire che sì, ho un ambiente, però ho visto solo gli esercizi della prima lezione, quindi se nel frattempo avete fatto degli sviluppi sul workspace, quelli non ce li ho.

Quindi sei pronto eventualmente, giusto?

Sì, adesso sto facendo ripartire un attimino Eclipse per controllare.

Va bene, va controllare Perfetto

Federico ha detto ok

Daniele ha detto ok

Cioè tu puoi salire un attimo per partire

Ciao buongiorno

Buongiorno Gianfranco

Gianfranco tu c'hai un Eclipse

E workspace

Configurato sul tuo PC?

Sì, provovo a fare la build full sul repository, svn.

Ok, magari spendiamo un attimo la mattinata per vedere...

Fate una cosa, fate partire tutti i vostri Eclipse, adesso magari spendiamo un attimo la mattina per vedere... fate una cosa, fate partire tutti quanti i vostri clips, adesso magari spendiamo un attimo una mattinata per vedere... perché mi hanno detto, allora,

possiamo usare l'ambiente di formazione per fare degli esercizi controllati, ok? Quindi

il discorso è, l'ambiente di formazione lo potete usare soltanto su supervisione, questo

è il discorso, fino a quando non vengono effettivamente, poi viene fatta effettivamente la consegna.

E quindi gli esercizi rientrano tra le cose che possiamo certamente fare sull'ambiente di formazione,

quindi non dovete fare, che ne so, alter table, crit table, non toccate.

Per quanto riguarda invece, mi sembra, uno di voi aveva chiesto sull'avere una database sulla propria sulla propria macchina

su quel

scusate un secondo

scusate.

Dicevo invece, per quanto riguarda farselo partire, insomma, un DB sul proprio pitch in locale, ci si lavorerà, però è un po' più complicato perché ad esempio solo l'ambiente di test sono 7 terabyte di spazio, quindi bisogna un attimo vedere come fare, però per adesso noi possiamo lavorare tranquillamente sull'ambiente di formazione, sotto supervisione, quindi va benissimo l'occasione delle lezioni.

Quindi siccome degli argomenti del corso che dobbiamo trattare rimane il fatto di vedere

XMPI, però subito dopo vorrei fare gli esercizi uguali.

e quelli che abbiamo fatto insieme, cioè quello che ho fatto io, quando abbiamo fatto io, giovedì e venerdì, i primi esercizi che abbiamo fatto, quindi quelli dove abbiamo visto il pattern di GBF, abbiamo visto come si fa il modere, come si fa la view, come si fa il controller, tutta quella serie di esercizi, adesso praticamente noi li ripeteremo,

però li ripeteremo su un'ottica diversa,

perché in realtà,

e questo un pochettino l'abbiamo,

intanto condivido lo schermo,

no, di che parlo,

questo un pochettino l'abbiamo visto

navigando le maschere, no?

Che ci sono ogni tanto,

devo anche collegare VPN

eccolo qua ci sono ogni tanto delle maschere fatte in questa maniera qui

ogni tanto delle maschere fatte in questa maniera qui.

Se la troviamo, adesso...

Vabbè, lo prendo anche uno a casa, tanto qua dentro ci sta...

Me lo collego su...

Cambio in posizione login... No. collego su campo impostazioni login

logistica ecco qua le maschere fatte in questa maniera qui

che sono ben divertite

rispetto a quelle che abbiamo fatto nel nostro esercizio

ok?

queste maschere qui noi le chiamiamo maschere JAUF

perché sono diverse? perché ad un certo punto

all'interno di Ares è stata introdotta

una nuova libreria grafica

ad un certo punto della sua vita

le maschere vecchie sono rimaste

le maschere vecchie

sviluppi nuovi sono stati fatti con questa nuova tecnologia

alcune maschere vecchie sono state migrate in questa nuova interfaccia grafica che si chiama JAUF, noi la chiamiamo JAUF.

Infatti vedete che ad esempio qua c'è nuova gestione di movimenti e ricevimenti, ma c'è anche gestione movimenti e ricevimenti, se clicco qua...

vedrò la stessa maschera

ma con un layout vecchio

ok?

qui dobbiamo fare il corso

quindi ripetere i stessi esercizi che abbiamo fatto giovedì e venerdì

ma con l'obiettivo di riprodurli in questo

in questo formato grafico

quindi rifaremo praticamente la stessa cosa

ok? rifaremo tutto

il bin, rifaremo il controller

quindi quella è l'occasione insomma per rifare insieme

gli esercizi di giovedì e venerdì

quindi per quello che chiedevo su per quanto riguarda l'eclipso del workspace.

Quindi magari se voi fate partire un attimo il workspace, una alla volta condividete lo schermo e cerchiamo di vedere insieme chi ha problemi.

Ok?

Questa libreria già o forse

sempre dentro PSG Lib

come?

la libreria

bravissimo, è stato dentro PSG Lib

esatto, esatto

quindi è stato introdotto ad hoc ma introduce

solamente modifiche a livello visivo

quindi solamente interfaccia utente

o anche

solo look and feel però è sostanziale dopo

vediamo come si fanno i non si usciranno manco le gsp più per per fare quella quella grafica

dopo lo vediamo quando il corso come si fa

qui non so ma Maurizio tu non so se mi avevi risposto, se c'hai un Eclipse, un workspace.

No, ho perso.

Alizio, poi nel frattempo

poi abbiamo installato anche workspace di spresale a mea e amianto che chiedevano

una gdk diversa quindi comunque la roma di tra la freia addirittura se se se se

allora condivisione arrivata fondamentalmente mi da

vabbè non parte

secondo che mi allargo un attimo

io purtroppo questo non posso

tranquillo

fondamentalmente dice che nelle grip sim

c'è richiesta la 8

ok

fa un attimo una cosa perché fa una cosa

allora

esegui clip sec clip sec C'è fatela Ma questo secondo me è un problema

Che non c'è abbastanza memoria

Allora vai un po'

Quanti giga c'ha di Rambler?

No, no, quello ce n'è proprio di codice

Required version Java 1.8

Ok

Sto vedendo

che a me prende si è preso la 17 nonostante sia comunque settato non è un problema nel caso tu

basta che aprire clip fini sino dico mettendo la 17 li comunque va così no no c'è proprio un argomento per dirgli qual è il per cui ce l'hai installata ma java 8

comunque giusto sì sì sì sì sì tu aggiungi questa riga qui ok questa ecco e clip e clip Eclipse, Eclipse, Ini, JavaPath.

Allora, tu puoi aggiungere.

Allora, prima di VMArgs, quindi tra Launcher e VMArgs, esatto, quindi riga 14, aggiungi meno VM, invioio e sotto ci scrivi il path della tua java

solo meno vm invio

fino a qua no?

sì

fino a bin

no devi dargli anche il percorso della java

quindi javav.exe devi individuare

ok bin

sicuramente

javav.exe poi

si eccolo qua

ok dovremmo esserci

ok ok già è positivo

sì no, già non passava avanti

sicuramente

tu come workspace hai scaricato con la

mchr Rencam?

no, abbiamo quello

si, aspetta

lo recupero

eccolo qua

si, si, mi pare

si, è ambulatorio

va bene, va bene

sta con la condizione

provo se ricompila tutto

ma dovrebbe

ok

ok

nel frattempo è partito

vai Mario condividi Grazie.

Secondo inizio Mario

Stamattina

vuoi vedere che

è Eclipse

che si lamenta

cioè che fa lamentare Teams

Mi sentite?

Sì, ora si vedo

Ok, grazie

Simone, rispondo alla tua domanda

Sì, io ho tutto a posto

ho Eclipse e Workspace

ok perfetto

grazie

ci siamo io purtroppo sono con 8 GB ok però mi sa che vedo

sempre schermo nero con te

aspetta

è quello che vedo io

ah pure tu vedo schermo nero

ok a posto

io vedo schermo nero

ok ok

quindi Teams tutto sommato

sta dando delle buone soddisfazioni.

Sta dando il vero.

Ecco, è comparsa la mascherina del Teams.

Che forse arriva in lips.

Che vergogna.

ma allora

non so se è cominciato a vedere qualcosa

yes yes yes

quindi tu cerca MC Renkan

perfetto

però direi che

tutto sommato ti sembra normale

tutto sommato sì

io non capisco scusami non capisco perché vedo cartelle e non pacchetti.

Magari.

Ah vabbè, in che senso?

Scusami, che pacchetti?

Apri, esplodi.

Esplodi.

Vabbè. esplodi ci provo così Grazie a tutti.

tanto eclipse non risponde

vediamo tempo un attimo

che si scalda all'inizio

quando parte

se mi scaldo io parto

al computer

comunque la visualizzazione

è perché hai aperto la view project explorer

dopo ti imposti sotto windows

la view package explorer

e a quel punto hai la stessa visualizzazione

che hanno gli altri

ah eccoci

giustissimo grazie

quindi agendo da qua windows

per adesso meno 5 clic

è meglio un po' di tempo

sì no no no

non solo indicare no, ma

qualche giorno fa

avevo

comunque

provato un momento di grazia di Eclipse

poi sotto ci stanno

tutte le le sottocartelle.

Sì, dobbiamo riconfigurare il Tomcat e la Java. Io quando ho parlato dall'STP mi sono preso

tutto il pacchetto

poi

mi sono spostato

Eclipse

a fianco

a

diciamo

a Tomcat

e lì ho inserito anche la cartella WS, per cui mi aspetto che

l'epat che avevo definito prima

prima di

utilizzare

il materiale scaricato

da FTP

faccio una cosa un attimo

nel frattempo

siamo su un altro collega

da lì qua da lì tempo

vedo tutto un roll risponde

ok interrompo la

faccio vedere io

no

una cosa

ok ok con l'aiuto di Maurizio abbiamo impostato

le preferenze, tutte le cose della java

quindi penso che questa parte qua già sta

se non vedo più la clip

ok

questa qua la jdv

quella parte del tombo ok ok sa qua la gdv

per la vostra è quello di hrm chr che chi c'era niente no ok vedevo il warning e chi è qua fu il debut è che chi ha un workspace che funziona fatelo partire ok i riferimenti dell'ambiente

tanto allora chi c'ha questo workspace amiche a carrir rencam ce l'ha già sul debug properties

i riferimenti al db di produzione

altrimenti chi non ce l'ha li proietto un attimo e li fornisco

fate partire i riferimenti sono questi qui Questi qui sono Sardegna, Sardegna, Sardegna, Sardegna proprietà proietto.

Questo qui?

Ok.

Password uguale a questo questo non ricordo male è quello che era già impostato anche nel workspace del SIO, giusto?

Sio non lo so

però puoi controllare sul file debugger

punto properties

di oepr giusto no no del tuo tuo progetto web giusto un progetto web

ma è quello che facciamo attiva solitamente era EPR ti condivido un attimo

proviamo dai

perché il SEO purtroppo è un altro laboratorio di sviluppo

quindi ognuno ha poi il suo sistema

allora per chi invece ha le workspace mchr-encam

sarebbe il debug properties che è stato il progetto web

che si chiama ARIA

però lì ce l'avete sicuro voi

cercami un attimo debug.properties

fai ctrl-shift-r

debug.properties

allora un secondo che mi zoom

allora c'hai

bftest

un secondo

sul tomacat che cosa deploy?

oipr ti direi

allora si

allora si

l'install lo facciamo sempre su oipr

che poi si porta dentro

tutti gli altri progetti

ok allora perfetto ok dentro tutto il gli altri progetti

ok allora perfetto che in modo strano diciamo ok si allora è quel debug proprio per questo pr ok io a questo cres di b test 1 vediamo dovrebbe essere lui però

formazione si si faccia un ping andiamo un po' non è che gli si è piaciuto

un po' di moda

si la VPN era attiva

nel frattempo si è

si è suicidata

la prima volta non si è collegata perché mi diceva

che il server VPN non era raggiungibile

ora è collegata

quindi non vorrei che avesse

qualche problema di... Sì.

Probito username areas8. Non so se...

Vediamo pure qua.

ok, non lo aggiungo l'IP è

10.3

questo qua sopra, questo commentato

67,155

yes 67,55 yes

quindi basta sostituirlo qua giusto

e poi la password è cambiata

pure se non ho visto male prima mentre condividevi si lo anche lo user 15 no

provi anche la porta sbagliata 15 21 giusta a cui ci rendono rispetto

adesso ti ricondivito io però in quello del build quindi non vorrei che poi me lo sovrascrivi quindi vai direttamente ok

sì, l'utente

è questo qui

Areas 20-22-03

la password è la stessa

ok

20-22-03 La password è la stessa.

Qua vedo che ho più parametri, lo metto ovunque, perché ho username, password, main user e refresh.

No, main user e user mettici lo stesso, sempre questo.

La roba lì,ienda eccetera ignora proprio

no no no i primi quattro diciamo

vabbè il tempo di rifare l'install ti dico.

Ok.

chi invece chi pensa di avere

un clip workspace configurato

lo faccia partire

con questi parametri che ci siamo detti

chi è che invece proprio ha problemi

per esempio Mario ci torniamo

però al di là di Mario

che ne so

pronto? ho sentito una voce per un secondo?

Sì, sì.

Quando riesce a dire...

Sta caricando, mi sembra

ok ci sono

dicevo

la build

dovrei fare la full rebuild

si

su all'ant dici

full rebuild

e qua mi chiede

su

Su quale? Aria screen? Main?

O questa qua, Aria fluid?

No, è quello che vuoi, tanto...

Puoi dare semplicemente ok quando esce fuori questa maschera.

Poi sulla console dovrebbe partirti a scrivere.

Stai un po'.

Io vedi in ritardo, eh?

Ok, si è iniziato, perfetto.

Poi quando hai finito puoi far partire il tuo Tom tomcat tu il tomcat l'hai riconfigurato?

ho installato la versione questa qua

l'8.8

ok ma l'hai configurato dentro e clip

sì sì nel senso che ho messo qua il preferenzo questo qua il messo tutto server runtime ma

faccio comunicato questo qua perfetto adesso non lo vedo però sì l, sotto window preferences e clips, giusto? Sì, sì.

E una cosa, quella parte l'ha già importato il pacchetto mchr-rencam,

dovrebbe già essere configurato con la parte che stava configurando il collega, Daniele,

la parte del... quell'IP, no?

Che cosa... questo qua è ora con giusto

il

c'è già configurato

il file è debug.properties

però è già configurato

con la mia informazione

questo qua non lo volevo trovarlo

debug.properties

che è stato dentro il progetto di Arias

eh vedo

buildproperties

buildxml

debug.properties e vedo big di proverti svil di ex amm e bag the bag non ha dato punto proverti

lo vedi

non vedo niente però comunque è the bug punto proverti e il sono tipo un

centinaio devi scegliere quello che sta sotto il progetto arias quindi arias.debug.property

ma è una cartella?

cioè che sta a livello di arias?

eh sì da qualche parte

tu hai fatto ctrl shift r?

no ctrl shift r

e poi c'è il key

debug.property

ah

il bug.property

eccolo qua

ah se è tutto arias web content web info

eccolo quelli

seleziona ecco la quale è sempre corretto qua e tra il corpo

grazie ok quindi aspetto che finisce nella compilazione

quando ha finito tu fai o start

c'è

forse è finito un avanzamento dove non si conclude dicendo

ti conclude dicendo che build completato

ok provato su tomo gatti faccio start che le bug a partire del bug con l'icona del dell'insetto

partire debug con l'icona dell'insetto ok sulle clips

il tomcat invece lo apro

però quando lo apro dici la

non me lo fa partire

no il tomcat deve far partire

dai clips

quindi vai sul tab server

ho finito il bd successo giusto in ritardo come si è stato fatto vai poi sul tab server di eclipse all'estavante console ok questo qua scaravaggio serve se poi lo scarafaggio esatto

noi di attivato

secondo secondo

si era

è frizzato ora lo vedo attivo ok ci clicchi e poi scarafaggio

e d'articite stai arrivando

anche se si sta avviando giusto

ok si sta avviando giusto che cosa sta succedendo

ok quindi attendo

si ma adesso non so

sta

avanzando si sta a 0

ok grazie

un altro Qualcun altro?

Allora, io nel frattempo su Eclipse,

permesso che mi sentiate,

ho attivato la vista dei package, però sembra la sensazione che ci sia qualcosa di diverso dal solito.

Forse vi condivido lo schermo, ma...

Ma Teams mi lampeggia in una maniera fastidiosissima.

Quindi non oso immaginare che cosa stai combinando. Allora

Sì, Project Explorer

Allora, se andiamo su Project Explorer...

Non so se riesci a vedere.

Sì, adesso sì.

Come vedi, diciamo, ho preso una cartella a caso, insomma, il controllo. No, vabbè, vabbè, vabbè.

Mi sembra che ci sia tutto.

Allora, va un po' su Windows.

Aspetta, chiudo un po' questo qua.

Invece qui, package, è venuta fuori questa...

O vuoi ignorare, vuoi ignorare.

Ignoriamo. Allora, Windows.

Scusa?

Preferences.

Ah, eccoci.

Buoni suoi tempi

gr

cerchi in alto in alto su dove c'è scritto type filter text

scrivi gr

poi vai su installe gr, infatti qui devi selezionarlo, selezionare quella è l'unica riga che vedi, edit, qui in alto, su directory, ti cerchi la tua java 8 installata

sul tuo pc

deve essere una jdk

e devi individuare la cartella bin

ma praticamente questa

è quella che viene

diciamo c'era nella cartella Eclipse d'origine.

Sì, Eclipse ha una sua gk di default.

Quindi...

Usci la nostra nuova.

Gli editi

questo

ok

seleziona cartella.

No, c'è qualcosa che non qua, deve essere rimasto sopra.

Ah, sta, non ci stavo pensando. è so possibibili adesso possiamo fare finish, vero?

Sì, finish.

Apply and close e ora aspettiamo quei 30 minuti immagino con questo pc

mi sono esercitato in una registrata nervosa non so se si è

e niente

allora cedo la linea

Enrico Monti

ok

ok

ok

allora oggi facciamo XMPI ragazzi

questo è il più caldo per prepararci per domani

quindi

insomma chi ha l'XPay configurato faccio una prova, così magari oggi ne approfittiamo per gravarci qualche decina di minuti come stiamo facendo adesso per farcelo partire, altrimenti nella peggiore delle ipotesi adesso stavo pensando, facciamolo svolto.

sviluppo, tanto alla fine, come dire, lo posso compilare anche a memoria, nel senso, facciamo

gli sviluppi, come abbiamo fatto l'altra volta, cioè guardate il mio pc, li riplicate sul

vostro computer, poi magari non riuscite a farla, ad eseguire il codice, ma ve lo mostrate

e vedo un attimo gli errori che avete commesso, eccetera,

insomma ve lo correggo a vista, non sono proprio un compilatore infallibile, però un pochettino

magari le cose più grossonare, insomma, sicuramente le riesco a individuare.

Va bene, poi Mario facciamo un attimo, una volta che ha finito a come adesso ci metterò un po'

perché questo penso che ti farà la full rebuild poi dopo il passo dopo

è personalizzarti il server

quindi poi magari più tardi

ci torniamo da te

ok grazie

va bene va bene

va bene quindi dicevo domani

iniziamo il corso con cui

vedere come si fanno le pagine in jauf

simon è una domanda

adesso sono riuscito ad avviare tutto

come sono mi?

sono riuscito ad avviare tutto

anche tutte le verie applicazioni

però volevo un attimino evitare di far salire tutte le applicazioni quindi me già anche per fare delle run più veloci mi ricordi che riga devo

commentare su application properties hai una se voi hai due righe per ogni applicazione

cioè ok basta commentare a semplicemente commentare a gruppi

perfetto 7 commentare che quindi diciamo sia sulla pre che c'è un proprio artist che

volendo anche subito ma subito per chi si volendo ma tanto più il property

solitamente ci mette dopo tanto tu lavorerai solo sul main non fare più

full rebuild ok la prima volta quindi ci mette cinque secondi provato questo poi provalo provalo provalo

con il main fai doppio clic che fai ok ok

provare su console

allora sto partendo sovrata

Allora sto partendo, sto partendo, sta...

Ah questo forse è che è un po' da un po' di tempo forse non l'apimi, se ti sta facendo una build.

Sì, ti sta facendo la compilazione.

Beh, questo è la completa qui.

Secondo me Adobe...

si ci metterà un po però ecco la compilazione si vede che per qualche motivo secondo lui era

da tappa è giunto l'uomo di farà purebile vabbè però ecco una volta al netto della purebile

poi quando si parte che senti l'antra il main dovrebbe durarti poco veramente 5 6 secondi

quindi puoi anche lasciarlo così altrimenti si lo li aggiunge sul numero project semplicemente

quindi puoi lasciare tutto ma vedi in un project

ti dici quanti progetti devi buildare, se metti 5

si ferma a 5, se metti 7

si arriva fino a budget e così via dicendo

ah ok

quel numero sopra, esatto

Simone

si

scusa, se volavo a volo

è fattibile

mi ha dato un errore l'avvio del Tomibile mi ha dato un errore

l'avvio del Tomocat mi ha dato un errore

vai

dice

dice

dice

start team Tomocat

serve dentro la valossa

si incontra il problema

l'archive, c-test, apash, Tomocat

già

non mette un po' carica perché non sarà nero

si sta un po

già non esiste. Grazie a tutti. Grazie. no ancora no

provo un attimo a leggermi che ti dice

mi sto dicendo

dice beh

ha contato un problema

ad archive

bootstrap.jar

che è referenziato by the class path

non esiste

ah provo a fare così guarda adesso ti condivido io allora

ah tu hai fatto così

tu il Tomcat te lo sei cambiato giusto?

il percorso del Tomcat

si sotto preferences

quindi sotto window preferences

server

runtime environment quindi qua sul tuo Tomcat ti sei cambiato la cartelletta giusto

windows reference server si era in time romans a pace tomcat 8 gli specifici la pace 8 specificità non esiste un favore dice che non esiste però cambiano su browser

devi dire quello che il tuo tomcat remova rimuovo rimuovo faccia aggiungi

aggiungi non messe su progetto no sotto accenture server apache tom cat

ok questo qua è dove è

questo qua ma se aggiungi a base il modello nex e poi do la directory

ok se una folder su dr e pure controlla che specificato la tua gr acqua simulata la gt desi preferenze già va già

proverti java

proverte no

no build path

no

guarda il mio schermo

qua dico io

sì sì

sì

sì ah sotto sempre Sì, sì, sì.

Sì, è sotto server. Ah, sotto sempre runtime environment, sotto server.

Sì, qua dico, metterla gb.

Come si fa?

sotto java invece no devo andare sotto server sempre dove ho messo il top

quello va bene java però già l'avevi fatto giusto la jr e l'avevi cambiata

si si si poi come fai a fare uscire jr e sotto la patch?

non mi sono mosso, sono sempre qua, su server runtime environment

eh questa come la fai uscire?

cliccandoci sopra

si? qua

ah edit

qua tu hai specificato il percorso no si può edit fatto edit ora vedo edit

work branch default gb no specifica lì un po la tua g apri lo specifica di l'altra giusto per sicure sta la faccio ci sta

leggerlo clicca ci vediamo che ci lascia fuori un altro si jl jl e pula finisce finisce

ok apply

e riprovo a ritangere così guarda poi guarda guarda me

la freccina che sta su vicino al scarafaggio, fai debug configuration e poi sotto qui apache tomcat cancellati tutto, cancella tutto, lo selezioni e poi ci sta questa

x, cancella apache tomcat questo deve essere vuoto.

- Ah tutte le cartelle sotto apache tomcat le devo cancellare?

- Sì. Quindi scarafaggino debug configuration

cerco apash tom cat eccolo

se lo apro c'è scritto new configuration non c'è niente

cancello

new configuration

new configuration cancello

ok delete

delete

close

adesso provo un po' a far ripartire il tuo domcat

ok sotto

server

forse devo riavviare i clips

perché non vedo più niente

no è normale perché l'hai cancellato tu creato lo fai così tasto destro

se non c'è niente più su server fai tasto destro new server

apache tomcat 8

selezioni il tuo tomcat qui

next Selezioni il tuo Tomcat qui.

Next.

E ti ci metti il tuo areas a destra.

quindi faccio new, apache, 0 server, poi seleziono, lascio localhost, next, arias, portodesk, rad, come l'atto su next

arias porto destra finisce

ok ci metterò un po poi quando finito dallo scarafaggio per ripartire

ok ora lo vedo

server e rett localhost servire trova l'host e faccio start quello scarafaggio

posso già farlo no?

si si

vorrei stop it

stop it

ok

ok sta avviando

c'è sta ancora a 0% però sta avanzando

ok grazie

prego

va bene

facciamo iniziamo con

XMPI poi

quando facciamo esercizi ripeto

vediamo se il punto è troppo

guarda io

scusami Simone

a me è partito ma ho un errore che non trovo

una look up non so se vogliamo vederlo dopo.

Ah, perché cazzaroletta? Perché tu hai l'ambiente del SIO.

Non trova il look up PR, fat rica di...

Non lo trovi perché il DB di formazione, questo qui è dell'AMC, non è del SIO.

Se rimetto quello di che c'era prima...

Infatti, bravo, forse per quello era diverso

rimetti un po' quello che di prima come schema

forse perché lo schema del CEO è quell'altro

ah quindi l'Areas

il tbitante è lo stesso perché ho visto

che quel DNS

era uguale

provaci pure

ok grazie

comunque già

se ti parte

è 99% del lavoro

sì sì, l'altra volta

navigavo nell'applicazione

allora riprovo un po' a quello

grazie

posso approfittare

anch'io?

sì sì

aspetta, condivido così

vedi

sì sì Allora, condivido così, vedi.

Ok, allora, su Hunt ho fatto full build, è andato, mi ha dato build successful che è andato bene. Poi il problema è che a sinistra sembra quasi che non compili, infatti vedi proprio il problema sembra quasi che ti è compito.

devi dare compilata ma un po' è perché quando di solito quando si dà l'errore di compilazione

sulla riga 1 è sintomo che c'è qualche va soltanto fatto una clean una rebuild però prima di farlo

vai un po apri un po il progetto psg lib vedi un po lì dentro se c'è degli errori psg lib progetto psg lib vedi un po sono gli errori sempre dentro gbf ma sempre dentro gbf però

per i più seggi lib quindi chiudi questo ok c'è sotto penultimo ok un po un attimo qui seleziona

la psg lib selezionano selezionalo e poi fai

mostra i problemi

i problemi ce li hai tutti a destra

esatto, quello lì

apritelo

allargatelo un po'

questa finestra

provo un po' a fare doppio clic su un accaso

sembra quasi

non stai compilando tutto

una cosa, seleziona il progetto

psglib, project

poi clicchi su project

clean

clean

ok clean clean

ok dovrebbe pensare

ok è partito prima il tom che adesso ti schianterà perché non è compilato e basta il clean solo di besteggi libri poi dopo dovrebbe pensarci lui in cascata a farlo

per tutti gli altri

qua il Tomcat ammazzalo pure

col tasto rosso

stop in alto

chi è in alto a destra

aspetta che mi sono

mi sono perso

ok così stop

esatto tanto questo non

non partirà ok

ora sotto sta facendo la rebuild

facci un po' su progress

basta cliccare in basso a destra

dove c'è scritto building workspace 13%

ok allargala un po' la gruva bene

building Si sta continuando.

La GR tu l'hai impostata giusto? Si.

Adesso è impegnato però è

finire e poi dopo ridiamo

dopo ridiamo uno sguardo

ok?

ok va bene

ok perfetto

poi come dicevo alla fine

come mi piacerebbe è che fate un attimo

l'esercizio anche voi

ok va bene

poi ripeto

alla fine facciamo se non r non siamo a eseguire facciamo esecuzione

esecuzione visiva poi diciamo che tutto questo package degli esercizi che che sto facendo

quindi per intenderci questo pot poi ve lo passo, ok?

Ce l'avete e alla peggio quindi voi avete sia il documento degli esercizi, sia il documento degli snippet, sia la soluzione degli esercizi, pure farvelo è in parallelo però ecco magari può essere utile farci insieme così uno poi dopo viene

in mente degli altri dubbi insomma e le si vedono al volo insieme ecco tutto qui va bene va bene va

bene allora per adesso il codice insomma questo rip lo facciamo forse domani, però oggi intanto vediamo XMPI.

Che cos'è XMPI?

Allora, fino adesso ci siamo concentrati, ma anche parlando, siamo tra programmatori, anche parlando a livello di progetti, abbiamo visto di JBFettino anche con il nostro ambiente, fedele ambiente di formazione, sarebbe ciò che troviamo sotto l'applicazione anagrafiche. Quindi quando diciamo Sianc, quando diciamo anagrafiche, quando diciamo XMPI, stiamo parlando sempre della stessa cosa, sono sinonimi dello stesso oggetto del mistero.

dello stesso oggetto del mistero.

Adesso XMPI non lo vedremo,

sia da un punto di vista un attimo brevemente funzionale,

non è che ci sia nulla di particolarmente complesso, e poi dopo, al solito, ci vediamo un po' di tabelle,

un po' di bin principali sul codice Java.

Quindi, partiamo innanzitutto, queste sono le cose cose che vedremo quindi una piccola introduzione

la cosa ex mpi una overview sulle grafiche principali ce ne vedremo un po tutte in realtà

grafiche poi un focus su gestione proposte pesi ed alias che sono tre

argomenti relativi specifici soltanto di un'anagrafica, ovvero sia dell'anagrafica del paziente.

Diciamo che il 90% della componente funzionale di questo modulo gira e ruota alla fine intorno

all'anagrafica del paziente. Allora, che cos'è XMPI? XMPI è principalmente un MPI, quindi un Master

Patient Index, cioè una soluzione software per la gestione, il governo completo dell'anagrafica paziente.

Quindi quando parliamo di governo completo, significa che XMPI non fa solo la raccolta dei dati anagrafici di un paziente, non è che si limita a registrare un paziente, il nome, il cognome, il codice fiscale, eccetera.

nome, il cognome, il codice fiscale, eccetera, ma assicura anche la consistenza e il controllo continuo di questi dati attraverso funzionalità come l'accorpamento anagrafico, quindi la

possibilità di individuare all'interno del database due posizioni anagrafiche afferenti

alla stessa persona fisica, quindi duplicati, gestione delle proposte di variazione quindi per far sì che per proteggere

il record

il golden record del paziente

e far sì che le modifiche su quel golden record

avvengano in una maniera

controllata

dove ci sia una proposta di variazione

e poi un processo

di certificazione

questo poi vediamo nel dettaglio più avanti

gestione sulla qualifica del dato quindi sull'affidabilità del dato un processo di certificazione, questo poi vediamo nel dettaglio più avanti.

Gestione sulla qualifica del dato, quindi sull'affidabilità del dato,

quindi gestire chi mi ha valorizzato quel dato e il suo livello di affidabilità,

chi mi ha messo quel cognome, quanto è affidabile il fatto che quell'utente mi abbia valorizzato quel cognome,

cioè ha un diritto per dirmi qual è il cognome di questo paziente e così via dicendo,

e poi soprattutto la profondità storica sulle variazioni,

quindi tenere traccia di tutto ciò che avviene sul paziente,

quindi chi ha modificato un dato, quando, perché, qual era il valore prima, qual è il valore dopo, eccetera.

qual è il valore prima, qual è il valore dopo, eccetera.

Concetto fondamentale, e questo però lo vedremo poi meglio nel pratico quando facciamo i servizi web service,

concetto fondamentale è quello di identificare e condividere

l'anneagrafica all'interno dell'azienda, all'interno dell'organizzazione.

Allora, tutti gli oggetti di Arias, anche quindi compreso ad esempio

gli oggetti nostri BIN che ci siamo fatti per gli esercizi,

quindi il nostro BIN corso, il nostro nostro bin studenti, il nostro bin esami,

tutti gli oggetti creati su Ares sono accessibili potenzialmente tramite servizi web service.

Potenzialmente perché? Perché alla fin fine gli oggetti che ha davvero senso condividere

alla fine sono ben pochi.

Sicuramente il

re delle integrazioni è proprio

questo, l'oggetto del paziente. Cioè il paziente è

quello forse dove ruota, perlomeno

nella parte ovviamente più...

sicuramente per la

parte sanitaria, ma anche in AMC,

anche in ambienti MC, i pazienti

i pazienti vengono spesso e volentieri condivisi,

pensiamo ad esempio che l'MC sarebbe il modulo dell'acquisti, logistica, contabilità,

all'interno di un'azienda ospedaliera, che cosa vogliamo comprare?

Magari dei farmaci, farmaci che li dobbiamo dare a dei pazienti,

quindi i pazienti hanno un senso anche sull'MC.

L'HR certamente non ha nessun senso, che l'HR il paziente nemmeno sa che esiste.

non ha nessun senso, che l'HR il paziente nemmeno

sa che esiste. Il mediosanitario

invece ovviamente va di per sé

che è il punto focale

del paziente, quindi tra tutte

le integrazioni che vengono fatte su

Ares, il paziente è l'oggetto

più esposto

verso l'esterno, più transato.

Però in quanto sistema di anagrafi

XMPI permette di gestire in realtà l'intero patrimonio anagrafico di un'azienda, quindi non si limita al paziente, ma va a codificare anche tutte quelle anagrafiche, innanzitutto che ruotano intorno al paziente, che sono quindi queste anagrafiche di base, un po' alcune le abbiamo viste, il comune, la regione, le province,

non sono anagrafiche buttate lì che sono sole, solitari in un'isola felice, in realtà hanno un'interazione con gli altri oggetti di ares,

appunto anche il paziente, il paziente ha il comune di nascita, il comune di residenza,

ha la regione di appartenenza, ha l'asla di assistenza e così via dicendo.

E poi sotto anagrafiche base, un pochettino l'abbiamo vista, ci troviamo tutte quelle anagrafiche un po' più semplici, come province, regioni, comuni, asla, eccetera,

e ciascuna di queste anagrafiche, come abbiamo un po' intravisto, prevede dei rangi di abilitazione e disabilitazione per gestire l'obsolescenza. Un esempio è quello più comune, perché i comuni spesse volte non è che accade tutti i giorni, però accade che un comune magari cambia una regione, viene accorpato in un'altra provincia,

viene accorpato in un'altra provincia, un comune magari viene soppresso e diventa una frazione di un altro comune più grande.

Allora che succede? Non è che i comuni spariscono, semplicemente si gestisce l'obsolescenza, cioè il comune attuale se mi va a cambiare regione,

mi disabiliterò il comune attuale alla data di oggi e creerò alla data di oggi un nuovo comune che appartiene alla nuova regione. Quindi questo è lo scopo del range di date che trovate un po' dappertutto sull'anagrafica, un po' dappertutto c'è questi range di abilitazione e di disabilitazione.

Poi tra le altre anagrafiche che troveremo e le vedremo queste ci sono ad esempio una

grafica dei soggetti delle strutture dei prodotti abbiamo

anche intravisto insieme negli esercizi ad esempio quelle di tipi di pagamento e così da diciamo per

un nuovo video ce la facciamo diciamo che poi le anagrafiche considerate questo

anagrafiche un po come gbf sono dei moduli central è un modulo centralizzato

centralizzato. Essendo un modulo centralizzato, tante anagrafiche sono messe su XMPI non tanto

per un motivo funzionale, ma per un motivo tecnico. Supponiamo che ci sono due moduli

verticali che devono condividere la stessa anagrafica. Si utilizzerà, siccome magari

tutti e due moduli verticali hanno sia anche XMPI come modulo di dipendenza, è lì che

va a finire, viene messa l'anagrafica

però magari dal punto di vista di competenza funzionale

XMPI ne ha 0

è soltanto una questione tecnica

viene messa lì perché

è un'anagrafe condivisa su più moduli verticali

però dal punto di vista funzionale

ricade tutto da pannaggio

di quei due moduli verticali che lo utilizzano

quindi vedremo insieme alcune anagrafiche, non tutte, per questa ragione qui.

Faccio un esempio.

Le anagrafiche delle prestazioni, ad esempio, sono utilizzate tantissimo dal CUP,

quindi sicuramente quando poi farete ii verticali del cup sulle prestazioni ci

ritornerete altro esempio anche i prodotti gli diamo uno sguardo però i prodotti sono utilizzati

dal modulo dell'emc e delle df erogazioni di atta farmaco ok quindi sui prodotti ci tornerete nei

corsi verticali della mc ok quindi noi vediamo intanto quelli più importanti, che sono i pazienti, che hanno più un ruolo funzionale all'interno di XMPI, vedremo i soggetti, vedremo le strutture, queste tre anagrafiche.

Poi daremo uno sguardo a tutte le altre anagrafiche, un focus su alcune anagrafiche, lo farete poi con i singoli verticali.

Allora, quindi prendiamo il nostro ambiente di formazione intanto.

Anzi, mi collego con il nostro utente a Piera

ok

allora quindi vi dicevo

le grafiche di base sono queste

magari le scorriamo un attimo velocemente

per vederle

abbiamo l'anagrafica delle province

delle regioni, dei comuni

ora per tutte queste anagrafiche qui, vedete che abbiamo la gestione della data inizio validità e data fine validità, che adesso ho fatto nuovo.

Sulla regione stessa cosa.

nuovo. Sulla regione stessa cosa. Ora può sembrare banale, però in realtà poi tutte queste dati validità entrano in gioco e creano tutta una serie di meccanismi di validazione.

Faccio un esempio sempre banale. Qui sui comuni, se io adesso ci vado, questa è una

cosa connotato se io adesso vado a cercare il comune di roma

velocissimo una frezza oggi

si affrezzano oggi.

Che è successo?

Il mio utente non è abilitato, aspettate un attimo, mi collego allora con

questo qui, questo dovrebbe essere abito. Grazie. Ah, ma adesso vedendo che pure il progetto APR ci mette molto di più a partire il Tomcat, non so, è proprio il DB più lento, la VPN.

C'è qualche problema? Non rispondeva ancora.

Wipup. Si vanno a fare aggiornamento anche oggi

basta

dai

dai dai dai dai Grazie.

plan B

facciamo partire il locale.

Intanto scrivo in chat sul cellulare i colleghi ho fatto intanto...

Riproviamoci Roma, dicevo...

Può sembrare andare veloce.

Forse non era Roma. Mi sa che era Torino, Roma, scusate un secondo.

Ecco, vedete? Il periodo di validità, questo l'ho notato, si era Torino, il periodo di validità della regione non copre quello del comune. Qua abbiamo

il comune che inizia nel 1820, dal comune li viene associata la regione. Se adesso vado

a cercarmi la regione Piemonte, vedete? inizia nel 1850, quindi mi dice, attenzione, qua c'è un'altra validità che non è coperta da quella regione, cioè la regione parte 30 anni dopo rispetto al comune.

quindi poi tutte queste dati inizio validità eccetera non sono cose che si limitano così a essere registrate

hanno una valenza funzionale

anche sul paziente banalmente

la cosa classica che accade

c'è una validazione tra il comune di nascita

e la data di nascita del paziente

faccio l'esempio, quello più banale e classico

se se una persona è nata nel 1960 non può essere nata in croazia 60 sarà nata e jugoslavia è il

classico errore che magari c'è ma adesso ho fatto l'esempio quello più più banale ma questa cosa

avviene anche per i comuni se io sono nato che ne so appunto in un comune che è stato oggi è soppresso, che non esiste più

perché è diventata una frazione

però quando sono nato io, quello era un comune

e io con quel comune sono nato

se magari, mi ricordo un collega

aveva detto che c'era un comune Pirro

mi ricordo che è stata diventata una frazione di Cagliari

era uscito fuori

Pirri, perfetto

se io sono nato nel 60 dove Pirri esisteva

io sono nato a Pirri sono andato a Cagliari.

Quindi questa è per dire che quei dati di validità hanno poi anche una valenza funzionale, non sono semplicemente dati buttativi, anagrafici.

regioni, comuni, poi sui comuni, è una grafica dei comuni, è importante dire che può gestire innanzitutto anche lo Stato estero, quindi la stessa grafica dei comuni viene usata per

fare i comuni italiani o gli Stati esteri, quindi Angola, Kenya, eccetera. Un dettaglio del comune è l'associazione con la rispettiva ASL.

Quindi noi sull'anagrafica di base abbiamo anche l'anagrafica delle ASL, delle aziende ospedaliere e dei presidi,

e quello che ci siamo qui dentro su ASL o presidi lo possiamo collegare, tornato nuovamente lento,

lo possiamo associare ad un comune, anche qui è perché poi ci sono degli aspetti funzionali, ad esempio, poi lo vedremo, sull'anagrafica del paziente c'è una funzionalità per cui a partire dal comune di residenza, lui in automatico associa la ASL di appartenenza, e come fa? Lo fa grazie a questa associazione che creiamo qui sul comune.

O anche la stessa cosa lo fa sul comune di nascita, sul comune di domicilio,

insomma ci sono una serie di automatismi che li permettono dal comune di capire

qual è la regione di appartenenza che ha un dato anagrafico registrato sul paziente

e l'ASL di appartenenza, e lo trova da questa associazione.

Altra funzionalità

che però penso a questo punto

ve la faccio vedere sul mio DB in locale

perché questo oggi non è affidabile

intanto stavo scrivendo al collega

poi ci ho ripensato perché sarà sbloccato adesso li scrivo...

Un'altra cosa importante sul comune è la gestione dello stradario.

è la gestione dello stradario.

Per cosa serve?

Serve per tutti quei comuni, ovviamente, ad esempio,

che hanno un cap molto grande,

che quindi hanno un cap diverso in base alla strada.

Quindi io posso andare qui, attivare la gestione stradaria,

poi andare su questo bottoncino,

e qui potrò censire le mie regole

con cui cambia il cap quindi ad esempio banalmente dirò devo dare un codice stradale per l'infinito stradale quindi ne so s1 un codice numerico dico che

se via ho scritto via 90 anni ad un po di più numero pari dispari oppure dal numero civico

10 numero civico 30, il cap è 00195.

Se invece via Tuscolana, codice strada S2, sempre 10 o 30 è 00,1, 8, 5, dico una cavolata.

Confermo, ok?

Quindi posso censire delle mie vie dove cambia il CAP.

Poi vedremo cosa significa questo sul paziente.

Sul paziente significherà che se io indico un comune, che ne so Milano, che non ha attivo lo stradario, come comune di residenza ad esempio, poi nella via di residenza, che devo specificare nella grafica del paziente, posso scrivere un testo libero.

di residenza a partire dallo stradario, quindi tramite look up selezionerò la via.

La via non diventerà più un testo libero, ma diventerà una selezione a partire dalla via.

Un secondo che mi hanno chiesto dove sono collegato. L'unico Tomcat utente. formazioneamchr.sisar.asla asla, sì, ok

Va bene? Quindi questo è andato quasi sbloccato, quello vi facevo vedere, quindi a partire dalle ASL censite, ASL della regione Piemonte,

vi dico qual è l'ASL legata al Comune di Torino in questo caso.

La continuiamo a lavorare in localhost perché...

Poi cittadinanze, e quindi qua, questo è molto semplice, èagrafica di tutte le cittadinanze, peruviana, eccetera.

Asla o presidi, quindi come ci dicevamo qui io posso censire qualsiasi cosa che possa essere un'asla, un'azienda ospedaliera oppure un presidio.

Quindi vedete esempio qui all'asla l' associato la regione d'appartenenza.

Quindi quando poi sono andato qui, cioè quando vedo qua sul comune, esempio prendo Roma, vado sul comune ASL, vedete non mi fa vedere tutte le ASL censite, mi fa vedere quelle della regione Lazio.

Perché? Perché sull'ASL c'è indicata la regione d'appartenenza quindi mi

filtro ok insomma tutte queste anagrafiche di base sono tutte interle trecciate tra loro d'accordo

poi classi di esenzioni utili per censire le esenzioni sul paziente poi vediamo come potono sentire adesso purtroppo quasi un ambiente di

localhost quindi non farvi vedere magari dati reali ma aspettiamo un attimo che lo ripristinano

rapporti lo vediamo poi nell'esercizio quasi soggetti e poi dopo ci sono tante anagrafiche

diciamo molto shock e tipo appunto la fascia

d'età di agnesi interventi le istituzioni team quindi ad esempio banalmente le istituzioni che

sono certificate per rilasciare una testa team i codici iva ok il 5 per cento non per cento 10

per cento 22 per cento eccetera che vengono poi legati sui prodotti, ad esempio limitati misura, chilogrammi, grammi, millilitri, alcune cose sono molto banali.

Per dire ad esempio su un paziente è all'interno di un nucleo familiare, il nucleo familiare è composto da questiono a quel nucleo e poi il loro grado di parentela, la

relazione che intercorre da quelle persone

quindi Mario è padre di Giovanni, Giovanni

è figlio di Maria e così via dicendo

tutti questi punti di menu qui

invece non ci interessano, non sono attivi in Sardegna, comunque come può suggerire il nome è tutto relativo alla gestione delle forze armate.

Queste sono le anagrafiche di base, che poi verranno utilizzate nella grafica principale ad esempio poi vediamo

adesso facciamo quei cinque minuti di pausa che ci siamo detti lo vediamo poi

nella nella gestione del paziente va bene

ok facciamo che quindi ci torniamo qui alle 10 e 40. D'accordo, ragazzi? Ok.

Tra poco.

Tra poco.

Tra poco. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Scusate, sto avendo problemi di connessione

Sì, siamo in pausa Gianfranco

Sì, fino a 40

Ah ok, scusate, pensavo a questi problemi

Grazie Prego a 40 fino a 40 ah ok scusa come ho avuto questi problemi grazie Grazie a tutti. Grazie a tutti.

Grazie. dall'inizio del corso il consumo di caffeina è aumentato notevolmente, sappilo

ci credo, ci credo

è la benzina di tutto

allora, quindi

queste sono le grafiche di base

di base.

Intanto vediamo un attimo se qua si è ripreso l'ambiente di formazione.

Non mi pare proprio. Grazie. Ok, è un po' sembra che adesso sta andando meglio. Quindi, queste sono le grafiche di base.

meglio. Quindi queste sono le grafiche di base. Vediamo adesso una grafica principe,

una grafica del paziente. Una grafica paziente, detta anche una grafica dei assistiti, assistibili,

è l'anagrafe principale di XMPI che permette la raccolta di tutte le informazioni anagrafici

grafiche e socio-sanitarie di un assistito, quindi troveremo la possibilità di inserire

informazioni grafiche di base, nome, cognome, codice fiscale, comune di esidenza, cittadinanza,

eccetera, le informazioni sull'ASL, ASL d'assistenza, associato d'appartenenza, domicilio,

eccetera, le attività professionali, titolo di studio, datori di lavoro, medici di base, è tra le cose che possiamo censire su XMPA,

la scelta irrevoca del proprio medico di base, però in Sardegna mi hanno detto di dire che non viene gestito,

cioè in Sardegna non c'è la gestione della scelta irrevoca, comunque è tra le informazioni censibili

sull'anagrafica del paziente e poi anche le esenzioni legate al paziente.

Adesso diamo quindi uno sguardo all'anagrafica del paziente, ci navighiamo un po' dentro, ci prendiamo un po' di confidenza con i campi e con alcune validazioni che possiamo incontrare e vediamo anche il funzionamento delle tabelle generiche

che è un argomento di JBF che vi ricordate vi dicevo

che per adesso non trattavamo perché l'avremmo affrontato più avanti

e questo adesso è giunto il momento.

Allora, l'anagrafica dei pazienti sta sotto,

anagrafica e pazienti gestione.

Nuovo.

Creiamo un nuovo paziente. Qualcosa di malvagio in questo ambiente oggi

non è il db

foto che è per il db

cognome Non è il DB? Voto che è per il DB, problema.

Cognome.

Lista.

Nome, programmatore.

Se ne ho tentato qualcuno un secondo.

Data di nascita, 1980, comune di sesso maschio, comune di nascita Roma,bligatorio a Bano Terne, Padova.

Ok, confermo.

Grazie. oppure il bilanciatore.

Adesso ho mandato due richieste al server.

questo mandato richiesta al server quasi sicuramente adesso sono tutte e due pending quasi sicuramente si sbloccheranno allo stesso momento

vediamo un po Grazie. no, no, il DB

no

no sì ma guarda

penso che il db sia lo stesso che siamo noi

giusto?

io guarda sto provando a fare la login

ho fatto click un quarto d'ora

venti minuti fa

vedo che fa

ok Grazie.

Grazie. con gran fatica, comunque il nostro paziente l'ha creato, ma tanto ho scritto ai nostri sistemisti per fare una verifica.

Forse rilancio le statistiche sullo schema.

Nel frattempo, comunque, il nostro paziente è stato inserito

e quindi il tab principale, quello che viene anche visualizzato in fase di inserimento, è quello relativo ai dati anagrafici.

Quindi vediamo cognome e nome, la sestupla, poi abbiamo la gestione dei codici dello straniero,

utile nel caso dello soggetto di un immigrato, comunque un europeo, un'ungheria, gestione dei codici ENI STP-ISI.

E poi abbiamo il gestione di documento, stato civile, comune di residenza,

e qua abbiamo tutto il blocco relativo alla residenza, quindi comune, distretto,

addirittura l'interno, la scala, il piano e così via dicendo,

la cittadinanza, la possibilità di ribaltare questi dati di residenza come domicilio,

che come vedete è speculare, quindi anche qui comune, CAP, eccetera, classe topografica.

E poi abbiamo telefono 1 e per adesso fermiamoci qui poi fonti di sorgente lo vediamo questa tipologia tipologia

paziente insomma questo è il tipo di passere per gestire le tipologie specifiche del paziente come

se è un neonato se uno sconosciuto quindi sono privo di conoscenza eccetera eccetera d'accordo queste è relativamente alla maschera

anagrafica poi abbiamo un tab altri dati tabatidati sono comunque informazioni anagrafiche però

informazioni anagrafiche però però è tutto bloccato però sono magari dei dati un po più di nicchia ok quindi per per tenere la maschera principale un po più sempre per non farla mastodontica insomma

alcuni dei dati di testata sono spostati qui sugli altri dati la cosa importante qua sono i tab principali

altri dati

tutti praticamente

eccezion fatta per

consensi

nucleo familiare e medicina di base

ok

allora consensi

nucleofamiliai e medicina di base sono tab di dettaglio

in effetti, questi qui invece

principali, altri dati, ASLA, NAGRAFE

per quanto sono messi su tab

dedicati, in realtà non sono

dei dettagli, ok? Questo è giusto perché magari

in base alle esercizi che abbiamo fatto fino ad oggi

possiamo pensare che questi sono dei dettagli

in realtà no, sono stati creati come

tab, però se vi ricordate anche

nell'esercizio che abbiamo fatto fondamentalmente

l'ho fatto su corso V3 anche nell'esercizio che abbiamo fatto, fondamentalmente,

l'ho fatto su corso V3,

fondamentalmente un tab non è altro che un'etichetta a cui è associato un button executor e gli faccio un forward.

Quindi è un altro controller, però è un controller che,

quindi fa un controller forward ad un altro controller,

Però è un controller che, quindi fa un controller forward ad un altro controller, ma è comunque un controller che gestisce sempre comunque le stesse informazioni di testata, d'accordo?

Questo perché, come vi dicevo, il paziente ha circa 250, più di 250 campi, ok? Quindi sono tanti da mostrare su una maschera di testata e quindi sono suddivisi in base a quelli che sono

anagrafiche principali, dati anagrafici principali

e altri dati che sono comunque anagrafici ma

meno utilizzati

quindi, ad esempio, malmente, data di decesso e comune di decesso

è sicuramente un campo che viene valorizzato una volta soltanto. Quindi poi abbiamo testera TEAM, categoria cittadino,

tutti, numeri, telefono, quindi per gestire telefoni multipli, cellulare, casa, marito,

moglie, telefono 1, telefono 2, telefono 3. La stessa cosa ce l'abbiamo anche per l'indirizzo email eccolo qua indirizzo email

indirizzo mail 2 comuni domicili eccetera ok quindi questo è sono altri dati anagrafici

poi abbiamo invece il tabas comunque sono sempre informazioni testata però ecco in questo caso

abbiamo tutto ciò che riguarda l'assistenza ok quindi qua la tessera sanitaria fa riferimento alla vecchia

tessera sanitaria

quindi non temo

la dimissione della tessera

poi abbiamo le triplette

AS di assistenza, distretto di assistenza, regione assistenza

AS di appartenenza, distretto di appartenenza, regione di appartenenza

e così via dicendo

ok? Quindi le triplette per

assistenza, appartenenza, provenienza

e destinazione questi qua ad esempio vedete che io ho l assistenza, appartenenza, provenienza e destinazione.

Questi qua, ad esempio, vedete che io l'appartenenza mica l'ho valorizzata, ci sono andato qui e già valorizzata.

Perché anche la regione appartenenza? Perché abbiamo detto, siccome ho indicato il comune di residenza, c'è poi l'automatismo che dal comune va a vedere qual è la regione, dal comune va a vedere qual è l'asl e quindi fa la selezione automatica.

Questo è già un' un automatismo che possiamo

che possiamo vedere

Anna Profes

allora quest'utente però non è abilitato

a tutto, il mio utente

non è abilitato a tutto, quindi mi devo

abilitare per farvi vedere

tutto

allora

intanto me lo salvo

questo idco id

faccio un attimo logout con un utente

qua chi sono Grazie. quindi pazienti gestione

sulla maschera di ricerca

una cosa importante, la maschera di ricerca

dovete mettere obbligatoriamente dei filtri

i filtri non sono in like

quindi qua ad esempio io cerco il cognome, non posso

cercare per rossi, posso cercare per ro, quindi non hanno in like. Va indicato o l'idio del paziente

oppure il cognome o la data di nascita o il codice di comune, va indicato insomma dei filtri e quei filtri non si

applicano in like ok in questo caso olibi del paziente ci metto direttamente

quello

immagino che altrimenti schianterebbe con la ricerca

in realtà limite sono le più questioni di privacy perché in teoria tu non cioè in teoria tu dovresti

accedere soltanto al paziente ok in cui ha necessità da cede faccio un esempio quello che

sta al coop davanti i mario rossi e mario rossi deve cercare che non è che deve cercare tossini

e cercasse r soltanto per questo motivo qui.

Poi, le dicevo, questo qui è il tab che era spento.

Professionali, invece, rientrano sempre dati anagrafici relativi a studio, la professione, situazione professionale,

alcune... considerate che tanti campi veramente non hanno senso.

Magari sono campi che sono stati inseriti una volta

perché questo qui è un prodotto quindi magari c'è stato

un qualche cliente che aveva bisogno di un campo ed è stato messo perché ad esempio qua faccio fatica

a capire a che cosa serva a indicare il comune del datore di lavoro oppure ce ne sono anche altri i campi adesso non so se sta su altri dati

su anagrafe

o su amministrazione non mi ricordo

comunque a qualche parte c'è il campo

per

relativo al giubileo

l'ultimo giubileo che ha fatto

Papa Francesco, mi pare 3-4 anni fa

ok?

c'è un campo per indicare

un codice relativamente

al giubileo

Ottilissimo

Esatto, un campo

a valore soltanto per quei 3-

non so quanto dura un giubileo

e finisce

fine del suo scopo di utilità ecco tanti campi sono così

e questo è il motivo per cui poi la tabella è cresciuta

considerando che si sta

avvicinando la Pasqua

per l'utente Gesù Cristo

bisogna anche

indicare la data

in cui è risorto

ci manca solo quello

ci manca quella di risoluzione

esatto

quindi insomma tanti campi sono di quel tipo di quel tipo lì Ci manca solo quello, intanto quella di risoluzione, esatto.

Quindi insomma tanti campi sono di quel tipo lì, adesso lo devo cercare, non lo trovo.

Quindi qua c'è medicina di base, invece qua non lo vediamo, ma c'è il tasto medici per gestire i dettagli, che vi dicevo prima, non lo vediamo perché, questa è un'altra logica per poter gestire i medici

va indicata innanzitutto prima

l'asdol di assistenza

quindi adesso

valorizzo l'asdol di assistenza, confermo

campo

documento obbligatorio, ok perché con

questo utente, questo è un utente

che ha usato per fare il corso

ai vostri colleghi, ci siamo un po' divertiti

con la profiliatura configurabile

per darci in questo caso

l'obbligatorietà sul documento

quindi quest'utente che sto usando

è obbligatorio il documento

adesso lo metto

ma porr, mannaggia di pescetti allora, hanno rilanciato il calcolo delle statistiche

ok, quindi medicina di base, adesso se ci vado

avete acceso il tab medici, se io ci vado

qui poi posso

poi questo esercizio lo facciamo dopo

vediamo come questa parte qui

ripeto anche se i medici in realtà non sono gestiti sulla Sardegna

però mi fa comodo usare la gestione dei medici

per spiegarvi la gestione dei soggetti che sta su areas

quindi comunque qua insomma è la maschera per andare a gestire

le scelte irrevoca dei medici. Poi c'è il tab storico. Cos'è il tab storico? Ecco, vedete che tiene traccia praticamente di tutte le inserimenti, tutte le variazioni che arrivengono su questa anagrafica.

Quindi con ora, minuto e secondi, giorno, l'operatore che l'ha fatto,

qual è il campo, qual è il valore precedente, qual è il valore attuale.

Ecco, vedete ad esempio qua io ho aggiunto poi in un secondo momento

l'assistenza, il documento, quindi c'è una lineetta per dire che

questo è avvenuto in un istante

insomma

successivo, io ad esempio se adesso cambio nuovamente

il documento

ci metto

questo

sono saltato il 6 Grazie. Ok, stato sul tab storico, ecco qua, valore del precedente, questo, valore attuale, questo.

Ok, questa è la parte relativa, la tracciatura di tutte le modifiche che avvengono sul paziente.

per andare ad esplorare una funzionalità di JBF, quindi del framework.

Quindi facciamo un passetto indietro e torniamo nuovamente per un secondo sul framework.

Eccolo qua, vedete qui c'è uno stato civile.

Se io ci clicco è una combo con delle opzioni.

C'è libero, coniugato, separato, eccetera. In realtà le opzioni scritte qui dentro, ok, non sono opzioni stabilite, che ne so, dal

programmatore, ok, quindi come siamo stati abituati negli esercizi che abbiamo fatti insieme,

no?

Che la combo la censivamo e dicevamo quali erano le opzioni che potevano esserci all'interno.

che potevano esserci all'interno.

E non viene neanche preso da una tabella di gestione anagrafica degli stati civili,

ma viene presa da una cosa che si chiama tabella generica.

Che cosa sono le tabelle generiche? Le tabelle generiche fondamentalmente servono per

servono per gestire tutti quei dati che magari sono poco o addirittura per nulla movimentati

e che quindi avrebbe poco senso censire su una tabella doc

io faccio sempre lo solito esempio

supponiamo che io qua sullo stato civile

voglio avere qualche combo che aperta mi fa la lista dei giorni della settimana

i giorni della settimana sono quelli

7, al di là del fatto che ovviamente

giorni a settimana li posso anche cablare nel codice

ok? Però supponiamo che non voglio

cablare nulla sul codice

quale opzioni avrei? Avrei

che quei giorni a settimana mi devo leggere

da una tabella sul db, dovrei fare una tabella

sul db dove sono censiti i giorni

della settimana, capite che ha

veramente poco senso farlo, no?

Perché è una tabella che è creata lì

che ci avrà 7 record

che probabilmente non verranno modificati mai,

meno che per qualche altro secolo probabilmente, quindi che motivo abbiamo?

Allora si può utilizzare questo sistema che troviamo su menu configurazione, tabelle di base e tabelle generiche.

configurazione, tabelle di base e tabelle generiche.

Cioè io posso andarmi a creare una, faccio nuovo,

una mia tabella generica, che è ad esempio Days of the Week.

Lo scrivo in inglese perché in italiano già l'ho censita, solo per questo.

Confermo, io qui a questa testata, si chiama, alla mia tabella genericai all'interno di una tabella fisica, che è quella delle tabelle generiche.

Se mi assiste l'ambiente di formazione.

ok, quindi vado qua, elementi e dico

mon

codice, qua fondamentalmente gli elementi

hanno solo queste due informazioni

principali

un codice e una descrizione

e poi dopo, vabbè, anche qua

come sempre, date attivazioni e disattivazioni

mon e poi dopo vabbè, c'è anche qua come sempre date attivazioni e disattivazioni andai

dai

Tuesday, e così via dicendo, ok?

che succede lato di B?

che cosa ho ottenuto lato di B facendo questa cosa qui?

Le tabelle in questione, le tabelle in questione, questa non ce l'ho messa quindi me la metto, sono la cttabgen

è la tabella che contiene

la definizione della testata

la tabella generica

quindi per esempio cerco tgcode

Days of the week.

EG.

Ah, senza la I.

Ok.

Semplicemente, codice, descrizione, date, abitazioni, disabitazioni, eccetera.

E poi, se io cerco sulla tabella C etabgen,

E poi se io cerco sulla tabella C e tabgen,

where e gtcode uguale la codice della mia tabella generica, ottengo gli elementi.

In questo modo qui io ho censito, posso censire adesso i miei giorni della settimana senza crearmi una tabella fisica

per i giorni della settimana

me li scrivo qua dentro

sfrutto questa unica tabella

questa tabella

se noi andiamo a vedere senza filtri

ha veramente di tutto

faccio una prova

contarighe

226.000 record

ma che gestiscono ovviamente che cosa?

tanti tipi codici

tanti tabelli di codici

testati, tabelle generiche diverse

d'accordo?

ok? quindi tutti questi

record invece di essere

centinaia di tabelle fisiche diverse

semplicemente vengono normalizzati all'interno

di un'unica tabella

ok? diverse semplicemente vengono normalizzati all'interno di un'unica tabella.

Ok.

Ok, quindi.

Però è tutto chiaro?

Sì.

Perfetto. Andiamo a vedere ad esempio un esempio fisico, pratico

Io qua ho lo Stato civile

Lo Stato civile, queste opzioni sono prese da una tabella generica

La tabella generica, poi vi faccio vedere come riuscite a capire qual è

Però in questo caso me lo sono scritto, è questa qui

Si chiama Stato civile, quindi io cosa posso fare?

Cosa posso fare? Vado qui sulla gestione di tabelle generiche.

Mi cerco la mia tabella generica.

Elementi.

Mi faccio codice elemento.

Tutti i numeri, quindi continuo con i numeri.

Faccio 999.

E faccio analista programmatore.

Analista programmatore è uno stato civile praticamente.

Analista programmatore.

Conferma.

Quindi che succede?

se io adesso qua su

mi ricarico

una pagina

vedete?

analista programmatore

quindi in pratica

con questo sistema di tabelle generiche

ottengo anche il risultato di

dare all'utente la possibilità di

configurarsi queste opzioni. In pratica

le tabelle generiche vengono usate quasi

sempre in questi contesti qui, ok? Dove si

vuole lasciare per certe opzioni un grado

di configurabilità. Quindi qua noi abbiamo

rilasciato a livello di prodotto solo il

fatto che esiste il campo statocivile,

che esiste la tabella generica stato-stato

civile e poi in Sardegna si sono censiti,

ok, uno, c'è l'Ibenubile, due, coniugato

coniugata, separato

separata, eccetera, il motivo perché

viene fatto queste cose da tabella generiche

perché, oltre a lasciare

per lasciare appunto questo grado di configurabilità

perché magari è un cliente

vuole scrivere

coniugato, un altro vuole scrivere sposato

faccio un esempio banale sui stati civili però in tanti altri coniugato, un altro vuole scrivere sposato,

faccio un esempio banale sui stati civili, però in tanti altri contesti capite bene che magari aziende diverse hanno nomenclature diverse,

quindi vogliono scriverci qualcosa di più particolare,

e quindi lo possono fare grazie a questa gestione delle tabelle generiche.

Ok?

Ok. Perfetto. generiche ok? ok

perfetto

allora come fai a sapere qual è

la tabella

domanda?

sì domanda

il campo coniuge

è legato in qualche modo allo stato civile

oppure

no no

perfetto grazie campo coniuge è legato in qualche modo allo stato civile oppure no no qua è

ok

perfetto grazie

come fate a capire

quali sono i campi che sono

oggetto di una tabella generica

allora ai vostri colleghi

vi ho spiegato la cosa del registro

metadata che un po' avevo anticipato

cioè se voi andate qua su avanzate stamp del registro metadata che un povero anticipato cioè se voi andate qua su avanzate

stampa registro metadati

bin

vi cercate il bin del paziente

ok è questo qui si siang paziente, paziente bin

questa è una find 3, no?

le posso selezionare più di uno

seleziono solo uno, faccio conferma

pdf, conferma

e qui dentro vi viene fatta tutta la descrizione

del bin del paziente

e quindi tra le tante cose che trovate come informazioni

c'è anche

l'elenco puntuale di tutte le proprietà e per ciascuna

proprietà, ad esempio stato civile, eccola qua, elenco di tutte le proprietà, il mio

stato civile se ci clicco, ecco qua che mi dice, va a leggere l'XML, quello che ci siamo

detti, l'XML del bin, dice il nome la proprietà, la lunghezza

e ci dice anche che il lookup collegato

è questo qui il codice lookup

che poi tramite l'asiloquup

sappiamo che attinge la tabella

setupgen, qui sono gli elementi

di tabella generica, che li filtra

per questa tabella generica e quindi

così

sappiamo che questa è la testata su cui possiamo dare ad aggiungere nuovi elementi.

Noi siamo programmatori, facciamo prima.

Apriamo direttamente l'XML del bin,

chiamiamo stato civile,

e ce lo troviamo qua dentro,

e GT code sta stato civile.

Questo è un modo per censire il lookup, e ce lo troviamo qua dentro e gtcode sta stato civile ok?

questo è un modo per censire lookup

se no l'altro modo è quello che conosciamo

è quello che vi ho imparato

perché quello che consiglio

è quello tramite

quale?

get object info

quindi property lookup

esempio qua i gradi questo è il lookup

ok se

se ad esempio

cerco questo e gtcode

adesso non c'è neanche uno comunque vabbè ok

comunque diciamo che

o sulla getobjetinfo lo trovate

oppure addirittura

direttamente sull'xml

tramite questa sintassi qui

ok

perché la sconsiglio

questa sintassi

per lo stesso motivo

per cui vi sconsigliavo

il mandatory a1

sull'xml

perché quello che scrivete qui

poi è scolpito nella roccia

non lo potete cambiare

in nessun modo

quindi lavorare sulla gretta obgetti info

del

del bin invece vi permette

di avere dinamicità

potete fare un po' quello che volete

comunque diciamo che l'informazione su qual è

il lookup è o qua dentro

tramite property lookup

vi viene scritto il nome del lookup oppure qua

nelle XML, va bene?

questo vi serve per sapere per leggere

interpretare i bing existenti

i nuovi li fate con getobjetinfo

e fine, non tramite XML

e quindi nel caso specifico

in realtà non ci basta soltanto sapere il lookup

il lookup ci serve per capire se è un elemento di tabella generica,

però in realtà per sapere qual è la testata, perché quella ci serve sapere,

dobbiamo andare a guardare i filtri, quindi il T-code.

Nel esempio qua sappiamo che è lo stato civile.

Ce ne sono sicuramente altri qui dentro.

Estera, titoli di studio

la situazione professionale anche

è una tabella generica

l'attività professionale

il tipo azienda

qualifica del beneficiario

ignoro

la causa della morte anche

è un elemento di tabella generica

quindi ognuno si può personalizzare quello che vuole

il tipo di documento

quindi carta d'identità, patente

certificato elettorale

quello che sia

ok?

quindi quando troviamo questa cosa qui

vuol dire che queste opzioni qui che si possono regolare

che si potranno associare al tipo documento

sono personalizzabili sul cliente

andando a censire dei nuovi elementi

o modificando quelli esistenti

della tabella generica tipo doc

sarà tipo doc

domande?

no

perfetto

ok

intanto mi hanno detto che

appena facciamo pausa

lo diciamo ci riavviano

il server e poi dovrebbe tornare

tutto a posto

l'ambiente informazione

hanno rilanciato le statistiche

allora

va bene quindi questo è

quanto quindi la tabella è questo tanto ce lo salviamo la tabella

del paziente questa qui

dai

la tabella del paziente è questa, select star from sa paziente e nel particolare, ad esempio, se noi andiamo a prendere il nostro paziente che abbiamo censito, che ha questo id, quindi lo filtriamo per pzid, id è il campo del id, l'id è un varchar di 16, quindi per questo anche se un numero lo metto tra apici, quindi potenzialmente di default è una sequence che va avanti, però potenzialmente in realtà uno poi, lo vediamo, ci sono una serie di parametri con cui uno può addirittura

delegare

a dare all'utente la possibilità di scegliere

il CDD, quindi insomma

per questo è un varchar, per poter essere liberi

di poter rimettere quello che si vuole

Scusami Simone, una domanda

anche se forse divago un attimino

questo qua poi è esattamente il codice XMPI

che arriva nei messaggi ADT poi?

Sì, sì, sì.

Ok.

Esatto, esatto, esatto.

Tutti i moduli che sono, tutti i moduli verticali,

che insomma hanno una dipendenza verso XMPI,

poi utilizzano le anagrafiche XMPI,

quindi ADT avrà il paziente che viene ricoverato

e quel paziente viene preso dalla sa paziente no che viene ricoverato il quel paziente viene viene viene preso dalla paziente

e quindi avrà una referenza verso la paziente verso la prima richiede la paziente quindi verso il campo

pizza perché pensavo che fosse sempre vero sempre visto ovviamente dai messaggi che arrivano insomma

sempre immaginato una sequence e basta invece da quello che hai detto si può fare pure in sardegna

è configurato semplicemente che app appunto una sequence che va nel futuro.

Ah, ok.

No, no, però quello che dico è, ci sono poi dei parametri che non sono attivi in Sardegna,

però poi magari li vediamo, dove addirittura si possono specificare, che ne so,

quando crea il paziente, crealo sempre con questo prefisso.

quindi lui farà pippo 1, pippo 2, pippo 3, pippo 4

cose di questo genere

poi addirittura c'è un parametro dove addirittura dici

guarda, fai decidere

e ci sta un qualche cliente

in Sardegna no, ma altri clienti che lo fanno ci sta

che hanno reso l'identificativo paziente un campo editabile

quindi è l'utente che quando inserisce il paziente

decide anche lui l'utente che quando inserisce il paziente decide anche lui

l'identificativo

ma forse sai che il prefisso in alcuni casi

ora non ricordo se sul centrale

cioè per il codice centrale

o il codice locale che c'è XMPI come prefisso

non vorrei dirti una cavolata

sì però lì penso che

probabilmente è una questione di recupero dati in realtà

ah ok

invece quello che dico io è proprio una funzionalità applicativa.

Possiamo anche dargli proprio uno sguardo.

Io so che fai sassari 1, sassari 2, sassari 3, dico per dire.

Sì, volendo anche, perché è un parametro aziendale,

quindi lo puoi scegliere anche per azienda.

Ok.

Vediamo un po' se è più veloce non mi pare proprio proprio appartetto

di tener avviare per finire azienda ad esempio prendo sempre mezz'enda di formazione quindi

un parametro aziendale quindi in effetti può essere declinato per per azienda

In effetti può essere declinato per azienda.

No, altre grafiche, ho sbagliato.

Grafiche, pazienti.

Vedete addirittura modifica l'identitivo paziente,

quindi se è ceccato viene resa la possibilità di modificarsi l'identificativo paziente a mano, generalmente

quei clienti che lo fanno è perché come identificativo

ci copiano il codice fiscale

però c'è anche

un precodice

e qua metto

xMPI, quindi lui farà xMPI

xMPI, xMPI, xMPI, xMPI

xMPI, xMPI, xMPI, xMPI, xMPI

però in realtà nel caso della Sardegna

possiamo vederlo anche

sulle altre aziende ma anche

sulle altre ho controllato che è vuoto

quindi è probabilmente lì magari un recupero dati

o cose di questo genere

ok, grazie mille

ok

ok

quindi dicevamo

quindi questo è l'id del paziente e poi abbiamo insomma i nostri campi che abbiamo

inserito in maschera quindi cognome, nome, nome, data di nascita e così via dicendo d'accordo qui

come potete vedere sono tantini mi sa che sono esattamente 251, perché dovrebbero essere 247 più i campi di controllo, che sono 4, mi sa che sono 251.

Quindi vengono scritti tutti qua dentro, tutto ciò che è dato...

associato al paziente qua dentro, quindi anche quello che trovate su altri dati, ASL, professionali, eccetera.

I bin coinvolti per l'anagrafica sono in realtà per la stessa, nonostante qua stiamo parlando del paziente, in realtà i bin sono più di uno.

Non so che vuol dire, o meglio, è uno.

Però c'è una gerarchia, nel senso che il cuore pulsante di tutto è questo, patiente bin.

Non è proprio uno smilza, come una smilza come classe, come potete vedere, dal numero di righe.

Quindi poi c'è vale su XML, patiente bin XML, quindi nullObjectInfo, getPropertyInfo, validate,

quindi tutti i metodi che abbiamo visto durante le nostre esercitazioni.

D'accordo?

In che quale validate invoca interno validate e poi sono fatte semplicemente queste organizzazioni codice,

poi internamente si sono creati un metodo validateCommon, un metodo per validare solo i medici, un metodo per validare le esenzioni e così via dicendo.

E qua dentro ci avrà anche i suoi metodi store e retrieve.

Nulla di nuovo.

Però, il paziente Bin in realtà è un padre perché ha un figlio che si chiama patient interactive.

Patient interactive estende patient bin e anche lui a sua volta non è proprio,

è un po' più piccolino, però comunque non è proprio magrolino.

Perché questo?

Perché praticamente siccome il paziente, come vi dicevo, è un oggetto tra quelli più utilizzati nell'ambito delle integrazioni, siccome nel tempo ci sono state richieste diverse magari validazioni sulle maschere e tali validazioni non avevano un senso per i servizi, che si è fatto?

Si è creato il patient interactive, che sta nel patient bin, e il nostro controller qui, che si chiama patient v3,

lo tenete anche facendo ricordatevi lo shift F12

il nostro controller

non lavora con il paziente bin

ma lavora con paziente interactive

quindi se io

ho sviluppatore

una modifica che so che

non deve impattare

i servizi web, integrazioni, allora io lavoro solo su patient interactive, mentre le integrazioni continuano a lavorare con l'oggetto patiente bin.

Vedete, questa è una classe concreta, non è una classe astratta.

Quindi sarà fatta semplicemente questo fork, diciamo, per far sì che se io faccio una modifica software che deve avere impatti,

sia quando lavoro sui servizi, sia

quando lavoro sul controller, quindi su maschera interattiva, allora io lo metterò dentro

patiente bin, perché patiente bin è l'oggetto che i servizi potrebbero utilizzare anche patiente

interactive, per intenderci, tanto sempre un bin è, però come documentazione noi documentiamo

patiente bin ai servizi, di proposito, perché diciamo, voi i servizi lavorate su patiente bin, così noi sappiamo che tutto quello che mettiamo su patiente bin, no, avrà effetti anche per le integrazioni.

per la maschera web, lavorerò su pazienti interactive,

avendo così la garanzia di non andare a sfasciare nulla, ok, sulle integrazioni.

Chiaro?

Sì, ho visto che in paziente B nessende anche paziente.

La classe paziente è utilizzata... Sì, no, questa non viene usata, questa è stupida questo è proprio veramente queste sono

i getter e setter proprio un'alloggi che non ha nulla

vedi solo getter setter

quindi getter insetter l'hanno fatte sul paziente sul paziente e bin ci hanno

aggiunto tutto il resto a corredo in realtà alcune cose ci sono anche qua i getter insetteri ecco i dettagli sono stati messi a livello di di paziente bin i dettagli no quindi i medici

troveremo

medici pensi mentre diciamo le colonne base in teoria stanno sul paziente però perché dico in teoria perché

sicuramente al principio sì sono fatto qua dentro poi sono quasi sicuro che nuovi campi spesso e

volentieri sono stati messi direttamente sul paziente bin ne sono più che certo

che certo sì, secondo me sì

beh non tutti, però è abbastanza

pulito

tipo qua, email pack

email pack è stata messa in sita qua dentro

ed è che non sta sul paziente

questa è una colonna, email pack

è stata messa in paziente bin

quindi paziente in realtà sarebbe soltanto per tenere

tutta una sunbin tutti i getter, i setter e le proprietà.

Puoi fare il pogio, quindi il paziente è pogio puro, che non implementa nulla.

Il paziente bin implementa invece le nostre interfacce, oltre a tante altre, poi vediamo perché.

quando parleremo delle proposte, dei pesi eccetera, ma alle nostre interfacce persistent, interactive interface, dynamic info interface e validable interface.

Ok?

Mi è una curiosità sul paziente interactive, nel senso che tu dici che è utilizzato per l'accesso tramite web, però c'è qualche differenza a livello di attributi?

No, no. A livello di proprietà sono le stesse, appunto poi paziente interactive estende paziente bin

che avrà i suoi che poi dopo estende paziente che c'è i suoi è sempre lo stesso a livello di però

cambiano ad esempio la cosa più più più più classica è le regole di le regole di validazione

o delle regole di validazione che non voglio sap sapete che magari nell'ambito delle integrazioni, certe validazioni di proposito le si tiene più lasche, perché è difficile magari coniugare le validazioni di due sistemi completamente diversi tra loro.

Quindi magari dal livello integrazione si accettano dei dati più sporchi, mentre quando è l'utente che sta inserendo magari dai paletti più stringenti.

Allora magari io voglio dire che l'ASDA d'appartenenza non corrisponde alla regione d'appartenenza è una reg una validazione che avendo implementata qui

su paziente interactive verrà mostrato soltanto l'utente se dare del da se da integrazione mi

passa l'asola appartenenza di roma e la regione di appartenenza è sicilia va bene buono ok ok ok

questo è un esempio quindi soltanto questo era fine paziente interactive poi dopo c'è anche alcune Ok, ok, sarà, infatti, che fa al set del codice comune residenza,

che fa, che fa, ecco qua, mi sbianca i campi precedenti, mi calcola la cittadinanza a partire dal comune, mi calcola

la regione a partire dal comune, mi calcola il CAP e così via dicendo, avendolo implementato

qui su Patient Interactive vuol dire che questo automatismo funzionerà solo da maschera web,

lato informativo.

interfaccia è la cittadinanza ma deve dire lui con la regione ma deve dire lui è voluta questa

cosa quindi anche anche non solo le variazioni ma anche gli automatismi che scattano alla set

di una proprietà ok altre domande

ok allora con il paziente

con il paziente

possiamo anche vedere

possiamo anche vedere un'altra cosa vediamo ad esempio il suo metodo store

alcune cose le saltiamo perché poi le possiamo comprendere solo alla fine, quando parleremo della gestione delle proposte, dei pesi, degli alias, accorpamenti, eccetera.

Quindi alcune cose volutamente le salto.

Però quello che intanto devo farvi vedere......è questo.

Dove cavolo sta? E questo? Tata tatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatatat La retrieve, scusate, non era la storia, stavo cercando tutto sbagliato. La retrieve, vedete che è leggermente diversa da quella che abbiamo visto nel corso?

Ma perché? Perché quello che ho fatto vedere il corso è come dovete farla, ok?

Però, adesso la confrontiamo.

Se vediamo la retrieve, la mettiamo a fianco, allora, al di là del mem.clair, questo è un

metterlo, pulisce, ci interessa, ecco qua intanto la prima differenza, loadKeyFromBin,

noi qua facciamo così, loadKeyFromBin, per dire che l'id del mio bin paziente

lo deve andare a ribaltare nel momento, vi ricordate?

Qua invece lui fa memsetPropertyPzid di paziente,

è la stessa cosa.

La differenza qual è?

È perché il paziente è più vecchio

e quindi poi tutta una serie di classi e metodi di utilità

sono stati introdotti dopo.

Quindi ad esempio, quello che fa set property e si ribalta la proprietà di

paziente dentro il memento per la colonna pizza di di fa la ritriva e anche qui abbiamo

una ritriva però guardate qua poi che fa mem save to bin questo che sarebbe se vi

dice ok, ho caricato il record sul DB, ribaltamelo, salvamelo, ribaltamelo sul bin.

Questo metodo qui con una riga fa quello che sul paziente,

essendo un po' più vecchiotto, fa in tante più righe.

Ma che vuol dire semplicemente?

Vuol dire che appunto lui si rivalorizza a manina tutte le proprietà che legge sul memento.

Quindi ok, mi valorizzo il cognome, la proprietà cognome paziente con get properties a string della colonna pizza da cognome non è paziente con

che provate stringi però è la stessa cosa ok affrontiamo per vedere poi ovvio che c'è a

string quando è un varsar tipo documento un long che è proprio questa long la sua documento

un date proprio per te e così via dicendo.

Quindi qua c'è stato tanto più lavoro, ovviamente manuale.

Poi, andando più avanti, ci siamo risolti con questo, con una riga di codice.

Chiaro?

Ok.

per il resto non c'è altro poi dopo qui vediamo un po se gestisce dettagli

esempio retrivo medici

e medici.

Ok.

Allora, questo è uguale invece a quello che abbiamo visto,

c'è un'altra possibilità.

Ad esempio sul corso, eccolo qua, get reference for in K,

ok, quindi get persistent manager find. Qua ad esempio, quando si cercaersistentManagerfind.

Qua ad esempio quando si cerca i medici fa find, medici, che è la lista, e reference

foreign key, fatta così, getReferenceForInKey.

Anche qui abbiamo getReferenceForInKey.

Però, guarda che fa dopo lui, se la mette da parte questa reference foreign key

se la assegna su una variabile globale

perché poi dopo fa questo additional condition

quindi dice ok oltre a filtrarmi

i medici in base

al campo del padre

quindi in base alla foreign key

filtrami anche tutti quelli che sono

ad esempio in questo caso

i medici attivi

quindi questo

patient bin c'è il comodo anche per

vedere questa cosa qui

ok

un altro modo per caricare i dettagli

un po' più complesso

è addirittura questa

come fa Ferrari 3 consensi

addirittura definendo una classe

di query

quindi la classe di query così

come abbiamo visto la classe di query come ad esempio prendo corso query no questa qui una

custom query profile quindi ho una mia classe di query a cui passerò definito

filtri, come pare a me,

e poi questa classe di query

la indico qua nel metodo

getPersistenceManagerFind

al posto del campo

padre.

Infatti qui, se io torno,

il metodo find, vedete che come

ultimo argomento, quindi qui,

accetta un object generico.

Proprio perché ha poi anche la possibilità

magari di passargli cose che non sono

semplicemente la referenza del padre,

ma addirittura una classe di query intera,

che poi viene eseguita,

in base a quello che torna alla query,

poi lui carica i vari dettagli,

il resto rimane uguale,

quindi si dice qual è il bin di dettaglio,

qual è la lista dove devono essere

contenuti dettagli e così via dicendo. Per vedere i tipi di oggetti che potete passare qui, basta

andare a vedere la classe concreta che sta dietro a questo metodo find. Questa è una classe astratta, Persistence Manager, come vi dicevo quella concreta è gdbc,

Persistence Manager.

No, però, ecco qua, find, eccolo qua. Ah ok, c'era un altro metodo find, ok, qua dentro, qua dentro, in

base al filter che viene passato qui, vedete, fa getPersistenceHandler, anche qui bisogna

sempre tornare sulla classe concreta, gdbcpersistententr, quindi getpersistententr,

l'abbiamo detto, eccolo qua,

vedete che dice, dice,

se il filtro che mi passi è una query,

allora lavorerò per eseguire una query,

addirittura potete passare un prepare statement,

quello che abbiamo visto in esercizio è questo,

parent reference,

potete farvi voi una query per i cavoli vostri e poi passargli un result set. Insomma ci sono diversi modi, ok? Con cui istruire il metodo find per dirgli come andaste a recuperare i dettagli. Generalmente i metodi utilizzati sono solo tre. È nel 99%

dei casi quello che abbiamo visto,

parent reference, 99.

Ci sta poi quello 1% dove appunto magari

la query è un po' più complessa, non è soltanto

andarsi a recuperare tutti i dettagli

che hanno una determinata foreign key

e quindi si usa

o

il prepare statement, quindi

si scrive la query, si fa il prepare statement, si passa il prepare statement, o la classe di query.

Stato chiaro?

Sì.

Se volessimo mettere, diciamo, il fatto che...

Medici attivi e non attivi

da interfaccia con un flag

che giro avremmo dovuto fare?

Cioè farli decidere questo filtro

all'utente?

Esatto, sì, piuttosto che metterlo qua

a livello di coi

magari metterci una checkbox

sul

GSP

Eh, guarda, in realtà

non ce la fai

per un semplice motivo

perché il retrieve

non ce la fai in maniera

ortodossa

dopo sappiamo il codice

flessibile elastico

per quale semplice motivo?

perché la retrieve medici

quindi la retrieve del dettaglio

quando viene fatta?

viene fatta dentro la retrieve dell'oggetto.

Siamo nella retrieve.

E che caspiterina, quant'è lunga.

Vabbè, retrieve, ok?

Quindi essendo nella retrieve dell'oggetto, tu l'oggetto lo stai caricando,

quindi ancora la maschera neanche l'hai visualizzata all'utente.

Ok?

Quindi tu non hai la possibilità di chizzata all'utente. Quindi tu non

hai la possibilità di chiedere all'utente come filtrare quel dettaglio. Lo stai caricando

l'oggetto e quindi poi carichi i dettagli. Quello che potresti fare quindi è comunque

devi caricarti tutti i dettagli. C'è due possibilità. Ti carichi appunto tutti i dettagli hai due possibilità, ti carichi appunto tutti i dettagli in fase di retrieve a

prescindere quindi senza imporre tu un flag poi in maschera hai magari una

combo dove hai la lista di tutti i medici e una combo scritto quale vuoi vedere

attivo disattivo magari un radio quella radio ovviamente sarà linkato ad una

proprietà del tuo bin quindi tramite link property tag

e ogni qualvolta

che tu clicchi

sul radio vai a fare

un collection filter java

sulla tua lista dei dettagli

questo potrebbe essere

un modo, o addirittura magari

qua vedi che hanno fatto

un metodo a parte

retrieve medici retrieve medici, rinvochi nuovamente, ti fai la clear della lista medicii ogni volta che l'utente cambia il radio passandoli la proprietà che ti sei messo sul bin, non so se è chiaro.

Sì, sì, da me no, sì, ma è chiaro.

La sdrai insomma la lista e ti rifai nuovamente la retrieve di tutti i dettagli.

Però diciamo al tempo T0 non ce l'hai questa possibilità, questo voglio dire.

Al tempo T0, perché giustamente stai caricando il bin quindi non puoi

manco, non hai modo di chiederlo all'utente qual è

mostrare o non mostrare

però quello che puoi fare è chiederglielo dopo

e in base a quello che metti dopo

ti filtri la lista medici che ti sei caricato

all'inizio oppure la lista medici

addirittura te la sdrai del tutto

e ogni volta te la ricarichi da zero

a quel punto filtrando per la proprietà

che ti ha messo l'utente in maschera

ok?

ok, sì

altre domande?

ok, allora direi

facciamoci la nostra pausa più lunga

ci ribecchiamo qui

alle 12.03.

Ok?

E poi continuiamo e concludiamo.

Ok, a dopo va bene.

A dopo.

A dopo. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Siamo in pausa?

Sì, si pausa.

Ok.

A che ora ci rivediamo?

Mezzogiorno qualche minuto

ok grazie

ho dovuto riavviare nel frattempo

ok Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. rieccoci

aspettiamo un minutino

presente dopo un riavvio

ho usato la blocco

e mi astengo

mi astengo

dal riavviare Eclipse

ah ok

va bene va bene

il tuo pc

non lo digerisce

non so davvero

che pensare se non a questo punto diciamo che comunque noi usiamo

eclipse però però qui a fine eclipse unite noi abbiamo sempre usato i clips, tutti i sviluppatori lavorano tutti sui clips

però detto al netto di questo

voglio dire, unite è unite

quindi alla fine

se magari uno vuole

riesce a usare

potenzialmente uno può anche

programmare con notepad++

grazie, ti voglio tanto bene

per questa concessione

voglio tanto bene per questa concessione.

Siccome qualche tempo fa

ho programmato con Eclipse,

qualche difficoltà

c'era, ma non che dovessi

riavviare il computer

due volte al giorno,

cosa che è capitata oggi,

è evidente che

c'è una fame di memoria che solo il mio

responsabile può soddisfare. Evito di aprire i clicks, apro Outlook, altro vorace

favocitatore di RAM e scrivo per risolvere il problema, altrimenti è inutile che facci il corso.

Giustissimo, giustissimo.

Ok, condividiamo intanto lo schermo e direi che possiamo riprendere dove c'eravamo interrotte avviato l'ambiente, adesso vediamo un po'

se è più

se è più

reattivo

parebbe di sì

vediamo

quindi insomma abbiamo visto

la nostra anagrafica del

del paziente, poi ci torniamo alla grafica del paziente.

Abbiamo anche dato uno sguardo a quelli che sono le due classi principali che sono coinvolte per il paziente,

che sono quindi il paziente BIN quindi il paziente bin e il paziente interactive

abbiamo detto che il paziente interactive è sempre un bin

però che estende

il paziente bin che però viene utilizzato

soltanto dal controller

paziente v3

ok, questo è per creare una distinzione

tra logica e dimensione

business utilizzate da diciamo logiche

di business comuni sia da interfaccia che

da applicativo perché ovvio che

paziente interactive estendendo paziente

bin comunque eredita le sue logiche di

business ok a quelle che invece sono

devono essere come dire soltanto da

pannaggio dell'interfaccia utente quindi

lo mettiamo su paziente interactive in

modo da non andare a penalizzare il patiente bin che è utilizzato dai servizi.

Qui poi avremo il nostro controller del metodo init,

dove farà, semplicemente scritto in maniera più bella,

ha creato un metodo a parte, init.tabs, dove qua dichiara i nostri tab

e dichiara il button executor,

dove

tu, tu tu tu

ad esempio

paziente

paziente

paziente

paziente paziente paziente paziente paziente paziente paziente paziente patienteasl.gsp patienteasl.gsp

gsp for asl

allora vedete qui cosa ha fatto

questo per una comodità sua

invece di fare un

button executor no del tab sempre riprendo corso v3

sono fatte qua invece di fare corso v3 mettendoci un button executor per ogni tab quindi uno per

ogni tab dove dove fa il controller forward no no? Ha la pagina da aprire.

Qua su paziente v3 si è dichiarato un button executor su tutti i tab,

lo stesso, my button executor handler.

E poi dopo fa set return page.

No, fa...

Che fa? Fa else... Ah, eccolo qua, qua no fa get questo qui alla fin fine questo non so che

roba questo è pronto come sta parlando sento una voce lontana

un errore quindi quello fa se lo stato insert e tab professionali

va a leggersi un parametro

aziendale, quindi queste logiche specifiche

annetto di questo if

quindi fa questo

get return page

get return page

status edit

no, vanno su, fa questo

quindi fa questo, fa 7 return page

ok, mette su return page

come return page dell'edit

quindi dello stato attuale

quindi qua sicuramente stiamo in edit

se vediamo i tab

button get id

button get id varrà ad esempio

ecco, questo è l'id del tab

quindi varrà tab gruppo sanguigno

oppure tab underscore nucleo familiare

tab anagrafica principali

e poi lui si è settato per ciascun tab

ciascun tab una GSP diversa.

L'ha gestito così.

Quindi un button executor unico

che poi delega in base all'id del tab

alla GSP diversa.

Quindi per intenderci, questo ve lo dico per capire qual è la GSP.

Allora, in realtà per capire qual è la GSP,

al solito come vi

dicevo voi fate voi fate grafiche base no paziente gestione analista

analista, shift F12, qua la GSP è paziente NAG Prince, se vado su ASL, F12 paziente professionali GSP ok?

però poi sono un po' anche scritte

insomma qui dentro

ok?

tutto qui

qui ovviamente sui pazienti

c'è poi

un mondo

ci sono anche i bottoni

quindi ad esempio il bottone

banalmente di ricalcolo CF

quindi questo qui

sono dichiarati

qui dentro, questa è una cosa

che possiamo vedere, perché i bottoni

sono dichiarati qui dentro

noi ad esempio su quando abbiamo fatto

il nostro wizard, se vi ricordate

adesso lo riprendo

cosa abbiamo fatto? nostro wizard, se vi ricordate, adesso lo riprendo, cosa abbiamo fatto?

La nostra gsp wizard, la nostra gsp wizard abbiamo dichiarato il bottone, input type button,

e poi che abbiamo detto? Do action, crea corso. Quindi poi sul controller abbiamo intercettato l'action e abbiamo fatto quello che dobbiamo fare

qui su paziente v3 invece

il bottone lo definisce

in questa maniera qui

cioè crea un oggetto button

ok

quindi simile a come fa per i tab

lui da una label

gli dice comunque l'azione che deve mandare

sulla 2 action, quindi questo non cambia

però lo definisce in questa maniera qui

lato java

e poi

lato java e poi

sulla gsp

si chiama

anagprinch

la gsp che cosa mette?

dove andrà a finire?

paziente v3

quindi questo è il nostro bottone

ricalcola cf, si chiama così

sulla gsp del paziente

mette questo tag

forms button button id

quindi non scrive input type button

ci butta direttamente questo forms button

a che serve cioè qual è la differenza qual è il valore aggiunto che sia un valore aggiunto potrebbe

essere magari intanto magari anche il fatto che su un bottone come ad esempio fa qui può gestire

la visibilità in questa maniera qua il bottone noi abbiamo visto ad esempio la visibilità in questa maniera qua, il bottone noi abbiamo visto ad esempio la

visibilità che si può gestire direttamente sulla GSP tramite il PSGIF, se ricordate ad esempio sul

wizard per mostrare o non mostrare una porzione di HTML facevamo il PSGIF, quindi qua ad esempio

se vorressimo per come l'abbiamo fatto qui mostrare o non mostrare l'input dovremmo metterci un psg if qui dentro la gsp invece qua

c'è un sistema basato sulla definizione di uno status checker quindi qua dentro mi metto tutte

le mie logiche poi dico il bottone visibile il bottone abilitato il bottone attivo abilitato

nascosto ok visibile quindi visibile vuol dire che c'è ma è disabilitato, ok?

Invece hidden vuol dire proprio nascosto completamente, questa è una cosa.

Però in realtà il vero valore aggiunto è il fatto che quando andiamo nella nostra ormai amata profilatura configurabile,

profilatura configurabile e mi prendo il punto del paziente quel bottone lo troverò qui nel qui tra i bottoni e quindi come vi dicevo poi qua con questi pari e la stessa cosa vale anche per i tab

e tab l'abbiamo visti però i bottoni no quindi ho compro simile a come funziona per i tab qua posso andare a decidere se

il bottone lo può vedere non lo può vedere quindi clicco se clicco qua su e quadri in stale sempre

su ricalcola non so perché è duplicato questi sono due bottoni che si chiamano uguali e se clicco qua

su ricalcola posso dirgli guarda il bottone deve essere voglio che anzi sul calcolo STP, cliccando qua che dico, creo la chiave di profilatura con cui dico voglio stabilire se può cliccare sul bottone calcolo STP o no, se io clicco qui creo anche il default che è di default tutti quanti ci possono cliccare, ok?

Il vantaggio, mentre per come abbiamo fatto su wizard, questa funzionalità in realtà non la avremmo, no?

Cioè funziona comunque il bottone, fa tutto quello che deve fare, però non lo vedremo censito qui nella lista.

Quindi se io voglio creare un bottone e poi potenzialmente voglio dare la possibilità al cliente di profilare quel bottone, allora lo devo dichiarare in questa maniera qui

ok

queste tre cose queste tecniche poi stato checker va eventualmente lo chiaro

sì ok poi per essere resto è uguale

nel senso qua sette la action

action calcola CF

quindi se cerco questa action

eccolo qua

else if nel mio metodo do action

intercetto l'azione

e faccio quello che devo fare

ad esempio tu calcola

codice fiscale

d'accordo?

devo fare, ad esempio tu calcola il codice fiscale.

D'accordo?

Qua ad esempio come calcola il codice fiscale?

Il calcolo del codice fiscale qui lui lo delega al bin.

Come fate ad avere il bin e il controller?

Avete la variabile main object.

Poi lui qua la casta all'interfaccia però qui la poteva anche castare a paziente interactive questo è il bing che abbiamo detto viene utilizzato dal controller

qua lui lavora a livello di interfaccia un'interfaccia comunque main object è in

qualsiasi controller voi siate ok main, io anche se vado su corso v3, avete sempre ovunque,

tutto qui, main object, come variabile ce l'avete sempre, o che vuole,

main object.get class, ok? ce l'avete sempre il main object

ovviamente però in che caso ha senso?

quando siete in edit, un insert

perché ve lo dico?

perché ad esempio adesso qui l'ho piazzato sul do confirm find

vuol dire che quando l'utente preme il tasto ricerca

il main object in quel caso voi ce l'avete sempre

però sarà null

sarà null

sarà di ricerca

che dovete prendere come main object e niente, avete un'istanza.

In esempio qui le logiche invece di implementarle all'interno del controller, le logiche del codice fiscale l'hanno implementate a livello di paziente, del bin, del main object, del bin.

Quindi poi farà calcolo codice fiscale, quindi sarà qua dentro immagino.

object del bin quindi poi farà calcolo codice fiscale quindi sarà qua dentro immagino al codice fiscale infatti croco e poi fa tutto quello deve fare

va bene

questo

Questo è quanto. Diamo uno sguardo, sempre per rimanere al paziente, però un po' anche a delle validazioni.

Come vi dicevo, il paziente ha tante validazioni, tante, a parte che le possiamo anche vedere come colpo d'occhio. Alcune banali, tipo la data di nascita è superiore alla data di odierna, che è come se prevede il futuro, quando nascerà una persona.

La data di eccesso precedente alla data di nascita è morta prima di nascita.

Alcune sono banali.

Altri magari un pochettino più complesse e tengono in considerazione,

che ne so, la data di scadenza della testa deve essere valorizzata in caso di fine asla di assistenza.

Altri incrocianoano ad esempio come vi dicevo

il comune di nascita

con la data di nascita

questo genere di validazioni

alcune come vedete sono

queste

sono fisse

non c'è modo

non c'è modo

di evitarle

però

alcune sono fisse

quindi qua dentro

questo controllo lo fa appunto e basta

lo vedete anche voi

non fa nulla di particolare

però alcune invece

questa qui sul comune di nascita che vi ho appena detto

dice se validate comnas, cioè va come a verificare se effettivamente debba fare questa validazione.

Perché, adesso li vediamo, ci sono una serie di parametri che permettono di eventualmente disattivare, si trova sul codice, però permettono di disattivare dei controlli che noi chiamiamo controlli restrittivi.

Questi controlli restrittivi li trovate come parametro aziendale. quindi anagrafiche

pazienti

i parametri dei pazienti

e

ecco qua, link controlli restrittivi.

Quindi posso dire, ad esempio, qua ho la lista...

Poi dopo questa cosa qui ve la spiego meglio, però adesso limitiamoci a dire che qui ad esempio ho la lista dei controlli, attiva controllo su data fine asistenza e data scadenza testera sanitaria.

E qua posso mettere un check per dire si attivala o no disattivala.

Attiva controllo sulla data scadenza o revoca esenzione e la data di eccesso del paziente.

Qui posso dire attiva o disattiva.

del paziente. Quindi posso dire attiva o disattiva. Attenzione perché alcuni sono negativi, nel senso tipo qua è disattiva controllo sulla data attivazione ASL assistenza e data inizio assistenza

paziente. Qua se metto il check vuol dire che sto disattivando, non sto attivando, che qua dice

disattiva. Insomma, tutti questi questi parametri sono poi letti qui, ad esempio, in corrispondenza della validazione.

Quindi qua ad esempio lui va a leggersi, eccolo qua, va a leggersi il controllo restrittivo, quindi va a leggersi il parametro, ok?

Profile manager, bla bla bla, mi leggo il parametro, ma qua si è fatto un metodo di utilità per leggere tutti i controlli restrittivi,

però fondamentalmente si va a leggere quel parametro e se è attivo il controllo restrittivo lo fa, se è stato disattivato non lo fa il controllo.

logiche di autocompletamento ad esempio dicevamo quella del codice di residenza comune residenza anche qui dentro no qua dentro no perché un bin questo abbiamo sul presente interactive no quindi

diciamo che se da maschera web io metto la residenza in automatico lui va a calcolare l'as lui mi va a calcolare l'ASL, la regione d'appartenenza, eccetera.

Vedete che qua c'è disabilita, calcolo automatico, comres.

Se noi andiamo a cercarci questa variabile booleana, vedremo che prima o poi se la va a leggere, sempre anche qui tramite un parametro aziendale.

tramite un parametro aziendale, infatti qui tra i parametri aziendali del paziente stabilita calcolo sul comune di residenza, quindi lo posso disabilitare, oppure disabilita

il calcolo sulla cittadinanza e il comune di residenza, quindi anche alcuni automatismi

si possono disabilitare, qua sul comune di domicilio

bene

i campi calcolati c'è anche questo parametro

sovrascrivere i campi calcolati

se il campo a base viene modificato

cioè supponiamo che io ho questa logica

per cui ogni volta che cambio

il comune di residenza lui mi va a calcolare

l'ASL

mi va a calcolare la regione eccetera quindi metto Roma e lui mi calcare l'ASL, mi va a calcolare la regione eccetera

quindi metto Roma e lui mi calcola l'ASL Roma 1

ad esempio

e poi se cambio che

la comune di esidenza non è Roma e Milano

che deve fare lui? Deve sbiancarmi anche l'ASL

e mettere l'ASL di Milano oppure deve lasciare la stessa

a questo serve questo

parametro a scrivere i campi calcolati. Quindi una volta valorizzato, se deve continuare a

sovrascriverlo oppure lascia stare quello che serve. Poi dopo alcuni, ad esempio, magari sono

addirittura, vedrete che sono delle validazioni dove il fatto se ritornare una validazione

bloccante, quindi un error, no validate exception,

nel mio metodo validate, oppure un warning,

viene deciso addirittura questo come parametro.

Quindi dice, validità SSN esenzione come warning,

se lo metto allora diventa al salvataggio,

mi verrà mostrato magari un warning e va avanti.

Se invece non è cercato come in questa situazione qui,

di default lui dà un errore bloccante.

Insomma, ci sono tutta una serie che poi dopo si trovano sul codice di parametri.

Tanti magari appunto sono richieste specifiche, magari arrivate da un cliente.

Magari c'era un cliente che era annoiato dal fatto di dover andare sempre a sistemare le date di validità dell'SSN e quindi ha chiesto, mettimelo come warning, giusto così per saperlo.

quindi ha chiesto mettemelo come warning, giusto così per saperlo.

Ah, eccolo qua, vedete qua, c'è un paraecco perché non trovo il codice,

quello che vi dicevo prima, che c'è un codice identificativo First Aid Pass Jubileo, fatto per il jubileo di Papa Francesco.

Quindi c'è il campo, però non lo vedevamo perché per vederlo,

quantomeno, ecco, c'è un parametro, cliccando compare quel campo in più.

Va bene? Anche qui, warning, eccetera.

Poi altri parametri che sono qui dentro li vediamo strada facendo.

Questo intanto volevo farvi vedere quelli relativi a controlli, di validate, di valutare estetivi,

ai meccanismi di overwrite, quindi esempio calcolo automatico di campi e al fatto

di re warning o errore bloccante trovate tutto comunque poi ripeto si capisce abbastanza ecco

tipo qua overwrite calcfield andiamo a cercare ved, eccolo qua, va a leggere il parametro che vi ho fatto vedere prima.

Ok?

Questi parametri di validazione si aggiungono come gli altri parametri, quelli di profilatura, eccetera.

Sì, esatto.

Sì, esatto.

Poi qui è una chiave un po' più particolare, però sempre che si fa tramite modi di sviluppatori,

perché è una chiave, adesso vi dico il termine, però il significato lo vediamo dopo,

quando andiamo avanti con gli esercizi di XMPI,

ma questo controllo risettivo è un parametro per dimensione.

Poi capiamo che cosa vuol dire per dimensione.

Però sì, tramite modi di sviluppatori, si va lì, si censisce.

E fine.

Domande?

Ok, allora il paziente per adesso lo mettiamo da parte, lo parcheggiamo.

Per tornarci dopo quando parleremo di proposte, pesi e alias.

Però per adesso tanto ci basta.

Quello che ci interesseva sapere è il paziente inteso come, per ora, anagrafica.

Vediamo adesso un'altra anagrafica principale, che è l'anagrafica dei soggetti.

Iniziamo a parlarne, poi dopo continuiamo sicuramente a pranzo.

L'anagrafica dei soggetti.

Che cos'è l'anagrafica dei soggetti?

Quindi è un archivio informatico per censire tutte le persone,

siano queste persone fisiche, siano persone giuridiche,

che a qualsiasi titolo, paziente escluso, hanno un rapporto attivo con l'ente. Quindi qua dentro cosa noi ci andremo a censire? Nella grafica dei soggetti. I dipendenti dell'azienda, i medici di base, i pediatri di libera scelta, un cliente dell'azienda, un fornitore dell'azienda, tutto.

un cliente dell'azienda, un fornitore dell'azienda, tutto.

Qualsiasi cosa che non è un paziente, se il rapporto che un soggetto ha verso un'azienda è paziente,

allora no, in quel caso useremo l'anagrafica dei pazienti, che abbiamo appena visto.

Per tutte le altre possibili, inimmaginabili rapporti che può avere un soggetto verso un'azienda,

invece utilizzeremo l'anag grafica dei soggetti quindi

nel momento in cui

un medico dovesse essere

ricoverato, perché anche lui

è un uomo

sugli archivi

c'è una duplicazione

esattamente, bravissimo

avremo due

un Mario Rossi medico censito come anagrafica dei soggetti innisce i principali dati anagrafici

di censare l'identificazione dello stesso

adesso lo vediamo

ma la cosa importante dei soggetti

è che il ruolo che svolge un soggetto

nei confronti dell'ente è determinato dal suo rapporto

quindi io censisco il soggetto

a prescindere che sia un cliente

un fornitore, intanto lo censisco come

informazioni anagrafiche

poi il fatto di stabilire

che quello soggetto che ho censito

è un medico oppure

un'azienda fornitrice

della mia organizzazione

quindi cosa è quel soggetto

lo determino associando a quel soggetto

un rapporto.

Poi lo vediamo.

In base al rapporto, il rapporto discriminerà all'applicativo per dire

guarda, questo soggetto è un fornitore, oppure guarda, questo soggetto è un dipendente o un cliente, così.

via dicendo i rapporti rientrano nella tipologia di record detta anche aziendale questo importante

ok alcuni record questo non so se ve l'ho già accennato quando parliamo di look up forse lo

dicevo i vostri colleghi purtroppo perdonatemi incominciava confondermi i corsi sono al settimo, ottavo del giorno di corso, non mi ricordo più. Quindi, che vuol dire aziendale?

Vuol dire che, giustamente perché il rapporto lo facciamo sull'azienda,

quindi ad esempio nel nostro caso, diamo uno sguardo,

ma all'interno dell'installazione della Sardegna,

adesso abbiamo creato l'azienda Formazione per non sporcare ok le altre aziende però ce ne

sono diverse no c'è l'azienda di sassari azienda di oliastra oristano eccetera eccetera ok muoro

cagliari ok ci sono diverse aziende quindi il rapporto che una persona che un soggetto ricopre

è nei confronti di una di quelle aziende è quindi complli confronti della Sardegna ci sarà il medico che lavora a Cagliari

il medico che lavora a Sassari

il medico che lavora a Oristano

a Nuoro e così via dicendo

quindi in virtù di questo

quando si associa ad un soggetto

un rapporto

mi sto a perdere le slide

e quando si associa

lego ad un soggetto un rapporto lo sto facendo per quella specifica azienda.

Di conseguenza quando inserisco un rapporto mi verrà valorizzato, quello vediamo quando vediamo le tabelle,

un campo della mia tabella che è il campo azienda.

Dici va a finire il codice dell'azienda.

Quindi inserisco un record,

quando in generale parliamo di record aziendali vuol dire che praticamente in maniera molto semplice che quella tabella ha una colonna sul db dove ci va a finire il codice dell'azienda,

in maniera che poi quell'azienda, quindi per gestire il multitenancy, per far sì che

quel record, scusatemi, sarà visibile soltanto a quell'azienda che è proprietaria

di quel record

se una tabella non ha

una colonna che contiene

l'azienda, vuol dire che i record di quella tabella

sono multiaziendali

sono

sovraziendali, sono visibili a tutti

a prescindere dall'azienda appartenenza

poi dopo

quando vediamo il d DB è più chiaro.

Facciamo un'esercitazione.

Un dubbio al volo.

Quando parli di azienda,

nella scritta precedente, parliamo di azienda sanitaria. Azienda intesa come azienda nella scritta precedente parliamo di azienda sanitaria

azienda intesa come azienda di login

cioè per intenderci quella che voi avete

associato alla terna

vi ricordate quando abbiamo fatto l'esercizio

dove vi siete creati un utente

vi avete dato l'azienda FM

e poi avete dato ufficio e ruolo

quindi azienda di login

d'accordo?

però la domanda è ottima

che non è relativa all'azienda

intesa come azienda ospedaliera

o asla o presidio

che invece è quello che noi censiamo

su una grafiche base e il punto di menu

asla o presidi

sono due cose distinte

io potrei avere per intenderci l'azienda Roma,, l'ASL Roma 2, l'ASL Roma 3 e l'ASL Roma 4, che invece è l'ASL inteso come azienda sanitaria fisica sul territorio.

Un conto è l'azienda che censiamo di login e un conto è quelle ospedaliere e sanitari.

e sanitari ok

quindi quando parliamo di record aziendali

intendiamo record che si legano

all'azienda di login

quindi ad esempio qua

ho creato l'azienda FM

se io adesso vado a creare un rapporto

adesso creiamo un soggetto

gli dico che quel soggetto lavora per l'azienda FM quindi gli mettono un rapporto adesso creiamo un soggetto di questo oggetto lavora per l'azienda fm quindi

mettono un rapporto insomma questo soggetto verso la mia azienda solo io simone lucidi quando

mi collegherò con la mia terna con mio ufficio col mio ruolo che appartiene all'azienda azienda FM ok? quindi ho quella terna

potrò vedere quel rapporto

se io mi loggo con un'altra terna

che appartiene all'azienda 38

che è di Cagliari

io quel record non lo vedo

in maschera non lo vedo

mi viene filtrato automaticamente

adesso faccio un esempio

e lo vediamo.

Allora, l'esercitazione prevede questo, prevede di creare un medico, definiremo quindi un rapporto per dire che quella persona è un medico e poi lo associeremo al paziente come scelta irrevoca.

Vi dicevo prima che in Sardegna non sono gestiti i medici di base, la scelta irrevoca non sono gestiti.

Quindi non serve, però lo facciamo come esercizio perché come esercizio comunque ci è comodo per fare tutto il giro,

cioè creare un soggetto. Poi dopo il modo con cui si crea lo soggetto è lo stesso a discrimi a prescindere se si

vuole creare un dipendente o un cliente un fornitore quello che cambierà è sempre questo

rapporto che andremo a vedere ok allora

Allora, l'anagrafica di soggetti si trova sotto menu soggetti, gestione.

Velocissimo l'ambiente adesso.

Il mio soggetto, il mio utente però non è abilitato, mi ci devo abilitare.

Un secondo, mi abilito all'inserimento di un soggetto, quindi prendo il mio ruolo, no,

uffici ruoli, questo ruolo e questo qui, funzionalità risorse,

allora questo è importante, questo l'ho spiegato ai vostri colleghi

allora noi sappiamo che ogni volta

che vogliamo cambiare

la visibilità di un oggetto

vi ricordate l'esercizio che abbiamo fatto in profilatura configurabile

dove ci disabilitavamo la possibilità

di inserire un comune

di modificare il campo di iscrizione eccetera

lo facevamo tramite profilatura configurabile

abbiamo poi imparato che per tramite profilatura configurabile abbiamo poi imparato

che per andare sulla profilatura configurabile creavamo la chiave per andare poi a valorizzarla

dovevamo andare qui sul link profilatura configurabile e poi insomma andarci che ne so su anagrafiche

cittadinanze no? Andare qui e dire inserimento o modifica. Perfetto. E questo vale sempre per tutti. Le uniche eccezioni sono le anagrafiche del paziente e le anagrafiche dei soggetti, i cecchettini per decidere

l'inserimento, modifiche e cancellazioni non li trovate su profilatura configurabile, solo per i

pazienti e i soggetti, ma li trovate nei link dedicati. Anagrafiche, pazienti, nel mio caso

soggetti, scusate, soggetti, e qua vedete c'è inserimento, variazione, cancellazione. Mi abilito tutto, ok?

Chiaro?

Solo per pazienti e soggetti, non vedete questo.

Perché all'epoca ancora la profilatura configurabile non esisteva e quindi queste chiavi sono state rilasciate fisicamente, esistono proprio.

Non sono create tramite profilatura configurabile in maniera dinamica.

Ok, quindi mi sono abilitato

ho fatto conferma

quindi qui adesso mi cuido un po' di maschere

questa non ci serve

questa adesso non ci serve

questa non ci serve

questa non ci serve

questa ce la lasciamo tabelle generiche non ci servono, e qua faccio

logout, adesso mi riloggo per far sì che si va a ricaricare le chiavi, e poi faccio

Cambio impostazioni login, azienda FM, anagrafiche, soggetti, gestione, eccolo qua, tasto nuovo.

Mi creo il mio medico programmatore.

programmatore.

I unicitati obbligatori sono questi, cognome, nome, anzi no, o meglio,

l'unicitati obbligatori di BAA.

Ah, questa è una cosa importante, scusatemi, mi sono dimenticato sul paziente,

scusatemi, torno un attimo indietro sul paziente, perché mi ha fatto venire in mente il soggetto.

Se io faccio nuovo su un paziente, tutti questi campi in gialletto che vedete,

questo è importante, sono stati stabiliti che sono obbligatori questi campi da profilatura

configurabile, ok? Cioè di default la

maschera del paziente, tutti i dati, sono

tutti non obbligatori, sono tutti editabili,

sono tutti campi semplici bianchi, ok?

Tutti, tutti, tutti. Quindi il fatto

che vedete che qui sono giallo è perché qualcuno è andato sulla funzionalità con

furofilatura configurabile che ci siamo imparati, ha aggiunto i campi cognome, nome, data di

nascita e li ha marcati come obbligatori. Il paziente non ha campi obbligatori tutti editabili

la stessa cosa per le persone

gli unici campi obbligatori sono

il tipo per sui soggetti

sono tipo da applicativo

sono previsti tipo persona

che deve essere o fisica

o una giuridica

e lo stato attivo-disattivo

qua il fatto che il cognome e il nome è obbligatorio

è perché in profilatura configurabile

hanno deciso qui questo sul cliente.

D'accordo?

Ok.

Quindi, medico, programmatore,

dopo ci sono tutte una serie di dati anagrafici,

comuni nascita, provincia, eccetera.

Conferma.

E così abbiamo inserito un paziente, il cui identificativo è questo qui,

che gli viene associato. Anche questo è come il paziente, è degenerato tramite sequence,

però anche questo è un varchar 2 di 16 sul DB, quindi potenzialmente lì si può dare qualsiasi cosa.

2 di 16 sul db quindi potenzialmente lì si può dare qualsiasi cosa. TAP indirizzi è semplicemente un modo con cui è possibile censire tutti gli indirizzi di un soggetto. Indirizzi che vuol

dire? Ad esempio potrebbe essere sede legale, mettiamo caso, supponiamo che un caso di un'azienda legale legale di a roma

tutte le cose indirizzo numero di telefono eccetera una serie infinita di

tipi di mail pack ok

E poi una data di attivazione e disattivazione. Perché è importante?

Fondamentalmente in generale è semplicemente per dare una obsolescenza ai record.

Diventa importante l'attivazione e disattivazione nel caso in cui parliamo di indirizzo, ad esempio, di residenza.

In questo caso la descrizione potrebbe essere qualsiasi cosa.

Posso magari scrivere residenza, dirgli che la residenza è a bano terme, e però c'è questo flag, residenza, che mi tipizza fisicamente questo record come un record di residenza, altrimenti qua posso mettere in una descrizione qualsiasi cosa.

ok?

senza fiscale ok? per quanto riguarda la residenza

all'interno dello stesso intervallo

temporale posso avere

solo un indirizzo

di residenza, ok? quindi non si possono

accavallare, cioè se la residenza cambia

io devo fare

mettiamo in caso che

la residenza c'è una nuova

faccio

prima cosa devo fare disattivo la vecchia,

per non disattivare lo stesso giorno questo me l'anticipo,

questo è dal primo aprile alla data di ieri, 12, questa era la residenza,

12 ok questa era la residenza

poi me la crea una nuova residenza nuova

marco come risultati dico a partire invece dalla di oggi in avanti e quest'altra ok quindi soltanto un record sono vita errore di attivazione di attivazione in

generale per l'indirizzo è soltanto un modo per gestire l'obsolescenza

nel caso della residenza invece ci aggiunge anche un controllo

per cui all'interno

alla data di oggi insomma

vabbè, più in generale

le date di attivazione e disattivazione

di due o più residenze

non devono accavallarsi

se non apri e chiudere

ok?

nulla di eccezionale.

Ok, per aggiungere invece un'email?

Cioè, non capisco...

Per aggiungere un indirizzo email, invece.

Non ho capito, per?

Aggiungere un indirizzo email.

Aggiungere, ok.

Allora, qua di email ne trovi tante.

Ognuna ha poi uno scopo suo, nel senso, a livello di XMPI gestiamo il dato anagrafico, l'utilizzo che poi ne fa il verticale di turno è a sua discrezione. un campo email che probabilmente intendevo dire come un'email generica e poi abbiamo un'email pack di file di pagamento

questo già mi fa intuire che probabilmente è un campo

che qui per me XMPI, anagrafica, non ha senso

quando magari farete il corso dell'MC di contabilità

quando aver affrontato l'argomento di file di pagamento

magari vi verrà menzionato questo

quindi questa è sicuramente magari una PEC

che viene inviata

è un inizio PEC che viene utilizzato soltanto quando

il modulo della computabilità deve mandare

una rifiuta di pagamento

ok?

stessa cosa questo qua per lo SD

questo penso che sia roba di fatturazione elettronica

questo dovrebbe essere roba di fatturazione elettronica

NSO sono gli ordini

quindi comunque questa è tutta roba di amc quindi la parte più

funzionale la vedete la vedete con loro ok ok poi vari di me stava per tutto mi

pare pure qui ci sia anche un'altra me e qua c'è la pecca aziendale esempio

e poi c'è anche un'altra email sui rapporti

e poi c'è anche un'altra email sui rapporti

ecco, ha due email

quindi qua ci sta un po' di tutto

poi noi li gestiamo come dati

anagrafici

poi dopo il valore funzionale

lo dà il verticale

che se lo va a leggere, quindi c'è un verticale

che andrà a leggersi nel rapporto

la contabilità se andrà a leggere un c'è un verticale che andrà a leggersi del rapporto la contabilità

se andrà a leggere un altro

l'HR

un altro ancora

eccetera

va bene

quindi questo comunque

per gli indirizzi

fino adesso

altre domande?

generale

rispetto a tutto quello

che abbiamo detto

ok poi ok

poi

andiamo al clou

alla ciccia

i rapporti

è qui che io vado a dire

questo tizio che

caspiterina è

e come faccio a dirlo tramite questo

look up tipo rapporto. Io se lo apro

vengono mostrati tutte le tipologie possibili di rapporti che, poi vediamo come si creano

un rapporto, comunque sono stati censiti qui in Sardegna, tra la immundo AMC HR praticamente

poi ce ne sono alcuni forse anche delle DF

che è erogazione di letta farmaco

sì ecco qua

quindi insomma questi sono quelli

posso censire magari

un cliente, un borsista

un dipendente

del servizio territoriale ASL

un po' di tutto

medico generale pediatra quindi questo mi tipizza effettivamente chi è sto servizio territoriale ASL, un po' di tutto, medico generale pediatra,

quindi questo mi tipizza effettivamente chi è sto tizio?

D'accordo?

Per vedere un attimo magari intanto la base dati,

poi facciamo pranzo e poi ci torniamo qui,

ad esempio, metto borsista, questo è un borsista,

anche qui ha una data di attivazione e disattivazione, questo è importante. Perché è importante qui la data di attivazione e disattivazione? Perché il mio soggetto, come potete vedere, potrà avere N rapporti, io magari gli do anche libero, professionali.

ok quindi ho due rapporti con l'azienda con la mia con la mia azienda in questo momento sono fm con

la mia azienda fm questo soggetto ha un rapporto sia un borsista un libero professionista perfetto

però per lo stesso rapporto io adesso provo a rinserire borsista

Se io adesso provo a inserire bursista, è possibile inserire due, è simile a quello per la residenza, ok? Non posso avere lo stesso rapporto per lo stesso intervallo temporale, quindi se io voglio inserire nuovamente un rapporto già censito, simile a come abbiamo detto per la residenza, io dovrò prima disattivare il rapporto esistente e attivare il nuovo rapporto.

Perché questo? Perché i rapporti effettivamente hanno dato inizio da fine, spesso, dipende.

Un esempio classico sono le persone che magari lavorano nell'azienda a tempo determinato, magari per tre mesi.

Quindi inizia il primo gennaio e finisce il 30 marzo, il rapporto di lavoro, come borsista, poi magari a distanza di tre anni ritorna nuovamente con lo stesso rapporto per altri tre mesi,

sono di fatto due rapporti diversi, uno si è consumato dal

primo gennaio del 2022 al 30 marzo

2022, un altro avrà un'altra data di

validazione, di attivazione, di

disattivazione, ok? Queste date servono

per gestire proprio queste

statistiche, un rapporto nasce e muore

eventualmente, alla fine sempre, perché

sempre anche magari, semplicemente anche

un dipendente a tempo indeterminato,

prima o poi andrà in pensione, quindi quel rapporto si chiuderà, ok?

Serve a questo, attivazione e disattivazione.

Vediamo un attimo sul db queste cose qui quindi la tabella è sono tre quelli che abbiamo visto è la persona e della tabella dell'anagrafica del mio soggetto quindi

io posso cercare per pfd che l'identificativo

per pfd che l'identificativo qui

anche questo va come diceva un varchar ecco il tipo fisica cognome medico nome programmatore e poi tutti insomma è soltanto questi dati quindi

non ci abbiamo messo di più però insomma quasi sono i dati di testata anagrafici ok

Per quanto riguarda i soggetti c'è anche il campo ragione sociale che in realtà ha senso soltanto nel caso di persona giuridica, quindi in caso di un'azienda, però c'è un automatismo che per far sì che il campo ragione sociale venga sempre compilato ci concatena dentro quello che trova su cognome e nome, questo ad esempio per le persone fisiche, che magari,

questo serve per l'AMC,

perché magari l'AMC,

lavorando con fornitori e clienti,

va sempre a leggere la ragione sociale,

però nel caso di una persona fisica,

una partita IVA,

che non ha una ragione sociale,

si censisce comunque come persona fisica,

magari si mette sempre soltanto il nome e il cognome non ha una ragione sociale

e in quel caso quindi ci concatena

c'è l'automatismo che ci concatena il nome e il cognome

così normalizza il campo è sempre lo stesso

questo qui invece, questi tre campi

non li abbiamo visti ma stanno anche sul paziente

ci andiamo

però non servono praticamente più

perché venivano usati

adesso qua è complicato trovarlo

comunque si chiamano pz

pz norm cogn, pz norm nome

così come qua è scritto pf norm

c cognome pfnormn che è per nome

poi lo fa anche per la ragione sociale

questo serve per gestire

le ricerche in like

serviva per gestire le ricerche in like

adesso non si fanno più

per i soggetti ancora si fanno

per i pazienti come vi dicevo non ci sta più

perché ad esempio normalizza

togliendoli le doppie, ok?

per evitare gli errori di battitura

il programmatore qua scrive programmatore

tutto qui

semplicemente per togliere le doppie

in maniera da poter gestire eventuali errori di battitura

sul paziente non serve più perché

sui soggetti sì

fine, questa è l'anagrafica la tabella dell'anagrafica

della persona le altre due tabelle che abbiamo visto sono quella degli indirizzi che fa pers in

a persi in

Sind ha un

l'altra colonna chiave è un progressivo che si calcola

lui, come dice la parola stessa

un progressivo, quindi per ogni volta che aggiungiamo

un indirizzo fa 1, 2

3, 4, ok

quindi questi due colonne sono

la sua chiave primaria e quindi quando abbiamo i dati che abbiamo inserito quindi la sede legale

che non è una residenza questo comune poi abbiamo censito le due residenze però con intervalli di

date quindi ecco qua enable disable e così via dicendo ok quindi tabella di gestione degli indirizzi. L'ultima è la tabella ARAP INDIV. Infatti la tabella, la maschera questa qui, per quanto venga chiamata rapporti, noi la chiamiamo in realtà rapporto individuale, rapporto individuale, più che altro per distinguerla da cosa si dà significato di tipo rapporto,

il tipo, poi dopo vediamo che cosa dopo pranzo, però, quindi quando parliamo di rapporto individuale parliamo di un record,

ad esempio un borsista è un rapporto individuale, la tipità libero professionale è un altro rapporto individuale.

Qui dentro c'è una sua chiave primaria

gestita come sequence,

che è questa qua, la RID.

Per filtrare la persona c'è la colonna

RI, persona.

Eccolo qua, i miei due rapporti.

Rapporti per chi?

Per l'azienda FM.

Eccolo qua, vedete quello che vi dicevo.

Quindi questo record è aziendale e in base a questa colonna è riazienda e legata alla mia azienda FM, quindi solo io potrò gestire questo rapporto, cioè solo io, solo un utente dell'azienda FM, un'azienda di Cagliari non lo potrà toccare questo record, d'accordo?

Quando non c'è il campo colon, la colonna aziendale, in generale, su qualsiasi tabella di Arias che andate a vedere,

se non trovate un campo che contiene il codice dell'azienda, che non è quindi in foreign key con la tabella dell'azienda,

vuol dire che il record è multiaziendale.

Tutti gli utenti di tutte gli utenti possono toccarlo

ok?

poi dopo il resto sono altre informazioni

chiaro?

sì

ok

allora andiamo a fare pranzo

e poi dopo riprendiamo

quindi il nostro

riprendiamo alle due

da qua

da questa maschera

vedremo appunto come censire questo medico

e poi vedremo

uno sguardo alla tua java

va bene?

ok va bene ok ok

buon pranzo

ciao

mi senti

mi senti

qualcuno mi ha chiamato

si si io sono preso

Il solito problema dalle 2 alle 3 seguo da cellulare.

Sì, tranquillo, non c'è problema.

Quando facciamo esercizi, bisogna solo guardare quello che faccio.

Sì, sì, ok.

È a posto.

Ciao Daniele, buon pranzo.

Dopo, buon pranzo. Grazie a tutti. Grazie a tutti.

Grazie a tutti.


-----------------
VIDEOLEZIONE 10 :
-----------------

eccoci ragazzi buon pomeriggio ciao ciao ciao un minuto iniziamo Grazie a tutti. Grazie a tutti.

Allora, eccoci qui.

Allora, eccoci qui.

Riprendiamo da dove c'eravamo interrotti. Quindi è il nostro fantastico esercizio sulla gestione delle anagrafiche di soggetti.

Condivido.

delle anagrafica soggetti.

Condivido.

Allora, scopo dell'esercitazione è quella di creare un medico.

Quindi abbiamo già visto come si fa a creare un soggetto, l'abbiamo appena fatto con il nostro medico programmatore,

è scaduta la sessione, ci riloghiamo

quindi

anagrafiche

soggetti, gestione avevamo creato il nostro cognome medico, programmatore.

e abbiamo dato questi due rapporti.

Ora li cancello, questi erano insomma per farci vedere come funziona l'aggiunta di un rapporto,

perché nel nostro esercizio in realtà vogliamo creare un medico.

Allora, come funziona?

Innanzitutto partiamo dalla definizione di un tipo di rapporto.

Come si definisce un tipo di rapporto?

Abbiamo una grafica dedicata che è quella sotto una grafica e base rapporti.

Io qui quindi posso censire il mio rapporto.

Mi devo abilitare,

mi devo abilitare giustamente,

perché abbiamo fatto l'esercizio,

in realtà facciamo così. profilatura configurabile, una grafiche base e qui adesso comprendo che nell'esercizio che vi ho fatto fare era meglio mettere il check default inizio.

e va bene

così va per

miglioramenti ciclici

allora dov'è i rapporti?

eccolo qua

configura

configura

qua

mettiamo un bel check di default

lo faccio un po' per tutte

le anagrafiche di base

giusto perché

non voglio dare problemi ai colleghi che devono fare formazione, quindi lo faccio anche per le regioni.

Ho fatto i comuni. No, però i comuni è la cancellazione, momento configurazione, esco e rientro. Quindi dicevamo, grafiche base, rapporti.

Facciamo nuovo,

Facciamo nuovo e fondamentalmente un tipo rapporto è costituito da un codice e una descrizione. Quindi ad esempio creo il mio rapporto medico AP, medico per analista, programmatore.

Poi qua sulle tabelle categorie magari ci torniamo dopo.

Per adesso ci basta sapere questo, codice, descrizione.

E dopo una data di attivazione e disattivazione, al solito questo è una cosa fissa, però ricordiamoci sempre delle interazioni che hanno le date di attivazione, quindi ad esempio se io qua vorrò creare un rapporto che mi inizia dal 1980, qua la dativazione può essere 2022, ricordiamoci sempre poi questo sulle dati di attivazione il default viene sempre messa la data di oggi

però in realtà poi dobbiamo considerarla

quindi è una figura

l'immagine un po' più

più larga, più distante

quindi noi sappiamo che poi la contestualizzeremo

questo tipo di rapporto in un rapporto individuale quindi è bene dargli una data di attivazione un po

più larga quindi qua ho creato il mio tipo di rapporto nel momento in cui io creò un tipo di

rapporto a questo punto io qui sulla mia anagrafica di rapporti individuali lo posso scegliere quindi

se io vado qui sul mio look up tipo rapporto tra le possibili operazioni che ha fatto look out giustamente quindi

me la devo riaprire quindi su soggetti gestione e riprendo il mio medico su rapporti tipo rapporto

posso scegliere il tipo di rapporto appena censito. MedAP, eccolo qua, medico per analista,

programmatore. Un secondo solo, scusate. Ok, quindi ho scelto il mio tipo di rapporto appena creato e gli do una data di attivazione e disattivazione, anche la data di oggi va bene, confermo.

D'accordo?

di rapporto, ripeto, è soltanto un codice, una descrizione, quindi io qua li ho associato questo rapporto, va benissimo, però in questo momento la funzione che assolve questo rapporto

individuale è quello semplicemente di una registrazione anagrafica, cioè ho registrato

a livello di database e questo medico, questo soggetto ha un rapporto med underscore ap.

Fine.

Non c'è un significato funzionale di questo tipo di rapporto.

Come faccio a darglielo? Nel caso del medico, ad esempio, ho un parametro aziendale. Che cosa fa

questo parametro aziendale? Mi permette di dire all'interno di tutte le tipologie di rapporto che ho qual è la

tipologia di rapporto che io considero un medico. Quindi per vederlo in pratica così è più chiaro

quello che devo fare è collegarmi con un utente amministratore, andare sui parametri aziendali, in questo caso della mia azienda FM.

Parametri.

Anagrafiche.

Soggetti.

Dati per gestione pazienti.

Vedete qui cosa c'è? C'è un look up dove mi dice rapporto per medico.

Se io lo apro mi fa vedere sempre le tipologie di rapporto, per cui io posso selezionare adesso il mio rapporto Med-Ap, confermare e a questo punto sto istruendo l'applicativo per dirgli guarda ogni volta che un soggetto

ha un rapporto di tipo med-ap selezionato, sappi che stiamo parlando di un medico.

Nel caso nostro del paziente, in cosa mi è utile?

Perché se adesso io vado sull'anagrafica del paziente,

torno a prendere il paziente che abbiamo inserito oggi,

che ha i d, questo qui,

la lista programmatore, vado in età, medicina di base, e faccio medici,

io qua ho la possibilità di indicare il medico, c'è un look up,

faccio clic su questo look up, in realtà il look up mi rimanda

in find 2 perché mi rimanda, vedete dove, nella maschera di ricerca dei soggetti, in un controller

di maschera di ricerca dei soggetti, dove il rapporto è già filtrato per questo qui, per il

rapporto che lui considera come un medico, faccio ricerca e lui mi seleziona il medico che è l'unico che ad oggi

c'è quel rapporto, il medico programmatore. Poi vabbè, qui è una scelta irrevoca, quindi gli dico la data

d'inizio. Conferma. Fine. Quindi abbiamo associato in questo caso il medico al paziente

abbiamo detto che in realtà non è l'esempio che utilizzete in Sardegna

in Sardegna si utilizzano gli altri rapporti

perché si utilizzano i fornitori, i clienti, i dipendenti, eccetera

ma il funzionamento è lo stesso

questo è il concetto che bisogna acquisire con l'esercizio è questo

i tipi rapporti sono praticamente delle anagrafiche,

troviamo di base, dove io posso censire genericamente dei rapporti, che altro non sono che un codice

e una descrizione. Questo tipo di rapporto lo posso poi associare ad un soggetto creando

un rapporto individuale. Se questo rapporto è un rapporto che io voglio registrare in maniera anagrafica, apposto così, fine.

Se invece è un rapporto che deve avere un valore funzionale, io certamente su ogni verticale avrò poi un parametro aziendale con cui poter dire

guarda rispetto al mio registro di rapporti tutti i tipi di

rapporti che ho recensito considera questo come medico la MC ad esempio ha un parametro

aziendale uguale corrispondente dove voi andrete a indicare il tipo di rapporto che lui deve

considerare come rapporto fornitore la DT magari è un altro non so riguardo le caposala

una fesseria

quindi ognuno

c'è il suo, la care avrà i suoi

quindi avrà i parametri aziendali con cui si associa

a una funzionalità applicativa

il tipo di rapporto che ho censito

sull'installazione

In questo caso io ho censito sull'installazione questo mio tipo di rapporto e lo associo al significato funzionale di XMPI che è per il rapporto del medico.

Perfetto, ok? Tutto qui.

Poi alcuni tipi di rapporto, penso che l'esempio sia proprio quello del tipo di rapporto fornitore di AMC, mi pare.

Esatto, vedete che fa? Categoria obbligatoria.

Categoria, se la apro, è un elemento di tabella generica.

Torniamo alle tabelle generiche che dicevamo prima.

Come fa a dire che questo tipo di rapporto che ho appena creato, la categoria non me la chiede, se metto fornitore me la chiede,

perché proprio, adesso tornando sulla grafica di rapporti, è una tipizzazione del tipo di rapporto che eventualmente uno può definire,

Adesso lo trovo, medap, eccolo qua, qua c'è il check obbligatoria.

Però per dirgli che è obbligatoria bisogna anche specificarli,

quindi obbligatori dico che quando selezionerò il tipo di rapporto medap, diventa obbligatorio anche chiedere la categoria,

però poi se è obbligatorio la categoria,

devo anche specificare qual è la tabella generica con cui recuperare i valori da mettere nella categoria.

Ad esempio potrei usare i miei days of the week.

Vediamo un po'.

Quindi adesso la categoria è diventata obbligatoria per il mio rapporto.

Esatto.

E questi sono gli elementi Monday-Tuesday che abbiamo creato oggi.

Tutto chiaro? Poi qui c'è controller di dettaglio, però questo è per alcune tipologie di rapporto, vediamo un po' se riusciamo a trovarle.

se riusciamo a trovarle qua non possiamo metterci cose a caso

ad esempio immagino siano quelli

medico

medico

proviamo un po' i DF medici e non ce l'ha

vediamo un po' sulla tabella

tanto la tabella di rapporti è

select star from

standes con rapporto

tabella di anagrafica

di tipi rapporto medico competente, però questo è amianto, quindi non ce l'ha nessuno in Sardegna.

poi colleghi verti verticali a dirvi a farvi un focus comunque che cosa sta a significare quel quel controllo dettaglio se definito controlli dettaglio qui uscirà fuori un tasto dettaglio

che cliccando vi manda su un controller di dettaglio indicato qui dentro ok

quanto su come mapping ok quindi non c'è niente

qui c'è una stringa

in questo caso andava bene come label

va bene?

quindi dettaglio che può andare

su una pagina che non c'entra nulla

con le anagrafiche

per questo non ve lo spiego

perché se è ve lo spiegheranno poi

i colleghi del verticale

ma andano su una pagina loro

quindi magari l'HR si può definire

un suo controllo di dettaglio dove vuole dettagliare ulteriormente i suoi tipi di rapporto, quindi manderà su una pagina dell'HR.

Va bene? Un secondo.

Ok, quindi questo è quanto.

Adesso qua è disabilitato per mio utente la visualizzazione del tab storico,

ma anche sulle persone abbiamo il tab storico identico a quello che abbiamo visto sul paziente, quindi che mi fa vedere tutte le variazioni che sono state fatte,

l'utente che mi aveva fatto le variazioni e la data e l'ora in cui è stata fatta una variazione.

Ok, allora, a livello di tabella abbiamo già visto quindi abbiamo la persona

che è l'anagrafica del soggetto

persin dell'anagrafica degli indirizzi

e sarà Pindiv l'anagrafica dei rapporti

come questo va a declinarsi

su lato java

allora

partiamo dal controller

i soggetti

il controllo dei soggetti è questa, una grafica V3

ora sinceramente

facciamo un po' come faremmo

se questa fosse una maschera

cioè una gestione di cui non so nulla

non so come era il bin

come vi ho detto fate shift f12 sapete

il controller volete sapere qual è il bin in realtà lo si capisce anche quando andando a

guardare ovviamente il sorgente del controller e tonalmente se faccio qua meno object prima o

poi verrà usato eccolo qua va bene però questo un attimo per ripassare come come dovremmo

andare a fare cosa facciamo siamo dallo shift f12

un po di maschera questa chiusa chiusa ok c'è stato dice questo il mapping del

controller poi faccio selezionarlo

il mapping sta sul nostro file di properties sotto controller nel caso di si anche si anche

punto properties per quel mapping questo è il controller questa l'associazione controller bin

e questo è il bin

Ok? Quindi il BIN che si occupa del BIN di testata dell'anagrafica soggetti è persona fisica BIN. non sono tantissime, avrà anche esatto le liste dei rapporti individuali, la lista degli indirizzi, questi come dettagli, dopo c'è altre liste ma che non sono dettagli. Retrieve,

ecco che fa la find dei rapporti individuali, la find degli indirizzi e basta e basta retrieve alias non sono dettagli

ma li capiamo più tardi quando facciamo gli alias ok quindi questa è la classe di bin anche qui

credo vediamo un po metodo retrieve no qui la difenza del paziente invece utilizza i metodi quelli

cloud che from bin e set to bin quindi non va a lavorare proprietà per proprietà ok un po più è

stato rifatto è stato fatto un refactoring successivo in questo caso ok anche qui vediamo come i dettagli di tipo rapporto vanno in sempre in find ma

utilizza anche qui in questo caso invece di creare di recuperarlo in base alla

referenza del padre in base alla campo foreign key se lo recupera in

anche in questo caso tramite una query, perché ci vuole applicare un po' di filtri, un po'

di filtri che gli vengono passati probabilmente da fuori, sì, perché get context, quindi

qualcuno può passargli da fuori delle informazioni in più, perché ricordiamoci che i bin, non

è che questo bin qui è un'isola felice che sta da solo,

soprattutto qua quando parliamo,

probabilmente i bin che poi utilizzerete sui verticali, ok, quelli forse tanti sì, saranno delle isole felici,

ma quelli delle anagrafiche centralizzate,

tante volte non si sa nemmeno chi le usa,

ad essere sinceri, d'accordo?

Perché, come dicevamo, ci sono ad esempio integrazioni, ok?

Quindi il bin, in questo caso, ci sono ad esempio integrazioni ok? quindi

il bin, in questo caso

questa è una fisica bin, quando ci mettiamo

mano a fare

delle modifiche, non dobbiamo farlo soltanto

nell'ottica, ah faccio una modifica perché mi serve

una funzionalità in più sulla maschera

è ni, devi poi ragionare

sì ma questa modifica, come mi impatta

chi utilizza web service?

come mi impatta anche semplicemente

questa è la cosa più sfidante

chi fa magari un servicemanager.get

anche lui

anche il programmatore

che per qualche motivo

si deve istanziare una persona fisica

perché vuole fare delle operazioni per i cavoli suoi

e lo fanno eh

tipo la contabilità

censisce automaticamente

tramite flussi di integrazione

i soggetti, i fornitori

per la roba della fatturazione elettronica

ora i dettagli funzionali non li conosco

però lo fanno

loro si stanziano una persona fisica e fanno quello che vogliono

devo pensare in quell'ottica

siamo sicuri che poi la mia modifica

nel modo in cui mi possono potenzialmente

chiamare di cui non ho idea perché questo è il concetto in cui bisogna mettersi quando si mette in mano alle cose centralizzate, sono sicuro che utilizza proprio il service manager, magari salva il mio binder della persona e nel mio service context, può passarmi

set parameter value

può passarmi questa roba qua

vedo?

e qua mi passerà un valore

ok quindi questo è per

essere aperti a qualcuno

che può passare dei filtri una mappa di filtri che viene passata alla query dei rapporti, ad esempio.

Poi vabbè, al di là di questo, insomma, quindi i filtri che mi vengono passati da fuori vengono settati su questa classe di query che poi viene eseguita per caricarmi i rapporti individuali.

Ok?

ok

ovviamente abbiamo i nostri validate

alcune validate sono abbastanza banali

esiste almeno un rapporto definito

la cui data di attivazione è precedente

la data di nascita

il rapporto che inizia prima la data di nascita

la data sul codice fiscale

qua hanno creato un metodo a parte

che è chiamato sempre da Validator

per gestire soltanto i warning

oggi il fiscale non corrisponde

dati in agrafiche sul paziente

e così via dicendo

sulla persona fisica, sulla testata

non è che ci sia molto da dire

ok ecco vedete qua ad esempio, GetPropertyInfo noi l'abbiamo visto soltanto

per la info status, per dire quali campi sono Locked o non Locked, però come vi dicevo sono

utilizzato anche per la infolength, quindi per esempio quanto è lungo il cognome, il nome, la

rinascita. Nel nostro caso non serve, perché nel nostro caso utilizziamo,

abbiamo imparato a usare, XML.

Anche la persona fisica ha l'XML, però siccome l'XML,

anche questa è una cosa che è stata introdotta dopo un po',

la prima versione della persona fisica specificava la lunghezza dei campi così,

con la getPropertyInfo e infolength info length poi dopo è stato generato l'xml e qua dopo

non è che si è andati a toglierlo ok quindi adesso non leggerò dall'xml però è per farvi vedere

insomma che come funzionava anche prima oggi la getproperty info continua a essere usata soltanto

per la info status quindi locked, non locked eccetera

no, in realtà anche per la info length

scusatemi, però la info length

vi ricordate, questa era una cosa che era uscita

fuori durante

i test, no, in realtà anche per la info length

viene presa

però

noi la possiamo delegare

tramite questo pezzettino di codice, che poi ve l'ho aggiunto anche nel documento di snippet,

lo possiamo delegare alla getObjectInfo, che poi a sua volta delegerà alla lettura dell'XML.

Questa è la persona fisica

poi cos'altro abbiamo?

vediamo che altro abbiamo

andiamo sulla init del controller

a un certo punto ci sarà il tab degli indirizzi

eccolo qua, tab indirizzi

che cosa fa?

fa un controller forward

a cosa?

a button get target controller

target controller è stato settato qua dentro

quindi è solo un modo più

più figo di farlo

potevano fare direttamente così

come abbiamo fatto noi

quindi questo è il mapping

del mio controller, qual è la classe?

vado su syang properties

la classe è personaado su sync properties

la classe è persona indirizzo v3 e il bin è indirizzo quindi questo è il

controller di dettaglio

e indirizzo

è il bin degli indirizzi, ok?

ok?

superSind, vedete?

ecco qua ad esempio per quando nonostante indirizzo

anche lui abbia

l'XML, eccolo qua

vedete? non utilizza ancora i metodi quelli

mem getPropertyString

come con il paziente, ok?

questa è una cosa che potete trovare ogni tanto

nei bin quelli

piuttosto vecchi, primi primissimi

quindi paziente è certamente

uno di questi, la soggetti è uno di questi

già nei verticali è molto raro

nei moduli verticali che trovate queste cose qui

su quelli di

XMPI qualcuno lo trovate

ok

l'altro tab di xmpi qualcuno lo trovate ok

l'altro tab e torno sempre sul tab sulla controller di padre grafica v3 l'altro tab rapporti rapporti fa una controllo del forward a questo rapporto in div e che roba è? è un medico di base v3

che non c'entra niente

vedete questo perché magari all'epoca

quando è stato sviluppato la prima volta

i rapporti che si voleva gestire era soltanto i medici

quindi il controller dei rapporti individuali

si chiama medico di base v3

però in realtà non è solo per i medici di base

è per tutti come abbiamo appena visto

quindi i rapporti si possono,

si può gestire sul tab dei rapporti

qualsiasi tipo di rapporto.

Ok?

E il BIN si chiama

rapporto individuale bound.

Ok?

Estende rapporto individuale

qua dentro c'è il memento

ok

una cosa giusta ma

per se magari vi

alcuni sintassi Una cosa giusto, ma per se magari vi...

Alcuni sintassi, ecco, tipo questo rapporto individuale bound, che vuol dire bound, come potrebbe dire.

Tra l'altro sintassi bound, perché prendo un altro che magari si chiama sempre lo stesso modo, perché...

Facile. Vedete che alcuni bin si chiamano bound, è un tipo questo qua dell'azienda.

Perché per un brevissimo periodo si gestivano, non è nulla di particolare, non cambia niente rispetto a quello che vi ho detto,

semplicemente un bin invece di fare un bin solo se ne facevano due. Perché?

Perché uno lo chiamavano azienda esempio azienda persistent che implementa

l'interfaccia che sappiamo che quindi al nostro momento al nostro momento no le store retrieve

questo veniva esteso dal bin da un da un'altra classe che si chiamava azienda bound dove invece uno dovrebbe mettere

altre informazioni di dettaglio era un po più che altro una questione stilistica stilistica

per dividere la parte di persistenza pura nuda e cruda quindi dove si metteva il memento dove

si mette lo store dove si mette la retrieve conmento, dove si mette lo store, dove si mette la retrieve, con la parte più bin, quindi magari le validazioni eccetera.

Quindi ad esempio anche qua, rapporto individuale bound, implementa valideable interface, interactive interface, quindi qua, rapporto individuale bound, implementa un po' le logiche di business,

Bound implementa un po' le logiche di business, quindi la validateplicemente diviso un bin unico.

È stato fatto per un brevissimo periodo di tempo, poi si è smesso di fare questa cosa.

Quindi anche qui lo incontrerete sui bin un po' più vecchi, ok?

Sui bin un po' più vecchi vedrete questa cosa qui, di un bin diviso in due,

ma non cambia niente dal punto di vista tecnico,

è soltanto come dire una fase stilistica che c'è stata per un periodo su Arias.

Fine.

Qua non vi direi altro, ci sono domande.

Ci sono domande? Ci sono domande? Ok.

Va bene.

User link interface.

Anzi, torniamo un po' sul paziente che ha un sacco di interfacce.

Abbiamo finito, insomma, per vedere sia po' sul paziente che ha un sacco di interfacce, vediamoci un po' il paziente,

abbiamo finito, insomma, per vedere sia la parte di pazienti, sui pazienti ci sta

in realtà ancora da dire, ma lo vedremo sulle slide

successive, però a livello di anagrafica

abbiamo finito di parlare dei pazienti,

a livello dei soggetti abbiamo finito di dire tutto,

sia la parte anagrafica, sia quella dei rapporti,

abbiamo visto le tabelle di entrambi e anche il codice di entrambi.

Finito, non c'è altro da dirvi, a meno che non ci sono domande.

Però magari adesso tornerei sul paziente bin per vederci un po'

un po' di interfacce qui.

ok allora

il paziente bin interface

questo niente no, su interfaccia

che praticamente espone tutti i get and set

a livello di interfaccia, perché è stato fatto?

beh, perché probabilmente

chi ha fatto il paziente per primo era uno molto precisino

ok, quindi fine

hanno messo l'interfaccia i get and rinsetter

che solitamente uno mette direttamente sul bin.

Vabbè.

Ok.

Al netto di questo,

persistent la conosciamo per gestire store, retrieve e remove,

interactive interface anche per la get-property-info,

dynamic-info interface per la get-object,

valideable interface per la metodo validate.

User- link interface.

Se un bin implementa questa interfaccia,

espone il metodo set user, quindi riceverà dal framework

l'utente collegato in sessione.

Perché può servire, ad esempio, qui sul patientbin,

andiamo a vedere lui che ci fa sul metodo setuser.

Lui, lui, lui, patientbin non ci fa niente.

Patienteractive, estende patientbin,

invece sul setuser si va a leggere, qua si prende il profile manager,

si va a leggere tutta una serie di parametri

e di chiavi di profilatura

sfrutta l'utente per leggersi

ad esempio quelli che vi ho fatto vedere prima

quindi il calcolo automatico della cittadinanza sul comune

disabilitazione del calcolo automatico

del comune di domicilio eccetera

il set user lo potete usare per queste cose qui

ad esempio oppure semplicemente

ve lo assegnate come variabile globale

e poi ve lo spendete in altri

contesti, magari dentro

una validate, non so

vogliamo controllare qualcosa dell'utente

poi Poi, questi tre, li vediamo dopo perché sono quelli delle prossime slide. Web service context container.

Espone un metodo set context.

Adesso vediamo chi lo chiama.

Scusatemi.

viene usato nell'ambito dei servizi web service

per poter passare delle informazioni di contesto

in generale serve per ricevere il service context

cioè io qua faccio

scrivo qui a caso un punto qualsiasi del codice

ma solo per poter usare come una sorta di notepad

se io faccio ad esempio un service manager caso un punto qualsiasi del codice, ma solo per poter usare come dire, come una sorta di notepad, ok? Per farvi vedere.

Quindi se io faccio ad esempio un service manager

.save

facciamo tutto. Facciamo che io mi voglio

salvare un paziente.

Qui faccio, sappiamo, no? Get object

paziente

in

plus.getname

null, lo voglio nuovo. E abbiamo servizi con te che abbiamo detto

e che caspiteruna local variable assegno e poi dopo qua niente non vuole creare service

service

service service

context

context uguale new

service context

e mi crea un service context a partire

dall'utente. Ora l'utente non ce l'ho

ci metto un alle, ma qua ci va l'utente.

Io qua

come abbiamo detto posso passargli

dei parametri che possono essere

la qualunque

è un chiave valore

ora

supponiamo che io voglia

far sì

che da fuori

chi salva un paziente

come lo salverà il mio

paziente? Lo salverà facendo poi

service manager

punto save

binder, ok? Così salva

io però voglio che chi mi salva il paziente

in questa maniera qui, utilizzando il service manager

mi possa, che ne so

dire

dire se fare o meno la validate

beh non la validate questo no

no, dire

vabbè dico una cavolata

dire se

se

se

se

se

magari mettere tutto in maiuscolo il nome

bravo, mi piace, bravissimo mi piace, ottimo dire se vuoleere tutto in maiuscolo il nome bravo mi piace bravissimo

mi piace ottimo

vuole dire se vuole mettere in maiuscolo

il cognome e il nome

qui qua dirà uppercase cognome

true

ora però

ignorate gli errori qua

però

succede che sul mio metodo store io non ho niente, io dicevo qua un persistent handler che sarebbe salvare, quindi service context non è una cosa che mi arriva, però se implemento questa interfaccia qui, web service context control,

il contesto mi viene passato

e mi viene passato tramite il metodo

context

quindi poi nel mio metodo store potrò fare

dis.context.contentsparameter

uppercase cognome

if allora dis.context.contentsparameter aftercase cognome if, allora, this.cognome, presente, uguale, cognome, presente, ok?

ok?

serve a questo perché web service?

allora perché in realtà l'esigenza principale

nasce proprio dai web service

perché il service context che qua il programmatore

scrive in codice java

si può anche creare

poi lo vedremo quando facciamo web service

anche all'interno di un messaggio SOAP

quindi in un envelope soap posso anche definire

il service context definendo questi parametri qui.

Però in realtà va a fare sempre,

quando ci sta la definizione di un service context.

Torno indietro, tolgo un po' di modifiche.

Dai, su.

un po' di modifiche. Poi, in property value verifier. Interfaccia è implementata da tutti quei bin che vogliono verificare se una loro proprietà ha un valore diverso da quello

fornito dal chiamante. Questa cosa è utile se un bin ha un campo calcolato C, il cui valore dipende da una più proprietà del bin.

Esempio, C uguale funzione di A e B, con A e B proprietà del bin.

Nel caso in cui esistono più combinazioni dei campi base, tutto documentato, questo sinceramente non me lo ricordavo.

Allora, facciamo prima vedere come lo utilizzava.

Quindi c'è questa interfaccia

must

modify property

cosa fa?

se property name

codice istat comune

d'eccesso

si recupera

si recupera

il codice

check modified recupera il codice

per come di file

ok Quindi questo viene invocato nel momento in cui viene fatto...

il bind property value che viene fatto quando viene fatto il commit, ci ricordiamo che sul binder noi facciamo set property value,

quel set property value vale solo sul binder, non viene spalmato sul bin, quando avviene questo, quando viene fatto il commit.

Il commit riversa, poi incascato da questo bindtyvalue, riversa le proprietà dal binder al bin.

Quello che lui va a fare è praticamente questo,

si va a chiedere se, ad esempio, per il codice comune d'eccesso,

lui dice, guarda, io voglio settare il codice del comune d'eccesso,

codice distratto comune d'eccesso,

e questo è il valore della nuova proprietà.

Cambia qualcosa rispetto rispetto

al campo

precedente

calcolato

che è legato al comune decesso

ad esempio sul campo codice

istat comune decesso

in base a questa proprietà qui viene settato ilato al comune decesso, ad esempio sul campo codice istat comune decesso in base a questa

proprietà qui, viene settato

il codice comune decesso

faccio vedere, quindi questa è la

proprietà che viene settata, codice istat

comune decesso, se io faccio set

codice istat

comune decesso, che cosa fa?

è incascata

lui che fa? A partire da questa

proprietà

si tira giù

qual è il comune

che ha questo codice istat

se lo va a cercare

e di conseguenza poi si setta

il codice comune decesso

quindi a partire dalla proprietà

codice istat comune decesso

si calcola il comune di decesso

quindi c'è questo campo calcolato

quindi tornando al nostro metodo,

gli va a chiedere,

io adesso ti dico che la property value è questa,

su questo codice istat.

In virtù di questo,

cambierà il campo codice comune decesso

che ti hai ricalcolato?

Quindi lui si calcola il nuovo comune di decesso

e fa un'uguaglianza tra quello calcolato

e quello che adesso, in questo momento, era era settato sul bin e dice true or false.

sua interna dove si tiene traccia delle proprietà modificate, lui in cascata sa che non deve soltanto considerare il

sa che appunto non si deve soltanto considerare

il

questo perché aspettate, ok, questo ritorna true poi fa modifide property map true e mi sta bene

aspettate

no

no questo non c'è senso, allora questo è il property name, è codice istat, codice istat, se cambia, scrive codice istat,

Dopo lui si tiene traccia che tra le proprietà modificate c'è il codice istat comune decesso se e soltanto se questo metodo ritorna false. Cioè se lui sette il codice comune istat decesso e di conseguenza in seguito a questo calcolo il comune di decesso che è la proprietà sottostante non è cambiata, lui non si tiene traccia che è stata modificata la proprietà codice istat comune

decesso

questo è quanto

e questo lo fa per tutti i campi calcolati

e questo si tiene traccia di tutte le proprietà modificate

le proprietà modificate perché se le tiene traccia

perché ad esempio

ad esempio ad esempio

mi sa che poi dopo non utilizzo sempre le costanti

ecco

ecco aggiungo nel contesto una mappa per evitare che venga ricontrollato più volte su una proprietà è variata

introdotto solo per motivi di efficienza cioè per limitare il numero di select fatte sul db

ok questo è quanto

tutto qui nulla di trascendentale warning interface

invece

espone questo metodo

getWarnings tramite il quale

un bin in generale

può comunicare

al di fuori

dei warning

di da mostrare in maschera.

Ok, in realtà come sappiamo i warning possono essere anche tornati semplicemente il nostro

metodo validate facendo return di una stringa, vi ricordate? Quindi se torno una stringa no vi ricordate quindi sotto una stringa quella stringa viene interpretata come

warning dopo posso tornare solo una quindi ne ho usato questo perché potete fare il set la put

ok di una lista di esenzioni e di esenzioni di warning ok

inoltre

questa mappa

warnings in realtà è chiave valore

il cui valore è una lista quindi potete come dicevo

gestire una lista di warning

con una botta sola

senza dover fare un warning alla volta

tramite un messaggio

tramite una stringa

però in più la chiave

può essere o global

in questo caso

vuol dire che il warning verrà mostrato come messaggio giallo globale qui sopra in alto.

La lista di warning che mettiamo qua dentro verrà mostrato in alto.

Oppure un nome di proprietà del bin.

In questo caso il warning viene mostrato a fianco al campino.

Quindi se io ci metto esempio cognome, il warning me lo mostreràrato a fianco al campino. Quindi se io ci metto esempio cognome,

il warning me lo mostrerà qua a fianco.

Medico e qua a fianco un'icona gialla

con il nome del warning,

con la lista dei warning.

Fine.

Penso che con questo è già copriamo

tutte le interfacce

possibili e immaginabili

vediamo un po' se la persona fisica

ce ne ha altre in più

ma non penso

una fisica bin

che cosa c'è?

persistent user

validable, interactive

dynamic

proposta emergevole questo abbiamo detto dopo,

web service abbiamo visto, allora c'è una di più,

parent interface e clonable.

Allora, clonable è quella di Java,

questo è semplicemente per clonare,

quella di Java, non ci interessa.

Parent interface.

Va. ma voglio proprio vedere chi lo chiama allora allora

no

no per un attimo.

Ma questo è... Allora, questo il significato l'ho capito, non so perché cavolo che serva a niente.

Over-ingegnerizzazione. Praticamente sono tutta una serie di metodi per cui interagite con i dettagli della vostro parent tramite dei metodi analogici,

Ad esempio, se io voglio aggiungere un indirizzo sulla mia persona fisica, come farei normalmente?

supponendo che lavoro con il bin, in realtà abbiamo visto che dobbiamo lavorare con il binder, però supponendo che lavoro con il bin, aggiungo un indirizzo e faròete fare bin.add.detail.newindirizzo.indirizzo.indirizzo.

Nome alla proprietà.

Indirittà. 0.

Nulla di nulla. Anche perché poi comunque con il bin

poi nel codice troverete chi ci lavora

però in generale come vi dicevo

sul bin tendenzialmente non dovreste

lavorarci ma dovreste passare sempre

tramite binder

però certo qua loro ci lavorano

quindi sul pregresso ce l'avete

quindi infatti qua descrive anche i dettagli

quindi se add detail

la proprietà è indirizzi

allora lo aggiungo alla lista degli indirizzi

quindi non capisco che

che vantaggio mi dà rispetto a fare

get indirizzi add direttamente

remove detail

se vi dico che la proprietà è indirizzi

la remove la farà su indirizzi

eccetera ecc, eccetera,

eccetera, eccetera. Over-engineerizzazione inutile. Va bene, va bene, va bene. Ok, ci sono domande in generale, altrimenti ci spostiamo con le prossime slide.

Ok.

Allora, vediamo...

Allora, vediamo un'altra anagrafica principale, importante, che è quella delle strutture permette di catalogare tutte le strutture dell'azienda intese sia come strutture logiche

come ad esempio magari il centro di costo l'armadietto di reparto che sono strutture logiche ma anche

strutture fisiche concrete come ad esempio un palazzo un piano una stanza e

Un po' il concetto è simile a quello dei soggetti, quindi anche qui a ciascuna struttura è possibile legare uno o più tipi di struttura.

Ed è il tipo di struttura che noi leghiamo che poi dà alla struttura un significato funzionale, quindi poi l'applicativo si comporterà in maniera diversa in base a questo tipo strutture.

Le strutture possono poi essere a loro volta organizzate attraverso l'uso di riclassificatori,

questo è un altro oggetto, ok? Quindi abbiamo...

Scusate un secondo.

Quindi diciamo che abbiamo due oggetti, quello delle strutture e quello dei riclassificatori.

I riclassificatori sono degli organizzatori di strutture, ad esempio generalmente, quello che vedremo anche nell'esercizio, c'è una riclassificazione gerarchica delle strutture.

Quindi io magari ho palazzo A, terzo piano, dentro il terzo piano ho quattro stanze, dentro quelle quattro stanze ho due armati di reparto, e così via dicendo, l'ho stato semplificando,

poi lo vediamo.

Però il discorso è, organizzo queste strutture gerarchicamente.

Molto importante nell'uso quotidiano dei vari moduli,

quindi dei vari verticali,

è poi la chiave di abilitazione, strutture abilitate, che andremo a vedere,

dove per ciascuna dimensione è possibile indicare,

poi vediamo cosa significa, è possibile indicare quali strutture sono abilitate.

In soldoni c'è una chiave di profilatura, di tipo abilitazione,

dove a fronte di tutte le strutture censite a sistema,

supponiamo che ci sono mille strutture censite,

io gli posso dire, quest'utente ne vede 10, quest'altro

utente ne vede 5. È una chiave di profetitura molto usata e poi la vediamo. La vediamo con

questa piccola esercitazione. Allora, lo scopo dell'esercitazione è creare una tipologia di struttura erogante, creare tre strutture di questo tipo, riclassificarle in una gerarchia dello stesso tipo e valorizzare le opportuni parametri aziendali e l'abilitazione utente.

Vediamo un po' come si fa. Allora, innanzitutto l'anagrafica delle strutture

si trova sotto menu, strutture, gestione strutture.

muovo

e mi creo una struttura

con codice mnemonico

erog ap1

data inizio di abilità un campo obbligatorio confermo

ora

quindi adesso la struttura noi l'abbiamo creata

intesa come

codice e descrizione

data inizio di abilità

però in realtà

la struttura è un po' più complessa

di così, però sono complessità che

aggiungono poi verticali, quindi poi nel

caso entreranno nel merito i singoli

verticali, ok?

Quindi l'atomio per adesso l'unica cosa

che vi posso dire è che c'è un codice,

una descrizione e poi ad esempio qui

in anagrafica una serie di informazioni

anagrafiche per esempio identificare l'ubicazione della struttura, responsabile, eccetera.

Però, poi, in realtà, nel momento in cui quella struttura serve magari per l'AMC, vedete qua c'è ad esempio i dettagli AMC, oppure serve per un pronto soccorso, per un reparto, eccetera, ci sono altre cose che vanno indicate e specificate.

Vedete qua, classe erogatore di PS, PS e pronto soccorso.

Sarà un qualcosa che poi eventualmente vi spiegheranno i colleghi del pronto soccorso.

Metaglia prestazioni, metaglia MC, metaglia MC ad esempio, non lo so, proviamo a cliccarci,

non mi fa vedere manco nulla, non lo so.

Eventualmente poi nel caso affronteranno i colleghi dei verticali, d'accordo?

Però adesso ci limitiamo a intendere la struttura come una anagrafe, quindi un codice, una descrizione.

Poi, una volta creata la struttura, anzi mi creo un po' di n strutture me ne creo tre abbiamo detto ok me ne creo tre quindi erog ap 2

2

erog e poi faccio nuovo erog apre.

Ora, su una struttura, poi, dobbiamo associarli i tipi.

Questi sono i possibili tipi di strutture.

Simile come concetto a quello di tipo rapporto che abbiamo visto prima per i soggetti.

La differenza è qua che il censimento

Il cambiamento dei tipi delle strutture non avviene tramite un menu dedicato, cioè anagrafiche, base, rapporti, ma avviene tramite tabella generica.

Quindi noi dovremmo andare in realtà per censire un nuovo tipo struttura, ok, qua dentro, dobbiamo andare su configurazione, tabelle di base, tabelle generiche.

E il tipo struttura,

tipo struttura, non me lo ricordo, era sta, underscore,

era fa underscore

ma ce lo troviamo si

si sì

ok sta Ok. E' sta. True.

Completamente ho già smesso di funzionare.

Tutto attivo. Ho già smesso di funzionare.

Tutto......

...

...

...

...... F12, struttura utile,

ab

tipi struttura tipi

gett tipi tipi

e qui

dove fare la retriva

la struttura tipi

qui

una tipi

se il classificatore

sul controllo sa che per lo stendere che tipi disponibili

e ipistruttura

ok tipo struttura

la tipo struttura

vabbè

giusto per ricapitolare

sono andato dal controller

sono andato a cercare il metodo getdp disponibili

perché?

perché sicuramente

sulla gsp

essendo una lista, la lista verrà caricata dal controller.

Ad esempio abbiamo visto per le combo, la lista delle possibili opzioni da combo box viene caricata tramite un metodo che mi torna alla lista.

metodo e mi torna la lista quindi get tipi disponibili se lo torna con questa query e la query fa una query sulla tabella generica con questo con questa testata

creare test utori di questo tipo

e Ok, quindi qua negli elementi io censisco un nuovo elemento, ad esempio 0HP.

Una volta censito l'elemento di abbella generica,

me lo ritroverò qua dentro, nella lista tipi, tra i disponibili. vediamo il controller

giustamente il controller se lo carica all'inizio

quindi torniamo poi su una grafiche

strutture, gestione strutture

cerco la mia eroga P1 ad esempio

Per esempio, ip, eccolo qua, erogp e li associo questa tipologia.

La stessa operazione la ripeto per le altre strutture che ho creato. 2 e poi erog api

non c'è conferma quindi autocommittante

ok?

ho voluto anche più di un tipo si può selezionare si si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, si, siuto anche più di un tipo, si può selezionare. Non ha proprio senso.

Sì, sì, c'è senso.

Ci sono magari delle strutture che allo stesso momento sono centro di costo e magazzino,

dico una cavolata.

Sì, sì, assolutamente.

Possiamo metterne più di uno.

Quindi poi la stessa struttura la possiamo utilizzare in due contesti diversi la possiamo utilizzare nel contesto in cui sarà un centro di costo

ma anche nel contesto in cui sarà un magazzino

però adesso diciamo che fino in questo momento il tipo che abbiamo dato

anche qui come per i soggetti è un tipo anagrafico

nel senso qua abbiamo detto erogapy,

però non ha un significato funzionale questo erogapy, l'applicativo lo ignora.

Abbiamo detto che questo è erogapy.

Ora vediamo come riusciamo a dire all'applicativo che questa struttura,

dal momento in cui ha il tipo associato erogapyì allora la deve considerare come una struttura erogante

quindi lo vediamo per strutture eroganti

però la stessa cosa

poi si andrà a fare per esempio per dirgli

tutti quelli che hanno tipo cc

considerano un centro di consegna

tutti quelli che hanno il tipo distretto

considerano un distretto e così via dicendo

ok?

adesso lo vediamo per gli eroganti, ma è la stessa cosa.

Come si fa?

Anche qui è sempre molto simile la questione dei soggetti, quindi come nei soggetti avevamo

quel parametro aziendale per dirgli che un soggetto è medico quando la tipologia era

med underscore AP e noi anche qui avremo un parametro aziendale dove dirgli che tutte le strutture con tipo aerogapiluri dovrà considerare strutture eroganti.

Come si fa?

sul fm parametri

parametri anagrafiche strutture

Parametri, strutture.

E adesso introduciamo un nuovo concetto che sulle chiavi di profilatura per adesso avevamo tenuto da parte.

Il concetto di dimensione.

Che cos'è la dimensione?

Allora, noi fino adesso siamo stati abituati a considerare le chiavi di profilatura come un valore singolo, no?

Ad esempio, che ne so, faccio un passo indietro, che ne so, vado qua su pazienti,

no, io ho il mio checkbox, qua il valore del checkbox potrà essere selezionato, non selezionato, punto.

selezionato, non selezionato, punto.

Qua ho un campo di testo, qua ci scrivo il valore di questa chiave è pippo, punto, stop.

In realtà, alcune chiavi, non tutte,

e un esempio è quello di questo proprio delle strutture,

possono avere un valore diverso in funzione di una dimensione,

che deve essere definita in fase di definizione della chiave.

Quindi quando definiamo la chiave, poi magari diamo uno sguardo, tramite il monitor sviluppatori,

è possibile dire, guarda, creo la chiave e la voglio creare per dimensione.

E questi sono i valori delle dimensioni.

In questo caso, ad esempio, per la chiave di profilatura delle strutture abilitate, e questi sono i valori delle dimensioni.

In questo caso, ad esempio, per la chiave di profilatura delle strutture abilitate, delle strutture abilitate, scusate, dell'associazione, per dire che,

in questo momento, per dire che ha il sistema che deve considerare eroganti

tutte le strutture con il nostro tipo erogapi.

La dimensione possibile sono, se io ci clicco in look up, queste cose qui.

Questi valori sono rilasciati da laboratorio di sviluppo, quindi questa non è una cosa configurabile.

Il laboratorio di sviluppo ha deciso che ci sono queste tipologie

di strutture possibili, ad esempio c'è la mia Saerog, e quindi cosa faccio io? Dico che

la dimensione è Saerog e qua li dico, guarda sistema, tu hai questo segnaposto, Saerog.

Considera Saerog, quindi strutture eroganti, tutte quelle strutture la cui tipo struttura è...

Come cavolo ho chiamato erog api eccolo qua ok quindi questo è l'aggancio quindi qua attualizziamo e diciamo che

Il sistema gestisce le strutture eroganti, le chiama Saerog.

Quando tu dovrai usare una struttura di tipo Saerog, teni conto che saranno eroganti tutte quelle strutture che hanno il tipo associato a Erogandescore AP.

Ci siamo? Un po' attrecciato, è un po' cervellotico, però ci siamo?

un po è un po cervellotico però ci siamo

sì ma quindi posso avere anche più tipi struttura eroganti se no questo mappini non avrebbe senso se fosse una 1 e non è roteva un po ma quindi hai fatto un

passaggio in più è un passaggio in più sì per quanto riguarda il tipo struttura è

un passaggio in più diciamo che per quanto riguarda il tipo struttura è un passaggio in più diciamo che

diciamo che in realtà qua il parametro

ha più senso in realtà

quando adesso qui, dopo lo vediamo

dobbiamo andare a specificare anche il riclassificatore

ok, dopo lo vediamo

su quel riclassificatore c'è senso

per tipo struttura, ad essere onesto, può anche secondo me un passaggio in più

però ci siamo, il discorso del parametro di dimensione è chiaro, no? Per tipo struttura, ad essere onesto, può anche secondo me un passaggio in più.

Però ci siamo, il discorso del parametro di dimensione è chiaro, no?

Sì, sì.

Poi, quando il parametro di tipo dimensione, infatti, ve ne accorgete anche perché esce fuori, a fianco al parametro, questo tastino. Se ci cliccate, vi fa vedere praticamente il valore che ha questa chiave di profilatura, perché questa è una chiave di profilatura, questa è una chiave di profilatura, questa è una chiave di profilatura, sono sempre chiaviAD, un record sulla SIGERAD, un record sulla SIGERAD.

Però il loro valore non sarà uno, ma sarà n, uno per dimensione.

Quindi se poi voi fate clic qui, vedete che vi fa vedere, vi dice, guarda, questa chiave di profilatura, questa qui, erogap, assume,

questa qui è rogapì, assume, questa chiave di profilatura, parametro tipo struttura, assume tutti questi valori per questa dimensione, assume il valore distretti, per questa dimensione uffici contratti, così via dicendo, d'accordo? no però scusate no, se hai il contrario no, se hai fatto conferma

non se hai fatto conferma

si

no, se hai il contrario

allora, no, al contrario

facciamo una prova, lo sbianco

no, perché non esce fuori?

non esce fuori

vabbè, comunque lì vi dova dire

infatti va a vedere soltanto il codice delle dimensioni

Però vi avrebbe dovuto dire praticamente che per la dimensione con descrizione eroganti e il valore di questo sarebbe il codice identificativo della dimensione.

No, però è quello, è quello.

No, ora è questo.

Scusate un secondo, voglio contare una cosa.

E tab gen where gb uguale questa roba qui.

Perché centro di consegna?

Forse devo uscire e rientrare?

Però qua vi doveva far vedere, insomma, il valore che assume questa singola chiave di profilatura per ogni dimensione che è possibile selezionare.

Ora qua mi fa vedere una dimensione che non è quella che ho selezionato, un tipo di struttura che non è quello che ho selezionato.

Confermo, vediamo un po' come si comporta, forsecendo e rientrando la giornata comunque questo è il concetto di dimensione

ok?

per vedere magari al volo un attimo

prima di continuare la questione delle strutture

come si definisce una chiave per dimensione

è sempre traduzione tramite il monitor sviluppatori

quindi ad esempio che ne so

lo faccio a livello di parametro di installazione

però qua sto sul localhost

vabbè, è uguale

inserisco una riga

inserisco un elemento, ad esempio edit

senza descrizione

anzi no, prima

inserisco la riga, poi devo inserire

un contenitore

e questo perché la dimensione si applica sul contenitore, quindi non potete indicare una dimensione per singola chiave di profilatura, ma per contenitore.

Quindi di conseguenza tutte le chiavi di profilatura contenute in quel contenitore avranno la dimensione.

avranno la dimensione. Ad esempio, mi creo un link, dico chiavi per dimensione, ad esempio, label,

gli dico che il valore è con dimensione facoltativa e gli dico...

dico qual è la dimensione che devo utilizzare.

Per potergli dire la dimensione,

quindi ok che devo mostrare un sistema per poter decidere di volta in volta

su che dimensione voglio lavorare e su quale dimensione voglio associare un valore,

ma questa dimensione, quindi per capirci,

vedo un po' di maschere,

vedo un po' di roba,

questa dimensione qui

ok?

questa lookup

che mi contiene dimensione

questi valori

dove li acchiappo?

dove li prendo?

ok?

e lo diciamo qui

e lo diciamo selezionando

un lookup

ad esempio

se io qua dico

sa comune

lui mi che cosa farà?

farà sì che sul mio sulla mia chiave di profilatura

ci sarà qui sopra una lookup

che sarà la mia dimensione

e cliccando la lista valori

mi aprirà la lista dei comuni

e quindi io potrò dare un valore alle mie chiavi

diversa per ciascun comune

questo ci sto per esagerare

però ovviamente non ha senso

quello che bisogna capire insomma però è che i valori possibili e dimensioni vengono acquisite da un lookup,

e quindi ho quali dovevo indicare lookup.

Oppure, li posso acquisire da una tabella generica, che ha più senso.

E in questo caso, li specifico cosa? La testata della tabella generica.

Ad esempio, posso metterci sempre la mia days of the week che mi sono creato prima

in modo da vedere che succede

ah scusate

qua sto sul localhost

che cavolo

sto sul localhost

sto sul localhost

sto sul localhost localhost

esco

rifacciamo

localhost lo posso fare

no, lo posso fare qua

sul ambiente di formazione

anzi, lo posso fare qui sul ambiente di formazione

non utilizzando l'ambiente di

il monitor sviluppatore ovviamente ma posso usare la funzionalità

personalizza parametri tanto funziona allo stesso modo quindi ripeto la

procedura faccio inserisci riga

inserisci contenitore link

contenitori link, chiavi per dimensione, valori con dimensione facoltativa, diciamo tabella generica e diciamo che vogliamo usare il nostro days,

of the week come dimensione.

Confermo.

Esco.

Clicco sulla mia chiave per dimensione, sul mio link.

Vedete che già mi fa vedere quale sarà la dimensione.

Qui faccio inserisci riga ed inserisco ad esempio una textbox.

Venga. essere con dimensione obbligatoria, quindi è obbligatorio inserire una dimensione oppure

facoltativa. Facciamo facoltativa che è la più complicata e qui semplicemente confermiamo

quello che lui ci propone. Ora vediamo che succede. Ho definito la chiave di profilatura

come parametro di installazione, quindi vado configurazione, sistema, parametri, installazione.

Qui ho il mio link chiavi per dimensione,

ho creato, ecco qua, vedete che adesso lui mi popola

la dimensione prendendo dagli elementi la tabella generica

che ho definito qui in testato.

Cosa succede adesso?

Io posso fare due cose.

Posso dire ad esempio che per la dimensione Monday

il valore del campo è 100.

Per elemento Tuesday il valore del campo è 200.

Vedete adesso, ogni volta che cambio dimensione, mi fa vedere per Monday che il valore del campo è 200. Vedete adesso ogni volta che cambio dimensioni mi fa vedere, per Monday mi fa vedere che il

valore è 100, per Tuesday è 200.

Se io clicco qui, spero adesso funziona, ecco, funziona, mi fa vedere che i valori di tutte

le dimensioni, quindi fa vedere che su Monday è 100, su Tuesday è 200.

che su Monday è 100, su Tuesday è 200. Avendolo però definito come chiave di profilatura con dimensione facoltativa, io posso anche mettere qui l'opzione null e fare un terzo valore, 300.

Quindi poi sarà Monday 100,de 200, niente 300.

Fosse stata dimensione obbligatoria, invece l'opzione vuota io non l'avrei avuta.

O meglio, l'avrei avuta però con l'opzione vuota non sarebbe apparso e non sarebbe apparsa la mia chiave di profilatura.

Quindi sarebbe apparsa soltanto se selezionavo almeno un valore.

Lato codice, avere una chiave di profilatura implica che cosa?

prendo ad esempio la classe wizard il nostro

wizard dove leggiamo una chiave di profilatura

vedete?

qui ho fatto get boolean

abbiamo specificato soltanto

la chiave perché non era una chiave per dimensione, ma quando una chiave è per dimensione,

e qua abbiamo passato null infatti, l'ultimo parametro deve essere la dimensione. Ad esempio,

se io lo volessi leggere, prendendo l'esempio che abbiamo fatto qui, Monday and Tuesday,

se io li passo null come dimensione lui mi tornerà 300

ho passato null come dimensione

quindi lui mi prenderà quello che non ha dimensione

quindi il valore

la lettura di questo parametro mi tornerà 300

se io qua metto mon

mi tornerà 100

se lo metto tu

mi tornerà 200

ok?

ci siamo?

più a mano

è un po' complicato, un po' tracciato

infatti le dimensioni me le lascio di proposito

alla fine, fine, fine

le dico proprio quanto è obbligatorio dirle.

E' più che volte non riesco a capire questo concetto di dimensione, cioè perché è stato fatto?

È stato fatto per far sì che definendo una sola chiave, quindi io definisco una chiave, sulla SikERAD, che è la tabella di definizione delle chiavi, io in caso c'è solo un record, solo un campo, questo qui.

Però al tempo stesso riesco ad avere per una chiave di profilatura più valori.

Ognuno di questi valori è contestualizzati in base alla dimensione.

Facciamo un esempio magari pratico di altri parametri con dimensione.

Poi facciamo pausa.

Facciamo un esempio, vediamo.

Ad esempio...

Fatemi pensare, eh, dove possono stare.

Perché su XMPI non me ne viene in mente uno, ma non si capisce niente con quello.

Vediamo un po'

vediamo un po'

vediamo ad esempio sull'MC

sulla MC che cosa hanno?

Questa ha la dimensione.

Tratti. Questa dimensioni non ce l'ha.

Ordini.

Non ha dimensione.

Magazzini mi pare che l'abbia.

Ad esempio qui il magazzino, questo è un altro esempio, i magazzini, la logistica ha una serie di parametri, una serie di parametri di vario tipo, a dimensione facoltativa, che vuol dire che io posso mettergli qua dei valori, ma questi valori li posso declinare volendo in base ai magazzini censiti al sistema.

Vedete qua la dimensione? È un look up che mi apre tutti i magazzini censiti all'interno del sistema.

Quindi io per ciascun magazzino li posso dire un valore diverso di queste chiavi.

Quindi magari, che ne so, quando faccio poi sulla maschera dei movimenti di magazzino,

creo un nuovo movimento di magazzino e vado a indicare,

l'utente indicherà il magazzino in maschera,

allora l'applicativo potrebbe comportarsi in maniera diversa in base al magazzino selezionato,

perché poi i valori dei parametri saranno diversi.

Questo è un altro esempio.

Su XMPI ce l'è un altro esempio, però un po' più complesso, però possiamo anche vedere.

Sui pazienti c'è.

questo è un po' più complesso perché prima devi attivarlo comunque c'è addirittura la possibilità

adesso devo ricercarla

però c'è la possibilità di avere una dimensione addirittura in base

al valore del paziente

cioè io dico magari

che ne so paradossalmente potrei dire

in base all'asile di appartenenza dell'utente, il codice fiscale è obbligatorio.

Qua praticamente qua su campi, qua io dico l'obbligatorio d'Italia e dico fissa, questo l'abbiamo già visto

con il nostro esercizio della profilatura configurabile

su XMPI c'è la possibilità

soltanto per il paziente

di crearsi

dinamicamente una dimensione per cui

tutti questi parametri

li metto sotto una dimensione

condizionata all'oggetto

paziente, cioè

come facevo l'esempio, se l'ASD

d'appartenenza è questo, allora

il codice fiscale è obbligatorio, se quest'altro

allora non è editabile, cose di questo genere.

Forse più che aiutarvi,

vi sto complicando la vita.

Cioè, come se fosse

un parametro che dipende da un altro parametro

quindi questa dimensione

sì sì certo questo certo

quel parametro va a dipendere da un altro

va a dipendere dalla dimensione

certo che non è un parametro la dimensione

la dimensione in realtà è un look up

la dimensione è un look up

che poi nella maggior parte dei casi è un look up su una tabella che poi nella maggior parte dei casi

è un look up su una tabella generica

nella maggior parte dei casi

ok

e

vabbè, facciamo così

facciamo una pausa

poi magari al ritorno

facciamo altre prove, altri test.

Ci ribecchiamo, facciamo una pausa lunga, facciamo una più breve e più tardi.

Quindi ci ribecchiamo qui alle 16, ok?

Tra poco, ciao ragazzi.

Ciao. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie. Rieccoci.

Presente.

Ci sono. Grazie. Deve fare così, completiamo l'esercizio sulle strutture, poi magari facciamo un altro esercizio sul codice per capire meglio la questione delle dimensioni.

Ci torniamo sulle dimensioni.

limitiamo a dire che qui su parametro aziendale, anagrafiche, strutture, parametri e strutture dobbiamo indicare per la dimensione, queste dimensioni sono previste da applicativo, da

ARIAS, per la dimensione eroganti, questa è la tipologia di struttura

che deve considerare come struttura erogante.

Primo step fatto, abbiamo creato le strutture, le abbiamo associato a questo tipo e questo

tipo le abbiamo detto al sistema che lo deve considerare come una struttura erogante.

Next step.

Il prossimo passo

è quello di creare, come vi dicevo,

il riclassificamento.

Quindi, anagrafiche strutture, riclassificatore strutture. È il riclassificatore che mette, perché in questo momento noi abbiamo creato tre strutture, ognuna sta per i cavoli suoi. È il riclassificatore. Nuovo.

Ricl ap.

Il riclassificatore può essere di tipo gerarchico associativo.

Allora, l'associativo è usato soltanto in alcuni contesti verticali, quindi nel caso ve lo spiegheranno i verticali, però ve lo dico in generale che cos'è.

Associativo serve per creare un'associazione tra due strutture, quindi ho la struttura A, la struttura B e liico, la struttura B A è legata e associata alla struttura B, punto, fine, è scontato perché ha delle associazioni

uno a uno, poi il significato funzionale sta dietro al singolo verticale, quindi non

ve lo spiego. Vi spiego invece il gerarchico che poi rappresenta il 99% dei classificatori,

ok? Il gerarchico, come vi dicevo, serve per organizzare le strutture all'interno di una gerarchia, struttura quindi classica padre-figlio.

Il riclassificatore, così come per le strutture, ha i tipi.

Quindi devo dire, questo riclassificatore, che tipi di strutture mi andrà a riclassificare?

E qua gli indico la mia tipologia che ho creato poco fa?

A che serve?

Serve perché poi, dopo, quando vado qua su gerarchia,

quali vado a indicare le strutture?

Quando qui vado su lookup struttura,

vedete?

Mi fa vedere quelle tre strutture la cui tipologia erogapì.

Adesso li inserisco, quindi inserisco erogapì 1, poi inserisco erogapì 2 e inserisco erog ap3.

Ora già così potrebbe bastare, praticamente ho creato un riclassificatore che mi riclassifica queste strutture insieme,

oppure mi crea un contenitore di queste tre strutture oppure potrei fare come dicevo

ad esempio erog2

ha come struttura padre

erog1

vedete che fa?

vedete?

Mi crea erogap1, diventa un padre, quindi diventa un folder.

Perché se io apro mi mostra l'erogap2, ok?

Poi uno si può sbizzarrire.

Chiaro fino a qui?

Ok.

Adesso, fatto questo, una volta creato il riclassificatore,

Adesso, fatto questo, una volta creato il riclassificatore, anche questo riclassificatore lo devo specificare qui nel mio parametro aziendale per dimensione.

Quindi qua li dico che per questa tipologia, oltre a considerare questo come tipo di struttura erogante, questa è il riclassificatore che devo usare.

Confermo.

Fine. Fine delle configurazioni.

Quindi abbiamo creato le strutture,

anzi, abbiamo creato il tipo struttura.

Abbiamo creato delle strutture e le abbiamo associato a quel tipo struttura.

Le abbiamo riclassificate all'interno di un riclassificatore e qui

sui parametri aziendali vi abbiamo detto che

abbiamo associato il nostro riclassificatore

e il nostro tipo struttura alla dimensione

quindi alla

alla dimensione

erogante che prevede

l'applicativo, questo Saerog

che contempla l'applicativo.

Questa associazione fa sì che

questo riclassificatore che ho creato

e quel tipo struttura acquisiscano un significato funzionale.

Ad esempio, io adesso se vado qui su Anagrafiche,

Prestazioni, Gestione e Prestazioni,

io qua ho un lookup struttura erogante.

Se faccio clic qui, mi viene mostrato il mio riclassificatore costituito da queste tre strutture.

Ci siamo?

Ok.

Fine.

Fine per quanto riguarda la configurazione della struttura.

Poi, questo insomma è per darvi una prima infarinata, poi con i verticali, le strutture, ci andrete molto, ma molto, ma molto più nel dettaglio.

Non soltanto da questo punto di vista, tipi, strutturi, classificatori, ma anche come vi

dicevo nella definizione di una struttura, perché noi adesso ci siamo concentrati solo sul

fatto del codice di descrizione, però c'è anche altro.

Poi, l'ultimo step è quello che vi dicevo prima, cioè io qua in questo momento sto vedendo tre strutture, che sono le mie strutture che ho cercato.

censito, però in realtà

in realtà dei fatti io magari

censisco le strutture

censisco magari

100 strutture, come vi dicevo, magari l'utente

dovrà essere abilitato a vederne una, due,

tre, ok?

Come si fa?

C'è una chiave

di tipo abilitazione

sotto

quindi configurazione, ad esempio lo faccio a livello di ruolo

r lucidi funzionalità risorse anagrafiche strutture qua c'è sempre la mia dimensione per le strutture

quindi voglio dire che per la dimensione eroganti voglio abilitare soltanto erog a P3.

Lo prendo e lo porto a destra.

Conferma. ok conferma e questa è una

chiave di profilatura

di tipo dual list

disponibili collegati

con cui uno può andare a decidere

rispetto alla totalità

delle strutture quali devono essere

visibili all'utente

ok quali devono essere visibili all'utente.

Proviamo. analitiche prestazioni

proviamo perché prima stavo provando

cioè prima, l'altra volta con il corso

con i vostri colleghi stavo

provando, infatti non funzionava

perché secondo me questa maschera

ha qualcosa che non va

forse dovevo fare la prova con le strutture

ok, comunque va, forse devo fare la prova con le strutture.

Ok, comunque, qui su strutture eroganti adesso andando a cliccare qui avrei potuto vedere solo erogate P3, ok? Ve le fa vedere tutte, secondo me ancora non sono riuscito a indagare,

però secondo me c'è qualche configurazione che dice da qualche altra parte vedo scrivere non so se anche gli altri sono un problema mio

ok provo un attimo ci vedo senza condivisione schermo a ricondividere

io vedendo regolarmente vedi no

io prevedo

normale

adesso gli altri vedono

io vedevo anche prima

la provo uscire e rientrare

magari si immediatamente

si muove

ok esco rientro

si si, prova un attimo

spegni e riaccendi funziona sempre

ci vedi?

ora sì, perfetto

la prima regola dell'informatica

non funziona, accendi e spegni

grazie

il protocollo

SEA

come?

il protocollo SEA

studiare

esatto

il protocollo SEA ok

bene quindi questo un attimo devo vedere

qua non ha funzionato però il discorso è

farvi vedere che c'è questa chiave

di abilitazione

anche qui per ciascuna dimensione

possiamo dire cose diverse

quindi per esempio per le eroganti

stabilisco che l'utente può vedere solo

erog ap3

per le richiedenti

ok

vedrà altri così via dicendo

ok

ora qua perché fa erog ap1

perché le richiedenti è una struttura erogante

ma chi te l'ha detto

aspettate un struttura erogante? Ma chi te l'ha detto? Aspettate un attimo.

Saerog. Richiedenti.

Un secondo. Forse ho capito.

Sistema.

Anagrafiche.

Strutture.

Eroganti.

eroganti eroganti

qua

entro da mia famigli sta vuota

perché non gli ho specificato

alcuna per questa dimensione

richiedenti non gli ho specificato nessun tipo di struttura

diciamo che questa non è una situazione che si ha

tutte

in Tardegna insomma

adesso magari ci possiamo andare a vedere

quelli che sono sull'azienda reale

tutte le dimensioni

hanno un tipo associato, qua non c'è niente

quindi mi sarei aspettato

una lista vuota, invece mi prepopola

con quelle delle mie strutture eroganti

prendo ad esempio

centro

di consegna

forse perché appunto mancando la configurazione lui se lo va a pescare dall'unica

dimensione dove ho valorizzato, non è un caso reale, qua in questo caso ce l'abbiamo

perché l'azienda me la sono creata da zero e quindi non ho configurato su altro, comunque è

Volevo farvi vedere, facciamolo con l'azienda vera, così vediamo dei valori veri che si capisce meglio, altrimenti...

Anagrafiche, strutture, parametri strutture, vediamo che su SA-EROG è configurato questo, su 100 centri di consegna qui dentro, richiedenti, che ci avrà messo quest'altro, riclassificatore richieste, eccetera. Quindi ogni dimensione ha associato un qualcosa.

Proponenti, ok, c'è il suo, quindi configurazione corretta sull'azienda reale. Andando a vedere magari un'abilitazione, quindi,

su un ruolo dell'azienda 38, come ad esempio U38Admin, mi pare,

quindi ho preso un ruolo dell'azienda 38, l'azienda dei Cagliari,

Cagliari. Anagrafiche, strutture, prendo esempio le eroganti, ecco queste sono le strutture eroganti di Cagliari. Vedete che Asle Cagliari, stabilimento Binaghi, che all'interno ha il dipartimento aria chirurgica, che esplodendo a oculistica,

che esplodendo a l'oculistica degenza,

l'oculistica dei ospita, l'oculistica abilatoria, eccetera.

Una gerarchia abbastanza complessa.

Se vado, che ne so, su magazzino,

ok, sono già abilitati,

qua ad esempio non ha una struttura gerarchica

ma una struttura flat

ci sono altre cose

ok

istituti Pena Cagliari, Hr, Marino Farmacia

San Marcellino eccetera

vado che ne so

su

sedi cassa cup

non so se sono configurate

ecco, cassa automatica

anche qua non c'è una gerarchia

tutti quanti fratelli però insomma ci sono altre strutture, ok? Perché qua è configurato correttamente,

ecco, per lì invece sull'FM vedevamo sempre Erog anche su dimensioni che non avevamo configurato,

vabbè, ok? Comunque questa è la chiave con cui io posso decidere quali strutture posso andare a vedere.

Volevo vedere un attimo una...

di consegna ad esempio, no, dov'è che era?

stabilimenti, centri estinte, ufficio liquidazione, ecco, ad esempio qui che cosa voglio dire?

Voglio dire che su questo ruolo che ho preso in gestione è stato stabilito che l'utente

può vedere queste strutture, ma non vedere queste tre. Quindi quando ci sarà un look up sulla struttura

per mostrare tutti quanti gli uffici liquidazione, non verranno mostrati queste tre strutture.

Questa come configurazione di base, lavorando sulla dual list. Però, c'è un però, sulle chiavi di profilatura delle strutture c'è anche la possibilità di decidere, c'è anche questo parametro che si chiama override struttura.

Questa è un'altra chiave di profilatura. A che serve? Serve per dirli come trattare la dual list, cioè di default è così, vuol dire vai a leggere la dual list, quindi la dual list dice che tre strutture non sono abilitate, ok, tre strutture non sono abilitate.

Quindi queste tre strutture in realtà, invece di essere non abilitate, diventano le uniche strutture abilitate, oppure più semplicemente qui si può mettere abilita tutto e a quel punto tutte le strutture sono abilitate, a prescindere da quello che facciamo nella dualist.

Quindi sovrascrive tutto, le va manco a leggere i record

i record sulla sikerad dati

di questa chiave

e i record sulla sikerad dati utente rimangono

non sono toccati

però è il framework che va prima a verificare

la chiave di override

se è scritto tutto

niente, fine, fa tutto

non va manco a leggersi i dati di questa chiave di profilatura

della dualist

ok

va bene

allora io direi di fare così

vediamo un attimo sul db

tutto quello che abbiamo appena detto

poi tornerei magari sulle chiavi per dimensione

ci facciamo un piccolo esercizietto con un po' di codice Java

magari sempre sul nostro wizard

ok?

è giusto un attimo per consolidare questa cosa, quel concetto lì

allora

allora Allora, a livello tabellare noi abbiamo la tabella dell'etastruttura,

bloccato tutto

ecco qua, quindi queste sono le nostre strutture che abbiamo censito la roga P1, P2 e P3

vedete che il record, anche questo è aziendale

perché ha una colonna con cui poter specificare

l'azienda.

Quindi a prescindere

dalla questione dual list, stabilitazione, eccetera,

comunque il primo cono di visibilità

è l'azienda.

Quindi un utente di un'azienda

X

non può vedere le strutture dell'azienda Y.

All'interno dell'azienda X

posso decidere, questo utente

dell'azienda X vede queste, quest' questo utente dell'azienda X vede queste

quest'altro utente dell'azienda X vede queste altre strutture

e così via dicendo

però i record di struttura sono aziendali

questa è una grafica delle strutture

poi abbiamo il riclassificatore

che è censito sulla tabella sa str-ric ricva anche quando c'è nulla da dire è soltanto

da dire che il tipo gerarchico associativo e questo flag qui in ultimo la gerarchia del nostro

riclassificatore cioè il fatto che abbiamo detto che la struttura 1 è padre della 2, dove va scritto? Qua dentro, CTRGR.

Questa è, per ogni riclassificatore ci dice, ad esempio, che questa è una struttura padre, la 772, perché?

Perché il campo è null.

Anche la 774 è un padre, perché è una radice, una root, perché non ha un campo padre null.

La 773 invece è figlia della 772.

Fateci caso quindi che qua ci sono gli id delle strutture,

giusto per tornarci.

Noi abbiamo dato un codice, una descrizione,

però poi c'è una sequence,

le strutture poi dopo diventano una sequence,

quindi ogni struttura viene associato un ID.

Ed è questo ID che è chiave primaria.

È un'associativa di chiavi

la gerarchia.

La gerarchia

è un'associazione di

ID.

Cioè sull'ID vengono messi.

Sì, di codici univoci.

Sì, di codici univoci.

Poi, in ultimo,

queste sequole sono quelli che ho condiviso con i vostri colleghi, li condivido anche a voi.

Questa è la definizione

della chiave di profilatura

di

importante di questa qui della dual list che vediamo qui, qua dentro.

Questa è la chiave di override, quello con l'abituto tutto e l'inverti.

Questa invece è la dual list, infatti lo vediamo qua.

L'override è una combo box cb e questa è una dual list.

Vediamo ad esempio questo che ho fatto

io al mio ruolo

r lucidi

ho dato

avevo dato che per le eroganti

è abilitato sulla erog a p3

ok? quindi non gli ho abilitato

la 1 e la 2 vediamo questo sul db come si è tramutato sulla erog a P3, quindi non gli ho abilitato la 1 e la 2.

Vediamo questo sul DB come si è tramutato.

Come?

Allora, prima di tutto,

prima di tutto,

devo individuarmi,

allora l'abilitazione questa l'ho fatta sul ruolo R lucidi,

l'ho associato al mio utente che si chiama Simone.lucidi.

Eccolo qua, r lucidi.

Quindi prima di tutto mi prendo l'id di questa terna,

terna, azienda, ufficio, ruolo.

L'id è questo, 129.

Poi la chiave, l'id della chiave è questo

la krk è questa qui 912

e con queste informazioni

quindi con la chiave e con l'ud del ruolo

faccio una query sulla sigera dati utente direttamente

sulla tabella dove sono normalizzati i record per tutti gli utenti

eccolo qua

cosa leggo?

Leggo che per la mia terna,

ereditata dal ruolo,

e per questa chiave,

ho il valore 316774.

Che valore è questo?

L'id che trovo sulla struttura.

Eroca P3.

Ok?

Però badate bene che oltre a queste informazioni c'è scritto anche la dimensione.

Questo l'avevamo saltato perché ancora non avevamo parlato di dimensione.

Quindi è scritto che per questa dimensione ho questa cosa qui, questo valore qui.

Ok?

Ande?

ok, allora facciamo una cosa facciamoci questo esercizio

per comprendere meglio

le chiavi di tipo dimensione

ok

lo facciamo qua su wizard v3

intanto lo faccio

apparire in maschera

quindi localhost.sysar.wizard.du

ok, questo è il nostro wizard oggi, no?

supponiamo

supponiamo magari

che l'insegnante, seguitemi, l'insegnante ad oggi è un campo di testo libero,

e va bene, lo possiamo anche lasciare così, però lo vogliamo prepopolare direttamente,

direttamente, con il nome e il cognome di un insegnante,

in base al rettore del dipartimento.

Cosa voglio fare? Voglio fare che qui in maschera magari mi aggiungo un campo in più, una combo box, una cosa bella che ci ripassiamo pure le tabelle generiche.

una combo box, facciamo una cosa bella che ci ripassiamo pure le tabelle generiche, ok?

Facciamo che mettiamo qui una bella combo box, dove io posso scegliere il dipartimento,

dipartimento di storia, dipartimento di scienza, eccetera. In base al dipartimento che seleziono, andiamo a leggerci una chiave di profilatura

che mi dice che per quel dipartimento qual è il rettore.

Il rettore lo andiamo a schiaffare qua dentro a insegnanti, in automatico.

Chiaro l'obiettivo?

no sì

è stato acito consenso

o svenuti

morti

arachiri

no

un po'

come?

sì sì

svenuti e morti

allora

quindi un campo in più intanto aggiungiamo, no?

Dipartimento e facciamo una combo.

Una combo potrebbe essere dipartimento di storia, scienze, quello che sia.

Incominciamo con questo.

Siccome vogliamo fare una cosa fatta bene, le opzioni ce le carichiamo da tabella generica.

Iniziamo intanto a fare il codice così poi dopo vediamo allora

questo è il mio controller e va bene la mia gsp è questa qui

e sopra quindi prima di descrizione faccio scegliere una cosa del tipo di partimento metto una bella combo box

un box

eccola qua, ce lo ricordiamo

questo è il link property

quindi quali devo dire

la property name

di partimento

dove riceverò il valore

e quali dico dove caricarsi

la lista delle opzioni

ci metto di partimento list.

Source controller e il resto va bene.

E poi all'on change facciamo pure un refresher perché poi ci servirà.

Quindi questa è la lista, questo è il metodo che invocherà per ottenere la lista, per popolarci la select.

Quindi qua io vi faccio un public list get dipartimento list.

Ora, ho detto che i valori li voglio popolare a partire da una tabella generica.

Così ci vediamo pure le tabelle generiche.

Quindi intanto qui implemento il fatto che mi recupero la lista delle opzioni da una tabella generica.

Come posso fare? due metodi

posso fare

due possibilità

per andare a leggermi in una tabella generica

la prima faccio una query

proviamo questa intanto

quindi faccio una query su quale tabella

abbiamo detto

sulla tabella

select star from C

e tab gen

qui sono gli elementi tabella generica

quindi faccio

select eg

e gd, l'id della tabella generica, e gdesk1 che contiene la descrizione. tcode uguale sa hard

dipartimento

dipartimenti

faccio questa query

poi la eseguo, vi ricordate che c'è una classe di utilità

che si chiama ResultSet Helper

che permette di fare fill

list list

la lista qui la passiamo noi

quindi è chiaro

nel senso mi sono creato una lista

options

questa è la query

vi ricordate che la lista delle opzioni di una combo

deve essere nella sintassi

chiave, descrizione, chiave, descrizione

chiave, descrizione, chiave, descrizione

quindi mi sono creato

faccio la query e mi torno chiave e descrizione

ogni record è chiave e descrizione

quindi faccio una query

per tornarmi la chiave e descrizione

di un elemento di tabella generica

la cui tabella

è questa sasard di partimenti

vediamo intanto che succede

facciamo proprio step step

quindi per adesso

il risultato che mi attendo è che

avviando avrò sul mio wizard

questo campo in più con una combo

vuota un po' di roba che non ci serve più.

Questo ci serve, è a posto.

Questo ma ci ten più. Questo ci serve. E' a posto. Questo ma ci teniamo.

Ok. ok

aggiorno il wizard e ha schientato tutto, che è successo?

ah, non mi sono dimenticato

qua la proprietà l'abbiamo elencata al dipartimento

devo creare la proprietà che ospiterà

il dipartimento che verrà selezionato, quindi private long

dipartimento, perché long? Perché abbiamo detto che le possibili opzioni me le vado a

prendere dalla set upgen, la set upgen, il campo di

chiave le gd che è un fate la desk di questa tabella vi risulterà che un number poi faccio

get di partimento set di partimento ok nulla di nuovo rispetto a quello che avevamo visto venerdì

adesso dovrò avviare Grazie. e aggiorno

eccolo qua

dipartimento giustamente vuoto

quindi per adesso

nulla di particolare

abbiamo aggiunto sulla nostra GSP

una combo

con un bel link property intorno per

allincare questa combo alla mia proprietà di partimento e la lista dei possibili opzioni

della combo la va a leggere tramite il metodo getipartimentolist metodo getipartimentolist

fa una query su una tabella sulle elementi tabella generica, nella coppia id descrizione,

la cui tabella generica è questa.

Ci aspettiamo che sarà questa.

Tutto chiaro fino adesso?

Adesso cosa faccio?

Vado nella gestione delle tabelle generiche, configurazione, tabelle di base, tabelle generiche, nuovo, testata, ci metto questa, in sezione sti cavori, quindi mi censisco questa tabella generica, vado tra i miei elementi e gli dico, dip, storia, dipartimento di storia.

di storia.

Scensisco i miei dipartimenti.

DIP,

scienza.

Ok.

O di

Dipartimento di Economia.

Confermo.

Adesso sul mio wizard,

aggiorno.

Ta-ta!

Vedete?

Ok.

Dipartimento di Economia, Dipartimento di Scienze, Dipartimento di Storia, elementi presi dalla tabella generica.

Fino adesso ok? Anche qui?

Sì.

Perfetto.

Step 2.

Adesso dicevo che voglio creare un parametro per dimensione, ok,

che mi assoglie, con cui associare ad un dipartimento un rettore.

Che faccio?

Una grafica centralizzata, per farla semplice faccio un parametro di installazione,

senza che andiamo a pescarcelo per azienda, per utenti, chi se ne frega,

tanto il concetto è lo stesso, e mi creo qui,

inserisci,

riga,

inserisci,

inserisci,

però un secondo perché sto con utente debug,

inserisci link, contenitori link, quindi qua vi mettiamo parametri per wizard corsi,

Allora, con dimensione facoltativa,

infatti la generica non me ne fa vedere,

un secondo,

un secondo,

che qua mi sa che mi sento un po' con,

che qua Alfonso Mancusi,

sono logato con Alfonso Mancusi, perché qua mi fa vedere,

ah, perché questo è l'incognito, ok, la riapro qua.

Vediamo un attimo se adesso vedo.

Quindi installazione, dicevamo, ok, inserisci riga,

inserisci, abbiamo detto contenitore link, abbiamo detto qua chiamiamo parametri per wizard corsi, valori con dimensione facoltativa, tabella generica.

Adesso vedo, il motivo per cui non vedo le tabelle generiche è che le tabelle generiche sono una cosa applicativa, quindi dovevamo essere loggati con un utente, ok? Era quello prima, c'era un utente di debug.

E poi li specifico, ok, attenzione, li specifico, voglio un parametro per dimensione,

bus che si basa sulla mia tabella generica SASRD.

dipartimenti

crea un link che si chiamerà così parametri per wizard corsi dimensione

facoltativa su questa tabella conferma

esco

ho adesso il mio link e qui dentro ci metto

riga inserisci riga insera, inserisci elementi edit senza descrizione,

e vi dico rettore, formato number, perché number?

Perché il mio valore sarà con dimensione facoltativa sul look up della

sieta abgen abbiamo detto che il campo chiave la e g id che è un number qui do un nome un

codice quindi lo chiamiamo si sa anche se sar wizardwizard.wizard.rettore

conferma

esci

chiudo

quindi abbiamo definito la chiave

quindi adesso se io vado su configurazione, sistema, parametri, installazione,

qui ho il mio link, parametri per wizard corsi,

con la mia dimensione e il mio rettore.

Adesso vediamo, facciamo il primo passo.

Intanto questo fino a qui, quello che vi ho spiegato, va bene?

C'è una domanda, dubbi?

Quello che ho appena fatto?

Non ho capito perché abbiamo scelto,

abbiamo creato l'etichetta,

comunque l'edit text, il rettore,

come valore number non stringa,

cioè dentro il rettore non dovremmo metterci poi il nome del rettore.

Porca la paletta, porca la paletta, c'è ragione, c'è ragione, lo so confuso io, a forza di dire dimensioni qua, dimensioni là, no, hai ragione, bravo, perfetto.

Perfetto.

Ok, dimmi che marca di caffè usi perché è fortissima.

Allora, formato scritto.

Perfetto, esatto, hai ragione.

Perché qui c'ha ragione, dobbiamo mettere il nome del rettore.

Perfetto, ottimo.

Chiaro anche per gli altri?

Ci sono altre domande?

Ok.

Quindi ci rientro, parametri installazione. Noi usiamo una marca scadente di caffè

Quindi per quello dice che è forte

Ah no, dici noi comuni mortali

Esatto

Ah ma anch'io, appunto è

mi è molto scadente.

Allora, quindi, ricapitolando, in questo momento abbiamo una chiave di profilatura,

che è il nostro rettore, che qua ci mettiamo il nome,

e qua però, attenzione, che ho la mia dimensione sempre sulla stessa tabela generica,

l'ho messo, quindi vedo sempre gli stessi elementi.

Facoltativa, quindi supponiamo che se non la specifico,

il rettore è dell'università.

Adesso gli do i valori, quindi metto, che sono, università, gli metto rettore, università, così si capisce quando poi lo vediamo girare sul codice quindi quasi scrivo un rettore università e confermo oggi scrivo

insegnante di economia il dipartimento di economia

scienza ci metto insegnante di scienza

storia ci metto, insegnante

adesso clicco qua su questo qui, ecco vedete

per ciascuna dimensione il valore che ho messo

qua ci ho messo lettore università

nel caso di dimensione vuota, ottimo

ora vediamo di applicarlo sul codice. Quindi qui sul codice Allora, ad esempio, quello che posso fare è questo.

Quando, praticamente questo che voglio fare è questo, partiamo dalla maschera, quando cambio e metto dipartimento di scienza andrò a leggere quella chiave e qui dentro l'insegnante ci devo mettere insegn valore della combo, fate caso che in alto a sinistra Che mi verrà invocato il set di partimento. Adesso ci metto un bel breakpoint qui e cambio un valore metodipartimento.

metto scienza, vedete?

Si è bloccato sul dipartimento.

Perché?

Perché ho fatto il duro e refresh e il duro e refresh aggiorna il server.

E gli mette e mi setta l'id del mio elemento che equivale al dipartimento che ho selezionato nella combo.

Quindi è qua dentro che lavorerò e inserirò le mie logiche.

Che logiche che logiche

profile manager

get profile manager

get string perché una stringa quella che andiamo a leggere

tipo in plano di installazione quindi è un parameter type, il path, non me lo ricordo, scusate, lo dobbiamo recuperare,

Il pat eccolo qua, sì, anche se sarà wizard rettore.

Il pat è questo.

L'utente gliel'abbiamo passato.

E qui come dimensione è dipartimento.

Dipartimento.

Ok?

Se vuole?

string ah la dimensione è una stringa

diventa un var char sul db

della sikerad dati

quindi questo qua ce lo dobbiamo castare

possiamo fare

possiamo usare questa bella classe di utilità

che vi avevo accennato

che è classmaapper classToClass, quindi dimensione, dipartimento, string, dimensione è uguale a il class mapper di dipartimento

in stringa

questa dimensione

la passo qui

ok?

su run, we try catch

questo oggetto

questa chiamata mi tornerà il nome del rettore e quindi a questo punto farò semplicemente dis.insegnante, dis.teacher, scusatemi, la mia proprietà teacher uguale rettore.

la mia proprietà teacher, uguale rettore. Quindi sulla combo seleziono il dipartimento,

il dipartimento per me è una dimensione su questa chiave, quindi dico mi dici per questa dimensione qual è il valore di questa chiave? Questo, ok, questo qui selezioniamo,

Insettamelo come teacher.

Teacher sappiamo che è la proprietà che è collegata all'oggetto insegnante,

al widget insegnante.

Vediamo che abbiamo combinato.

Aggiorno.

Metto economia, insegnante di economia.

Scienza, insegnante di scienza.

Vedete?

Storia, insegnante di storia.

Chiaro?

Perfetto.

Ora abbiamo detto che ci sta anche la dimensione vuota, perché l'abbiamo messo come facoltativa, quindi come possiamo fare?

Quindi come possiamo fare?

Qui sul widget gli diciamo che vogliamo option blank uguale,

oddio mi pare che sia y,

ricordo, link, è scritto nel documento dello snippet che vi ho mandato, però adesso lo vedo direttamente qui sul codice,

option blank,

option blank, dove viene letta

banca

is filter ti is filter allora ti altrimenti f che bordi o

set option blankanche qua qua no combo box

s

quindi qua s non è s

rifaccio

il main e devo buttare il giovane, perché ho modificato anche il java.

E ravviamo.

Non ho capito l'option blank.

Ah no, lookup, mi sa che il filter ti è...

No, mi sa che l'option blank è come scritto qua,

c'è il javadoc,

c'è,

è disabilitabile solo in modalità find,

quindi nel nostro caso che siamo su un controller non standard,

l'option blank ce lo dobbiamo fare da soli,

vabbè, non è un problema, adesso facciamolo fare,

ce lo creiamo da soli l'option blank

ecco vedete rettore università quindi dipartimento economia

se metto niente

rettore università perché cosa accade

mettiamoci un bel punto di debug

vabbè quando metto lett di economia, qua mi arriverà l'opzione del dipartimento

di economia. Questa è la dimensione e qua va a interrogare il rettore, insegnanti

di economia e va bene. Quando qua metto null, cioè l'opzione vuota, e lui dice,

dipartimento null, quindi la dimensione è null, quindi con null, interrogerà il profile manager,

con null è il rettore università.

Bene? Più chiaro adesso il funzionamento delle dimensioni?

Un po' meglio.

Sì. Ok. un po' meglio sì ok

tutto qua insomma

nel caso invece delle

delle strutture

ad esempio la dimensione è una lista

di possibili strutture che sono previste

dall'applicativo. Va bene, ok, fine per quanto riguarda le strutture. Allora, guardiamoci

tre minuti, i bin che sono dietro le str strutture poi facciamo cinque minuti di pausa

e rincominciamo

quindi i bin delle strutture sono

struttura

la struttura v3 e il controller

quindi se io mi cerco questo controller

il bin è struttura bin

vedete che le interfacce ce le siamo consumate tutte con il paziente

quindi queste sono tutte interfacce che ci siamo già visti con il paziente

quindi nulla di che

classico bin con il memento

vediamo un po' questo il retrieve come ce l'ha

anche questo c'è un po' di retrieve vintage

con il memento fatto

così e va bene. Poi l'altro è riclassificatore bin, anche qui classico bin, il proprio memento anche qui c'è un po' di

c'è il store retrieve vintage

quindi manualmente si va a settare

i vari campi sul memento

ok?

struttura bin veramente non c'è nulla da dire

metodo stup veramente non c'è nulla da dire, metodo stupido, però c'è

c'è

archia

strgr

che è questo qui, struttura riclassificatore bin

no, aspetta

struttura riclassificatore bin

questo invece è il bin che gestisce

andiamo sul memento

la tabella

strgr che vi dicevo invece

gestisce la gerarchia

quindi figlio, padre

e così via dicendo, ok?

anche qui non c'è nulla di spettacolare l'unica cosa è che qua invece c'è un po' di metodini, di validazioni, di controlli per verificare ovviamente che la gerarchia sia consistente.

una struttura foglia e anche a sua volta padre di suo nonno, quindi che la gerarchia sia consistente, che non sia il cremio, ciche, eccetera.

Ma anche, e questo è importante, perché spesse volte questo è sempre una cosa un po' dolorosa

quando si fa le configurazioni, è la validità delle strutture.

Abbiamo detto che le strutture hanno una data di attivazione e disattivazione, giusto?

Quindi al solito

se io ho una struttura padre che attiva dal 1 gennaio

2022

la struttura figlia che li devo associare

deve avere una data di attivazione

maggiore o uguale del 1 gennaio 2022

la figlia non può essere

attiva ad una data precedente del padre

ok? Tutto questo genere di controlli vengono fatti La figlia non può essere attiva ad una data precedente del padre.

Tutto questo genere di controlli vengono fatti qua dentro, vedete?

Per il video di valide di agirchia non è compatibile alla data abilitazione.

Struttura riclassificatore BIN.

Ok?

facciamo questi 5 minuti di pausa

ci ritroviamo qui a 17.06

e concludiamo la lezione di oggi

va bene?

va bene

a tra poco

ciao ciao

ok Grazie a tutti. Grazie a tutti.

Grazie Grazie a tutti. Grazie a tutti. Rieccoci! Allora, quindi,

ricondividiamo.

Il nostro esercizio, insomma, così abbiamo visto, in realtà,

Sia le tabelle generiche, no?

E sia anche le chiavi per dimensioni, quindi a posto così.

Allora, quindi, ok, qui sono riassunte un po' alcune classi, ma sono quelle che vi ho detto, anzi vi ho detto anche di più.

Quindi, paziente BIN, paziente inter Interactive per quanto riguarda il paziente

persona fisica BIN

rapporto individuale bound

e poi c'è anche persone

indirizzo

indirizzo

indirizzo, sì, per quanto riguarda gli indirizzi,

medico di base V3, come vi dicevo, il controller, ma il nome è forviante,

e poi abbiamo strutture BIN, struttura riclassificatore BIN,

e abbiamo anche strutture punto riclassificatore BIN

che è quello

diciamo che è quello più stupido

però comunque riclassificatore BIN

è il BIN

dell'anagrafica del riclassificatore

d'accordo?

scusa non era nella riga precedente che differenza c'è tra i due?

allora questo qua riclassificatore BIN

è inteso come riclassificatore

come testata

cioè come anagrafica

quando vado qua su riclassificatore strutture

ok ok adesso vediamo anche per tutti Quando vado qua su riclassificatore strutture, quando faccio qui nuovo sarebbe praticamente questo codice di descrizione.

poi invece questo riclassificatore li devo compilare con una gerarchia

e questa gerarchia che vado a creare

padre e figlio

corrisponde a struttura

riclassificatore BIN

quindi qua c'è la gerarchia

ok

allora faccio un brevissimo recap

di quello che abbiamo fatto nella giornata di oggi.

D'accordo? Voi mi fermate se vi sovviene qualche domanda.

Quindi abbiamo detto che XMPI è principalmente un Master Patient Index, cioè una soluzione per il governo e la gestione dell'anagrafica del paziente.

gestione dell'anagrafica del paziente. Quindi in quanto tale

XMPI non si limita a raccogliere

dati anagrafici ma anche a

gestire alcune funzionalità come

l'accorpamento anagrafico, la

gestione delle proposte di

variazione, l'affidabilità del

dato, la profondità storica

delle variazioni. Oltre al

paziente però

sono anche gestite tutte le anagrafiche, tutte le codifiche di cui ha bisogno un'azienda,

quindi sia magari come soggetti, strutture, prodotti eccetera, ma anche le semplici anagrafiche

di base che abbiamo visto oggi, tipo le province, le regioni, i comuni. Tutte queste anagrafiche

prevedono il range di abilitazione e disabilitazione per gestire eventuale obsolescenza e quindi

qua ricordiamoci che queste date di abilitazione e disabilitazione assumono poi un significato rilevante nel momento in cui i vari oggetti si mettono in relazioni tra loro.

è attiva dal 1 gennaio 2022, la struttura figlia, la dico, non posso dire che è attiva dal 1970,

lo posso fare in fase di creazione della struttura, ma quando poi le metto in relazione tra loro,

ecco che scattano i controlli.

Quindi abbiamo dato uno sguardo all'anagrafica del paziente,

sia per quanto riguarda le informazioni anagiche di base quindi il tab principale sia il tab delle ASL

il tab professionale

i medici di base

alle esenzioni

magari da stimuiamo lo sguardo

non abbiamo visto le esenzioni

le esenzioni

ce le abbiamo sempre sullo stesso

ecco, se entro magari con un utente normale

ce l'abbiamo sempre nello stesso tab dove sono gestiti i medici

quindi anagrafiche, pazienti, gestione

medicina di base, esenzioni.

Quindi qua si può selezionare una classe di esenzione,

una patologia, però non è associata a nessuno, facciamo così, facciamo esenzione per reddito, forse questa ce l'ha, ok, questa ce l'ha configurato le esenzioni per reddito, quindi ad esempio il tipo reddito, gravidanza, patologia, invaido, ad esempio una per reddito, conferma.

invaido, ok? Ad esempio una per reddito, conferma.

Nulla di che. Qua però, attenzione, anche qui, date di attivazione e disattivazione,

poi vanno tutte di pari passo con tutta una serie di altre date,

come ad esempio queste qui, date di inizio assistenza date fine assistenza, quindi che ne so, la data di fine di assistenza non può essere più breve della data di fine di un'esenzione, se io ho un'esenzione per reddito,

con una data di scadenza, supponiamo, ok?

Vabbè, un'esenzione in generale, per reddito, no, però un'esenzione in generale,

a prescindere da una data di disattivazione, se quella data di disattivazione dell'esenzione

è superiore alla data di fine assistenza, non ha senso.

Ok? O anche banalmente, se è valorizzata la data di decesso,

di conseguenza si deve chiudere anche l'esenzione.

Ok? Quindi, vabbè, nulla di particolare da vedere. Poi anche qua le

tensioni le approfondite anche sempre con i verticali. Abbiamo fatto l'esercizio sul

paziente, abbiamo visto le tabelle generiche, queste importantissime, le tabelle generiche

le userete ovunque. Abbiamo visto che in Sardegna, su questo ambiente per le MCHR, ci stavano 220.000

record, 220.000 elementi di tabella generica. Poi abbiamo dato uno sguardo all'anagrafica

dei soggetti, che ricordiamolo, serve per censire qualsiasi persona, che sia fisica o giuridica, ha escluso il paziente, che per qualsiasi titolo ha un rapporto con l'ente.

Quindi ad esempio censiremo come soggetto un dipendente di un'azienda, un medico di base, un pediatra, un cliente, un fornitore, e così via dicendo.

Quindi il legame vero e proprio tra il soggetto e l'azienda si ha nel momento in cui si crea un rapporto, perché il rapporto abbiamo detto che è un record aziendale, quindi afferisce all'azienda dell'utente che in quel momento sta censendo il rapporto.

Poi abbiamo visto tutto il giro per creare ad esempio un nuovo medico, ma lo stesso giro lo potevamo fare per fare un fornitore, ora perché non sono di AMC, però lo farete con loro, insomma. Quindi il concetto però è lo stesso. Create prima un tipo di rapporto, inteso come un codice,

un descrizione, quindi come dato anagrafico.

Poi il fatto che quel tipo si trasformi funzionalmente in un medico, in un fornitore o altro,

è demandato ad opportuna parametrizzazione aziendale.

Quindi noi nel nostro caso abbiamo visto il parametro aziendale

per poter indicare cos'è che consideriamo un medico.

Sarà un parametro aziendale di MC dove potete dire, ad esempio, qual è un forchico, cos'è un fornitore?

Uno soggetto che ha il rapporto PORN, ad esempio.

Poi abbiamo visto l'anagrafica delle strutture. Abbiamo detto che l'anagrafica delle strutture permette di codificare sia strutture logiche sia strutture fisiche. Con logiche intendiamo cosa stratta, tipo centri di costo, l'armadietto di reparto, eccetera. Fisiche, invece il palazzo, il palazzo, il palazzo.

il piano, stanza, eccetera.

A ciascuna struttura è legato uno o più tipi di struttura.

Anche qua, simile a come avviene per i soggetti,

c'è quel parametro per dimensione che ci ha messo un po' in crisi su aziendale,

con cui io posso dire per ciascuna dimensione, per ciascun tipo di struttura,

ma inteso come tipo di struttura gestito dal sistema, che è in grado di gestire il sistema,

gli posso andare a dire qual è il tipo di struttura anagrafico a cui deve associarlo.

che deve considerare, a cui deve associarlo, quindi vi ho detto, per la dimensione eroganti, il tipo di struttura usare? Il riclassificatore è un oggetto

che mi va a raggruppare strutture, che mi va a raggruppare insieme delle strutture dello stesso

tipo, anche in realtà tipo diverso, perché il riclassificatore a sua volta può avere anche più tipi,

e mi riclassifica strutture in generale, mi riclassifica, mi raggruppa delle strutture,

poi quelle strutture le posso raggruppare, ma eventualmente in maniera gerarchica,

ad esempio creando un'associazione, una gerarchia, padre, figlio, oppure nipote, padre, figlio, e così via dicendo.

Inoltre abbiamo visto la chiave per l'abilitazione delle strutture

questo è molto importante

la vostra domanda quando magari un giorno usando un look up delle strutture

sparpagliato su Arias, che ne so, i centri di costo

anzi, la struttura di liquidazione sulla maschera di contabilità

avete creato una nuova struttura, ma per quale cavolo di motivo non vedo la struttura di liquidazione sulla maschera di contabilità avete creato una nuova struttura

ma per quale cavolo di motivo

non vedo la struttura

sulla lista valori dei look up

lì vi si accenderà la lampadina

che vi dice che dovete andare

sulla

sulla chiave di abilitazione

strutture abilitate

anagrafiche strutture

strutture abilitate

e lì avrete una dual list dove postate da sinistra a destra le strutture che l'utente può effettivamente vedere tra tutte quelle censite.

comportamento della dualist e dirgli se la dualist si deve comportare in una maniera

inversa, quindi quello che

abilito in realtà è quello che disabilito

oppure se abilitare

tutto, quindi ignorare a pi e pari

la dualist

ok? Poi queste sono insomma

ma anche le tabelle principali.

Intanto vi giro anche gli SQL,

che sono anche gli stessi che avevo dato ai vostri colleghi.

E li metto qui dentro.

No, dove caspiter la spieterina sta?

Ecco qua.

Comunque le tabelle che abbiamo visto sono la sapaziente che la tabella di anagrafica del paziente,

solo anagrafica, poi vediamo perché sul paziente ancora ci sono diverse cosette da dire,

non abbiamo finito sul paziente ancora ci sono diverse cosette da dire, non abbiamo finito sul paziente.

Però, intanto, quello che abbiamo visto fino adesso,

che ci interessa è quello di anagrafica,

sta paziente,

sta persona, tabella anagrafica dei soggetti,

sta RAP in div, tabella dei rapporti individuali

di quella persona,

e poi sta struttura, tabella anagrafica di struttura,

la strtrgr, tabella con le gerfica di struttura se trgerra tabella con le

gerarchie delle strutture

e questi bin

come va? tutto chiaro?

domande? dubbi?

a livello grafico

possiamo capire

come scusami?

Ti sento lontano.

Ecco, mi scusa.

Dicevo a livello grafico, come possiamo capire

se quello che c'è dietro

è un parametro dimensionale.

Comunque c'è quella common box dimensionale.

A livello grafico

te ne accorgi perché

i parametri

vediamoli, i parametri con dimensione

vediamo ad esempio

quello proprio delle strutture

allora

mi loggo qua

entro con utente amministrazione, utenti, quindi vado sulla mia chiave, anzi vabbè, sui ruoli, vado sulla struttura abilitata e su quella chiave di profilatura che dicevo, funzionalità risorse anagrafiche

allora ad esempio prendo pazienti no?

paziente è proprio quella che ce l'ha

aspetta, prendo

prestazioni, ok

no, voglio una un po' più complessa

soggetti

non ci piace

voglio prendere una cosa un po' più complessa

un po' più questoessa un po' più

questo è troppo semplice, un check

del cavolo

guarda, prendo amministrativo contabile

amministrativo contabile

secondo, lo troviamo

per esempio

questo è un po' più complesso

perché è più complesso?

allora, vedi che qua

faccio uno screenshot

così facciamo il prima e dopo

questa è una chiave senza dimensione

perché che cosa abbiamo?

abbiamo le date

iniziale e finale

e poi i nostri parametri

i nostri chiavi di profilatura

che in questo caso sono poi anche organizzati in dei tab

comunque qua abbiamo una chiave di profilatura di tipo combo

questa è una textarea e così via dicendo

se io adesso vado su quella delle strutture

vedi?

non vedo nulla

devo selezionare la dimensione per vedere qualcosa

cioè, a parte che è la prima riga, la primissima riga

forse in realtà dal punto di vista grafico pensavo fosse un po' più semplice in realtà, però ecco, è la prima riga sotto, è la primissima riga e può essere soltanto una combo oppure potrebbe essere un look up.

prima riga è una combo, un look up, 9 volte su 10 è una dimensione.

In teoria dovrebbe anche essere scritto qualcosa che ci fa capire che è tipo dimensione,

il programmatore dovrebbe averci scritto qualcosa che ci fa capire che è una dimensione, ok?

Quindi questa non è una chiave di profilatura, questa combo, ma è una dimensione e selezionando la dimensione mi fa apparire le chiavi sotto, ok?

e selezionando la dimensione mi fa apparire le chiavi sotto.

Poi dal punto di vista invece del DB, cosa più importante,

ad esempio questa qui è la nostra chiave delle risorse strutture,

sulla definizione della chiave, quindi sulla tabella SICERADad stai ancora erogando il corso?

sì

secondo me stanno scrivendo i colleghi

ok

nella tabella

Sikherad

riesco a ripoperare la connessione

eccolo qua

c'è

questo qui?

no questo ah ok, ricordatevi

questo, la chiave di profilatura di per sé non è la detentrice della dimensione, inteso

come, aspettate un attimo, riprendendo l'esempio qui, ad esempio qui del rettore, mannaggia i pescetti, le pagine sono tutte contro di me, localhost.

Prendendo l'esempio che abbiamo fatto del corso,

profilatura configurabile

no, però i parametri per wizard corsi

ok

su questa chiave qui

però ci voglio andare in modifica

un secondo, avanzate

personalizzazione dei parametri di installazione

parametri per wizard corso

qua noi dicevamo si vogliamo o non vogliamo la dimensione, ma il tipo di dimensione noi lo dicevamo qua sul padre, è il padre che dice la dimensione Sassard Dipartimenti, vi ricordate qui sul padre che lo dicevo.

vi ricordate qui sul padre che lo dicevo quindi in questo caso esempio

questa qui la chiave di profilatura

ma per sapere se questa chiave di profilatura è oggetto di dimensione

bisogna vedere il padre

che è questo

quindi io vado su selec star from ckrad

where krk

questo qua, il parent, e questo sarebbe il nostro link.

E qui dentro, eccolo qua, c'è un campo krdim, quindi ci dice che attiva la dimensione,

che la dimensione in questo caso è sempre un look up

e il look up in questo caso si chiama

stand e scorri classificatore

però non c'entra con i classificatori

però si chiama così, si chiama stand e scorri classificatore

look up

......

............................................................

....................................

...

.................. str ricordo

strv

a questo in realtà questo interessante questo è interessante questo lookup

vedete che c'è

lk class vi ricordate, no?

Avevo spiegato l'lk class, l'lk list query, eccetera,

che sono le classi Java che si possono associare.

Quindi questo riclassificatore, in realtà,

questo lookup, scusatemi, in realtà,

è un lookup,

un lookup fittizio, perché è un

fixed lookup, cioè se noi prendiamo

questa classe qui

questa tabella qui

sarà il classificatore, non esiste

su db, ok? Per intenderci

quindi è associata a questa classe

qui

che estende configurable lookupfixed.

È una classe che estende la classe lookupfixed

che viene utilizzata per aggiungere dei nuovi record

a un lookupfixed preesistente.

Che cos'è un lookupfixed?

Noi adesso andiamo su SiancInitializer,

che è la classe initializer di Sianc,

e cerco sa underscore riclassificatore.

Tata!

Vedete? sa erog, sa propon, sa rick quelle dimensioni che vedevamo

le prende sempre da un look up

perché per il framework comunque è un look up

i cui valori quindi non sono recuperati da db ma sono popolati così a secco, vedete?

proprio a livello di codice

tramite questa istruzione qui

ok?

questo perché?

perché

il rilascio di una dimensione deve essere fatto da applicativo, quindi deve essere previsto dal codice, punto.

Però allo stesso tempo ciascun modulo ha delle dimensioni proprie.

Faccio un esempio, c'è CO-LIC, che è le strutture liquidanti della contabilità lo troveremo probabilmente

sulla l'initializer di contabilità quindi cerco contabilità initializer

potabilità initializer che però estende amici initializer dove cavolo sarà

configurable Aspetta, lo proviamo. Configurable.

C'è tipi causali, c'è utilizzo.

Non fa, non aggiunge.

Ah, forse sta su centralizzato.

Centralizzato, AMC, centralizzato, inizializer.

Questo è l'inizializer del modulo che si chiama MC centralizzato

forse lo fanno qua per tutti

eccolo qua, sari classificatore

quindi sul modulo MC centralizzato

che è il modulo

che è il progetto centralizzato

che trovate su vostro workspace

inizializzano le dimensioni

per tutta la MC

quindi non fanno modulo per modulo

fanno uno per tutti.

Quindi qua, ad esempio, eccolo qua, ci ho UFLIC, Ufficio Liquidazioni.

Ok?

Domande?

prendendo quindi sulla nostra chiave

che ci siamo creati qui

questa qui

ok

Krdim è una Sietabgen

perché lo vendiamo

abbiamo detto tramite

tabella generica nel nostro caso

quindi lookup è Sietabgen DST

ritornando all'esempio quello del corso

dei nostri dipartimenti

però il Q filtrato

quindi questo è importante

oltre alla dimensione

la dimensione ci indico il look up

io posso passare dei filtri al mio look up

utilizzando questa colonna FDM

nel mio caso gli ho passato quale?

il filtro sulla tabella generica

da considerare per tirare giù la mia dimensione.

Tanti concetti oggi, anche troppi.

Comunque, questo è e quanto

zero domande?

tutto ok?

tutto chiaro?

siamo siamo K.O ci credo

buon attimo adesso andiamo avanti un pochettino

poi dopo magari

45-50

chiudiamo insomma

poi rincominciamo direttamente

direttamente

direttamente domani

allora direttamente domani allora

intanto vi anticipo questa cosa qui delle proposte

poi magari domani la ridiciamo

intanto ci portiamo un po' avanti

tanto non è nulla di complicato

questa qui la gestione delle proposte.

Così concludiamo la giornata con questo.

Allora, quindi, conclusa la prima parte delle slide sulle anagrafiche,

sulle anagrafiche, parliamo delle proposte, che è una delle funzionalità che ha in più il paziente. Le proposte sono una funzionalità di controllo delle anagrafiche che permette

di parcheggiare in una zona temporanea inserimenti le variazioni anagrafiche. Le proposte possono poi essere opportunamente trattate tramite

un sistema di accettazione o rifiuto tramite degli appositi utenti che sono nominati certificatori.

Facciamo l'esempio così capiamo di che cosa stiamo parlando.

abbiamo il nostro paziente

Bianchi Marco

censito sul db

ok

e abbiamo anche due utenti

uno che si chiama utente utprop

che genera proposte

e uno utente utcert

che è un utente certificatore

cosa accade?

facciamo il caso

l'utente utprop

quindi questa tabella è sapaz, il nostro Bianchi Marco.

Cosa paziente? Questo ci sta.

L'utente prop dice, no guarda, Marco in realtà non si chiama Marco, si chiama Paolo.

Cosa accade?

La sapaziente non viene toccata, rimane così, Bianchi Marco.

La paziente non viene toccata, rimane così, Bianchi Marco.

La volontà di cambiare il nome del paziente quindi viene registrata su un'altra tabella che si chiama Sandescore Proposte.

Cosa è importantissima come tabella, quanto il paziente.

Quindi viene censito sulla questa tabella l'informazione che per il campo, qua scrive a livello tabellare, per il campo PZNome il vecchio valore era Marco, il nuovo valore che si vuole impostare è Paolo.

lo stato di questa modifica è T temporaneo.

Ora succede una cosa

simpatica in questo caso. Cosa succede?

Che l'utente UTPROP

se va sulla maschera della paziente

leggerà Bianchi

Paolo.

Però sulla

TAPaziente continua a essere scritto

Marco. Questo perché? Proprio perché

chi ha generato la proposta

vedrà

già da subito attiva la sua proposta, da subito, quindi utente PtProp leggerà Bianchi Paolo.

Tutti gli altri utenti, sistemi, eccetera, quando andranno a cercare questo paziente continueranno a leggere Bianchi Marco, perché questo è per adesso il record ufficiale.

Perché questo è per adesso il record ufficiale.

Successivamente, quello che accade, può accadere, è che arriva l'utente certificatore, questo t-cert. può consultare le proposte di variazioni di inserimento e quindi vedrà la proposta di modifica di bianchi da Marco a Paolo

e può accettarla o rifiutarla.

Se l'accetta, quello che accade è questo.

Sulla sa proposte lo stato cambia da T, temporaneo, a C, certificato.

E a quel punto Paolo va a diventare definitivo

sulla sua paziente, quindi ci va a finire

per davvero, quindi si ribalta

sulla sua paziente e a quel punto

il record è visibile come Bianchi Paolo

a tutti quanti

Ok, è chiaro come il concetto, no?

Sì, quindi l'utente che trappone la modifica, la vede solamente lì con la modifica, ma solamente in visualizzazione.

Sì, esatto.

Quindi se poi fai, ad esempio, su quel paziente un'altra operazione, stampa di un report, comunque poi vede il dato ADB.

un'altra operazione, stampa di un report, comunque poi vede il dato ADB.

No, dipende, nel senso, tutte quante le funzionalità, in questo caso ti direi dipende, nel senso che tutte le funzionalità che ci sono, perlomeno su XMPI tendono a lavorare

in maniera di

interrogare sempre la proposta

quindi se ci sta un altro punto di XMPI

che va a cercare sempre

questo, devi visualizzare a maschera

questo Bianchi Paolo

questo Bianchi Marco, l'utente proprio

leggerà Bianchi Paolo, poi è ovvio

che se parli invece fuori da XMPI

come esempio la stampa delle lettere di dimensione, si leggerà bianchi paolo poi ovvio che se parli invece fuori da ex mpi come sempre ne so la stampa delle lettere di menzio di missione si leggerà quello definitivo

ok così

ok

poi sempre ci sono altre maschere che ne so quelli del su che ne so, quelli del, su, che ne so, su XMPI, ad esempio, anche la gestione della maschera degli alias, ad esempio, dove leggi sempre i pazienti,

e lì vedrai, in realtà, dove dovrebbe continuare a vedere, sempre sovrapponendo, sempre facendo un merge tra quello che si trova sulla sua paziente

e quello che si trova sulla sua proposta.

Poi sì, sulle stampe, quelle ufficiali, certo,

ci va a finire il dato ufficiale, certificato,

però quella è roba fuori extra-exempiale.

Ok?

Ok, sì, grazie.

Prego.

Nulla di che?

Adesso non facciamo la

configurazione perché non avremo

il tempo, però intanto vi volevo

introdurre insomma sull'argomento

e magari possiamo anche dare uno

sguardo sulla sa proposte, perché

la tabella sa proposte

oltre ad essere importante

cioè importante per due motivi

la prima la prima

la prima è importante

perché gestisce appunto le proposte

ma in realtà è importante

a prescindere dalle proposte

perché

se il miob ma assiste

morto libri morto tutti morti

tutti a casa

ma non è cascata la connessione

la paziente

cerchiamo il mio paziente

il paziente che abbiamo creato oggi

che è analista

questo è il PZD

vado a cercare

sulla sa proposte su questo campo

PRD

questa è la sa proposte

la sa proposte

ha

le informazioni principali sono queste

la PRLOOKUP

dice se

il PRLOOKUP serve per dire

che tipo di record è

è un record sul paziente

oppure un record sul soggetto

perché in realtà le proposte si configurano

nel caso si attivano

solo sui pazienti.

Però potenzialmente in realtà si possono attivare anche sui soggetti.

Quindi le proposte si possono attivare sia sull'anagrafica dei pazienti sia sui soggetti.

Quindi qua ci dice innanzitutto di che regolio stiamo parlando, stiamo parlando del paziente.

PRD ci va a finire l'id dell'anagrafica, quindi in questo caso l'id del nostro paziente.

E poi c'è campo, che è stato toccato, valore nuovo, valore vecchio.

Quindi come vedete, in questo momento io le proposte non le ho ancora attivate,

poi dopo le attiveremo, domani facciamo l'attivazione.

Nonostante tutto lui ci va a scrivere comunque sulla proposta, per questo è importante,

perché la proposta è la tabella che lui utilizza per fare lo storico.

che lui utilizza per fare lo storico. Quindi quando noi oggi siamo andati per il nostro paziente analista programmatore sul tab storico, adesso è spento perché so con la tarna sbagliata, i valori che troviamo lì dentro

sono i valori che si va a ripescare sulla sua proposta. Quindi lui comunque ci scrive. è la stessa se cerchiamo qua ad esempio qua il documento

valore precedente 123456

eccolo qua

vedete?

Pizzetta documento, valore precedente old 13456, poi l'abbiamo rimodificato ancora il campo e quindi è old 56, new 87543.

Il PRD modif è invece un progressivo che serve per raggruppare le modifiche, quindi a ciascuna variazione viene staccato un PRD modif che racchiude tutti i campi che sono stati variati in quel salvataggio.

Questo serve per far sì che poi vedete che, come vi dicevo, ci sta questa linea che ci fa capire che sono istanti diversi.

Tutto questo è stato fatto con una stessa modifica, con un stesso salvataggio, questo con un altro, questo con un altro ancora.

Le proposte vengono gestite anche a livello di dettaglio,

quindi qui ho medici, mi dice che ho inserito un nuovo medico, mi fa capire, con questo rapporto,

con questo identificativo paziente, con questa data scelta e le sensioni.

e le tensioni.

Quindi a prescindere dalla gestione delle proposte che vediamo domani,

la proposta ha importanza comunque a prescindere dalla gestione dello storico.

Per gestire le proposte il paziente BIN non utilizza il classico memento, ma utilizza un anagrafico emevento.

Vedete anche per la persona fisica, utilizza l'anagrafico emevento.

Questo permette poi potenzialmente al BIN di poter salvare e gestire

le proposte.

Ok?

Il nostro bin corso

avevamo utilizzato

elementa e basta.

GDBC

elemento.

Quindi in quel caso modificare il corso non vengono storicizzate queste pochie hanno fatto esatto però se noi adesso vediamo una grafica e memento le uniche

unici oggetti che utilizzano grafica e momento ecco sono questi qui che troviamo qua che sono tutti

comuni

questi qui in realtà sono copi in colla

quelli che c'entrano invece sono quelli relativi a

questo è tutto copi in colla

Quegli dati sono il consenso, che poi magari vediamo, paziente, gruppo sanguino, riga e sensione BIN, medico BIN, infatti abbiamo visto che lui tiene traccia al gruppo sanguino, adesso non lo vediamo perché non è attivo in Sardegna, però un altro dettaglio del paziente.

Tutto ciò che ruota intorno al paziente e intorno alla persona, e qui azienda, queste qui sono tutti copie ee, domicilio, paziente riga

medico, riga esenzione, gruppo sanguigno,

pazienti BIN, consenso BIN, utilizzano

questa anagrafica di momento in maniera

da poi poter gestire lo storico.

Volevo farvi vedere pure un'altra cosa

dopo dopo la chiava

perché oltre a questo qui...

...a grafica in momento. Grazie. No, questo ci permette di gestire le proposte, però poi effettivamente per averle all'interno della sala proposte, andiamo qua dentro

la promocca deve certe le proposte ok quindi

Questo vediamo domani come si fa, ok? Però è per dire, perché ad esempio sui comuni abbiamo visto che ci sta una grafica sa proposte, ma lui va prima a chiedersi, sono abilitate

le proposte

e lo va a verificare tramite

andando a interrogare un parametro

di

un parametro aziendale che poi vediamo

domani, che comunque deve essere

rilasciato e deve essere rilasciato con la

sintassi

il nome del get profile root sarebbe il nome

del bin, quindi esempio si

anche punto paziente punto paziente bin punto certi fai

diversi a di parametri che va a cercare certi fai che volte lo va a cercare

però pop pop pop pure un'altra cosa c'era

non E' un'altra parte. E' un'altra parte.

E' un'altra parte.

E' un'altra parte. Ok, era qua, scusatemi.

Scusatemi. Era qui era. Vi ricordate che vi ho spiegato, però questo ve l'ho spiegato venerdì tardissimo, quindi non so se vi ricordate, che sul service manager potete andare a censire i service, che di default è default service, ma potete censirne anche di diversi. Su Sianc è censito questo, Sianc service, che estende una grafiche service,

che estende una grafiche service, che tra le cose che fa eccolo qua

ha un suo anche

questo non è quello che volevo dire

quindi oltre a un'anagrafica e memento

abbiamo anche un'anagrafica e service

e questo l'abbiamo visto venerdì

quindi ci sta anche tutti gli oggetti di sito

anche hanno un suo service

che però

al suo interno

utilizza anche un

anagrafico e persistent manager

diverso

quindi non utilizza quello che abbiamo visto

JDBC persistent manager

ok?

l'anagrafico e persistent manager

gli viene detto

eccolo qua

se effettivamente

deve gestire le proposte o meno

viene stabilito da fuori

ed è lui in definitiva

andando a leggersi il momento

che ha un metodo qui dentro che fa

writer proposte punto

writer proposte

maledette scetti

allora vediamo eh allora Writer proposte, maledetti pescetti. Allora, qui dentro c'è Writer proposte, lo passa qua dentro, una grafica è persistent handler,

qua dentro, ha una grafica e per system handler, e qui dentro alla fin fine fa writer proposte,

punto write proposte, generazione proposte, quindi giusto per dirvi che rispetto a tutte le gerarchie che abbiamo visto, gdbc memento, gdbc per System Manager, JDBC per System Manager, Default Service, qui abbiamo un equivalente, perché tanto alla fin fine tutta questa roba qui va ad estendere Handler che servono appunto per gestire

la gestione delle proposte

tutta sta roba qui per arrivare a gestire

le proposte

ok?

magari domani ci ritorniamo un po'

va bene sopra

intanto ve l'ho buttata lì

intanto ve l'ho introdotta

va bene ragazzi

se non ci sono domande ci ribecchiamo al solito

domani ore 9

va bene

domani

a domani

ciao

ciao

ciao

ciao

ciao

ciao ciao ciao ciao


-----------------
VIDEOLEZIONE 11 :
-----------------

buongiorno buongiorno a tutti buongiorno buongiorno buongiorno

aspettiamo un pochettino e poi iniziamo Grazie. Grazie. ah manca mario dobbiamo aspettare.

C'è un franco?

Aspettiamo un minutino. Aspettiamo.

aspettiamo che entri in circolo il caffè

che ne dici

come è davvero

come è davvero

cenato pensando

alle parametri con dimensione

giusto?

sì

gli incubi e la notte Stiamo vedendo il calendario.

Noi abbiamo insieme ancora 19...

Ok, domani.

Quindi venerdì santo a base di ricorso.

19 e poi 19, 20 e 21.

Fortunatamente non ci hanno messo il giorno di Pasquetta,

ci mancava solo quello.

Va bene. fortunatamente non ci hanno messo il giorno di Pasquetta ci mancava solo quello va bene

allora magari intanto iniziamo con un recap di ieri

è buon

quello che non è chiaro se poi martedì risorgiamo anche noi

si spera

eccolo qualcuno

eccolo qualcuno eccolo con la mario allora presente eccoci qua allora

rifacciamo un recap di quello che abbiamo introdotto il pomeriggio, quindi le proposte e adesso vediamo oggi insomma come si attivano,

come funzionano. Allora, le proposte come dicevamo ieri, permettono di parcheggiare in un'area

temporanea, che poi abbiamo visto essere questa tabella proposta, gli inserimenti, le variazioni azioni degli assistiti quindi si configurano degli utenti che non hanno come dire la facoltà

di poter modificare direttamente la grafica paziente per questo motivo sono degli utenti

che genere si dice genereranno proposte tutte le loro variazioni che vanno a finire su questa

tabella proposta al suo tempo però si dovrà anche creare degli utenti che invece sono denominati

come utenti certificatori, cioè che hanno la capacità tramite un monitor, che poi vedremo,

di vedere la lista di tutte le variazioni fatte da questi utenti che generano proposte e decidere

se accettarle o rifiutarle. Quindi poi abbiamoomma l'esempio di Bianchimarco

dove l'utente che genera proposte

va fondamentalmente a non

toccare il record sulla sa paziente ma va

semplicemente a lavorare sulla tabella

sa proposte.

Andando a

identificare quella variazione con uno stato T temporaneo.

Lo stato da T passa a C, quindi certificato,

solo nel momento in cui un certificatore accetta quella modifica

e a quel punto poi il nome, cioè la variazione della sa proposta

viene applicata sulla sa paziente.

La modifica può essere anche rifiutata?

Sì, sì, assolutamente.

La modifica è rifiutata e lo stato sarà rifiutato.

Lo stato sarà RD rifiutato, poi gli altri li vediamo.

E niente, quindi la modifica viene rifiutata sulla sua proposta e sulla sua paziente non succede nulla.

Assolutamente.

Ok.

E fine.

Ok, a livello di logico, adesso vediamo un attimo

come fare, vediamo come

si mette in piedi tutto

tutto ciò

allora innanzitutto

come vi dicevo sulla proposta ci si va a scrivere

sempre e comunque, a prescindere

però di default il comportamento

che ci si va a scrivere solo e soltanto

per tenere traccia

dello storico, delle variazioni, no?

Di tutto quello che accade.

Se si vuole invece proprio attivare

la gestione delle proposte, e quindi

attivarla nel meccanismo che vi ho appena

spiegato, bisogna attivare

un parametro aziendale, quindi l'attivazione

delle proposte è a livello aziendale, innanzitutto.

Quindi posso dire che su un'azienda attiva le proposte

su un'altra.

Questo è il parametro di aziendale.

Poi bisogna configurare il monitor, che poi lo vediamo.

Quindi c'è un monitor dove ci fa vedere, come vi dicevo, tutte le variazioni pendenti

e su questo monitor possiamo vedere più o meno colonne,

tipo possiamo vedere la colonne D, cognome, nome,

rata in acide, eccetera.

Possiamo dire quale colonne andrà a vedere, questo serve.

In ultimo, questo qui,

bisogna lavorare sulla profilatura configurabile,

cioè tramite profilatura configurabile

dobbiamo andare a censire i

campi del paziente che sono effettivamente sottoposti a proposte, perché io posso mettere

sottopoposte non tutta l'anagrafica del paziente, ma magari soltanto alcuni campi, ad esempio

generalmente i campi che sono sottoposti a proposta sono quelli magari un po' più

delicati, nome, cognome eccetera, cioè Se uno vuole cambiarmi il numero di telefono 3,

ricordate, noi avevamo visto ci sta numero di telefono 1, numero di telefono 2, numero di telefono 3,

se uno vuole cambiare il numero di telefono 3 si accomodi pure, chi se ne frega. Lo si fa quindi

soltanto su un subset di campi. Questo subset si decide tramite profilatura configurabile.

Cioè tramite profilatura configurabile al solito si accrea la chiave di profilatura che mi dice voglio gestire le proposte sul cognome, sul nome, sulla data di nascita.

Poi si dovrà andare su ogni singolo utente o ufficio o ruolo ovviamente.

quindi su un gruppo di utenti

per dire, sì effettivamente

quest'utente genera proposte per il cognome

quest'utente genera proposte per il nome

e così via dicendo

ora la configurazione

in realtà è già

la rivediamo comunque insieme

però è già fatta, perché?

perché l'ho fatta già ai vostri colleghi

ok, quindi adesso non è che vi

sdraio tutto

è un bagno di sangue.

Quindi vi faccio un cosiddetto, vediamo insieme, semplicemente, dove già c'è un check, lasciamo il check, ecco, ok?

Quindi, dicevamo, l'ambiente di formazione.

Innanzitutto si parte con l'utente amministratore. Allora, accesso, azienda, prendo la mia azienda di formazione,

Prendo la mia azienda di formazione. Gianfranco buongiorno, abbiamo appena iniziato. Stiamo vedendo come si attiva la gestione delle primo passato no no assolutamente sul problema ma solo per dire che non ti sia perso nulla fatto un recap quindi diciamo per attivare le proposte andiamo sulla gestione dependiamo in

gestione l'azienda quindi poi i parametri anagrafiche pazienti

pazienti e qua mettiamo su sì

adesso già ci sta, ripeto, però il default è no

gestione, proposte, variazione, inserimento

manuale, mai vista in vita mia usata nella realtà

comunque sarebbe per creare manualmente una proposta

cioè dal monitor, dalla dashboard che vediamo

si può creare manualmente una proposta

quindi senza avere l'automatismo

per cui si genera nel momento in cui

si varia dalla maschera del paziente

mai visto, e non c'è neanche in Sardegna

in Sardegna su alcune aziende attiva

sì

quindi gestione proposte, variazione inserimento

yes, e questo è il primo step

poi il secondo step

è

andare su

sempre tra i parametri aziendali

ma su una grafiche proposte

elenco lookup

questa è una dimensione

quindi mi dice

per vedere i parametri qui sotto

devo scegliere prima di tutto la dimensione perché si vede

che questi sono parametri con dimensione

obbligatoria

quindi con null non me la fanno vedere

e devo dirgli per cosa voglio

gestire, voglio configurare il parametro

per l'anagrafica paziente o per elenco persone

e come vi dicevo le

proposte sono una cosa che potenzialmente si può utilizzare sia per i pazienti e sia per i soggetti.

Nel pratico però in realtà si fa soltanto sui pazienti o meglio sempre che a livello di storico,

di utilizzo di storico, la proposta viene usata sia per i pazienti sia per i soggetti per tenere

traccia delle variazioni come storico però proprio come effettiva attivazione della gestione delle proposte non l'ho mai vista attiva sulle persone in 13 anni, ok? Mai vista.

Comunque, potenzialmente anche le persone.

Paziente, quindi nel nostro caso, e qui uno li configura, ok?

I campi, adesso qua sono già configurati, quindi qua è configurato di paziente, cognome, nome,

da rinascita, sesso, comuni, nascita, codice fiscale.

Cosa sono questi campi?

Sono i campi che l'utente certificatore

quando aprirà questo monitor, questo dashboard

per vedere le variazioni,

sono i campi che gli vengono mostrati.

Ci sono mostrati un po' di campi riassuntivi

per fargli capire chi è il paziente,

da dove viene,

giusto per avere un po' di informazioni.

Possiamo anche aggiungerci magari

il comune di residenza

all'appartenenza

co co co co co co co come un mune codice comune comune di decesso e domicilio

Comune, comune di decesso e domicilio, comune di residenza.

Tac, esempio.

Poi lo vediamo dove va a finire.

I quali configuro le colonne che voglio mostrare su questo monitor all'utente certificatore.

Fine. A livello di aziendale abbiamo finito, non c'è altro da fare. Ora

ci spostiamo con un utente che ha la profilatura configurabile attiva. Quindi, sempre corso GBF.

Avanzate, profilatura configurabile, anagrafiche, seleziono la gestione pazienti, configura campi

qui

questa è la

lista dei campi che noi abbiamo

usato fino ad oggi ad esempio per dire sì voglio decidere la visibilità, ecco sbaglio

da cliccare, la visibilità del campo indirizzo, di default è obbligatorio, queste sono tutte

cose che abbiamo già visto quando ci siamo esercitati sulla gestione delle visibilità

dei singoli campi, però tra le colonne che abbiamo, anche qui a destra l'ultima è questa certificazione ad esempio se metto la spunta aggiungiamo alcuni

adesso in questo momento praticamente la spunta ci dice quali sono le colonne dove vogliamo poter

gestire le proposte quindi in questo momento ci sta il codice fiscale nome cognome paziente che

significa vuol dire che potenzial, poi dovremmo configurarlo un

utente che genera proposte, un utente che è certificatore eccetera, però potenzialmente gli

unici campi che potrebbero generare proposte sono il codice fiscale, il nome paziente e il cognome

paziente. Se io cambio qualsiasi altro campo non genererà mai proposte aggiungiamoci anche giusto così per per fare un po di configurazione

insieme anche il sesso forse l'hai già detto questo asterisco che compare un significato

questo fresco ci sta ci sta ad identificare

Questo Asterisco ci sta ad identificare, attenzione, le chiavi evidenziate sono già utilizzate, se deselezionate al conferma verranno cancellati tutti i valori impostati.

Ah, è un numero di riferimento. chiavi di profilatura no? E poi dopo come administrator andiamo a dargli un valore alle nostre chiavi di profilatura create con la profilatura

configurabile. Quindi asterisco ci dice attenzione

hai già dato dei valori

poi in realtà alcune volte che succede

andando qua confermo eh quindi ho messo

il sesso e confermo intanto così

quindi qua ti dice che se lo sbianchi

ti va a cancellare

in automatico le chiavi di profilatura

i valori delle chiavi che hai dato. In altri contesti invece,

esempio qui, non te lo fa fare. Io mi aspettavo che l'esplicazioneso in basso come i contratti asterisco sempre in basso

quindi qua mettiamo il check

certificazione campo

io lo metterai anche alla data di nascita

altrimenti il codice fiscale diventa inconsistente

sì sì certo

questo qui ha senso tutto

la sestopla senso tutto

però adesso per fare un esempio

mettiamocelo

però

per fare un esempio

mettiamo anche data di nascita

e comuni di nascita

e 1, 2, 3, 4, 5, 6

ok

però questo check

lo dobbiamo mettere

anche a livello di

abilitazioni quindi qua clicchiamo su

abitazioni 123

conferma

ok poi vediamo che significa questo con la prossima slide

per ora ci limitiamo soltanto a mettere i check sotto certificazione

niente default

punto so confermato, riconfermo

e basta

abbiamo creato, quindi abbiamo fatto lo step 3

configurato i campi oggetto di proposta. Rientriamo con un utente amministratore e adesso

dobbiamo andare a attivare effettivamente le proposte, perché così abbiamo creato le chiavi di profilatura.

Adesso le dobbiamo andare ad attivare.

Dobbiamo riattivare sia a livello aziendale,

quindi vado sempre sulla mia azienda FM,

parametro,

anagrafiche,

pazienti,

vedete qua ci sta il tab campi

ecco

e gli dico

e vedete che qua adesso ho dei check sul certificatore

questo nome e cognome l'avevo fatto già con i vostri colleghi

quindi io gli dico ad esempio

guarda

attiva la gestione delle proposte

tra questi campi potenziali

potenziali perché?

perché ho creato solo la chiave di profilatura

sulla profilatura configurabile

attiva di fatto su tutti

conferma

ok

confermato

arrivato all'azienda

ora vado a prendere il mio utente

anzi non il mio utente

quello che dobbiamo ricreare

è la situazione delle slide

quindi devo avere un utente che si chiamerà utcert

e un utente che si chiama utprop

questo utente io già l' ho creati con i vostri

colleghi, quindi adesso me lo riprendo, anzi chiamavo utprop2, utente che genera proposte,

quindi avevo creato questo utente e su questo utente vado sulle sue abilitazioni, oppure

lo potevo fare a livello dell'ufficio o del ruolo di quest'utente.

Anagrafiche, pazienti, campi,

un secondo

ok

campi

e no, qui niente, scusate

cosa dico, no, qua

niente, basta un conferma

perché il default, poi lo vediamo che significa

questa, secondo me è meglio comunque andarci e fare un conferma, perché il default, poi lo vediamo che significa questa... Secondo me è meglio comunque andarci e fare un conferma, ecco. Però non bisogna fare nulla praticamente, perché qui, sul livello di abilitazione, sulla colonna certificazione dovremo dirgli...

magari, intanto ve l'anticipo,

poi perché sarà spiegato nella prossima slide,

bisogna dirgli, nel particolare,

per questo campo come si deve comportare.

Il default che è vuoto, appunto,

è genera proposte.

Il default.

E quindi, magari un conferma ridiamoglielo,

però è questo il default, genera proposte.

Però ci sta anche l'opzione certificazione automatica.

Cosa vorrebbe dire? Vorrebbe dire che se io metto qua

codici fiscali, certificazione automatica e confermo,

quest'utente mio, UTProp, genererà proposte per il comune di nascita, per il sesso, per l'ata di nascita, il nome, il cognome,

ma non per il codice fiscale. Per il codice fiscale è una certificazione automatica, quindi non ha bisogno di essere certificato da qualche altro utente.

Va direttamente sulla sua paziente.

Le modifiche sul codice fiscale, quindi serve a dirgli questo.

Ok, però adesso facciamo che genera proposte su tutti i campi,

quindi riconfermo,

e fine.

Per l'utente UT-Prop.

Adesso mi creo, sempre in seguito all'esempio della slide,

anche l'utente UTTCERT, questo qui.

L'utente UTCERT, anche questo io l'ho rifatto con loro, però ce lo vediamo.

Quindi cosa faccio? UTCERT, utente certificatore proposte, funzionalità risorse, anche qui anagrafiche, pazienti, ma quello che voglio mettere è questo

cecchettino qui, certificazione proposte di altri. Questo qui è quello che ci interessa

poi questo lo vediamo dopo

questo in realtà potrebbe essere anche così

qualsiasi cosa, per adesso non ci interessa

ci interessa certificazione proposte di altri

conferma

e adesso facciamo il nostro esercizio

cioè questo qui

creiamo questo use case e vediamo

il nostro Bianchi Marco diventare Bian questo use case e vediamo nostro bianchi marco

diventare bianchi paolo e vediamo che cosa succede ok tutto chiaro c'è una domanda adesso

no tutto ok perfetto io ho una domanda non vorrei romperti le uova

Volevo capire se si può fare la certificazione per livelli, cioè una sorta di prima approvazione, seconda approvazione da un utente diverso.

No, no, no, c'è solo un livello.

È secca.

Ok, ok, perfetto, grazie.

Prego.

Però poi magari questa cosa qui un pochettino si può allacciare con le proposte,

c'è solo questa cosa qui.

Però dopo, l'argomento dopo che affrontiamo, finita la gestione delle proposte,

ci sarà la gestione dei pesi, che invece lì è riguardo all'affidabilità del dato.

Non c'è una certificazione a livelli, però c'è una stratificazione del...

però c'è come dire una stratificazione del... dopo magari è un po' più chiaro, non voglio anticipare nulla, però sì, sulle sue proposte non c'è nessun tipo di livello, un livello solo che è l'utente certificatore che certifica. questo è Simone Simone Lucidi mi pare

con il mio utente mi creo il paziente

in modo da averlo già in pancia così proprio ricreo

il caso no? quindi il paziente

Bianchimarco già esisteva e l'utente proposto che lo cambiava

quindi intanto mi creo il mio

paziente

Bianchimarco

quindi qua

per adesso nulla di particolare scompatiente come tutti gli altri

70 milano

maschio ricalcola

la vano term confermo

termine. Confermo.

Ok, questo è l'ID del paziente.

Me lo tengo da parte.

E adesso iniziamo il nostro esercizio.

Quindi che cosa succede? Mi collego, qua mi dice che ho un paziente bianchi Marco e l'utente utt-prop fa la modifica da Marco a Paolo.

Quindi mi collego adesso con utt-prop.

Utt-prop2 lo vuol chiamare.

Anzi, seguiamo intanto anche passo passo sul DB.

Quindi, pz underscore id è uguale a questo qui,

il nostro paziente è questo.

Bianchi Marco, perfetto.

Vado sulla sa proposta, in questo momento che cosa c'è?

C'è tutti i campi che ho valorizzato

e il PR stato è A.

Che vuol dire A?

A vuol dire attuale.

Attuale è quando un campo,

scusa, proposte,

oltre a essere certificato,

e anche l'ultimo valore che attualmente si trova sulla sa paziente

via vuol dire soltanto attuale

ed è giusto perché adesso l'ho inserito con il mio utente Simone Lucidi

che non genera proposte, non fa niente per crearmi la situazione iniziale

io ho già un paziente inserito

quindi il mio paziente sta sulla sa paziente, sulla sa proposte

è tutto bello certificato, è tutto ad A attuale

partiamo da questo

adesso vediamo invece le proposte come si comportano.

Quindi sono con un utente che genera proposte, anagrafiche, paziente, gestione, mi cerco il mio bianchi,

il bianchi Marco se me lo fa fare

scusa

un utente che genera proposte

potrebbe fare un primo censimento

di un paziente?

ottima domanda

la risposta è sì La risposta è sì, però la risposta è sì. Le proposte di variazione sono speculari anche per le proposte di inserimento di un paziente l'unica differenza, funziona al stesso modo

l'unica differenza è che

per gli inserimenti

mentre per le variazioni come vi dicevo

l'utente che genera

proposte e fa

una proposta di variazione e per quanto la sua

proposta non vada ad intaccare la

sa paziente, quindi il nostro bianchi

Paolo in realtà sulla sa paziente rimane

Marco, abbiamo detto

tutte le proposte già vede paolo no è l'unico che già vede paolo mentre gli

altri ok mentre gli altri continuano a vedere bianchi marco in realtà per le

proposte di inserimento il paziente già visibile a tutti ok però sta comunque

come dire una zona in cui deve essere deve comunque

essere certificato approvato se viene rifiutato a quel punto non è visibile più

a nessuno l'inserimento ok però quell'inserimento temporaneo è già

visibile a tutti quella differenza da uno sguardo

ok quindi mi cerco il mio paziente

Bianchimarco, abbiamo detto, lo trasformo in Paolo

ma ricambio anche il sesso

conferma, scusa, campi, abilatori, documento, conferma

ok, mantengo il codice fiscale precedente, o l'ho ricalcolato, non so cosa ho selezionato, conferma.

Fine. Vediamo, sulla SAC, quindi ho cambiato Paolo, io vedo Paolo e il sesso e io vedo il sesso femmina.

vediamo sulla

sapaziente che è successo

vedete

Bianchi Marco

sesso maschio, ne è cambiato una virgola

sulla sapaziente

però il mio utente legge Paolo Femmina

un utente che genera proposte

qua però ancora è scritto in realtà

Marco Maschio

tutto il mondo quindi continuerà a leggere

Marco

Marco Maschio, tutto il mondo quindi continuerà a leggere Marco Maschio, però se io vado sulla fiscale, invece di premere annullo ho premuto ok, quindi l'ha ricalcolato.

E però anche il codice fiscale noi abbiamo messo sottoposto a proposte e quindi giustamente anche il codice fiscale è T.

Anche qui la variazione da Marco a Paolo è T e la variazione da Maschio a Femmina è T.

Ok?

Aspetto.

Ora.

Meglio.

Ora, poi l'altra partizione che ho fatto,

che il documento, quella invece, vedete,

ho anche valorizzato il campo documento,

perché me lo chiedeva come campo obbligatorio,

e quella è andata da, perché?

Perché quello non è un campo soggetto a proposte, quindi

quello me l'ha messo direttamente

quindi l'aveva messo anche sulla sua paziente

e lo sanato le da. Adesso

io sono

faccio logout, faccio login

adesso con l'utente invece di certificazione

che certifica, pazienti, gestione, cerco il mio paziente, vedete che qua vedo

ancora Marco, sesso maschio, ok? Giusto per farvi vedere.

Però, questo utente certificatore, in realtà, ha un suo punto di menu che si chiama

anagrafiche pazienti proposte, in questo caso, di variazione.

Proposte variazioni temporanee.

Ok, vediamo qua, si filtriamo.

Ricerca.

Mentre che carica è una curiosità

Nella maschera, quando stavamo creando il paziente

Quando stavamo creando il paziente

Sì

In corrispondenza del codice fiscale

C'era anche l'icona con un barcode

È possibile acquisire il codice fiscale anche tramite il codice a barre della tessera sanitaria

Sì, sulla ricerca, giusto però?

Sì, mi ricordo se la su ricerca

o creazione

Per cercare tramite

codice a barre

Yes, yes

Ok, ecco caricato

vedete, queste sono le colonne che noi abbiamo definito

su quella dualista, infatti ci avevamo aggiunto

il comune di residenza Ok, queste sono le colonne che noi abbiamo definito su quella dual list, infatti ci avevamo aggiunto il comune di residenza.

Queste sono le colonne che può vedere.

Facendo clic qui, mi fa vedere la proposta di variazione. Qual è?

Allora, per questo paziente qui, oggi alle 9.35, l'utente PROP 2 ha modificato il codice fiscale ed è una proposta temporanea, il documento ma è certificato, si sa che è una cosa per nome e cognome normalizzato, ma sesso e nome no e codice fiscale no. può selezionare e decidere rifiuto o certifico.

Rifiuto, senza che lo vediamo,

metterà semplicemente queste qui, AR, rifiutato e fine,

e muoiono lì quei record.

Vediamo invece cosa succede col certifica.

Certificato.

Quindi adesso, per questi record qui qui rinfresco la query

tac, vedete?

non sono stati aggiunti dei record

ma i record precedenti

quindi questo cfis, nome

e

lo sta il sesso, eccolo qua

sono diventati dati e sono passati ad A

se vado adesso sulla salvaente, ecco qua che il mio

bianchimarco è diventato Paolo Femmina per tutti, sulla sapagente.

Ok?

Ok.

Ecco, adesso torniamo a vedere quella questione dei campi.

Così vediamo un attimo che significa.

Allora, l'attività del certificatore, quindi questo è un lavoro che ha fatto il nostro T-Cert, può essere anche estesa definendo degli utenti che sono certificatori automatici.

Quando un utente è definito certificatore automatico, in questo caso, a prescindere che le proposte siano attive o meno, i dati di quegli utenti sono subito effettivi.

Faccio un esempio, adesso prendo il mio utente utcert2, questo è il mio utente che certifica le proposte, quindi abbiamo bisogno andare su anagrafiche, pazienti,

pazienti lui è certificatore di proposte di altri

ma paradossalmente

per come è la configurazione in questo momento

UTCERT2 può certificare le proposte di altri

ma se anche UTCERT2 inserisce un modifico a un paziente

anche quello è soggetto a proposte in questo momento

quindi solitamente

chi certifica le proposte di altri

viene anche censito come certificatore automatico,

mettendo qui la spunta,

vabbè, se solo sull'inserimento,

di solito è inserimento e variazioni,

cioè se uno può certificare le proposte di altri,

figuriamoci se non può autocertificarsi,

diciamo, le sue.

In questo caso, quindi,

quello che fa questo utente

sulla maschera del paziente diventa subito effettivo sulla sa paziente.

Oppure, uno può andare a indicare, come vi anticipavo prima,

su ogni singolo campo,

indicare, come vi anticipavo prima, su ogni singolo campo queste opzioni.

Allora, nulla, sono nulla, certificazione automatica è richiesto.

Allora, nulla è il comportamento di default, è quello che ci siamo detti, quindi qualsiasi modifico, inserimento anagrafico, termina nell'area temporanea.

Quest'opzione non ha valore, ovviamente, se l'utente è stato denominato certificatore automatico, quindi la combo box che vi ho fatto appena vedere.

Richiesto invece, questo ha solo senso per utenti certificatori automatici,

le modifiche in questo caso sono quando ci sta questo,

se sono certificatore automatico e per un campo, per un campo,

per uno di questi campi ho messo l'opzione richiesto,

significa che le modifico siano sempre subito effettive,

mentre gli inserimenti terminano nell'area temporanea in caso di mancanza di uno dei campi richiesto.

Quindi vuol dire che se io metto codice fiscale richiesto,

Quindi vuol dire che se io metto codice fiscale richiesto, se io modifico un paziente, qualsiasi campo, codice fiscale comune, eccetera, sono certificatore automatico, perché mi sono censito qui come certificatore automatico, quindi a prescindere, in variazione, qualsiasi cosa faccio è certificata automaticamente, boom, va lì sul DB, la paziente fine.

Però, in inserimento, se io inserisco un paziente e non compilo i campi richiesti, come ad esempio,

non compiere il codice fiscale, allora l'inserimento, sebbene io sono certificatore automatico,

anche quello va in area temporanea. In ultimo, certificazione automatica, questo invece al

contrario ha senso solo se l'utente non è un certificatore automatico. Gli inserimenti

non sono mai certificati, mentre le variazioni lo sono soltanto per i campi indicati. Quindi

se io invece sono un utente che genera proposte e

il genere metto su codici fiscali certificazione automatica che vorrà dire vorrà dire che genererò

proposte per il comune di nascita per il sesso ad nascita nome e cognome mentre per il codice

fiscale no parolosalmente no quindi va a finire direttamente sulla sapatiente

paziente. Any question? Ignorate tutte queste colonne qui, che non c'entrano nulla, dopo le vediamo con le slide successive, è un altro argomento, le proposte è questo qui,

certificazione, questa colonna qui che cerco di evidenziare, quella terza. L'unica domanda

è perché la certificazione automatica?

Perché così non devi modificare la profilatura?

Perché se poi modifichi la profilatura...

Cioè se un campo è a certificazione automatica, non richiede approvazione...

Esatto.

Ovviamente se modifica la profilatura perdi tutto.

Cioè perché non rimuovere quel campo dalla profilatura?

Perdonami, non ti capito, nel senso...

Allora, se un campo è a certificazione automatica significa che non richiede approvazione.

Esatto, perfetto.

E allora a quel punto perché non si rimuove direttamente dai campi? Sì, sì, consegna che tante cose sono fatte per, ad esempio questa cosa qui del richiesto

che vi ho detto, mai vista sinceramente sulla faccia della terra questa opzione utilizzata,

quindi tante cose sono fatte per dare tutte le massime possibili margini di flessibilità,

configurazione eccetera, se no assolutamente sì, cioè se qua tu dici, ma in realtà ti dirò di più, certificazione automatica, potrebbe avere senso magari su qualche campo minore, ok, che dove magari, che ne so, l'ata di scadenza, STP, indirizzo di esidenza, eccetera, però come dici tu, se è un campo minore, se quindi è autorizzato a certificare,

tanto vale che non lo metti neanche da proposta, assolutamente, però è stata fatta così per dare tutto il massimo grado di libertà.

Diciamo che attivando la proposta sul campo codice fiscale e dandoti la possibilità poi di andare qui a dirli certificazione automatica,

poi per di andare qui a dirli certificazione automatica hai una granularità maggiore perché qua in realtà li sta dicendo che certificatore automatico è soltanto l'utente UT Cert2 tutti gli altri utenti che dove qua tu non ci metti certificazione automatica continueranno a generare proposte.

per dare questo massima che è chiaro tutti gli incroci possibili poi dopo che effettivamente ci

siano dei casi d'uso reali dove viene usato un altro paio di mani che ovviamente vi spiego le

funzionalità per quello che ci sono domande

l'icona che c'è la riga codice fiscale

questa specie di robotina

indica che è un campo calcolato

no, questo qui vuol dire

allora, vuol dire che

quello che vedi qua

è il default

è infatti quello che abbiamo messo in profilatura configurabile

ti ricordi, in profilatura configurabile

il default non l'abbiamo indicato

l'abbiamo lasciato bianco

quindi ci sta

dicendo che il valore che vediamo qui

è lo stesso

del default. Qua invece

è cambiato perché? Perché nonostante sia il default

io qua prima ho messo un qualcosa

poi sono

tornato sul default e ho confermato. In questo

caso lui cosa ha fatto? A prescindere che sono tornato

indietro, lui ha scritto

un record sulla sikera di dat dati per questo utente qui. Quindi mi dice attenzione, questo valore che vedi è il valore che leggi sulla SikeraDat dati utente. In questo caso invece col foglietto dice guarda il valore che vedi non ci sta sulla SikeraDat dat dato utente perché semplicemente sta prendendo il default.

Ok, capito.

In realtà ci sono poi un'altra riconcina, però per vederla facciamo una prova a vedere qua in giro cosa abbiamo.

Eccolo qua. Qua ci dice, ecco se clicco qui, qua ci dice questo valore che vedi lo ha ereditato dal ruolo.

ok?

quindi anche qua, ce l'hai sulla sigherata di utente sì, però perché c'è il

kr, ti ricordi, kr ereditato

r, quindi ci dice che

questo utente qui ce l'ha perché

se lo sta prendendo dal ruolo

poi c'è un'altra riconcina

che invece è fatta a forma di

di capannone

industriale, non so perché

e in quel caso ci dice che

quel valore

che vediamo è ritirato dall'ufficio

ok?

ok, grazie

ok ragazzi, questa insomma è la

la gestione delle

proposte

qua avete tutti quanti

tutte quante le tabelle

utili

voglio farvi un'altra cosa

ah ok

a livello di java in realtà l'abbiamo un pochettino anticipato ieri

le classi sono queste qui

quindi il fatto che

su un bin dove potenzialmente

voglio gestire le proposte devo avere

innanzitutto un anagrafico e memento

che si chiama anagrafico e memento

non gdbc memento

e poi

niente, questa è l'unica cosa che devo definire

perché poi dopo il resto

è automatico perché?

perché abbiamo detto che

su Sianc

sul progetto Sianc

è definito un service manager

customizzato

che è questo Sianc service che estende an, che questo sia anche service

che estende anagrafiche service

e che qui al suo interno

utilizza un anagrafiche

persistent manager

che al suo interno utilizza

un anagrafiche persistent handler

e qua dentro poi

insomma faccia tutta la logica

per cui va

a eccolo qua ad esempio sull'internal store, quindi quando viene fatto il salvataggio di un bin,

vedete, prima cosa dice il memento del bin è un'istanza dinagrafica e memento, se no, dice proposte non gestite dal bin,

se no dice proposte non gestite dal bin e poi

lui fa

ecco il memento non può gestire le proposte

utilizza l'implementazione standard e poi fa la super

perché tanto questo anagrafica e persistent handler

implementa gdbc persistent handler

che abbiamo visto venerdì scorso

quindi fa la super

quindi ignora, dice vabbè

mi sta usando questo qua

però non è

non ci posso gestire le proposte perché il memento è un gdbc memento, quindi faccio la super.

Altrimenti, ok, incomincia, fa innanzitutto la prima considerazione che vi dicevo, cioè dice, fa verificare, sono attive le proposte?

Fa verificare, sono attive le proposte?

Sono attive le proposte?

Per sapere se sono attive le proposte? bisogna invocare questo metodo

per attivare le proposte

poi di fatto sul movimento

e questo qui

questo enable proposte

esatto

questi qua tutti i test

questi ignorateli

questi qui sono i test JUnit questi qui sono i test JUnit.

Esatto, vedete che alla fine, vedete che ieri abbiamo visto che l'anagrafica di momento stava anche sul comuni, sulle province, però ho detto che quello è veramente un copia e incolla perché tante cose...

cose ovviamente non ve lo farete anche voi, fate fa prima a copiarle e incollarle da

un'altra classe senza starsi a reinventare la ruota.

Quindi di fatto avevamo visto sui comuni e province, però lì non sono attive le proposte,

le proposte come dicevo sono attive soltanto sui pazienti, sui dettagli dei pazienti,

venevo il proposto di dettaglio, e sui soggetti.

e sui soggetti.

Per poter, dicevamo, attivare le proposte, quindi in realtà il delta, la cosa effettiva, è questo metodo enable proposte.

Questo enable proposte è una chiamata, almeno la nostra grafica di evento, dove gli dobbiamo passare queste quattro informazioni principali.

La quinta sarebbe il lookup, quindi che cos'è? La proposte? Quello che troviamo poi, che abbiamo visto qui dentro,

su questa colonnina qua, PR lookup, questa è facile, dopo la vediamo.

La stella che dovrà gestire, che sarà sottoposta a propCert, PZDTCert, PZCert.

PZFCert forse, mi ricordo.

PZ, PZFCertif. Tre campi, poi i nomi possono essere qualsiasi, questi tre campi, utente, certificazione, della certificazione, certificazione.

Questi tre campi però vengono usati se soltanto e solamente per le proposte di inserimento ok quindi questo in realtà non è stato sottoposto

a proposte di inserimento perché l'ho inserito

direttamente io con l'utente

sim lucid quindi non è

stata certificata l'inserimento

non c'è una data e in realtà

qua mette a t

la proposta di inserimento

però in realtà questa non è la proposta di inserimento

perché l'ha messo T?

io ho fatto con l'utente che non ha le proposte

che cavolo di T è

c'è lui

vediamo un po'

PZ

PZ

il mio posto

quello quale dice che è una proposta di inserimento però in realtà non può essere

perché ho fatto un po

un po di posto inserimento filtri bianchi è temporaneo

è comodo per vedere quello che diciamo

prima qualcuno mi ha chiesto

forse Gianfranco, non mi ricordo

come si comporta per le proposte di inserimento

vedete che qua effettivamente

per questo paziente con l'utente Simone Lucidi

adesso andiamo a vedere un attimo la configurazione che ci ho fatto, però pensavo di aver fatto una configurazione dove ero autorizzato a fare tutto.

L'utente Simone Lucidi produce proposte di inserimento, quindi io con questo utente ci ho inserito il paziente Bianchi Marco all'inizio ed è stata inserita in realtà una proposta di inserimento che dovrebbe essere certificata, però come vi dicevo, le proposte di inserimento sono in

realtà visibili già tutti, già dal

principio, non è come le proposte di

variazione, quindi infatti il paziente

poi l'abbiamo potuto ricercarcelo,

trovarcelo, eccetera. Quindi poi qui

posso rifiutarlo e rifiutandolo il

paziente rimarrebbe sulla sa paziente rimarrebbe sulla paziente ma stato disattivo oppure certificarlo.

Se lo certifico...

Scusa, ma in pratica l'aver certificato quella proposta di variazione non impatta sulla certificazione

dell'inserimento, sono due cose

proprio, due binari distinti

infatti sono due cose che proprio

secondo me c'è stato qualche problema

di configurazione

sono due binari diversi

non si dovrebbero accavallare le due cose

il certificatore

non dovrebbe vedere che ci sono due cose da

certificare fondamentalmente? Né, nel senso perché le proposte di inserimento e le proposte

di variazioni sono su due monitor diversi. Ah, eccolo. Questo è il motivo. Quindi prima

abbiamo fatto le proposte di variazioni e lì ti fa vedere soltanto che ci sono delle

variazioni su una posizione anagrafica. Lì effettivamente non ti dice se la posizione anagrafica è certificata

o meno, però ce lo potremo anche

aggiungere perché quello che

noi riusciamo a vedere

nel pannello qui

delle proposte di variazione, adesso

non ce l'ho più

vedo le

certi rifiutati

che vedo, certificate

vediamo un po'

certificate

quello che io posso vedere qui

come colonne

le posso scegliere tramite

abbiamo detto parametro aziendale

quindi magari io qua mi potrei aggiungere

un'informazione

sul fatto che

se il paziente è stato certificato

l'inserimento o meno

che vorrebbe dire praticamente

esporli qui come colonna aggiuntiva a questo PZFCertif.

Però fondamentalmente sono due cose proprio diverse,

quindi per questo inserimento è un monitor, per questo variazione è un altro.

Ora qua perché l'ho inserito con Simone Lucidic pensando che fosse un utente

che è certificatore di tutto il mondo, capo assoluto, invece no.

Adesso vediamo un attimo la configurazione, ma in realtà

è configurato per generare

proposte di inserimento

ok

però adesso l'ho certificata questa proposta di inserimento

adesso ci è utile per vedere

il valore di questi tre campi che vi dicevo

quindi abbiamo

UTCERT, l'utente che ha certificato

il paziente, l'inserimento, DTCERT la data e PZFCERT, lo stato che adesso è certificato. Questo può essere soltanto C, T o R, non può essere A, come per le altre proposte.

Un bin, una tabella, per poter generare le proposte deve esporre questi tre campi, che poi devono essere dichiarati qui nell'enable proposte.

Questi altri campi qui, invece, sono una stringa comma separati dove ti dice tutti quei campi che, a prescindere dalla configurazione che posso fare, non genereranno mai proposte ok quindi faccio un esempio magari qua su

tutti i campi ad esempio flag ok che

dicono ad esempio pg da fonte venuto

il livello valorizzato in caso di

integrazione per tenere traccia della

fonte che ha inserito un paziente di

disorgente serve per tenere traccia

del d sempre in caso di integrazione

remoto hl7 come suggerisce il nome

sempre integrazione f compilio questo come suggerisce il nome sempre integrazione

Fcomple questo è un flag

e così via dicendo

le note

a discrezione ovviamente nostra

se ci sono dei campi che sappiamo non avere senso

che siano sottoposti a proposte

che se variano

non serve tracciarle

e lo specifichiamo qua

con una stringa comma separated

ok?

quindi questo è il primo step

quindi questi primi tre

diciamo, quei primi tre campi

quelle tre colonne sono

come se fossi i campi di controllo

relativi al mondo proposto

esatto, però che vengono usati poi di fatto

soltanto nell'inserimento però gli per il nostro

quindi se esempio per assimo anche certificare proposte inserimenti del nostro b corso prima

di ingere dobbiamo creare queste nuove tre colonne ci versetto perfetto esatto e dargli e creare su

sostituire il gdps in evento in anagrafiche in evento.

Ok.

E poi lì finisce così.

Poi dopo il fatto che lui,

quindi lui, insomma, questo sa se sono attive le proposte.

Poi,

il sender le proposte, questo qui dovrebbe essere,

vediamo un po',

il fatto è true,

accendere, esatto è true scendere esatto

quindi questo qui

quindi proposte enable è true

se abbiamo questi campi, create proposte

questo è true di per sé perché

la grafica è per system manager

può gestire le proposte, yes

e quindi

poi a questo punto, in base a questi

booleani, lui dice internal store no proposte, internal store con proposte.

Quindi dice, se attiva le proposte, anzi, se non è attiva le proposte, fa questo internal

store no proposte, che fondamentalmente fa, alla fin fine, fa super internal proposte,

quindi torniamo al JDBC per System and Ender Standard.

Altrimenti fa internal store con proposte.

Ed in questo caso qui,

arriviamo al nostro,

qua va a controllare se è un utente,

certificatore, non è certificatore, eccetera, eccolo qua.

Ha il nostro metodo generazioni proposte,

che va a scrivere le proposte tramite questo oggetto Writer Proposte.

Ed è lui che finalmente, alla fin fine, va a scrivere sulla sa proposte.

Eccolo qua. Va bene? fine va a scrivere sulla sa proposte va bene

è stato certificato del temporaneo ma soprattutto qua la costruzione degli statement tutto tutto qui va bene ora volevo un attimo

fatemi un attimo ricontrollare sta cosa qui del mio utente perché capire un attimo

cosa dell'utente della proposta di inserimento

ho fatto con questa azienda

di Cagliari

perché me l'ha fatto

anagrafiche, pazienti

non è manca attiva le proposte

o sono attiva? vediamo un po'

vediamo, l'azienda 38

forse si però mi sto tenendo un dubbio

qua su qualche azienda in Sardegna

attiva le proposte

azienda 38

azienda 38, parametri anagrafiche, pazienti, gestione proposte attive sì. Allora, perché

sull'azienda 38 attiva la gestione proposte? Sì, però, secondo me qua hanno fatto una configurazione a metà perché vedete che non è su questa azienda attivo, non è specificato indicati nessun campo che è soggetto a proposte, di fatti questo in effetti vorrebbe dire che le uniche proposte che sono state attive sono

quelle in inserimento. La cosa problematica è che qui il mio utente, quindi le proposte di variazione

non esistono sull'azienda 38 perché le proposte di variazione ovviamente intervengono campo per

campo e qui non ho nessun campo, vedete? Tutto lo colo con una certificazione

configurata, quindi le proposte di variazioni fisicamente non se ne possono creare, in questo

modo qui. Però al tempo stesso il mio utente certificazione automatica e inserimenti variazioni

nessuna, quindi di conseguenza tutto ciò che lui inserisce è una proposta di inserimento.

Quindi di conseguenza tutto ciò che lui inserisce è una proposta di inserimento.

Poi diciamo noi qua abbiamo fatto una cosa cross perché noi abbiamo un'azienda, io ho inserito l'utente con l'azienda 38 di Cagliari che crea proposte di inserimento e poi su quello stesso paziente ho fatto le proposte di variazioni sull'azienda FM che invece gestisce le proposte di variazioni quindi aveva fatto una cosa un po' cross quindi al netto

di queste cose

di questi incroci di configurazione

comunque sì, nel senso

le proposte di inserimento e di variazioni

sono due filoni diversi, infatti avete due monitor diversi

come vi dicevo

anche una proposta di inserimento

è semplicemente, tra virgolette

un flag qui dentro sul PZFCertif del paziente, quindi lo marca come T, temporaneo.

Però di fatto l'anagrafica è già visibile a tutti, tant'è che appunto ci siamo riusciti a generarci sopra ad un paziente inserito in maniera temporanea, ci siamo riusciti a farci sopra delle variazioni alla sua volta temporanee quindi sì c'è stata questa diciamo

assurdità per cui

con la configurazione che abbiamo

abbiamo fatto, abbiamo certificato

una variazione su un paziente

che però è temporaneo

questi sono incroci di configurazioni

che

dopo le configurazioni vanno fatte a modo

ecco qua in ambiente di formazione

ho fatto un po' di casotto.

Però, vabbè, ci siamo visti entrambe le cose, comunque il funzionamento è questo, insomma, adesso questa piccola assurdità la possiamo anche lasciare.

va bene

ok

quindi questo è quanto

sulla sa proposte

non c'è altro

da dire

non c'è altro da dire non c'è altro da dire. Non c'è altro da dire.

Non c'è altro da dire.

Non c'è altro da dire.

Va bene, va bene, va bene.

Ora arriva la cosa più complicata, che è la gestione dei pesi. Complicata perché? Adesso faccio una premessa perché di solito qua c'è sempre un problema. Qui la colonna riguardo i campi che sono soggetti a proposte si chiama, mannaggia chi l'ha messo, quel nome, la colonna si chiama certificazione.

Adesso qua cambiamo argomento, parliamo della gestione dei pesi, anche qui parleremo di certificazione, ma non c'entra assolutamente nulla.

Non c'entra assolutamente nulla la certificazione che parleremo adesso. Diciamo che la gestione

proposte e la gestione pesi solitamente sono, generalmente sono, non è che sono mutualmente

esclusivi in realtà, perché di fatto fanno due cose diverse,

però sono due argomenti, sono il giorno e la notte, sono due cose completamente diverse,

però in entrambi i casi si parlerà di certificazione.

Però mentre sulla proposta si parla di certificazione, inteso come,

più che certificazione qui come nome dovremmo metterli approvazione, ecco. Quindi quando si parla qua di certificazione inteso come affidabilità del dato

iniziamo a parlarne

poi dopo vediamo

per dirvi che questo argomento

per mettere una barriera

l'argomento con cui cominciamo a parlare

distinto completamente

con la proposta

non sono

non sono interlacciati per loro suoi però prima di andare avanti sono altre domande sulle proposte, ok? Non sono interlacciati per loro.

Suai, però, prima di andare avanti, sono altre domande sulle proposte?

Non ve l'ho chiesto. Sono altre domande?

No, nessuno.

Ok.

No.

Ok.

Allora, la gestione dei pesi permette di definire l'affidabilità dell'inserimento modifica di un campo da parte di un utente.

Questa funzionalità è importante per impedire che il campo inserito da un utente autorevole, qua c'è un esempio della regione, possa essere modificato da chiunque.

gli pesi hanno il loro compito principe, lo vedremo sulle maschere applicative per avere una visualizzazione, per avere un esercizio tangibile, lo vedremo sulle maschere applicative, però in realtà la gestione dei pesi trova il suo massimo utilizzo, la sua massima espressione, in realtà nell'ambito dell'integrazione enagrafiche. faccio un esempio se io mi sono integrato con Sogei e Sogei mi manda un paziente

Sogei

nell'ambito quantomeno

dei campi fondamentali

nome, cognome, cose fiscali

è la massima autorità

Sogei dice che Mario Rossi si chiama Mario Rossi

è Mario Rossi

punto

è la massima affidabilità di quel dato

tale per cui vogliamo che nessuno

possa cambiare Mario Rossi

cioè non c'entra niente alle proposte

cioè non voglio manco che qualcuno mi possa

potenzialmente proporre una variazione

su quei campi

per questo è diverso

noi vogliamo bloccarlo

renderlo ineditabile quel campo

omnia secula seculorum.

Soltanto Sogei, un bel giorno, se il tizio va alla nagra,

se si cambia il nome, Sogei mi dirà, no, Mario Rossi,

non si chiama Mario Rossi, si chiama Rossi Giovanni.

Se me lo dice Sogei, allora ok, potrò cambiare quel campo,

altrimenti no.

Faccio poi le sue strade di esempio.

Allo scopo, questa gestione qui viene detta appunto gestione dei pesi

e tiene traccia della sorgente del dato, quindi chi ha fatto la modifica,

la data di validità, quindi la data in cui è stato valorizzato,

il peso del dato, e vedremo cosa significa, comunque è un numerico

che esprime appunto il peso quindi quanto è affidabile

quel dato e questo flag di certificazione indica se il dato è da considerarsi certificato da non

confondere con le proposte non c'entra niente è un flag in più per ciascun campo sottoposto appesi è

possibile visualizzarne le informazioni tramite l'apposso tasto extra, poi lo vedremo. Però facciamo prima l'esempio così.

Supponiamo che io ho tre utenti, il mio utente infermiera a cui ho dato un peso 10, un numero 10,

l'ho associato, utente caposale a cui associo un peso 50, l'utente sardegna un peso 100.

L'utente infermiera inserisce il paziente Bianchi Paolo.

L'inserimento avviene con il relativo peso.

Quindi va a finire sulla sua paziente e sulla sua proposte, quindi anche i pesi lavorano, si appoggiano sulla sua proposte,

troveremo che Bianchi Paolo...

Quindi i valori old, questo è l'inserimento, quindi old è niente, new è bianchi, new è Paolo, e questi due campi hanno un peso 10, derivato dal peso dell'utente che l'ha inserito, infermiera.

L'utente capo sala modifica il nome del paziente in marco

la modifica a questo punto avviene anche questa con relativo peso

quindi che succede?

sulla sa paziente ci va sempre a modificarlo

sulla sa paziente direttamente

non c'entrano le proposte

va a modificare sulla sa paziente

però sulla sa proposte viene fatto

viene marcato anche

che quindi da Paolo

sono passato a Marco e il peso di questa modifica è 50 perché l'ha fatto l'utente caposala.

Quindi per il pizzato nome io sulla proposta ci avrò due record. Uno è il primo inserimento fatto dall'infermiera con peso 10, poi la variazione della caposala fatto con peso 50.

variazione della caposala fatto con un peso 50.

Recitiamo Finesson?

Ora, l'utente infermiera prova a modificare nuovamente il paziente e cerca di riportarlo nuovamente a Paolo, ma la modifica non è ammessa perché il sistema andrà a vedere

tu mi vuoi cambiare Marco il Pizzata nome in Paolo.

Che peso hai tu? 10. Eh, ma l'ultima modifica in Marco, me l'ha fatta la caposala, il cui peso è 50.

Tu sei meno importante della caposala e quindi ti do un errore.

L'utente Sardegna invia una modifica sul nome del paziente confermando che il vero nome è Paolo, quindi c'aveva ragione l'infermiera.

Quindi viene fatta la modifica, quindi diventa Paolo sulla sua paziente, viene tracciato sulla sua proposta e mettendogli il peso dell'utente Sardegna che è 100 e a questo punto la modifica è ammessa e a quel punto né l'infermiera né la caposala saranno più in grado di modificare questo dato, perché non c'è più nessun utente la cui affidabilità è superiore all'utente Sardegna.

Quindi in futuro solo l'utente Sardegna potrà modificare questo campo.

Fine. Domande?

Sembra abbastanza chiaro

il concetto è

non è complicato

questo è quanto

ora in Sardegna

è attiva la gestione dei pesi

è attiva però è attiva una versione un po' semplificata

noi vediamo un po' quella un po' più complessa, poi dopo le rimettiamo come era prima,

che mi sa che questo ambiente di formazione l'abbiamo già un po' intrecciato abbastanza.

Allora, come si attiva la gestione dei pesi?

Allora, si attiva anche qui sulla profilatura configurabile,

sulla profilatura configurabile diciamo che vogliamo attivare i pesi.

Gli dobbiamo indicare anche qui i campi che vogliamo sottoporre a pesi.

Quindi non è che attiviamo pesi su tutti i campi del paziente,

ma anche qui, simile per le proposte, dobbiamo dire su quali campi vogliamo attivarla.

Poi, per ciascun utente, diciamo, per i campi che sono soggetti a pesi, qual è il loro peso,

quindi dirò che l'utente infermiera ha sul cognome peso 10, la caposalla sul cognome ha peso 50,

cognome peso 10, la caposalla sul cognome ha peso 50, la utente Sardegna sul cognome peso 100. Quindi campo per campo ha un suo peso. Vediamo quindi come si

fa nel nel dettaglio. Bisogna loggarsi quindi con un utente che ha la profilatura

configurabile abilitata. Configurazione, avanzate, profilatura configurabile abilitata, configurazione, avanzate, profilatura configurabile.

Una volta che ve lo imparate qual è il punto di menu, non serve che lo selezionate qua,

grafiche, pazienti, gestione, è il 17, quindi l'autocompletamento vi aiuta, 17,

17 quindi l'autocompletamento vi aiuta 17 tac configura

configura

ecco bisogna mettere questi tre check combo allora il primo check è per dirgli attiva o disattiva la gestione dei pesi.

Anche qui al solito, qui hanno anche messo adesso, non li tocchiamo perché facciamo troppi danni,

però loro cosa hanno fatto? Hanno messo il check su gestione dei pesi, quindi per attivarla,

e hanno messo anche il default.

In questa maniera qui, quindi, questo che fa, crea un parametro aziendale

e quindi lo valorizza anche di default

tutte le aziende

quindi attiva la gestione dei pesi su tutte le aziende

con questo check di default

se non l'avessero messo che cosa succedeva?

che mettendo il primo check si creava la chiave di profilatura

di tipo parametro

poi su ogni singola azienda dovevano andare a dire

si attivala o non attivala

poi il default è opzionale questo obbligatorio singola azienda dovevano andare a dire si attivala non attivala

poi default è opzionale questo obbligatorio obbligatorio però anche questo modificabilità in base al peso bisogna anche selezionarlo

e qua che cosa serve a dirci ci dice

praticamente selezioniamo l'algoritmo

con cui comprendere l'affidabilità di un dato.

Cioè, loro hanno attivato solo certificatore,

quindi hanno fatto un po' più semplice.

Ok, questo ho detto.

Adesso facciamo quella un po' più complessa,

che così è più chiaro anche questa,

più semplice che hanno fatto loro.

Noi faremo peso crescente e certificatore.

Però le altre, vediamoli in attimo, le altre.

Cioè peso crescente, quindi peso crescente semplicemente

è considerato più affidabile un utente che ha un peso maggiore.

Peso del crescente funziona al contrario,

viene considerato più affidabile un utente che ha un peso minore.

Sempre modificabile vuol dire praticamente disattivare la gestione dei pesi.

Peso crescente certificatore è una combinazione del peso crescente solo certificatore e peso decrescente solo certificatore.

Vedremo che solo certificatore è un fleggettino in più.

Quindi magari io l'utente Sardegna gli ho dato

peso 100

perfetto

magari però dopo creo anche l'utente Sogei

gli do sempre peso 100

magari li considero uguali

però gli metto il flag certificatore

quindi gli do un'importanza un pelino di più

ok?

è un po' più importante però perché non mi limito magari a dargli semplicemente

un peso maggiore è perché in realtà il certificatore mi serve per dire guarda effettivamente per questo

dato questo utente è il certificatore perché magari è lui che lo ha è lui competente per il rilascio

di queste informazioni esempio so già in effetti lo è per i dati anagrafici, no? Lo è.

Magari, che ne so, per i dati relativi, che non so, al comune di residenza, ok?

E magari certificatore il comune, l'utente comune, ok?

L'ufficio anagrafe è certificatore, è competente per dimostrare che quella paziente risiede in un dato comune.

Quindi il flag è per dire questo cos'è più in più, dice sì, ma questo è proprio quello che lo rilascia, questo dato, quindi è più importante.

quello che lo rilascia questo dato, quindi è più importante.

Quindi questo, il peso crescente va a vedere solo il peso, il più alto vince,

il peso decrescente va a vedere solo il peso, il più basso vince,

il peso crescente certificatore va anche a vedere il flag certificatore,

sempre modificabile vuol dire spegnerlo.

L'ultima non l'ho mai vista in nessuna parte del mondo configurato, però potenzialmente voi cosa potete fare?

in nessuna parte del mondo configurato, però potenzialmente voi

cosa potete fare? Potete andare qui

sullo scripterino

ok? Crearvi una vostra

funzioncina Rhino

dove fate tutto quello che vi pare

potete implementare il vostro personale

algoritmo di gestione dei

pesi di affidabilità quindi capire se uno può modificare non può modificare

metterlo qua e poi specificare dovete però attivare questo parametro qui

specificare scrivere qui dentro il nome della funzione javascript che avete che

avete creato mai visto nessuna mondo questo è sempre per come dire per

mantenere il massimo grado di flessibilità ok però potenzialmente

addirittura vi potete scrivere la vostra funzione, il vostro algoritmo.

Ora ripeto, in Sardegna va a vedere soltanto il flag certificatore, non è che va a vedere i pesi,

quindi praticamente gli utenti possono fare quello che vogliono fino a quando un utente che ha il flag certificato,

un utente che ha il flag certificato, il flag certificatore,

ci mette, come dire, marca una modifica fatta da lui,

a quel punto nessuno può più toccare quel campo.

Vediamo però, per riprodurre l'esempio che vi ho fatto nella slide,

peso crescente certificatore.

Confermo.

Domande fino adesso? Che rimetto sul flag default, colonna gestione pesi, si attiva all'interno dell'azienda o per tutte le aziende?

Se metti default per tutte le aziende. Quindi è al solito, no? Anche qua quando l'abbiamo

fatto per fare l'inserimento,

per fare l'inserimento variazione e cancellazione, l'esercizio, ti ricordi?

Il primo check è per creare la chiave di profilatura.

Il secondo check è per dirgli, guarda, questa chiave,

inoltre a crearla, abilitata a tutti.

Ok, però diciamo, non dovrebbe rimanere nell'ambito dell'azienda, dell'utente connessoore, quindi devi essere un utente non amministratore in effetti. Però quello che fai poi, la creazione delle chiavi di profilatura ha impatto su tutte le aziende, a prescindere.

Io se creo la chiave la creo per tutti. ok e papaparapaparapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapapap perché se il nome è scordo devo rimettere peso per flag certificatore

campi

allora qui

bisogna usare questi altri due rai

radio, che sono pesi parametri e pesi abilizzazioni, funzionano allo stesso modo di quelli che abbiamo

visto fino adesso per le proposte, per la visibilità eccetera, però hanno questo

sufisso pesi. Qui quello che bisogna fare è

dirgli, mettere tutta questa serie di check

per dirgli

i campi su cui vogliamo gestire le proposte.

Già qua ce l'abbiamo messo, ci possiamo magari inserire e aggiungerne uno.

Ad esempio, il comune di domicilio.

Metto queste spunte.

Conferma.

Ora qua loro hanno messo anche la modificabilità, però non serviva perché loro hanno ripetuto qui, hanno ripetuto qui.

perché loro hanno ripetuto qui hanno ripetuto qui

ho fatto un casotto qua

allora, hanno ripetuto qui

quello che loro avevano specificato qua

perché paradossalmente

potenzialmente, questo sempre per fare massima flessibilità

però dopo diventa un'arma a doppio taglio

la massima flessibilità

allora, qua uno decide

peso crescente certificatore, questo è l'algoritmo che uso.

Però poi potenzialmente potete anche su ogni singolo campo sovrascrivere quell'algoritmo, quindi dire

no ma guarda, sì è vero che il default è peso crescente certificatore, però su questo voglio fare peso decrescente certificatore.

Quindi sul coniugodice fiscale voglio ragionare al contrario.

Mi permette quindi di dire un algoritmo

diverso per ogni singolo campo addirittura.

Però loro invece ci hanno messo

solo certificatore, che è la stessa cosa che avevano scritto

di là, quindi non serve a niente.

Hanno riconfermato la stessa cosa.

Quindi, per adesso lasciamo

così. Poi adesso vediamo cosa fare, perché adesso in questo momento, per come hanno fatto, il codice fiscale, cioè la configurazione, questa qui che per campo mi ignora il fatto che io ho cambiato qui, ho messo peso crescendo il certificatore. Per adesso ignoriamo.

Quindi ho aggiunto il codice comune domicilio, quindi metto questi due check qui.

Su Pesi e abilitazione, stessa cosa, attivo.

Per attivare la gestione del peso devo mettere un check qui sotto peso.

E un check qui lo mettiamo anche per flag certificato

poi vediamo che si

l'effetto finale

confermo

quindi, ricapitolando

per attivare i pesi metto

gestione i pesi

modifico l'algoritmo

poi campo per campo sui due radio

pesi parametri e pesi abilitazioni

dico i campi dove voglio gestire i pesi

e per ogni campo

dico che voglio attivare

la possibilità di indicare il peso

e attivare la possibilità di indicare

questo flag certificato

adesso vediamo

l'utente

quindi adesso ci configuriamo

anche qui già l'ho configurato con i vostri colleghi

quindi li riprendiamo soltanto

gli utenti infermiere, caposale, sardegna, come nell'esempio.

Adesso secondo voi mi ricordo come ho chiamato l'utente infermiere.

Allora. infermiera

mannaggia i pescetti

infermiera

quindi

l'utente infermiera

che cosa bisogna fare su questo utente?

si va sulle sue abilitazioni

o sul suo ruolo, sul suo ufficio, eccetera.

Funzionalità risorse,

anagrafiche,

pazienti,

campi,

e qui, sempre nella stessa maschera

dove cito la visibilità,

se genera proposte, eccetera.

Gli vado a indicare il suo peso

10

ok

guardate bene qua

siccome ho attivato anche la gestione

proprio come voi stiamo nell'incroci

delle configurazioni che vediamo prima

siccome io su questo

ambiente abbiamo anche attivato

la gestione delle proposte,

l'utente per far sì che i pesi funzionino deve anche essere certificatore automatico su quei campi,

questo l'ho messo così, in linea di principio come dicevo possono coesistere proposte e pesi,

ma un utente non è che può essere da una parte avere la gestione di pesi attiva e però dall'altra parte generare proposte. Questi sono tre C che potete fare alla fin fine, a livello di configurazione non c'è una cosa che ve lo impedisce, però non lo dovrebbe fare, quindi il limite dovrebbe essere...

essere il buon gusto. Quindi in questo caso quindi che ho fatto? Ho messo anche qua il

certificatore automatico in maniera che non genero per nome e cognome le proposte, ok? Non

ho problemi. Qui sul comune di domicilio non abbiamo problemi perché le proposte non

le abbiamo messe tra i campi che generano proposte, quindi qua mi metto soltanto 10 e confermo.

e confermo qua

come algoritmo di modificabilità

vedete che mi ha riproposto solo certificatore

perché loro come vi dicevo

sono andati qui

in profilatura configurabile

e hanno indicato campo per campo

un algoritmo diverso

un algoritmo specifico

che però

quindi adesso io sono costretto a mettere qui, anzi scusate faccio un passettino indietro, faccio prima a fare questo, scusate un secondo, rientro in profilatura configurabile, perché se no qua dopo non si capisce più una mazza.

Allora, avanzate, profilatura configurabile, grafiche, configura, allora qui come modificabilità del peso c'è scritto

peso crescente certificatore

e qua io ci rimetto

questo, peso crescente certificatore, poi dopo lo ricambio

però è per rendere coerente perché altrimenti c'ho da una parte che ho detto che peso crescente certificatore

dall'altra sul singolo campo

è scritto certificatore

quindi qua ci metto

peso crescente certificatore

confermo

poi dopo lo rimetto a posto

quindi per rendere

coerente quello che sta sul singolo campo

con quello che sta intestata

non perché sia obbligatorio farlo però per

fare l'esercizio che devo fare io, vi voglio mostrare come

funziona col peso crescente certificatore.

Faccio la stessa cosa anche per le abilitazioni.

Conferma, ok fine

adesso qui sul mio utente infermiera

anagrafiche, pazienti, dicevamo, campi

ok, quindi abbiamo pres peso crescente certificatore

abbiamo detto che vogliamo mettere

per il nome peso 10, cognome peso 10

anche per questo nuovo campo comune domicilio peso 10

adesso ci limitiamo a questo

conferma

finito

Adesso la stessa cosa lo ripeto per l'utente caposala, quindi utente caposala, riabilitazione, funzionalità risorse, anagrafiche, pazienti, campi.

50 per il nome, 50 per il cognome, 50 me lo metto anche sul comune d'omicidio e conferma.

me lo metto anche sul comune d'omicidio e conferma.

In ultimo facciamo l'utente Sardegna.

Quindi, sempre tra le sue abilitazioni funzionalità risorse

anagrafiche

pazienti

campi

qua faccio magari una cosa in più

cioè dico peso 100

anche qui su comune domicilio

e qua li metto questo

flag di certificazione magari lo metto qua, su nome e cognome non lo metto su comune domicilio, e qua li metto questo flag di certificazione, magari lo metto qua, su nome e cognome non lo metto su comune domicilio.

Conferma.

Ok.

Ci siamo fin qui?

Ci siamo fin qui?

So che non è facile seguire il rimbalzo da una maschera all'altra, purtroppo è il problema dell'online.

Allora, ok, perfetto. Adesso vediamo l'effetto finale, poi facciamo pausa. Vediamo l'effetto finale di tutta questa configurazione. Quindi facciamo l'esempio scritto qui dentro, queste tre slide.

inserisce il paziente Bianchi Paolo.

Quindi io mi collego adesso con tutti questi utenti.

Quindi incomincio.

Infermiera.

Grafiche, pazienti, gestione.

Nuovo.

Il nostro ennesimo Bianchi Paolo, 0101 1950, maschio, Roma,

Comune di residenza a Banoterno.

Rimettiamo anche il comune di domicilio, abbiamo detto, quindi rimettiamo qua a Betone Cutigliano, mi piace come nome, a Betone Cutigliano.

Potenza.

Conferma.

Questo monosegno è il nostro ID

il paziente 704

ora, quindi l'infermiera ha inserito il paziente

se io vado qui, vedete c'è un tasto extra

e c'è un link mostra pesi

se io ci vado sopra

compairà per ciascun campo

l'informazione del peso

cioè vedete mi scrive che ad esempio

per il cognome

il dato certificato no

non ha il flag certificato

quel flaggettino lì che dicevamo

il peso è 10

la sorgente è l'infermiera

questa cosa anche qui

ok?

qui su data di nascita no perché? perché su data di nascita non ho configurato il peso, il peso l'ho configurato soltanto su cognome, nome e comune, domicilio, eccolo qua infatti, vedete, dato certificato no, peso 10, sorgente infermiera, per tutti gli altri campi si tiene traccia della sorgente, cioè di chi ha fatto la modifica, però non c'ha, vedete, peso è niente, c'è un trattino, ok? Ok. Primo step fatto, quindi ho inserito il paziente,

peso 10. Diamo magari anche uno sguardo sul DB, quindi questo è il mio paziente, sulla

questa paziente non cambia nulla, nel senso, a differenza delle proposte, qua stiamo lavorando live sul record della SAPaziente.

però quindi bianchi paolo

però invece sulla mia proposte

tutte le modifiche soggette a peso

sono state marcate

eccolo qua, con un peso, quindi c'ho tre, eccolo qua, vedete dieci.

Quindi a dieci ho il cognome e il comune di domicilio e in più anche il nome, eccolo qua.

Però per il resto non cambia nulla, quindi non c'entra niente con le proposte, infatti qua tutto stato A.

Però per il resto non cambia nulla, quindi non c'entra niente con le proposte, infatti qua tutto stato A, ok?

Quello che adesso andiamo a lavorare è questo campo qui, anzi questi due campi qui, ok?

Anche il certificato, però lo vediamo quando facciamo un utente Sardegna, ok?

Quindi 10, 10...

10.

Questo è il mio paziente.

Adesso mi collego con l'utente

a pusala.

Patiente gestione, mi cerco quel mio

paziente e abbiamo detto che faccio

cambio da Paolo a Marco

metto Marco, conferma

mi chiede qualcosa di fiscali di codinò ok e adesso se vado sulla proposta sulla

paziente trovo marco già sulla proposte

provo che ma a paolo vedete questo ricordo qui da paolo che blo qui, da Paolo diventa Marco e lo fa con peso, eccolo qua, 50.

Quindi cercando ad esempio per il campo, quindi PZNome, and prcampo uguale PZNome, eccoli qua, il record che ho è 10, quello dell'utente infermiera, e 50, la caposala.

vedete come quando un nuovo record diventa attuale,

questo prima era attuale, era A,

perché era quello che avevamo sulla sapaziente,

quello dell'infermiera, viene riportato a C.

Quindi ad A ci avrò soltanto ovviamente, come dicevo,

era marcato solo quel record che mi rappresenta la situazione che sta sulla sapaziente.

Quindi adesso è Marco, quindi A è Marco.

Va bene?

10 e 50, ok? Perfetto. Io adesso se vado qui, se vado qui su Extra Mostrapesi, cosa troverò che questo è uno scherzetto che ha fatto anche l'altra volta

e ancora non l'ho capito perché mi fa sto scherzetto

sono convinto che c'entri uno scripterino che ci hanno

che ci hanno

qua c'hanno uno scripterino caricato sul paziente

poi magari gli hanno uno sguardo che fa un po' di cose strane sono convinto che questo, perché cos'è uno scriptelino caricato sul paziente poi magari gli hanno uno sguardo

che fa un po' di cose strane

sono convinto di questo, perché cos'è la cosa strana?

guardate, allora io ho cambiato

io ho cambiato soltanto

il nome, da Paolo ho messo a Marco

se vado qui sulla i

infatti mi dice che il peso

è 50, vedete? La sorgente è caposala. Perfetto. Se io vado su cognome, il peso è rimasto 10,

perché sarebbe quello dell'infermiera, però guardate qua la sorgente mi ha messo caposala.

Vedete? Mi ha messo caposala dappertutto, tranne qua, sul comune di domicilio, come dicevo di domicilio è rimasto infermiera, lo fa soltanto per i dati anagrafici, perché in effetti ci sta un qualcosa che fa sullo script sui dati anagrafici, c'è uno scripterino che fa qualche cosa di malato corretto sarebbe questo, che tutti i campi che la caposala non ha cambiato devono rimanere con così, cioè devono rimanere con, come questo qui, il comune di domicilio, peso 10, sorgente infermiera.

L'unico che ho cambiato è questo, questo qui Marco, quindi caposala, peso 50.

50 risultano quei campi risultano cioè non risultano record a nome del caposala infatti no è solo il nome abbiamo visto prima non ho capito perché infatti però

in pd accogne che cerco pd accogne

non c'è manco il record della caposalla, quindi non lo so che cosa...

L'altra volta pure con i vostri colleghi era uscito fuori e sono convinto che sia lo script per un semplice motivo,

perché se vado sul tab storico, c'è anche, vedete qua, flag conosciuto, completo verificato, cioè va a modificare questa tipologia paziente.

E noi non lo abbiamo toccato e non ci sta una logica applicativa che va a lavorare su questo flag.

Quindi vuol dire che c'è qualcun altro che automaticamente va a cambiare questo flag.

E l'unica cosa che può essere qualcun altro è uno scriptrino, l l'abbiamo visto, no? Gli scripterino possono fare praticamente quello che vogliono. Infatti all'epoca con

i vostri colleghi l'avevo visto, però è uno script enorme, quindi non è che ci siamo

soffermati, ma sono convinto che lì dentro venne fatto qualcosa di malvagio, cioè di malvagio,

diciamo che per il loro va bene, anche perché loro abbiamo visto che non utilizzano la gestione

del peso numerico, eccetera, utilizzano solo il flag certificato adesso ci da un po' di noia a noi

per farvi l'esercizio

insomma con l'utilizzo del flag

con l'utilizzo del peso

però ecco il risultato finale dovrebbe essere questo

che solo il nome

ha caposala

50

mentre tutti gli altri dovrebbero

rimanere peso 10 infermiera come qua, come il comune di domicilio.

Adesso faccio l'ultimo step e mi collego con l'utente Sardegna.

e ha preso 100

e il flag

prendo sempre

il prepotente

esatto e fa il prepotente

prendo sempre

il mio paziente

e dicono da Marco era giusto

Paolo

e li cambio anche questo al comune di domicilio, li cambio e li metto a Cerra, Napoli. mostra pesi

Paolo

dato certificato sì

peso 100 Sardegna

e qui

dato certificato no

perché non avevamo messo il flag sul domicilio

l'avevamo messo soltanto sul nome e cognome

quindi invece qua

dato certificato no il flag non l'avevamo messo sul comune domicilio, l'avevamo messo soltanto sul nome e cognome, quindi invece qua, dato certificato no, il flag non l'avevamo messo sul comune domicilio, però il peso 100

sì, l'abbiamo messo e quindi sorgente Sardegna.

Quindi, sui campi come risultano i pesi?

Come?

Per curiosità.

Sui altri campi, immagino che sia 10 caposala.

No, no, lì nella interfaccia, nella...

Eh, è rimasto caposala però, visto quello è un problema no quello ormai

una volta che l'ha messo ha messo una volta che l'ha messo l'ha messo non capisco una volta che

l'ha messo l'ha messo quello ero certo che rimaneva caposala ok

un attimo flag sconosciuto completato

che roba è?

questo fa delle magagne sue

sono convinto

il flag sconosciuto non l'ho cambiato

secondo me lui va a vedere

vedete che prima quando il codice fiscale gli combaciava, perché questo il codice fiscale non l'ho mai cambiato, li ho rimanuto quello di Bianchi Paolo, quando l'ho messo a Marco, lui mi ha cambiato da completo e ha verificato, li ho rimesso Paolo, lui da verificato ma ha rimesso a completo.

rimesso a completo.

Qui secondo me quello script fa qualche cosa per cui

sui dati

anagrafici e lavorando sui dati

anagrafici magari mi fa qualche salvataggio,

non lo so,

e quindi fa questo effetto

finale. Un attimo, magari lo script io lo diamo,

con i colleghi vostri non le ho dato lo sguardo,

ma con voi magari, se non siamo tra programmatori,

io lo diamo.

Ok, comunque questa è la situazione

corretta

è questa insomma

che la

qua a nome

c'è la Sardegna 100

Sardegna 100

e sugli altri

invece rimane

peso

10

peso l'abbiamo messo

solo lì

10

infermiera doveva rimanere, d'accordo?

10 infermiera, non caposala.

Quindi scolpizzata nome, io ho tre record,

il primo relativo all'infermiera col peso 10,

il secondo con il caposala peso 50 e il

terzo ed ultimo Sardegna peso 100.

E vedete che adesso questo è diventato

quello attuale, quindi gli altri sono

stati automaticamente riportati a C.

Fine.

Adesso se io vado, provo a rientrare con l'utente caposala,

guardate che succede, se io entro adesso con l'utente caposala e prendo nuovamente a rimetterci marco sul nome o anche a cambiarle il comune di domicilio,

su cui anche qua sono messo 100, vedete?

L'utente non rispetta la polisi di affidabilità per la proprietà nome e paziente.

L'utente non rispetta la polisi di affidabilità per la proprietà nome e paziente. L'utente non rispetta la polisi di affidabilità per la proprietà codice comune e domicilio.

Perché il mio peso di questa caposala è 50 e invece quello della Sardegna è 100.

Quindi da adesso in avanti soltanto chi ha un peso pari o superiore a 100 potrà modificare questo campo.

Ok? potrà modificare questo campo ok?

ci sono domande?

perfetto l'unica domanda è di quanti minuti è la pausa

la pausa la facciamo di 20 minuti fac facciamo 11 e 10, ci ribecchiamo, quasi 20 minuti, va bene?

Va bene, ok.

A tra poco, ciao ragazzi, ciao ciao.

A dopo.

Ciao, ciao. Grazie a tutti.

Grazie a tutti. Grazie. Rieccoci qui.

Ci siamo?

Sì, Simone, posso fare una domanda riguardo alla lezione di ieri?

Guarda, scusami?

Riguardo alla lezione di ieri, perché non c'era, non so se siete stato comunicato, però io non riesco a scaricare.

Paura, pa pa pa pa pa.

12, scusami.

Ecco, allora. Io non ho trovato i file.

Ecco allora Io non ho trovato i file

Allora i file dovreste averli

Sotto il canale

Sotto il canale

Sezione file

Recordings

E non ci sono

Perché il salvataggio in corso nella chat

No no no non cercare di prendere dal posto

Guardate che condivido lo schermo

C'è da qui prendili Cioè non prenderli da Non cercare di prendere dal post, guarda, condivido lo schermo.

Cioè da qui prendili.

Cioè non prenderli dal post, cioè da qui.

Ok.

Secondo me ti conviene andare qua su file, recordings.

Ok, qua ci sono.

Qua vedete?

Sì, sì, sì.

Ma quelli di ieri ci sono?

Sì, no.

Ieri era?

Ieri era... 13, quindi questo delle...

Ce ne sono due.

Quello delle...

Sì, questo sarà questo, 0,9, 0,9, questo...

No, no, no, no, questo è 2022, 0-4-0-7, ah no, questo è 7 aprile, scusami, sto a leggere male, quindi 14, ieri che giorno era?

13, 0-4-13, devi cercare.

e non ci sta allora 7 aprile non è stata ora modifica dal più dal meno recente vediamo un

po quelli che ci stanno 7 aprile che cos'era da giovedì poi qua questo qui sarà 8 aprile poi

lunedì c'è, poi manca martedì, mercoledì.

Esatto, se guardi nel posto lui dice che lo sta ancora salvando, però...

Ah sì?

Sì, sì, dice il sabattaggio in corso.

La quindici manca martedì e qua c'è la registrazione.

Ho chiesto io ad Alessio, dice che stanno verificando.

Ah, ottimo, grazie.

Chi aveva parlato non ho capito.

Ah, Maurizio?

Sì, Maurizio.

Perfetto, ottimo.

Sì, mancano, sì.

Mancano sul recording, però c'è, nel senso, martedì, eccolo qua, c'è mancano che mancano sul recording però c'è il senso martedì eccolo qua c'è provo a

cliccarci vediamo che fa un errore

speriamo di no

non funziona a funzionare funziona

però potrebbe essere che a voi da errore

perché per questioni di permessi

voi non vedete le chat

questa alla fine penso che sia

sempre una cosa di chat

quindi non vorrei che sia l'errore per quello

quindi secondo me è soltanto da dirgli

che deve

caricarlo qua dentro recordings

però ok se l'avete già segnalato

Alessio apposto

comunque i file la registrazione c'è

non è caricata dentro recordings

chissà perché

vediamo un esempio quella di ieri

ieri era mercoledì

questa qui ad esempio di di ieri ieri era mercoledì questa è ad esempio

di martedì c'è

mercoledì

anche

ok

ok

non ci siamo persi niente

solo da deliberare

ok, va bene, grazie a te Ok, non ci siamo persi niente, solo da deliberare.

Ok, va bene, grazie.

A te.

Ok, allora, mentre vi ho fatto pausa ho verificato la cosa degli script, infatti il mio sospetto era giusto nel senso qui siamo su una profilatura configurabile dei pazienti vado su script

e vedete che su

il paziente hanno legato un bellissimo

mega script

banalissimo

proprio due righe in croce

ok, 864 righe di script, ok, che fanno, magari ci diamo anche uno sguardo su quello che fa,

comunque fa delle cose, tra cui infatti io ho cercato, wait, come c'è? ho fatto prima

contro maiuscole e minuscole

eccolo qua

sulla funzione di

before save object

quindi prima di salvare

fa una serie di cose

tra cui

si mette a giocare

e a divertirsi proprio con i pesi

ok?

e quindi insomma

è questo secondo me

che ci fa

diciamo in qualche modo

fa delle cose qui dentro

che

fanno a cazzotti con la

configurazione che abbiamo attivato solo peso e flag certificato ok

però ci sta perché comunque lo script è fatto per la sardegna loro qui avevano configurato solo

certificatore adesso glielo rimettiamo per non fare casini e quindi come dire le cose sono tarate

per quello che gli serve a loro però nel mio esercizio volevo mostrarvi la configurazione più complessa

che prevede l'utilizzo del peso come numero

e peso crescente come algoritmo.

Va bene, un attimo, lo script ne approfittiamo per guardarci

e vedere cosa ci sta dentro.

Però è sicuramente lì dentro l'Arcano fa qualcosa che poco confà con la gestione peso crescente certificatore.

Questo qua rimettiamo tutto a posto.

Se non mi picchiano Ok.

così non mi sono dimenticato quindi adesso lo possiamo togliere

ok?

quindi adesso ne approfittiamo per dare uno sguardo

allo script, a quello che si sono

implementati qui dentro

però prima di questo

ci sono delle domande riguardo

Guardo la gestione dei pesi, il concetto è abbastanza semplice.

ok, ma vediamo qua dentro che cosa si sono fatti, vabbè queste sono funzioncine di comodo che si sono fatti loro, che funziona per verificare la correttezza codice ENI, verifica CF uguale, before commit invece è uno degli viene fatto il commit sul binder vi ricordate che io sul binder faccio

set property value

set property value, set property value

e così via dicendo, quindi setto le varie proprietà

ma quelle proprietà non vanno a finire direttamente

sul bin

ci vanno a finire nel momento in cui viene fatto il commit

quindi al commit

loro qui

fanno check edit anagrafica

invocano un'altra funzione che si sono fatti loro

che farà

variazione uguale false

che roba è? variazione uguale false

hold value

ma questo è

solo per logare

c'è stata una variazione

no no no ok no scusate

se variazione false

ah lui si salva

una variabile

variazione true

una variabile globale variazione true

ok quindi sul before confirm lui va a verificare se è stato cambiato uno di questi campi, che sono i campi anagrafici. Se sì, si valorizza una variabile globale variazione true. Vediamo più avanti poi che ci farà.

Sull'afterload, quindi sull'evento subito dopo il caricamento di un bin, anche si sono rimplementati questa funzioncina javascript che fa innanzitutto dei controlli sulla data attuale con la data di nascita per capire se il paziente è un neonato.

E se il paziente è un neonato, se ha più di 10 giorni di atipologia neonato, mostra il paziente... Ah, ok. Lui va a verificare se a differenza tra date

se è minore o uguale a 10 il paziente è un neonato ok quindi dice se non è più un neonato quindi i giorni sono passati più di 10 però il flag sconosciuto e perché sono solo sarebbe questo la

in realtà questo qui mi sa

sconosciuto, se hai impostato il flag

sconosciuto

allora mostra un errore

che è il paziente non è più neonato

inserite campi obbligatori, perché questo?

perché solitamente un neonato come sapete

non ha un codice fiscale appena nato

ad esempio, quindi magari

loro probabilmente gestiscono il fatto

che il codice fiscale non è

obbligatorio

ad esempio

quando è neonato? Poi loro sono

fatti questo scrippettino dove in maniera molto arbitraria dicono se c'ha più di 10 giorni

non è più neonato, più di 10 giorni, che la differenza la fa per date, quindi è in giorni,

quindi se c'ha più di 10 giorni, attenzione, ti dice il presente non è più neonato, devi inserire i campi obbligatori, è un warning.

Get property info, questo è più interessante e questo serve praticamente per dire, per stabilire la visibilità, questo è molto importante, per stabilire la visibilità dei campi, nel senso, la visibilità dei campi come ce la siamo vista, adesso prendo anche il documento,

fatta con la profilatura configurabile,

decidevamo quando un campo era obbligatorio,

non editabile, eccetera. E quella è una profilatura statica.

Se noi diciamo che il codice

ISTAT del comune è non editabile,

poi è sempre non editabile

per quell'utente o per quel ruolo

o per l'ufficio, però a prescindere da questo

poi lo è sempre.

Se dico che per il ruolo X

il campo di nome e cognome e paziente è obbligatorio,

poi per quel ruolo X sarà sempre obbligatorio.

Delle volte può esserci la necessità invece di avere una visibilità più dinamica,

ad esempio basata su, anzi, solitamente basata proprio sull'oggetto che sto prendendo.

Ad esempio, dico una fesseria, ma non è una fesseria perché è proprio un caso reale in realtà

se il mio paziente è uno straniero

allora il codice

è uno straniero irregolare

allora il codice fiscale non è più obbligatorio

ma è obbligatorio il codice STP

oppure se è uno straniero in generale

dico se è uno straniero quindi c'è una cittadinanza non italiana, o il codice fiscale è valorizzato o il codice STP è valorizzato, quindi una o l'altra.

Quindi vedete c'è una dinamicità con cui accendo e spengo l'obbligatorietà di un campo.

Vista la dinamicità, l'unico modo che si ha per averla è tramite codice, quindi ad esempio tramite scriptrino. Tramite scriptrino avete questa funzione getPropertyInfo che funziona esattamente come la getPropertyInfo che abbiamo sul nostro bin, uguale.

torna il tipo, però la potete anche, solitamente si ignora, solitamente si va a vedere direttamente

la property name, perché tanto qui dentro vi ci va a finire soltanto per la visibilità,

però va a speculare alla property info del vostro bin, ok? Quindi dice, se la property

name è, ad esempio, codice fiscale, allora ti dico return O se obbligatoria, E se editabile,

V se non è editabile, H se editabile V se non editabile

H se nascosta

ok?

ovviamente qui dentro voi avete poi l'oggettino binder

con cui potete recuperarvi i valori del bin

e dire

se c'è la cittadinanza 100

allora è italiano, altrimenti è straniero

così via diciamo

diamo un attimo uno sguardo loro cosa hanno combinato ad esempio

vabbè loro qua fanno anche if property visibility ma tanto è sempre quella è straniero, così via dicendo. Diamo un attimo uno sguardo loro cosa hanno combinato, ad esempio.

Vabbè, loro qua fanno anche if property visibility, ma tanto è sempre

quella.

Poi dice, se la property name è nome,

cognome,

data di nascita, sesso, codice

comune di nascita, provincia,

o comune di residenza,

provincia di residenza,

e il flag

è sconosciuto, allora return è.

Torna sempre a una delle opzioni che stanno scritte qua dentro.

Dove va a finire il mio paziente?

C'è un paziente, ce lo vedo.

Va bene.

Fa sempre riferimento praticamente a questo fleggettino qui

c'è manco un rossi

bianchi

ha una delle opzioni

messe qui dentro, ok? Tipologia paziente, sconosciuto,

completo, incompleto,

neonato, verificato, eccetera, ok?

Ah, quindi probabilmente quella di prima era neonato l'ho già paziente, sconosciuto, completo, incompleto, neonato, verificato, eccetera. Quindi probabilmente quella di prima era neonato l'opzione.

Quindi se hai marcato come neonato, ma hai passato più di 10 giorni,

allora non è più neonato.

Qua invece parla dello sconosciuto proprio e dice

lo sconosciuto è più o meno la stessa, anzi ancora peggio del neonato,

perché nel caso dello sconosciuto è magari il paziente che

vi arriva al pronto soccorso in stato non cosciente, quindi voi non sapete che nome

ha, che cognome ha, non ha magari documenti, non ha nulla, quindi comunque non è che gli

dite aspettiamo che si sveglia e lo registriamo in anagrafe, viene registrato solitamente come

sconosciuto, quindi senza compilare

il cognome, il nome eccetera

e poi successivamente quando riprende

si augura conoscenza viene poi

perfezionato, quindi lui dice

ad esempio, tutti questi campi

sono

obbligatori

a meno che non è sconosciuto

a sì, quindi se è sconosciuto allora

il nome, il cognome ecc eccetera, sono editabili,

altrimenti li rendo obbligatori per tutti gli altri.

Per il codice fiscale dice, solo sconosciuto, straniero e neonato non hanno il CIF obbligatorio.

Ecco ad esempio, vedete?

Quindi lui dice...

lui dice ad esempio

qualcosa è più complesso

anche qui si fa una

verifica sulla data di nascita

e vabbè

anche qui arbitrariamente 10 giorni

quindi dice se è un neonato

mi valorizzo questa variabile

i come ok

si capisce che non è un programmatore che ha scritto

sta roba, lo specialista. I variabile ok. Vabbè, i specialisti. Ok, poi, è complicato

a leggere. Poi dopo fa, determino se il paziente è stranino o il comune di residenza,

però ha commentato bene. Quindi determino se il paziente è straniero o il comune di residenza, però ha commentato bene.

Quindi determinato se il paziente è straniero o il comune di residenza.

Ok, dal comune di residenza loro cercano di capire

se è uno straniero.

Quindi si valorizza, quindi I ok per

la variabile I è per il neonato, la variabile E per lo straniero.

Quindi dice, se è uno sconosciuto oppure è un neonato oppure è uno straniero,

allora il codice fiscale è editabile, altrimenti è obbligatorio.

Fine. Non ci sono altre cose sulla visibilità.

Quindi lo fa per questi campionagrafici, solo per lo sconosciuto e per il codice fiscale per sconosciuto straniero e neonato quello

che è la casistica che vi dicevo prima perfetto

questi sono metodi di comodo che si sono creati loro isampti equal before save

object questa invece la funzione che dicevamo fa prima del salvataggio

prima del salvataggio si va a leggere un po' di proprietà

dal bin

va a vedere se l'utente è un utente certificatore

inteso quindi come certificatore

qua parla delle proposte, quindi certificatore automatico.

Va a vedere se è un certificatore automatico.

is certified nome o cognome paziente

nome paziente, sesso, comune di nascita

va a verificare se sono certificati

adesso va a vedere la gestione dei pesi

va a vedere se il flag è certificato sui pesi

recupera l'utente

poi dice se l'utente è certificatore

automatico

setto la proprietà dell'intera anagrafica certificato solo se non è sconosciuta e qua fanno un mix delle due cose ecco perché non

mi tornava quello che accadeva in maschera loro praticamente qui vanno a qua il certificatore e

Fa riferimento alla gestione delle proposte, quindi alla flag certificatore automatico che abbiamo visto sulla gestione proposte, che non c'entra nulla con la gestione dei pesi.

Qua invece che fa? Dice se l'utente è un certificatore automatico e il paziente non è sconosciuto, allora forzano il flag certificato ma questa volta della gestione pesi a C. Ed ecco perché

quindi ci sovrascriveva, perché il sul domicilio si comportava in una maniera corretta, perché appunto non è tra questi campi, ecco svelato l'arcano.

comportava nella maniera corretta perché appunto non è non è tra questi campi ecco svelato l'arcano

queste sono cose della specialisti senza andare adesso a capire bisogna conoscere quali sono i casi d'uso le motivazioni dietro a questo quindi va benissimo lo prendiamo per quello che è quindi

però adesso ci siamo dati una motivazione del perché si comportava in quella maniera, d'accordo?

Poi fa altre cose, che fa? Verifico che il comune di residenza si è attivo rispetto

al dato corrente, quindi qua fa anche una validazione, va a verificare se il comune

di residenza è attivo, se è selezionato un comune di residenza disattivo.

Verifico che la cittadinanza sia attiva da corrente, altrimenti torno a un errore di validazione.

Obbligo a mettere l'asle di appartenenza, altrimenti torno a un errore.

l'ASL di appartenenza, altrimenti da un errore, se l'ASL di appartenenza, se il paziente è il comune di residenza italiano, allora l'ASL di appartenenza la rende obbligatoria

mettendo una validazione before save, fa un controllo di congruenza tra l'ASL di appartenenza

e il comune di residenza, eccetera, eccetera, ci sono diverse cose. Il nome e il cognome contiene caratteri numerici,

quindi questa è un'altra validazione, va a verificare che non ci sia numeri all'interno

del nome e il cognome, fa vedere verifica in congruenza sui codici STP ed ENI, verifica

la congruenza, campo indirizzo email presente nel tab altri non è valido, quindi verifica la congruenza campo indirizzo email

presente il tab altri non è valido

quindi verifica che la email inserita sia un'email

formattata correttamente

eccetera eccetera eccetera

senza andare a vederli tutti

ce ne sono diversi

ecco

Questo è il giochetto che sul flag è sconosciuto, che vedevo che me lo impostava automaticamente,

quel flag paziente, questo qui, tipologia paziente, eccolo qua dentro.

Ad esempio, lui dice, sul before save dice, ad esempio,

setto tipologia paziente, tre casi, non atto sospetto e completo,

verifico se si tratta di un paziente non nato massimo giorni e nel caso disettiamo l'anagrafica P.

Se è un neonato mette lo flag sconosciuto a P e mette il titolo di studio a nessun titolo, ovviamente.

Qua invece dice, ad esempio, verifico si tratta di un'anagrafica sospetta, ovvero il cui CF

non incorrisponde da tenagrafici al paziente, eccolo qua, infatti quando facevo le prove

che le cambiavo il nome senza aggiornare il codice fiscale, lui mi lo metteva verificato

allo Stato, infatti lui dice fa questo

il codice paziente non corrisponde alla teama grafici

oppure è stato inserito un CF provvisorio

quindi mi mette una tipologia paziente X

questo come dire

dimostra tutto questo script che vediamo

tutte le potenzialità veramente

infinite che potete fare con gli scripterino

potete veramente

sbizzarrire, avete visto che qua dentro

sulla before save, insomma

di logiche di business

ne sono state aggiunte

parecchie

ok

questo script viene eseguito a livello di BIM

si

perché l'ha configurato qui dentro

ok quindi viene eseguito anche

nel caso in cui magari è un servizio terzo

a chiamare il momento

il servizio SOP ok e anche nel caso in cui è un servizio terzo a chiamare un eventuale servizio SOP, e anche nel caso in cui magari

ne sono aggiunta di un paziente tramite un demo, un agente.

Bravo, esatto.

Quindi anche se uno chiama servicemanager.save,

esatto, con l'API, comunque, esatto, passerà lì.

Esatto, perfetto.

Mi stiamo mettendo in ottica di troubleshooting

nel caso in cui magari si ricassero che problema

in quali casi devo controllare

cosa dopo

è un po' intricato

allora per gli errori di validazione

è facile perché gli errori di validazione

quindi quelli che sono implementati sullo before save

in maschera escono scritti con la sintassi script

due punti e il messaggio

ok ad esempio qua io tolgo l'as d'appartenenza che mi pare che era una cosa obbligatoria

dallo script cioè solo b forse andava a controllare confermo

no però forse perché

ah perché devo metterci anche

ma che faceva? vediamo un attimo il controllo che fa

puzzle appartenenza

papapapa

Controllo congruenza, appartenenza.

Non ho visto, assistenza, scusami, era assistenza.

C'era un controllo sull'asl d'assistenza, mi sa.

Vabbè, che mi cancello tutto nel dubbio.

Conferma.

Ecco, no, era la sua appartenenza.

Perché non...

L'ho sbiancato prima.

Vabbè.

Comunque, qua, vedi, il messaggio su cui lo torno lo script lo capisci perché ci sta questo prefisso, script.

Ok?

Ok, sì.

Per le validazioni.

Ad esempio, per la visibilità dei campi,

tu qua vedi obbligatorio,

come fai a sapere se è obbligatorio perché l'ho deciso a livello di profilatura configurabile,

a livello di scriptrino?

Devi guardare, devi...

Vai prima in profilatura e vedi se ci sta in profilatura,

se non ci sta dai uno sguardo allo script.

Questo è così. Va bene, va bene, va bene, va bene. Qui diciamo, ad esempio,

la lampadina mi si era accesa perché avevo visto qua sul tab storico che appunto mi

cambiavano proprietà che io non toccavo, questo flag sconosciuto non lo toccavo e

me ne cambiava da solo, quindi quello

già mi ha acceso la lampadina l'altra volta

ora l'altra volta non lo sono andato a vedere

perché tanto appunto

poi comunque sia anche perché sarà un approfondimento

per gli specialisti

da parte di chi ha fatto lo script

quindi quando faranno i corsi specialisti

ma poi anche perché è complicato

bisogna avere comunque competenze tecniche

quindi tra di noi siamo

programmatori, quindi ce lo andiamo a decifrare, quello che ci sta scritto è facile. Va bene,

va bene, quindi abbiamo visto la gestione delle proposte, la gestione pesi, vediamo l'ultima cosa e abbiamo finito la parte di XMPI la gestione degli alias

allora

per garantire il controllo

ah beh innanzitutto scusatemi

ci sono altre domande in generale

su tutto quello che abbiamo detto stamattina?

qualsiasi cosa, anche torna indietro

poste, pesi, dubbi.

Perfetto, ok.

Questione alias.

Allora, per garantire il controllo delle anagrafiche,

XMPI permette anche la definizione di criteri di alias.

Che cosa sono?

Sono praticamente delle regolette, delle regole,

che permettono di stabilire quando due posizioni anagrafiche, quindi due record sulla nostra paziente, afferiscono al medesimo

paziente fisico. Quindi il mio Mario Rossi, inteso come persona reale, fisica, nel mondo

reale è censita due volte sulla sua paziente. Come faccio a capirlo? Creandomi queste regole

che vengono chiamate criteri di alias. Poi vediamo come si definiscono queste regole.

Quando un criterio è soddisfatto, viene creata, si dice, la cosiddetta coppia di alias, cioè

un record che associa un'anagrafica che viene definita come master alle altre anagrafiche individuate che sono definiti alias.

Poi ci sarà slide di esempio. Una volta che viene creata la coppa di alias è possibile

eventualmente accorparla o viene anche detto fare un merge, quindi unire queste due posizioni

anagrafiche. In questo caso apposite procedure lasciate dal laboratorio di sviluppo, che sono chiamati sweeper, si preoccupano di riportare tutti gli eventi clinico-sanitari di un alias e riportarli sull'anagrafica master.

Gli sweeper sono degli agent, bisogna attivarli con la funzione, con quello che abbiamo spiegato l'altra volta, quindi si pianificano come gli agent che abbiamo visto insieme un paio di giorni fa

facciamo un esempio così

scusami

c'è una cosa che mi stupisce

a fronte di due anagrafiche

che devono confluire l'una

bisogna farne la somma

ho capito bene

mi confermi che ci sono degli automatismi

per fare questa cosa

si esatto

e come fai a decidere se

Paolo

con 2P va bene o va male

adesso vediamo

soprattutto con gli stranieri che circolano

l'Italia

infatti la cosa peggiore è infatti gli stranieri

assolutamente

io scuso se ho anticipato

no no no

ve lo chiedo apposta se ci sono domande

quindi non vi preoccupate

assolutamente

se la domanda me la rispondo subito

rispondo subito poi se invece magari la risposta ce l'abb non vi preoccupate assolutamente se la domanda me la posso rispondere subito rispondo subito poi se invece

magari la risposta ce l'abbiamo più avanti

assolutamente

tutte le domande con me sono lecite

tranquillo

allora

quindi supponiamo insomma ci immaginiamo

questa situazione sulla base dati

un caso d'uso abbastanza semplice però che ci fa capire il funzionamento della procedura. gli figli, quello che sia, d'accordo? Nel mondo reale c'è un Bianchipalo, che però sulla mia tabella è stato per errore censito

due volte,

una volta come Bianchipalo, una volta come Bianchipalo,

con un errore di battitura sul nome.

Però vedete che il codice fiscale è sempre lo stesso,

quindi la pensione è quella.

E sono entrambe attive, sono due

entrambi i record che hanno il flag

dello stato del paziente attivo

forse sul paziente non l'abbiamo visto

però sulla persona sì

quindi abbiamo visto che c'è

sulla persona l'abbiamo visto

che c'è un flag attivo-disattivo

ce l'abbiamo anche sul paziente

attivo-disattivo

perché sul paziente una canagrafica

non può essere mai eliminata

per nessun motivo

alla peggio si può disattivare, quindi fare una cancellazione

logica

lo stato attivo-disattivo

quindi ho due pazienti attivi

che però fanno riferimento

alla stessa persona

e perché ce l'ho?

perché magari una volta, ecco qua, nel 2015

Bianchi Paolo

è andato in pronto soccorso

è stato ricoverato un bel giorno è stato ricoverato nel 2015 e quindi l'ho inserito a sistema.

Qui abbiamo il paziente C-1.

utilizzando cancelletto 1 è stato magari un cercato bianchi ip paolo non la trovate sa non esiste e l'ha inserito e quindi ha creato un evento di ricovero sul primo

paziente e un evento di ricovero sul secondo

paziente ci siamo fino adesso ok perfetto io posso

definirmi il mio criterio di alias

poi vediamo come si fa

e dire ad esempio

una regola più stupida possibile

che gli dico

guarda

però non è anche tanto stupida

perché è un po' un caso reale

cioè dico considera

vi faccio una regola

che gli dico

considera

uguali

due persone

che hanno

se due record hanno lo stesso codice fiscale.

Quindi istruisco il sistema per dirgli, considera due record uguali se il campo PZCFIS è lo stesso.

Cosa fa allora il sistema in virtù di questa regola?

Sulla tabella che si chiama C-Alias, crea la coppia master alias,

cioè si tiene traccia, crea questa associazione tra il paziente con id1

e il paziente con id2 e lo scrive qui dentro così master 1 l'italia 2 quindi stabilisce un master

e un alias il master di default lo sceglie praticamente prendendo il più record più vecchio

brutalmente così.

Poi ci sta una maschera con cui l'utente può cambiare il master,

però di base lui prende una scelta,

la prima scelta è questa.

E lo marca, poi dice qua come...

E basta, crea la coppia.

Poi che succede?

In un secondo momento, lo vediamo, quindi non l'ho rappresentato nella slide,

viene l'utente, stabilisce, si vede magari tutte le coppie che sono state create, individuate al sistema,

e decide di accorparle. Questo accorpamento comporta che un agent, che si chiama sweeper,

deve essere pianificato, gira, si accorge che dice, ah, devo accorpare questo paziente 1, paziente 2,

e che cosa farà? Nella tabella recovery l'evento che era legato al

paziente 2 lo migra e lo lega al paziente 1.

E sulla tabella di sapaziente il paziente 2 lo disattiva, quindi lascia attivo

solo un golden record che è il primo.

Ok? Ok. record che è il primo ok

ok

questo dal punto di vista

logico

funzionamento

ora vediamo come come fare tutto tutto ciò dal punto di vista pratico

vediamo ovviamente soltanto la configurazione non vediamo l'accorpamento eccetera

scusa se ti interrompo nuovamente

ma non c'è un momento di validazione del master

come scusami? Non c'è un momento di validazione del master?

Inteso come?

Come, scusami?

Inteso come, ad esempio? Hai detto che il master viene scelto come il primo della cosa,

e come criterio automatico mi sta benissimo.

Ma se è il primo e quello sbagliato?

Allora, se è il primo e quello sbagliato,

allora diciamo che l'utente in maschera

può cambiarlo nel master.

Quindi vedrà la coppia e potrà decidere

no, ma guarda, è il contrario, magari.

L'alias è il master e il master è l'alias.

Quindi può cambiarlo manualmente.

Quindi poi si riscatena l'allineamento sulla tabella recovery?

No, adesso vediamo, perché in realtà viene a step, nel senso l'alias viene prima creato,

la creazione dell'alias non comporta l'accorpamento. La creazione dell'alias è soltanto ho creato l'alias, ti dico, guarda,

ti li segnalo, questi due pazienti sono

la stessa cosa.

Poi dopo è l'utente che deve dire

fammeli vedere, ah sì, va bene,

sì, se è vero, accorpameli,

premi un tasto accorpa.

E' quel tasto accorpa che fa scatenare

l'accorpamento.

Quindi in quel caso lì, quello sarebbe il momento

in cui l'utente dice, no, guarda, prima cambia il master

cioè inverti, ad esempio

e poi clicca su accorpa e quindi scatena

l'accorpamento, però poi in realtà

ho capito che

era tutto un automatismo

praticamente, no, no, no, cioè

È tutto automatico, però avviene in step diversi e c'è un'esecuzione manuale che è quella dell'utente che dice vai, accorpa.

Adesso sì.

Poi lo vediamo, un altro tipo speciale di criterio di alias, quindi di regole, ce lo vediamo come configurazione, non lo vediamo come esecuzione perché è troppo complicato, però un criterio di alias può essere definito per ricerca o per accorpamento, che significa che di ricerca è quello che vi ho spiegato adesso, quindi voi definite le regole per cercare un alias, in questo caso per cercare, per esempio, per codice fiscale, se ci sta.

Di accorpamento, invece, un criterio che serve per dire, quando l'utente dice accorpa, vengono valutati poi i criteri di alias di tipo accorpamento e quelli li dovrebbero essere per dire, aspetta, ok, prima di accorpare faccio un ulteriore controllo più preciso dico una fesseria

magari uno potrebbe fare

un criterio di ricerca più lasco

quindi magari mi cerco tutti quanti

tutte le persone che hanno

cognome, nome, data di nascita

uguale

come ricerca, quindi mi trovo tutte quelle anagrafiche,

poi come criterio di accorpamento vado a verificare se il codice fiscale è uguale.

Quindi che succede? Che se il nome e il cognome data di nascita è uguale, lui mi crea la coppia master alias,

perché come criterio di ricerca ho definito quello.

Quando poi gli dico di accorpare, lui rivaluta, sì, però aspetta un attimo,

il codice fiscale è uguale? No, ok, allora non accorpo

ok? Quindi

questo

per fare, come dire, dei criteri di ricerca

per crearmi degli alias e fare, come dire

una sorta di fotografia di qual è la situazione

attuale e quindi magari mi creo

dei criteri più lastri

poi con i criteri di accorpamento faccio

delle cose un po' più puntuali, un po' più precise solitamente si fa solo i criteri più lastri. Poi con i criteri di accorpamento faccio delle cose un po' più puntuali, un po' più precise.

Solitamente si fa solo i criteri

di ricerca e non si fanno i criteri di accorpamento.

Dopo dipende

anche da... Diciamo che

gli alias a volte sono usati anche magari

diciamo gli alias, la gestione degli alias è usata

in due circostanze, è importante capire.

Una, che è l'esempio

di questa slide, che è per ricercare degli alias.

Quindi io definisco i miei criteri e vado a vedere se sulla mia sapatente ho già degli alias.

Ok? Si spazzo la sapatente e va a verificare se ce ho già dei duplicati.

L'altro contesto invece è io cerco di prevenire

l'inserimento di alias, quindi in fase di

inserimento di un paziente vado a

valutare i criteri di alias, se il paziente

esiste e do un errore.

Lo segnalo all'utente più che altro.

Lo segnalo all'utente e dico attenzione, il paziente che tu mi

vieni per inserire, in base ai

criteri di alias che mi definito già esiste perché magari il criteri di alias che mi definito il codice fiscale quindi

sta inserendo il codice fiscale di un paziente che ho già in anagrafica

quindi su queste due casistiche qui

quindi dicevo

consideriamo che il codice che a volte gli alias vengono usati magari anche a inseguito a recuperi dati ad esempio faccio recupero dati

vengono usati magari anche in seguito a recupero i dati.

Ad esempio, io faccio un recupero dati,

la cosa ottimale ovviamente, la cosa intelligente,

è che durante il recupero dati faccio tutte le mie verifiche,

però per quanto uno magari può verificare i dati che gli arrivano,

magari può essere utile che in virtù del recupero dati poi uno lancia una ricerca degli alias per fare poi queste verifiche.

In quel caso lì può avere senso magari fare criteri di ricerca, criteri

di accorpamento, magari. Però normalmente così fanno solo i criteri di ricerca. Alte

domande? Un caso che mi è venuta in mente, nel caso che si presentasse al primo soccorso un paziente è stato incosciente,

quindi viene registrato come sconosciuto.

Gli vengono fatti accertamenti, visite eccetera, poi magari rinveisce e viene compilata la suona grafica.

Nel caso in cui fosse già censito, in quel caso sarebbe utile poi fare un accortamento,

in questo caso, viene è stato come alias

esattamente questo

perfetto

questo si è proprio un caso principe

yes

altro?

ok

allora vediamo come si fa

tutta sta roba

allora allora ok, allora vediamo come si fa tutta sta roba

allora

allora

l'utente deve essere applicativo per la gestione degli alias

ok, non abbiamo bisogno di attivare cose a livello di amministrazione

però deve essere un utente

che ha visibilità

del punto di menù anagrafiche, configurazione, criteri di alias.

Quindi il primo step è quello di definire ovviamente le mie regolette.

Ora, cosa bisogna fare?

Bisogna fare prima ricerca

e ci viene chiesto praticamente con questa maschera qui, questi valori sono fissi, sono rilasciati dal laboratorio di sviluppo, ci viene chiesto l'oggetto su cui voglio gestire gli alias sono una funzionalità del framework, poi li vedremo le classi, ma le classi stanno dentro JBF.

Perché? Perché potenzialmente gli alias che alla fine dei conti, che vuol dire?

Stabilire se due record di una tabella sul DB sono uguali, quindi potenzialmente sarebbe...

sarebbero applicabili dappertutto, cioè io potrei crearmelo ovviamente, però devo rilasciarlo da laboratorio di sviluppo, sulla mia tabella corsi? Ari criteri definiti no, alias presenti no. Però, ad esempio, gli alias, a differenza delle proposte dei pesi,

che come vi dicevo possiamo associare proposte e pesi sia a pazienti che a persone,

però nella realtà si fa solo sui pazienti,

invece no, gli alias sono una cosa che si fa anche sui soggetti.

Tanto soprattutto per la questione dell'MC, dei fornitori, per esempio.

Quindi, i criteri li possiamo definire, insomma, il primo step è di decidere su quale oggetto vogliamo definire i nostri criteri di alias.

i nostri criteri di alias.

Vado ad esempio sulla sapatiente.

Ora qui, purtroppo, ci sta un problema di visualizzazione,

quindi vedete tutto un po' che si sovrappone.

Adesso pulisco la maschera solo per farvela vedere, d'accordo?

Però pulisco un po' di roba eccolo qua

però quelli che vedevate

che si sovrapponevano

erano tutti i criteri di alias

che sono stati definiti

in Sardegna

cos'è un criterio di alias

quindi in Soldoni?

abbiamo detto che è un insieme di regole

quindi noi qui ci possiamo comporre

con questa maschera le regole che vogliamo e di regole. Quindi noi qui ci possiamo comporre con questa maschera

le regole che vogliamo. E le regole cosa sono? Sono i campi del DB. Vedete, qui vengono elencati

tutti i campi del DB della sapaziente. Quindi magari posso fare, allora, posso fare, che ne so, se il cognome e il nome è uguale, cosa faccio? Faccio pzata cogn, aggiungi, pzname, aggiungi, ripulisco qua, ho fatto, ok, ripulisco qua la mascheraera e ho definito questi campi qui

poi quali dico che criterio di confronto voglio fare

uguale ad esempio

e uguale

poi vediamo un attimo quelle che ci sono

quindi in questo caso vi sto dicendo

guarda considerameli uguale

se due persone hanno per il pz.com e il pz.nome lo stesso valore

qua in realtà poi ci avete anche altri

di tutto

addirittura

abbiamo compreso

addirittura ci avete la distanza di

Levinstein, quindi per capire se due string

hanno una distanza

qual è la distanza tra due

stringa, utile magari per i nomi stranieri, perché i nomi stranieri è facile sbagliarsi

una doppia, una doppia V eccetera, ok? Valorizzato, uguale, diverso da, solitamente quelli che

si usano in realtà alla fin fine si riduce a uguale e diverso da, però potenzialmente

insomma queste sono tutte quante le funzioncine che potete associare ai campi.

Poi dovete stabilire una priorità, questo perché? Perché io posso definire tanti criteri di valutazione, diversi.

E quei criteri vengono valutati ovviamente una alla volta, andando a seguire l'ordine di priorità che è stato stabilito.

Il primo criterio che viene esaudito con successo si termina lì, crea la coppia master alias,

quindi magari io faccio un primo criterio, nome e cognome uguale, anzi il primo criterio è codice fiscale uguale,

codice fiscale uguale, No. Ok, passo al secondo criterio.

Nome e cognome uguale? No.

Terzo criterio, il cognome uguale? Sì.

Ok, creo l'alias.

Devo fare una cosa di questo genere, ok?

Quindi posso censire N criteri,

dandogli una descrizione,

e qui dandogli una priorità di ordine.

Ok?

Poi, tipo ricercaerca accorpamento

è quello che vi anticipavo

ricerca vuol dire che servirà per cercare

gli alias, quindi per creare la coppia

alias, master alias

se io metto accorpamento

invece viene usato

solo in fase di merge, di accorpamento

quindi una volta che una coppia è stata

creata, io

l'accorpo, clicco ok, accorpamento quindi una volta che una coppia è stata creata io l'accorpo clicco

ok accorpami questa questa coppia master alias lo sweeper che con oggettino

dove fare accorpamento rivaluta i criteri che sono marcati come accorpamento

se gli da un un est positivo fa il, altrimenti non fa nulla l'accorpamento comunque sia prevede di

identificare

dei

legali regole, quindi di stabilire i nostri campi

algoritmo eccetera

però in più, volendo, si può anche

associare uno scriptrino

quindi implementare in uno scriptrino

le nostre logiche

di verifica dell'accorpamento.

Quindi lo scriptrino che tornerà true, accorpa, false, non accorpa.

E dentro quel true, false lo torna in base alla qualunque.

Ci siamo fino qui?

Sì, ok.

Ok.

Criterio automatico.

Allora, il criterio non automatico, questo fa riferimento a

quello che avviene in fase di inserimento di un paziente.

Questo criterio automatico è per l'inserimento del paziente.

Non automatico è il default, vuol dire che praticamente

quando io lancio la ricerca degli alias,

questo criterio mi verrà valutato solo in quel caso lì.

Non automatico è anche utile quando i master alias li creo manualmente.

Quindi gli associo

un criterio. Quindi quando io lancio, vabbè, il caso che vi dicevo ad esempio della slide, lancio una

ricerca degli alias, lui mi va con un automatico, dice ok, questo criterio usamelo soltanto in quel

contesto lì. Quindi io faccio la ricerca degli alias, valuto il mio criterio e creo eventualmente

la coppia master alias.

Però, oltre alla ricerca degli alias, un criterio lo posso definire anche automatico per messaggistica.

Che vuol dire? Vuol dire che se mi sta avvenendo un inserimento paziente,

di un nuovo paziente, da web service, valutami questo criterio.

Subito, valutamelo subito.

Cioè non aspettare che io faccio lancio la ricerca degli alias.

No.

Valutamelo subito.

Se il criterio di alias è soddisfatto,

la coppia master alias viene creata subito.

Pam.

Immediatamente.

Ok? A questo li posso associare il blocco operatore.

Blocco operatore che significa? Vuol dire che oltre a essere automatico per messaggistica

la valutazione di questo criterio, causa anche un blocco, cioè a web service gli do un errore,

gli dice, attenti fermo, tu mi stai cercando di inserire un paziente che secondo i criteri

di alias definiti esiste già.

E l'ID del paziente che esiste già è questo, gli dice pure questo, gli dice tipo l'ID è 100, esiste già un paziente con ID 100 con le caratteristiche che mi stai inserendo tu e quindi da un blocco.

quando attivo il blocco operatore si può estendere il criterio automatico

anche solo per l'interfaccia

ok?

questo è ignorato, è un errore

questo vorrebbe uscire solo quando è accorpamento

adesso lascio fuori così

quindi blocco operatore per interfaccia

quindi vuol dire che blocco

l'inserimento, cioè mostro un errore

un avviso all'utente in realtà

e lo faccio però

in questo caso solo all'interfaccia utente

quindi per messaggistica non avrebbe valore

la messaggistica in questo caso continuerebbe

a inserire senza errori

oppure metto entrambi

e vale quindi per l'interfaccia utente e per la messaggistica web service.

Ok?

Domande?

Ok.

Allora, io, ad esempio, avevo creato, adesso purtroppo vedete male, già, adesso senza che lo ricrevo, nel corso dei vostri colleghi, che ho fatto, ho creato un criterio mio,

che si chiama formazione CF uguale,

di tipo ricerca,

e automatico per interfaccia con blocco operatore.

Banalmente è una regola sul codice fiscale,

non so se la vedete qua sotto dove suona il mio mouse,

sul codice fiscale uguale. Quindi dovrebbe essere una regola che se io provo ad inserire un paziente

il cui codice fiscale esiste già, ho un avviso in maschera. Proviamo a vederla come funziona.

Così vediamo un attimo, poi dopo vediamo un attimo l'accorpamento eccetera. Intanto

vediamo un attimo come agisce. Quindi non la ricerca degli alias, quello lo vediamo un attimo come agisce quindi non la ricerca degli alias

quello lo vediamo dopo magari

anzi anche adesso un attimo ve lo faccio vedere

però poi vediamo una cosa un pochettino più tangibile

che è quello che avviene sulla maschera del paziente

con il blocco operatore

la ricerca degli alias si lancia

tramite il menu pazienti alias. Qui avete un bellissimo tasto che è avvio ricerca possibili alias.

Cliccando qui, ora non lo faccio perché è un'operazione che ovviamente potete capire richiede tempo, è possibile lanciare ricerca degli alias.

tempo, è possibile lanciare ricerca degli alias.

Oppure addirittura, sempre con questa maschera, è possibile creare manualmente un alias.

Quindi comunque questo qui andrebbe a cercare gli alias che già ho sulla mia base dati.

Però come vi dicevo, la funzione degli alias è duplice.

Oltre a cercare magari eventuali duplicati che già uno ha sulla base dati, è creare l'alias in automatico

al momento in cui viene inserito, come ad esempio se inserisco un paziente il cui codice fiscale

già esiste, in base alla regoletta che mi sono fatto qui, quindi per codice fiscale è uguale.

Ma il caso è sempre quello che diceva prima Federico, quindi magari un paziente che io

dopo dopo ci insisco con lo stesso codice fiscale, che all'inizio era sconosciuto 1, sconosciuto

2, sconosciuto 3 come campo.

Vediamo che succede.

Patienti gestione.

Un secondo. un secondo

ok, paziente di gestione

faccio nuovo

inserisco un paziente

ad esempio

verdi

Giuseppe

nato nell'80

maschio

Roma

e mi calcolo il codice fiscale

comune di residenza

eccetera

ho creato questo paziente la comune di residenza, eccetera.

Ho creato questo paziente.

Questo è lì di che gli viene assegnato.

Adesso faccio nuovo.

Scensisco magari lo stesso paziente così mi tornava lo stesso codice fiscale,

anzi vediamo se non dovrebbe esserci un controllo, io ci inserisco una cosa che non manca un Giuseppe V Verdi, come abbiamo fatto nell'esempio, Verdi, Giuseppe.

Nato nell'80, Maschio, Comune di Nascita, Roma.

Codice fiscale, ci rincollo quello che ho calcolato sul primo paziente.

Comune di residenza.

Confermo.

Attenzione, sono stati individuati le possibili alias per il paziente.

Il paziente non è stato inserito al DB. Per forzare l'inserimento, selezionare di nuovo conferma. Per visualizzare gli alias, selezionare il pulsante alias. Quindi il paziente, in

questo momento, vedete, non c'è il tasto elimina, per quanto non si possa eliminare,

però non c'è neanche ingrigito, quindi ancora io in

realtà sono in inserimento. Mi è stato già staccato un identificativo paziente, ma sul DB non c'è

andato a finire e mi dice individuate un possibile master con chiave il paziente che ho inserito prima.

Se io adesso clicco su alias, non ci clicco perché dopo cambio maschera, mi farebbe vedere il paziente master, quindi l'altro Giuseppe Verdi.

Io dico, vabbè, conferma, crealo comunque.

Ok, il paziente è stato inserito.

Se adesso vado su alias.

Ci vado adesso.

Eccolo qua.

Perché va ad obbligato?

Erano interessanti anche i warning che aveva emesso prima.

Sì, adesso un attimo ci torniamo questa è un errore di visualizzazione

fa vedere record corrente e se stesso due volte

comunque vedete che ha creato

questa è la coppia master alias

questa cartellina qui

quindi il master sta sulla cartellina

quindi il Giuseppe Verdi che abbiamo inserito prima

il G Giuseppe

è stato eletto alias.

Ok?

Perché?

Perché rispetta il criterio che ho definito

alias CF blocco inserimenti.

Però non è questo il criterio.

Ah, perché il mio...

Alias CA perché già ci sta un altro.

Però perché?

Non è bloccante.

Però perché? Non è bloccante.

Mi sarei aspettato che ci fosse stato il mio.

Form CF.

Un po' dopo ci torno, un attimo volevo capire dopo. Comun comunque ha creato questa coppia

master alias

adesso vediamo sul db cosa c'è

per quanto riguarda i warning che ci stava

faccio conferma

codice fiscale non corrisponde alla tene grafica del paziente

è giusto perché qua è Giuseppe

e il codice fiscale che ho messo

poi il codice fiscale del paziente non corrisponde alla tenagrafici oppure è stato inserito un CVF provvisorio.

Allora è ripetuto due volte perché questo lo scrive l'applicativo, questo warning lo scrive lo scripted perché l'abbiamo visto prima.

Non lo so perché se lo sono implementati due volte, non lo so.

Poi ci dice individuati possibili alias per questo

paziente e va bene l'abbiamo appena visto e qui si esistono consensi

obbligatori da riautorizzare, questo lo vediamo invece più avanti.

È un'altra cosa sui consensi perché mi sono divertito con i vostri colleghi a

definire anche dei consensi obbligatori, i consensi non erano gestiti su questo

ambiente in realtà, li ho attivati io

per fargli vedere la gestione dei

consensi sulla privacy

come funzionava, poi lo vediamo magari

all'atere, non è

importantissimo

ok, quindi

adesso un attimo per vedere

sul db che è successo

prima di andare avanti

allora sul db io avrò

innanzitutto due pazienti,

la sua paziente.

Il ZB in 05, 06.

io ho i due pazienti, Giuseppe e G. Giuseppe.

Sulla Sialias in questo momento ho la coppia

che mi associa i due pazienti insieme.

Quindi where AL master in questo

and AL detail in questo.

Eccola qua la coppia.

Quindi il master è il mio primo Giuseppe Verdi e l'alias è questo qui.

Qui è scritto il criterio che è stato verificato, che è il 2, poi vedo un attimo perché il 2 non il mio 19.

Comunque, per adesso quello che ci interessa è questo flag, AL che vale n. n vuol dire non eseguito, vuol dire che appunto è stato creato l'alias ma non è stato accorpato,

solo creato, nulla di più.

Io adesso cosa posso fare io utente?

cosa posso fare io utente andare su menu panagrafiche patienti alias mostra solo se non è seguito metto anche un filtro per cercare il mio giuseppe verdi

quindi cognome verdi ok altrimenti mi giusto per una questione di velocità.

Ho fatto una prova l'altra volta, ci sono veramente centinaia e centinaia di alias.

Eccolo qua.

Vi viene mostrato, è qua corretto,

vi viene mostrato la mia coppia master-alias. Quindi un record per il master e un record per l'alias.

Poi guardate qua, purtroppo la visualizzazione è un po' quella che è,

però qua insomma venne riportati un po' tutti i campi anagrafici del paziente, alcuni, i più importanti.

Cosa può fare adesso l'utente?

Prima di tutto può andare in gestione della coppia e qui cambiare il master eventualmente. Quindi clicca qui, dice no guarda il master

non è questo, è questo qui e clicca cambia master. Questa è la prima cosa che può fare.

Un'altra cosa che può fare da questa maschera è invece il fatto di selezionare l'alias e dire accorpa oppure rifiuta. Se

rifiuta lo stato qui viene messo a R è fine della fiera. L'alias rimane ma soltanto come

storico, ok? Rifiuto, quindi

niente, quei due pazienti verranno considerati,

quei due record verranno considerati diversi.

È un errore, non erano veramente degli alias.

Se invece

li mette come

clicca su accorpamento alias,

Che cosa accade? Che sulla C alias viene messo lo stato di, da eseguire.

Che succede poi?

Noi abbiamo l'agent che dicevamo si chiama, ecco qui, agent sweeper, che gira, secondo la pianificazione,

e fa una query sulla C alias andando a cercare tutti i record che hanno come LXXD da eseguire.

Si rifiltra tutti questi, si dirà giù tutti gli alias da accorpare.

Per ciascuna coppia che occorre accorpare, cosa fa?

cosa fa? Invoca degli oggetti applicativi denominati alias sweeper che sono censiti in questa tabella.

Quindi fa una query qui dentro. attenzione, dicendo, io devo accorpare un paziente,

quindi si filtra tutti gli oggettini innanzitutto

che sono relativi al lookup sta paziente,

e va a eseguire quello che c'è in sito qui dentro,

ASPath.

ASPath potrebbe essere, o come in questo caso,

una classe Java, il path di una classe Java,

oppure un package PLSQL.

Ora qua siamo sull'ambiente formazione mchr, quindi non ci sta roba sanitaria,

quindi per questo non troviamo niente del paziente, ok?

Però supponiamo che qui abbiamo magari la paziente e il PAT è un package per l'accorpamento dei ricoveri,

un package ora, un PLSQL. Quindi la sweeper cosa avrebbe

fatto? Avrebbe detto, ok, devo accorpare il 705 con il 706, passo questi due pazienti al package che

trovo scritto qua dentro nella Sialian Sweeper, non mi frega niente, a me agent, io lo invoco,

gli passo i dati, mi aspetto che mi dà ok K.O., quello che fa dentro non mi interga niente a me agent, io lo invoco gli passo i dati, mi aspetto che mi da

ok K.O. quello che fa dentro non mi interessa

ok? io invoco questo oggetto

gli risponde ok

che ha accorpato

quindi che fa a questo punto lo sweeper?

marca

la sialias come E

eseguito, merge

e disattiva sulla sua paziente il paziente alias.

Fine.

Ci siamo? Devo ripetere?

Mi sembra...

Sì.

740.

Come? Tutto chiaro? Sì, era chiaro. Sì, ripeto. mi sembra che si fa si 740 come?

tutto chiaro?

si era chiaro?

si ripeto si ripeto

ok

quindi

dicevamo

in questo momento

abbiamo la C alias

che

mi contiene la mia coppia master alias, quindi è stato identificato questi due pazienti come

essere la stessa persona, però viene messo inizialmente con il flag N, non eseguito,

perché poi è responsabilità dell'utente andare qui sulla maschera degli alias e per

cliccare il tasto accorpa gli alias. Questo accorpamento alias mi marca il flag AD da eseguire, poi gira l'agent sweeper, secondo la pianificazione che gli è stata data, l'agent sweeper si cerca tutti i record sulla C alias che hanno il flag AD da eseguire. Per ciascun paziente che deve essere eseguito,

quindi che deve essere accorpato,

lui invoca gli oggetti censiti su questa tabella

Sialias Sweeper.

Questi oggetti sono oggetti riasciati dal laboratorio di sviluppo.

Posserebbero essere delle classi Java,

oppure solitamente sono dei package PLSQL,

solitamente.

Quindi, ad esempio, c'è un package PL PLSQL per accorpare i ricoveri.

Quindi lo sweeper invoca quel package dicendogli ID del paziente master, ID del paziente alias, accorpamelo.

Fine. Ignora.

Il package risponderà con OK, o KO.

Se risponde con OK, allora vuol dire che lo sweeper considererà, l'agent dello sweeper considera il paziente accorpato,

e si limita soltanto a quel punto a disattivare il paziente, alias, in modo da lasciare attivo solo il master.

E qui concluderà la nostra si alias mettendo Lexec e eseguito mergiato

se ci fosse stato un errore

durante l'accorpamento

il nostro PLSQ

supponiamo che

restituiva un errore

qualsiasi

alexec rimaneva

da eseguire

ma con alerror s per marcarlo che è andato in errore esecuzione

e questo disaccorpare perfetto ottimo una volta che una coppia master alias è accorpata si accenderà

qua il tasto annulla accorpamento alias cioè e l'utente dice ah mi sono sbagliato, non erano da accorpare, erano due persone diverse.

Quindi può selezionare sempre qua l'alias e cliccare su annulla accorpamento.

In quel caso lo stato che viene emesso è U, da disaccorpare, e lo sweeper per quelli ad U farà l'operazione inversa,

disaccorpare e lo sweeper per quelli ad u farà

l'operazione inversa, cioè

invocherà

gli oggetti sweeper

però dicendoli file un merge

file disaccorpamento

quando poi

tutti gli ad u farà l'operazione inversa

allora lui rimette, riattiva l'a

e qui sullo stato si alias lo rimette come è eseguito.

L'ese eseguito è lo stato definitivo per entrambi.

Una cosa importante, l'accorpamento non è mai sui dati anagrafici.

I dati anagrafici non vengono mai accorpati, quindi non ci immaginiamo che il cognome dell'alias oppure l'asso d'appartenenza dell'alias viene ribaltato sull'asso d'appartenenza del master.

Dal punto di vista anagrafico, quindi sa paziente, l'unica cosa che viene fatta è disattivare o attivare, lasciare il master attivo, disattivare gli alias. Fine.

Per quanto riguarda invece tutti gli eventi clinico-sanitari,

ogni verticale, se lo ritiene opportuno,

ha rilasciato all'interno della Sialia Sweeper

un oggetto che gli permette di gestire l'accorpamento

e il disaccorpamento delle proprie tabelle

quindi

esempio so che ce ne sono

che ce ne sa uno appunto sui ricoveri

so che ce n'è anche uno sulle

sulle medicina di base

mdb web, un altro modulo verticale

della medicina del territoriale

che non c'è in Sardegna

però è uno di quelli che mi ricordo

e poi

ce ne sono uno sul punto soccorso

e così via dicendo

ora qua siamo sull'ambiente di mchr

quindi non ci sono alias sweeper

rilasciati per il paziente

ovviamente perché il paziente non è così fondamentale

eccentrico

però ad esempio qui vediamo che c'è

uno sweeper

un alias sweeper rilasciato per i soggetti

quindi eventualmente se uno fa un accorpamento

sulla persona

ok, verrà invocato

questo sweeper

questo possiamo anche vedere perché è uno sweeper che sta

su MPI

qui su Sian

ok

questo sweeper per merge degli indirizzi

specifica per regione e marche

specifica per regione e marche quindi nel senso che

è stato sviluppato

per loro in realtà

e che cosa fa

ecco

il metodo che espone

è soltanto questo metodo

il metodo execute

undo

quindi execute per fare il merge undo per fare l'unmerge.

Poi, vabbè, init e release sono metodi di comodo per inizializzare e per concludere il lavoro.

Quindi l'agent sweeper invoca l'init per inizializzare l'unmerge alla fine del lavoro.

Execute, undo, invece dipende se stiamo facendo operazioni di merge o di unmerge.

Qui che fa ad esempio l'execute? Copie i rapporti, carica il must,

carica i rapporti del master, carica i rapporti degli alias, carica anche gli indirizzi di master

e alias, ciclo i rapporti, leggo i rapporti tipo fornitore e cliente, quindi questo è

lavora soltanto ed è specifico addirittura per i fornitori e i clienti, non lo fa per altre cose.

Leggo i rapporti tipo fornitore e cliente per l'azienda.

Provo a copiare solo i rapporti tipo fornitore e cliente per l'azienda specificata.

Recupero tutti i rapporti del master che siano dello stesso tipo per la stessa azienda.

Si suppone che siano ordinati per data inizio crescente.

E poi qua gestisce, insomma, senza andarci nel dettaglio, gestisce tutte quante le casistiche.

Quindi intervallo alias completamente contenuto nel master.

Quindi praticamente lui deve copiarsi i rapporti del master

e i rapporti dell'alias.

Sappiamo che i rapporti hanno una data di abilitazione

di inizio e fine.

Se io sulla master ho il rapporto fornitore

che mi inizia nel 2022,

e sull'alias anche un rapporto fornitore che mi inizia nel 2022 e sull'alias anche un rapporto fornitore che

però mi inizia nel 2021, come cavolo l'emergio? E quindi qua fa tutte le classistiche per cui

l'intervallo è contenuto, l'intervallo si interseca, l'intervallo è successivo e in base a quello

insomma fa delle cose diverse. Se il rapporto non esiste per nulla

nel master ma esiste nell'alias

allora lo crea nel master

questa è la situazione un po' più semplice

e così via

dicendo

copia anche lì, fa la stessa cosa, stessi ragionamenti per gli indirizzi

anche sempre andando a controllare

le date di validità

copia anche le modalità di pagamento

e vedete che addirittura in questo caso non gestisce l'unmerge, quindi è una cosa molto specifica,

soltanto per fare il merge, questo ad esempio non gestisce la merge, quindi se qualcuno facesse l'annullo accorpamento di un soggetto, l'unica cosa che otterrebbe è riattivare l'alias, fine, sull'andu questo non fa niente.

Però ripeto, questo ad esempio non ci interessa nel caso della Sardegna perché è stato sviluppato solo per le marche, tant'è che qui mi pare di aver letto che va a leggere un parametro.

Il parametro aziendale.

No, no, questo lo farebbe per tutti, come non detto, questo va per tutti.

non detto, no, no, questo va per tutti questo è per leggere il parametro

parameter

no, questo è per leggere il parametro

relativamente

a qual è il rapporto di tipo fornitore

quindi il tipo di rapporto che è stato censito

come fornitore, no, questo va per tutti, anche per la Sardegna

vabbè, sarà giusto

cosa buona e giusto averlo visto

ok

ok, questo è un main per fare delle prove ok ok?

ok, questo è un main per fare delle prove vedete qua

all'execute viene passato l'id del master

e il detail detail, così ognuno ha la possibilità

poi di fare tutti i ragionamenti che deve fare

va bene?

va bene

un exicuto

perché il

il dato di ritorno

in stream

ah per ritorno a nulla

vediamo non lo so

infatti qua ritorno a nulla

vediamo che serve

vediamo chi lo so vediamo che serve vediamo chi lo chiama

ah figo

figo

praticamente ti puoi tornare

un file

tutto tuo

quindi qua tu potresti crearti, forse sarebbe perché magari

in virtù, forse perché giustamente dice, in virtù dell'accorpamento tu cambi le condizioni

del master, quindi magari ti vuoi tenere traccia di quello che cambi per fare poi eventualmente

l'andu, ok? Altrimenti l'andu dici, devi fare l'anmerge,

quindi devo tornare alla situazione di prima,

ma qual era la situazione di prima?

Ormai ho cambiato tutto.

A tu cosa potresti fare?

Ti potresti creare un tuo file,

con le tue informazioni,

magari potrebbe essere un file XML

che ci descrive la situazione di prima,

lo torni sotto forma di input stream,

questo input stream viene salvato

sulla siattouch

quella che abbiamo visto, la tabella dove vengono

salvati tutti i file

con questo formato qui

e vediamo un po'

io mi aspetterei che poi

quando fai l'undo ti ripassa

quel file lì, in maniera che tu te lo deseralizzi

e fai quello che devi fare, vediamo

vediamo eh vediamo

quando chiama l'andu

l'andu esatto l'andu si va a recuperare la touch e te lo ripassa così tu eventualmente ti

teni tra il utilizzi quel file per dire come era cosa devo ripristinare cosa ho toccato, cosa ho cambiato

qui giustamente siccome l'Handu

questo sweeper non vuole gestirlo

torniamo a nulla

ok, capito

ok non meno poi si insomma la gestione master

la gestione degli aria ok

che i pipi pipi pipi ok pipipipipipipi

questo non è un errore di battitura

è un errore di battitura

ma è un errore di battitura di chi ha creato la tabella

quindi invece di sweeper

chi creò la tabella all'epoca

che ho scritto IPER.

Va bene.

Poi, come le altre tabelle sono la Sialias Criteri,

che è la tabella di anagrafica di tutti i criteri definiti,

e la Sialias Campi è quella che a partire dal criterio vi dice

i campi che sono stati aggiunti come regole

per comporre il nostro criterio di alias.

Un po' di classi.

Un po' di classi.

Non mi piace che ci ho lasciato il verde.

Un po' di classi sono...

Allora, l'alias bin è la classe di B e il bin che lavora sulla

C alias, quindi quella che modella le coppie master alias che troviamo, alias bin è il bin della tabella, poi alias utils, alias utils è una

classe di utilità degli alias e permettono tutta la verifica degli A dei criteri, quindi ci avremo dei metodi per fare

la verifica dei criteri, dei metodi per creare

una coppia master alias

quindi tutte le

funzionalità che abbiamo visto, ad esempio

la maschera di ricerca

la maschera degli alias

quindi questa qui

ok? questa qui

quando clicchiamo accorpamento lui farà

aliasutils.

quando clicchiamo accorpamento lui farà

aliasutils.

In realtà per accorpamento no.

Ad esempio lo fa per

quando viene creato il...

Partiamo dal paziente.

Ad esempio.

Un esempio in cui usa

l'Aliasutis è sul

paziente pin.

Ecco.

Il paziente non è stato inserito,

non è stato individuato un master.

Generate master.

No, non è questo.

Aliasutils.

Punto. Generate master, no, non è questo, aliasutils. Ecco, ad esempio, find alias get master info.

Qui dentro siamo sul metodo store, quindi quando salvo il paziente, eccolo qua, cercami se ci sono degli alias per cosa per sta paziente, qual è il d, il d del mio paziente,

l'utente e poi gli passa anche la connessione, la connessione serve perché ovviamente per far sì che tutta la procedura lavori sulla stessa transazione.

Quindi poi qua dentro lui cosa farà? Avvia la ricerca, insistente questo alias finder record, che è questo oggettino qui, che poi va a cercare di generare eventualmente degli alias.

alias finder momento, generate alias, eccolo qua.

Quindi si recupera i criteri che sono stati definiti,

per ciascun criterio va a leggere le informazioni,

e poi fa apply criterio.

Insomma, lo verifica e se il criterio poi è soddisfatto, inserisce l'alias, quindi la persiste, adesso qua è tutta una serie di classi astratte, non astratte, però lo inserisce, quindi bisogna andare su qui,

no, non era Pisciterio, era insert alias, scusate, insert alias, insert alias, alias, forse ha questa altra classe qui, alias finder record, insert alias, sì era qua, inser alias finder record, che va a inserire e salvare un oggetto alias bin e lo salva.

Ora qua non utilizza sempre il service manager, cattivo, cattivo, cattivo

vabbè, si crea il suo al direttamente il bin

quindi manco il bin, se non fa niente e poi lo salva direttamente tramite

persistent manager, vabbè

ok, è questo che da la coppia

che poi viene tornata, quindi tornando in cascata indietro viene tornata

qui

al nostro paziente bin,

che poi dice se il master è diverso da null, allora mostra quell'oggettino,

insomma quel messaggino che ci siamo visti prima, trovato, post duplicato, eccetera, eccetera.

Su aliasutis quindi trovate tutta questa serie di metodini per generare un alias, questo genera il alias viene fatto appunto quando viene individuato, ma anche quando ha maschera, quindi quando si crea manualmente un alias.

quando viene fatto l'accortamento

vediamo un po'

vediamo un po' l'accortamento che cosa chiama shift F12

può essere che cambia direttamente

lo stato a mano senza passare per areas utils

quindi

questo è il controller che sottende questa massa

di gestione degli alias accorpamento alias vedo che action mi manda

l'action sostituisci alias

non c'entra niente sostituisci alias e action sostituisci

cliccato, scusa. Accorpamento alias. Sì, sì, è lui, lui.

Ok, action sostituisci.

Do sostituisci.

Infatti questa è la sostituzione del...

Ah no, ok, finisce qui, ok.

Tattati, riprovi di te l''accorpamento verifica l'accorpamento

di pelchi

lui fa verifica criteri però di accorpamento

quindi come vi dicevo

poi quando si fa l'accorpamento

vengono valutati i criteri a quel punto di accorpamento

se sono definiti

quindi qua adesso si crea

si va a verificare i criteri di accorpamento

se sono verificati

se non sono verificati torna errore.

E va bene.

......

...

...

......

...

......

...

...

......

...... in flag

da eseguila

lo sostituisci

ah eccolo qua

e non l'avevo visto

ah ok stava qua in fondo scusate non l'avevo visto

mi sono cercato

quindi stavamo qui sulla nostra azione tu sostituisci

qua verifica i criteri di accorpamento

qua in fondo come ultima cosa

fa questo tuo operation e gli dice

da non eseguito passamelo a

da eseguire

e quindi niente

qua dentro mi aspetto che faccia

l'update

quindi si prende

l'oggetto

alias bin

disetta il nuovo stato di esecuzione e lo salva.

Quindi lo fa a marino.

L'altra classe importante è l'agente sweeper.

Sweeper, come vi dicevo, è quello che effettivamente fa l'accorpamento, vero e proprio.

Che cosa fa?

Nel nostro metodo run si fa innanzitutto una query per tinarsi giù tutti quanti gli alias che devono essere accorpati.

Poi si verifica prima di accorpare se effettivamente i criteri di accorpamento sono soddisfatti,

quindi se posso effettivamente accorpare e poi va a recuperare

sulla alias sweeper

eccola qua

su alias sweeper si va a caricare

i nostri oggettini sweeper

e si li mette in questa lista

entità

se sono definiti

quindi se è maggiori di zero

se sono definiti degli oggettini

sui alias sweeper, allora li esegue.

Ok?

E li esegue attraverso questa interfaccia sweeper entità runner, che abbiamo visto ad esempio nel caso del nostro persona fisica detail sweeper.

Quindi è il runner che esegue questa sweeper interface.

Quindi adesso se io vado dentro sweeper entità runner,

l'altro non farà che nel suo metodo run eseguire vari sweeper invocando,

eccolo qua, sweeper interface invocando il metodo execute.

Quindi ve lo aggiungo questa qui perché è utile.

Sweeper Entità Runner.

Fine.

Sulla domanda?

no Simone, io ho una domanda

che più o meno c'è tra conto

questo, perché

subisco il SMPI per alcune applicative

che stiamo qua

lo subisco a rivelai

L7

volevo sapere un pochettino

dove erano Luke

per propagare un po'

il messaggio a HL7

dove è il demon

ah sì, quello lo vediamo quando parliamo

dei web service

quello in realtà

lo vedi declinato sul paziente

però in realtà

La gestione web service è potenzialmente qualsiasi oggetto di Arias, anche un contratto, un ordine, una fattura,

può essere potenzialmente oggetto di integrazione, quindi lo vediamo generico, astratto.

Poi sì, come dicevo, il paziente poi nel 90% di integrazione alla fine ruota intorno al paziente.

Ok, chiaro, grazie.

Prego.

Altre domande?

Ok.

Allora, intanto, quindi questo lo concludiamo,

quindi questo insomma è XMPI,

quindi un attimo che interrompo la condivisione è vero

e ve lo carico il pdf

ricarico il pdf nel canale

ricarico il pdf nel canale c'è scritto analista

analista programmatore ok ok

ok ok

il materiale didattico

tutto ok

ora

magari

facciamo la pausa pranzo magari tra 5 minuti

oggi non abbiamo fatto la doppia pausa,

quindi tra i 5 minuti approfittiamone per fare una overview generale di XMPI,

inteso come altre anagrafiche, perché adesso ci siamo concentrati su quelle, abbiamo visto, anagrafiche di base

e quelle principali che sono

patienti, soggetti e strutture

però ce ne sono altre

perché non sono fatto un focus per il semplice fontivo

perché sono poi tutte anagrafiche

e come vi spiegavo

sono a servizio dei verticali qui

Quindi la pertinenza, quindi ve lo spiegheranno i colleghi dei singoli verticali, affronteranno sicuramente, vi parleranno di quelle anagrafiche, soprattutto da un punto di vista funzionale, perché poi sappiamo che per trovare il codice basta fare shift F12, però la cosa importante è anche fare un focus dal punto di vista funzionale. Sui soggetti, ad esempio, ci ritornerete.

Abbiamo visto una cosa a base, insomma,

per far sì che avete risurventi base per sapere

come crea un soggetto, ma soprattutto come li associa un rapporto.

Sai come funziona, che roba è il rapporto, il tipo rapporto,

e così via dicendo.

Però poi, ovvio che un soggetto assume una valenza diversa,

se è un fornitore, se è un medico, se è un dipendente, eccetera, quindi lì ci tornerete sui soggetti con i corsi di verticali.

Faccio banalmente un esempio, se io qua cerco il rapporto fornitore, un soggetto con rapporto fornitore, ricerca, quindi cerco tutti gli soggetti censiti come fornitore e aggiudicare dal tempo che ci sta mettendo sono tantini.

Mannaggio i pescetti.

Ok.

ok vedete qua c'è un tasto

caratteristiche MC

che non ve ne ho parlato

ve ne parleranno i colleghi di MC

se ci cliccate

quasi aprirà un altro mondo

ok

conto di costo

note di credito

ci interessa

come anagrafiche

non ci interessa

io lavoro nel modulo in anagrafiche faccio sv interessa, ok? Io lavoro nel modulo delle anagrafiche,

faccio sviluppo e manutenzione sul modulo XMPI,

non è che mi addentro su tutte queste funzionalità di verticale.

Però, per chi di voi segue i corsi da MC,

lo rifarà, un passaggio sui soggetti,

perché c'è tutto il mondo.

La stessa cosa anche per le strutture, no?

Abbiamo visto una cosa base, però in realtà le strutture, poi, è una richiedente, ci avrà dei parametri aggiuntivi, se è erogante e alti, se è un pronto soccorso alto, se è un centro di costo alzi ancora, ma tutti i focus sui verticali.

a queste, quindi giusto per fare anche una overview, 5 minuti prima di andare in pausa pranzo, oltre a queste qui abbiamo l'anagrafica per gli atti e documenti, quindi per intenderci

le delibere, ok? Che vengono magari, magari vediamo i tipi di atto, non so se ce ne sono,

ecco, delibere, determine, proposta di libero, ok? Possono essere immagazzinati e gestiti

tramite l'anagrafica, gestione atti e documenti

prestazioni

questo soprattutto lo vedrete

nel mondo

CUP

nature

sono i punti

per gestire fondamentalmente

classi merceologiche e piano di conti, quindi classi merceologiche dei prodotti,

piani di conti, inteso come conti gestionali, conti civili e così via dicendo.

Queste sono i CLM, classi merceologiche.

Ora, ripeto, senza che vi sto dicendo qual è la tabella e il BIN,

quale sarà la tabella e il BIN?

Sto dicendo qual è la tabella, il bin.

Quale sarà la tabella, il bin?

Shift F12, natura CLM V3, il controller.

Eccolo qua il bin.

Il bin, questa è la tabella.

Chiaro no?

Sì.

Perfetto, importante insomma è la canna da pesca, la famosa canna da pesca.

Ok, poi dopo ci sono tutto ciò che riguarda modala di AMC, tutta AMC per quanto riguarda le classi amiciologiche, perché poi si associano i prodotti, i prodotti, i servizi e quindi è roba di AMC.

Piano di conti, più nello specifico dovrebbe essere quasi esclusivamente di contabilità, ma soprattutto di controllo di gestione, comunque sempre del mondo MC stiamo parlando. Tipi di pagamento, modalità di pagamento è un mondo invece cross tra l'AMC e l'HR, l'AMC perché magari

contiene le modalità di pagamento, come pago il fornitore buyer, come la pago questa fattura,

qual è l'Iban, qual è il conto corrente, sono tutte cose che ci sensiscono qui, gestione banche,

modalità pagamento eccetera, d'accordo?

Però anche, per questo dico cross con l'HR, perché dovrebbero esserci anche ovviamente i modi con cui pagare, modalità di pagamento con cui pagare i dipendenti.

E invece l'anagrafica dei prodotti, quindi è una cosa a pannaggio dell'AMC e dell'EDF, che è il modulo erogazione diretta farmaco, l'EDF è un po' un modulo che vive in questo limbo perché è un po' un modulo san importante tanto quanto soggetti, pazienti ecc

però qua è ovvio che

è talmente

verticale sull'AMC

che ve lo spiegheranno

molto meglio i miei colleghi quindi per questo

non ci sono andato a vedere

però fondamentalmente che cosa c'ha

la descrizione, gli viene associata un'unità di misura

6 millilit, il codice

di IVA,

se è un bene di consumo,

se è un servizio,

la classe

mercologica a cui fa riferimento,

vedete che tutta roba MC, conto

civile, conto gestionale, quindi per questo non ci siamo andati a vedere, ci accontentiamo

di questo. Poi anche qui ci sono le caratteristiche MC che introducono ulteriori altre informazioni,

l'unica cosa importante da sapere è che nella grafica dei prodotti si va a legare con un

altro modulo, è sempre un modulo che appartiene al mondo delle mc che è il repertorio

quindi il prontuario il repertorio questa cosa qui quindi l'anagrafica dei dei dei dei prodotti che

sono acquisiti tramite farmadati tramite codifa queste queste cose qua comunque poi lo rivedete

bene lo vedete con colleg colleghi dell'MC, per

chi seguirà i corsi dell'MC, per chi non seguirà i corsi dell'MC i prodotti neanche

li vedrà, perché se dovete lavorare sull'ospedaliero per dire i prodotti non vi interessa.

Contratti attivi, anche questo dovrebbe essere qualcosa che appartiene al mondo del CUP,

Sogei non ci interessa perché non è attiva in Sardegna, comunque giusto coprire per dircelo,

è un'integrazione nativa che fa Arias con SOGIEI, con il sistema ATS per scaricarsi, per allineare i pazienti,

quindi addirittura c'è una possibilità di fare un confronto puntuale per dire rispetto ai pazienti che ho censito nella mia anagrafica,

rispetto ai pazienti che ho censito nella mia anagrafica,

qual è la differenza che trovo in anagrafica SOGGI?

Ah, il cognome è sbagliato, il codice fiscale è sbagliato,

allora ribalta i codici e le informazioni di SOGGI in anagrafica locale.

Poi c'è anche la gestione delle comunicazioni,

quando avviene una nuova, una, una, che ne so, l'associazione di un nuovo medico,

ok, al paziente e così via dicendo

però ecco ripeto

Sogei non è attivo quindi non ci interessa

profili prescrittivi

questo in realtà sta qui come tabella

però è completamente

da pannaggio di AMC

tant'è che in realtà non viene manco più usato

questo punto di menu

ma si utilizza un altro punto di menu che sta proprio sull'AMC quindi sul centralizzato AMC c'è che in realtà non viene manco più usato questo punto di menu, ma si utilizza un altro punto di menu che sta proprio sull'AMC, quindi sul centralizzato AMC c'è gestione profili, c'è un altro punto di menu che si sono creati loro, perché la tabella stava su XMPI, però non ci sono tanti punti di menu su XMPI che stanno lì solo come motivo tecnico, come vi dicevo, come punto centrale perché magari a tabella è comoda averla su XMPI, però poi la gestione è totale a pannaggio dei verticali.

Comunque, gestione di profili e scritti dovrebbe essere qualcosa relativamente alla rilevazione fabbisogni che si può fare sul modulo della logistica dei magazzini.

alla rilevazione fabbisogni che si può fare sul modulo della logistica dei magazzini.

Questi sono, ricordatevi, tutti i menu con i pupazzetti, vuol dire che sono menu personalizzati, quindi non rilasciati da sviluppo al laboratorio.

Ismar anche, è un punto di menu che potete ignorare perché sono punti di menu che vengono usati per il cliente sanitario.

San Marino, quindi sicuro

anche uno stato diverso, sicuro, neanche

una regione diversa, quindi sono per

per l'utente

San Marino

fine

quindi direi, se non ci sono domande, ci regaliamo

questi 5 minuti di pausa pranzo in più

e ci riebecchiamo le due e continuiamo

con un nuovo argomento, XMPI è conclusa

poi insomma le due se vi viene in frattempo qualche domanda

mentre mangiate il piatto di spaghetti

me le fate, va bene?

va bene? va bene

buon pranzo a tutti

ciao a tutti

ciao buon pranzo Grazie a tutti.



-----------------
VIDEOLEZIONE 12 :
-----------------

Eccoci ragazzi.

Un pomeriggio, aspettiamo che arrivano anche gli altri e iniziamo.

Un secondo. un secondo Grazie a tutti. Grazie. Allora manca Mario e basta.

Nel frattempo vi ho caricato, come dicevo, le slide

e adesso andiamo ad introdurre un nuovo argomento.

Intanto le apro mentre aspettiamo.

Allora, PDF, PDF, PDF. aspettiamo allora pdf

Buon pomeriggio.

Grazie. rimangono solo due argomenti da completare uno che sicuramente affronteremo in tutta la giornata domani

e forse iniziamo anche oggi, non so, vediamo

che è relativo a Jauf

e Jauf come vi anticipavo sarebbe tutte quelle maschere

che nuove, di layout nuovo che vi ho fatto intravedere su alcune gestioni.

Quindi lo affronteremo in maniera un po' speculare a quello che abbiamo fatto nel corso giovedì e venerdì scorso.

Vi ricordate, giovedì e venerdì scorso abbiamo creato delle maschere da zero, seguendo gli esercizi, nella modalità vecchio look and feel.

nella modalità, come dire, vecchio look and feel.

Rifaremo gli stessi identici esercizi, quindi sempre corso, studenti, esami,

però modalità JAUF, ok?

Quindi questo sarà, diciamo, il grosso di quello, come dire,

di parte di sviluppo che dobbiamo fare.

Prima di farlo, però, vorrei completare con alcune nozioni generali relative al framework, quindi parleremo di plugin, parleremo di integrazione e ledapp, parleremo

di web service, prima uno dei vostri colleghi ne aveva tirato l'argomento, e fine. Poi settimana prossima c'è il corso sul workflow e poi abbiamo insomma finito.

nel parlare di tutte queste cosine generali, in maniera magari da fare questa mezza giornata così,

e domani iniziare dalla mattinata a parlare soltanto di JAUF e fare gli esercizi. Ok?

Allora, intanto io condivido lo schermo. Quindi in questo corso vedremo oggetti comuni e OSGI, integrazione delle Dapp SSO, quindi

sempre una cosa relativa agli oggetti comuni e web service ABF relativo alla gestione degli

erenti. Rilascio delle modifiche al DB, in realtà questo l'avevamo

anticipato no ce lo siamo già sparata questa cartuccia quando mancavano un paio

d'ore l'abbiamo abbiamo approfittato di quei due ore per anticipare e parlare un

po delle modifiche liquid base eccetera quindi questa realtà

lato

Cosa è oggetti comuni? Allora, in generale all'interno di Arias,

eccolo Mario, eccolo qua.

Allora, dicevo, in generale all'interno di Arias abbiamo la possibilità di rilasciare alcune componenti software tramite modalità plugin, nello scopo di estendere funzionalità base di Arias,

quindi non necessariamente, facendo l'esempio del nostro corso,

il nostro wizard, eccetera, non necessariamente in realtà

dovevamo per forza inserirlo all'interno di un progetto

già tra quelli che abbiamo attualmente nel workspace,

quindi sì anche in questo caso,

avremmo anche potuto rilasciarlo in realtà tramite plugin, già tra quelli che abbiamo attualmente nel workspace, no? Quindi sì, anche in questo caso, no?

Avremmo anche potuto rilasciarlo in realtà tramite plugin.

Il plugin danno il grosso vantaggio, in particolare,

di essere facili da installare.

Quindi, innanzitutto, non richiede di aggiornare l'intero sistema.

Quando parlo di aggiornare l'intero sistema, parlo di aggiornare l'intero sistema intendo dire

fare l'installazione tramite tool, quello che vi dicevo, a BF Installer

l'installazione ovviamente richiede tempo, il deploy, eccetera

il restart e così via dicendo

un po' più complesso, un po' più lungo, è un procedimento sicuramente più lungo

i plugin in Arias possono essere gestiti in due modalità.

Una modalità che è chiamata oggetti comuni e una modalità OSGI.

OSGI forse già lo conoscete, sapete di cosa sto parlando.

Ad ogni modo, OSGI è una modalità che è stata introdotta all'interno di Arias di tardi,

relativamente recente, tipo 6-7 anni fa, non lo so.

Quindi vedremo entrambe le modalità perché fino ad un certo punto

i plugin si facevano solo tramite oggetti comuni,

successivamente i plugin abbiamo incominciato a farli in modalità OSGI.

I plugin in ARIAS che sono gestiti tramite oggetti comuni possono essere gestiti tramite il punto menuale è che ogni oggetto comune ha praticamente un

tipo e un path classe. Allora, il tipo dell'oggetto comune è un tipo e un path classe. Il tipo

comune sta a identificare la natura del nostro plugin. Quindi nel momento in cui noi creiamo,

creiamo, sviluppiamo un oggetto comune, dobbiamo già sapere che cosa stiamo sviluppando. Ad esempio,

stiamo sviluppando, come in questo caso, un esempio dello screen, un servizio web service SOAP custom allora vorrà dire che questo plugin

dovrà essere caricato

all'interno del sistema

con tipologia classe

web service delegate

quindi la natura

dei possibili plugin

dei possibili oggetti comuni

che potete caricare è predefinita, poi li vediamo,

ne sono una decina, una quindicina, quindi solo quelli censiti all'interno di tipologia classe sono i

possibili plug-in che potete sviluppare. Quindi quando sviluppate un oggetto comune, lo svilupperete

secondo la vostra necessità. Quando poi lo caricate, va caricato specificando che tipo di oggetto comune, vabbè, lo svilupperete secondo quello che è la vostra necessità quando poi lo caricate

va caricato specificando

che tipo di oggetto comune è, che cos'è

un servizio web service custom

è un plugin per gestire

l'autenticazione con un sistema

SSO e così via dicendo, poi li vediamo

quindi innanzitutto deve essere tipizzato

un oggetto comune, e poi

l'informazione sul path class, il path class

altro non è che diciamo

l'entry point del nostro plugin ok quindi faccio un esempio se appunto è un web service custom la

nostra classe java di entry point quale sarà sarà il plug in sarà la classe che gestisce il web

service custom poi magari

vediamo con un esempio più chiaro

però magari ad esempio

se io faccio un plugin

addirittura posso fare anche plugin per rilasciare

maschere, ok?

quindi nuovi controller

ok?

quindi se voglio rilasciare un nuovo controller

nuova maschera, sul path class cosa ci metterò?

qual è l'entry point?

è la mia class, è il mio controller

ok? così via dicendo

vediamo nel concreto

mi collego con l'utente amministratore

amministratore e il punto di menu è sotto configurazione avanzate oggetti comuni.

Nuovo, vediamo un po' cosa abbiamo.

Un oggetto comune è un codice, una descrizione del plugin.

Plugin, mio plugin

di formazione

poi tipo

ci andiamo dopo, per adesso rimaniamo su classe

poi ci andiamo dopo e ve lo spiego

tipologia di

classi, questi sono i tipi di plugin

che potete implementare

ok? Ora anche qui

alcuni possono avere senso, altri meno senso

alcuni sono stati creati

magari anni e anni fa e poi non sono utilizzati

così vi dicendo, d'accordo?

alcuni proprio non vengono utilizzati in Sardegna

però in generale questi sono

quelli che sono

che il sistema che Arias riconosce

quindi un plugin per

gestire un'integrazione con un

OpenSSO

un plugin, ecco questo

è un esempio, i modelli di stampa, i modelli di stampa

ad esempio ve l'ho accennato

che non sono più supportati

quando vi ho fatto vedere i punti di menu della sottoconfigurazione

vi ho detto che non sono più supportati, quindi ad esempio

questo è un modello di stampa

è un plugin che ormai non ha più senso

perché non sono più supportati, perché erano gestiti tramite

Apple. Controller Attach

questo serve come dicevo

per rilasciare delle nuove gestioni

quindi la nostra maschera dei corsi

la potevamo rilasciare anche come plugin

di tipo controller Attach

c'è un plugin per l'integrazione

LED app, un plugin per l'integrazione

di LED app con SSO

Ticket Provider SSO

a dispetto del nome non parla

tanto di un SSO

classico

parla della generazione di token

ok?

Areas può generare dei token

che vengono utilizzati

da altri sistemi per potersi autenticare

in maniera silente al suo interno

classe per la creatura degli eventi, creazione utenti questo qua è sempre un altro che non ha più altri sistemi per potersi autenticare in maniera silente al suo interno.

Classi per la creatura degli eventi, creazione utenti, questo qua è sempre un altro che non ha più senso,

non ricordo nel 2009 sono sviluppato questa cosa per un cliente, creazione utenti a Binder.

Classi per la ricerca remota, questo invece è più interessante, però non viene utilizzato in Sardegna, comunque la possibilità di sviluppare un plugin di ricerca remota per i pazienti.

Io sviluppo un plugin che invece di fare una query di ricerca sulla sa paziente,

quando l'utente sta sulla maschera di ricerca del paziente e preme il tasto ricerca,

invece di fare una query sulla sa paziente, invoca il plugin e il plugin ad esempio vuole implementare delle logiche

con cui interroga un archivio esterno

si interfaccia con una grafica centrale esterna, terza

ok?

insomma ce ne sono tanti

questo qui è una data merger, non ci interessa

è qualcosa di relativo a SOJ

che vi ho detto che non c'è

web service delegate appunto

per creare un web service custom

importatore writer

questo lo vediamo quando vi faccio vedere l'importatore

l'agent plugin

io magari un agent

lo posso invece di rilasciare

questo l'avevamo un pochettino accennato

quando avevo parlato della C-agent.

Ecco.

Si è bloccato tutto.

ecco, quando abbiamo visto la nostra agent

vi ho detto che il tipo è C, classe

in realtà c'è anche il tipo plugin

quindi io censisco qua sempre sulla mia Cagent

vi metto che il tipo plugin

e in quel caso la classe non viene

non è rilasciata all'interno del nostro applicativo,

ma è rilasciata all'interno del nostro plugin di tipo agent plugin. Entità plugin, questa ve l'avevamo

accennata, era per l'entità di storicizzazione, vi ricordate quando vi facevo l'esempio per cui io

posso storicizzare i file magari su OneDrive di Microsoft, mi creo il mio plugin tipo entità.

Giusto così per dirvelo.

Serve per aggiungere un listener,

vabbè ve lo dico, non serve a niente.

Serve per aggiungere, anche perché in realtà è sufficiente questo qui,

daemon event catch, fa la stessa cosa che fa questo.

Serve per aggiungere, per registrare un listener al livello del Persistence Manager.

Noi abbiamo detto che quando facciamo un salvataggio

vi ricordate quando abbiamo lavato col binder col service manager no quando sette una proprietà c'è

il b force property va fire event before set property value fire event after set property value

fire event b force e obietta fire event after se volgi, tutta questa serie di eventi, no?

Che vi ho detto, vengono gestiti a livello di service manager,

quando si lavora con i servizi.

Infatti vi ricordate quando abbiamo fatto l'esercizio

sui tipi di pagamento che non funzionavano

perché il controller non aveva quegli use service uguali a true, no?

Quindi perché?

Quindi non usando il service manager

alcuni eventi

non vengono giustamente inviati

vengono bypassati

però esiste un altro layer

all'interno di tutto questo stack

di eventi

più a basso livello

che è a livello di persistence

e di bc

persistence manager a livello di persistence manager di Persistence e di BPC Persistence Manager

a livello di Persistence Manager

perché sappiamo che

a prescindere che si usi

direttamente il JDBC Persistence Manager

o il Service Manager

alla fine qui dentro appunto

dentro il JDBC Persistence Manager

ci andiamo a finire

e qua dentro nel suo metodo

nel suo metodo save, nel suo metodo save, vedete, fa FireEventBeforeManagerSave, questa è un'altra gerarchia di eventi, che quindi non vengono sparati a livello di servizio,

Service Manager, eccetera, ma a livello di Persistent Manager. Sono molto più limitati, ovviamente, rispetto al Service Manager. Il Service Manager potevamo anche sapere quando veniva fatto il set di una proprietà, quando veniva fatto il commit, quando veniva fatto la create, tante cose. limitato però abbiamo il before manager save, l'after manager save, before manager remove,

after manager remove, basta, sulla retriva addirittura non ci avete nulla, quindi figurati,

sulla retriva non ci avete nulla, la retriva è un po' più limitato però anche se è bene limitato

avete quantomeno la garanzia

che questo evento viene intercettato sempre

se io un evento lo leggo a livello di service manager

se qualche programmatore furbetto

può anche avere le sue buone ragioni

se qualche programmatore non fa il salvataggio tramite service manager

ma lo fa direttamente

sul persistent manager

il mio evento viene bypassato

ok?

il persistent manager invece è la garanzia che viene

intercettato e quindi si può fare

un listener di persistenza

anche tramite plugin

controllo initializer

per intromettere

l'initessi di un controller

login validator serve per validare

la login, cioè se un utente

fa la login

e lo username e password sono corrette

io posso comunque porre un veto

e dirgli no, ma guarda tu oggi non entri

perché? perché nel mio login validator

avrò implementato delle logiche

oggi è lunedì e tu lunedì non puoi entrare.

Dico una cavolata, una fesseria.

Però in caso d'uso più reale si vuole limitare l'accesso di certi utenti che appartengono.

La login ovviamente sta lì, è pubblicata, ci possono entrare tutti potenzialmente.

Un altro esempio è magari io voglio limitare che la login la possano fare soltanto certi utenti che appartengono a delle particolari terne.

Posso fare un login validato.

Questi tre, senza assolutamente nulla che ci interessi, per Swab è una cosa sanitario, comunque quindi non saprei neanche dirvelo

che cos'è, poi eventualmente, non penso che

venga usato, però nel caso poi

lo affronteranno i colleghi sanitario

questo per SWAB

e questo per SWAB

è roba di HR

controlli finali e controlli

altri moduli verticali

che non conosco

ok?

comunque tutte queste tipologie

adesso vi ho fatto una carrellata

giusto così

per darvi un'introduzione

a tutti i tipi di plugin

ripeto

molti non hanno senso

alcuni

probabilmente

non verranno usati mai

però

questi sono quelli

che avete a disposizione

cosa voglio dire con questo?

che se vi inventate un plugin per fare

che ne so, dico una cavolata

volete rilasciare tramite plugin

un demone, non un agent

un demone, non potete farlo

non potete farlo, non c'è

avete bisogno del punto d'aggancio

questo è il concetto

quindi deve essere previsto tra questa tipologia

al massimo potete fare un agent

perché c'è qua

quindi tutto quello

che vi viene in mente, che non fa scopa con una di queste tipologie, non potete farlo

tramite plugin. Punto. O meglio, non potete farlo tramite oggetto comune. Poi oggetti

comuni, secondo me, non li svilupperete, perché poi dopo vi spiego l'OSGI, che è

la versione più recente dei plugin, che vi conviene 200.000 volte più dei oggetti comuni

però comunque c'è un pregresso

ci sono degli oggetti comuni

installati in Sardegna

che quelli sono lì e funzionano

il pregresso lo dovete conoscere

il futuro

eviterei di usarli

e userei l'OSGI che dopo vi spiego

comunque

interrompetemi io parlo intanto, sto facendo una po' di introduzione,

dopo facciamo, però non interrompetemi se avete dubbi.

Queste tipologia di possibili classi la trovate sempre dentro il PSG-EXT Initializer.

Un attimo per i soggetti comuni.

Diamo un po po una caccia

muni brava

vediamo la scoperta allora qui dentro a si è qua dentro ah eccolo qua

non l'ho visto

va bene

eccolo qua, dentro PSGX Initializer

ok

è sempre un configurable lookup

quindi è simile a quello che avevamo visto

ieri col stari classificatore

vi ricordate con le dimensioni che venivano

censite a manina in questo modo qui

all'interno dell'initializer dei

prodotti. Quindi qua

si censisce un configurable lookup

che si chiama C classitivo

e vedete qua, la cosa

importante è questa, o

Ogni tipologia ha un codice, una descrizione, vabbè, che è quella che... Ok.

Voglio sviluppare una classe per la ricerca remota dei pazienti?

Allora dovrò creare un plugin, una classe che implementa l'interfaccia remote service interface

interfaccia di unità

di integrazione grafica remota

aggiungere il record per le unità di una grafica remota

report, tutto quanto

ok

il nostro agent plugin

vogliamo fare un agent plugin?

allora la nostra classe java

dovrà implementare

agent plugin interface

ora ad esempio

considerate che tante interfacce

sono semplicemente marcaterici

tipo questa interfaccia qui

alla fine stende

le interfacce che servono

all'agent

quando abbiamo fatto l'esercizio sull'agent,

il nostro, ad esempio, si sarà agent, implementa agent interface, monitorable agent interface,

che sono esattamente queste due classi qui.

Quindi in questo caso, implementare questa interfaccia è più una cosa,

l'interfaccia marcatrice in questo caso, però altre volte no,

qua in remote service è più di un'interfaccia marcatrice serve

implementare secondo quanto documentato nel javadoc le logiche del nostro plugin poi c'è anche questa

interfaccia version interface che deve essere implementata dai dai nostri plugin, che torna semplicemente, poi magari un plugin, un oggetto comune, lo vediamo, che devei diversi, per versionare il nostro plugin, ok?

Perché vorresumilmente poi il nostro plugin lo pubblicheremo più e più volte.

E così via dicendo, d'accordo?

Quindi, importante è questo, in soldoni, PSGX Initializer, dove vengono caricati i plugin,

qui scoprite qual è l'interfaccia

che dovete andare a dichiarare all'interno

del vostro oggetto comune.

Sotto domande?

Fino adesso?

No.

No.

perfetto

allora

pam pam pam pam pam pam pam pam pam

implementiamo ad esempio però come lo faccio lo faccio il locale da me

faccio il locale da me.

Lo faccio il locale da me.

Per forza.

Ok, implementiamoci ad esempio, che ne so, un login validator, quello che vi dicevo, che può praticamente validare la login.

Cioè dice, l'utente è stato autenticato, sì, però comunque voglio mettere eventualmente un veto, voglio bloccarlo, ad esempio.

Facciamo questo oggetto comune così vediamo come si fa semplicemente voi fate un progettino java

ad hoc, ad zero

per i cavoli suoi

new project java

oggetto comune, forma

ovviamente vi dovete dare comunque le dipendenze

il build path

quanto meno verso

DSGlib, che è il framework

e le RGBF libraries possono essere utili per le librerie.

Poi mi creo il mio package.

Per esempio potrebbe essere qui.sysar.oggetto.plugin.

E qui dentro creo la mia classe java.

Caesar.login.validator. Caesar login validator abbiamo detto che rispetto ai plugin

che sono censiti qui dentro vogliamo fare

il login validator

quindi login validator

validatore login è legato all'interfaccia

login validator interface, quindi questa è quella che

devo implementare

faccio implement

implement implement implementare, faccio implement, plugin validator interface, version interface, quella interfaccia

dove uno può, che vi dicevo, che possiamo dichiarare la versione del nostro plugin, e l'implemento.

e presso un amber ritorniamo adesso la versione 1.0.0 ad esempio

e devo fare anche devo indicarli anche che ha nel build path

e liberi del tom cat quindi serve runtime apache tom cat 8 ok

del tomcat quindi server runtime apache tomcat.ok non mi fa fare import di java x servlet

perfetto

e qua adesso li faccio

faccio manualmente

il mio plugin che

banalmente blocca sempre la login, vedo come faccio entra io

allora if user

qua mi viene passato l'utente che ha fatto la login e qua bella carla di questo http

if user is not administrator quindi se non è un utente amministratore

faccio un bel tronio login exception

accesso consentito solo a utenti amministratore.

Easy peasy.

Chiaro?

Ho fatto un login validator che blocca, non mi permetterà di loggarmi se non sono un utente amministratore.

Poi che faccio?

Semplicemente esporto il mio jar l'impostazione del path del url con la request adesso praticamente restituiresti l'errore scusa per tutto sì, tutti gli utenti altrimenti con la rinquest

avresti dovuto

filtrare solo gli

indirizzi da proteggere, ok?

sì, volendo anche

sì, sì, sì, certo, certo

puoi fare rec, get, servlet, pat

sì, sì, adesso

indiscriminato

questo faccio poi il locale da me, non lo faccio solamente

informazione

sì, sì, questo adesso indiscriminato questo faccio poi il locale da me non lo faccio solamente informazione discriminato per farvi vedere quello che quello che l'obiettivo è farvi vedere come si deploy

adesso si si si ok e che quindi così de proia niente fate un semplice export al jar

nulla di eccezionale, un semplicissimo jar file

Caesar login validator.jar

una volta esportato il jar

andiamo sulla

mi sposto sul localhost

andiamo sulla gestione degli oggetti comuni

quindi configurazione avanzate

oggetti comuni

nuovo

login nuovo, log in, Caesar login validator, login validator formazione Caesar, tipo classe, tipologia login validator.

Qua è il patto della classe, quindi il percorso all'interno del nostro jar per arrivare alla nostra classe.

La copio, tac.

Metto qua.

Conferma.

Ora, qui in realtà avete anche parametri costruttore

che cos'è parametri costruttore?

supponiamo che noi vogliamo permettere una parametrizzazione nel nostro plugin

ok?

qua potete passarvi i parametri in modalità

una modalità che volete voi, perché questa è una stringa

quindi cosa dovete fare lato vostro?

semplicemente facciamo un esempio di un plugin tipo oggetto comune, vedete? String in its parameter, quindi l'unica cosa che dobbiamo fare per ricevere i parametri che possiamo mettere qui e dichiarare un costruttore che accetta un unico parametro di tipo stringa. E poi fate, come dire, in vecchia maniera il parsing voi.

Scegliete voi una sintassi.

Ad esempio potrebbe essere una cosa del tipo,

che ne so, param1 uguale val1, punto e virgola, param2 uguale val2.

A questo punto nel vostro, nel vostro, nel costruttore del vostro Caesar login validator ricevete questo

parametro come stringa nel costruttore, fate una split per punto e virgola e poi insomma avete le

coppie chiave valore. Oppure potrete farlo posizionale quindi val 1, val 2

sapete che la posizione 1

c'è un determinato parametro

la posizione ce n'è un'altra

o direttamente in JSON

poi ce lo possiamo

così avrò che qua c'è un po' un limite

abbastanza

stringente tipo c'hai misa tabella è selec star from si andescor oggetti comuni comuni

e fatto parma cost

costr 500

non è poco ma non è manco tantissimo

però anche un piccolo gson ci entra

esatto

quindi lì una stringa e ve la passate

nel nostro caso non abbiamo parametri

quindi è posto così

conferma

vabbè mettete attivo.

E' buon.

Gestione.

E qui caricate il vostro bel jar, quindi fate nuovo.

Scegli file,

Caesar Login Validator, conferma, pubblica.

Ho visto fatto il lucchetto, ok, il lucchetto è fatto, pubblicato.

Già la pubblicazione è un segno buono, perché quando fate la pubblicazione lui incomincia a caricare la classe,

quindi banalmente se qua avete scritto un path in una classe che non esiste, vi dà errore.

Già fa il caricamento.

Poi, alcuni plugin, poi dopo, così abbiamo caricato il nostro plug in ok

poi il modo in cui

il plug in entra in gioco effettivamente

dipende tanto dalla

tipologia, no? faccio un esempio

l'agent plug in

quando girerà l'agent verrà eseguito

quel plug in

ok

l'integrazione

no, il

dove era?

il web service

noi lo pubblichiamo qua il plugin

però poi quando è che entra in gioco il plugin

è quando uno mi invoca quel web service

lo pubblico però qualcuno me lo deve chiamare

se non me lo chiama nessuno

il plugin non entra mai in gioco

d'accordo?

quindi qua su login validator ad esempio

quando è che entra in gioco

c'è un parametro in realtà per il login validator, ad esempio sotto configurazione sistema parametro installazione, qui su sistema login, c'è un parametro validatore login se noi qua andiamo a selezionare

mi fa vedere tutti i plugin all'interno del mio sistema

che implementano

di tipo login validator

quindi seleziono adesso il mio

login validator formazione Sysar

salvo

devo fare poi restart

qua il motivo per cui devo fare restart sono due

il primo perché ho cambiato un parametro di installazione

e il secondo perché il primo caricamento dei plugin richiede comunque

degli oggetti comuni

quindi poi dopo lo vediamo

uno dei valori aggiunti di OSGI è proprio questo

è proprio che

uno dei tanti valori aggiunti di OSGI

è anche questo che non necessita di

riavvio

quindi un hot plugin

versus cold plugin

possiamo mettere in questi termini. vediamo che ho combinato

vediamo se funziona tutto

ci credo poco

Alfonso, accesso consentito solo ad utente e amministratore.

Nell'errore che abbiamo messo.

Ora io provo a collegarmi come administrator e sono entrato.

Perfetto.

Quindi in questo modo praticamente abbiamo già fatto

un rilascio di un software, di una componente software

senza toccare i progetti padre

non è che abbiamo scritto nulla su PSG Libre

non abbiamo scritto nulla su Siank

e così via dicendo

d'accordo?

c'è una domanda?

no

ok allora intanto mi tolgo sto plugin No domande? No.

Ok, avventanto mi tolgo sto plugin, se no...

Via. Ok. via ok e questi sono gli oggetti

comuni in generale

ok

quindi come qua ve l'ho elencati alcuni

che sono questi sono quelli più comuni

vi ho fatto una carrellata di tutti però

i più comuni in realtà

sono questi qui che vi ho scritto qua dentro

quindi solitamente si implementano

plugin per gestire

integrazioni con SSO, integrazioni con LDAP

un plugin per gestire il rilascio di token di autenticazione

chiamato di contesto, quindi ripeto, un sistema software testo

che vuole aprire una maschera applicativa di Arias tramite una classica login silente,

senza mostrare all'utente la maschera di autenticazione,

stacca un token di autenticazione verso Arias.

Quindi lo scopo di questi plugin è generare token.

Ricerca remota, per integrare l'anagrafica paziente con MPI,

con MasterPyCentIndex terzi. Non c'è in Sardegna, però un classico esempio è l'integrazione di un MPI con l'anagrafica regionale.

Quindi poi lì dentro uno fa integrazione tramite servizi SOAP, REST, RISTE, quello che sia, HL7, quello che sia.

Delegate Web Service, per l'implementazione di un servizio Web Service,

custom, poi quando facciamo Web Service è più chiaro.

E in ultimo, l'agent plugin, quindi un agent noi lo possiamo rilasciare

non necessariamente dentro i nostri progetti,

ma anche semplicemente come un plugin che sta fuori.

Però qua rimane dopo l'obbligo di censirlo comunque sulla Seaagent,

perché quello è l'aggancio che poi fa sì che viene invocato il mio plugin.

Ok.

Va bene. ok va bene

ho fatto una domanda è una cosa che hai già detto quando faccio il caricamento del plugin seleziono il file fall upload c'è un impostazione di sistema che dice dove dovrà mettere questo plugin? Allora il plugin lo va a mettere sempre nella, come ho detto, tutti i file in Aries sono salvati dentro la C-Attach,

quindi viene caricato come blob sul DB.

Nel nostro caso il tipo di attach, facciamo tutto il giro faccio sulla siattach tipo

vi ricordate è la tabella dei tipi di attach

da qui

insomma ce ne sono diversi

però quella che ci interessa

un po' aiutandoci con il codice

un po' aiutandoci con la descrizione

o anche facendo un po' di

o anche vedendo il codice su Eclipse

individuiamo il tipo

individuando il tipo

che è questo qui

oggetti comuni

andiamo sulla si attach file

che è l'anagrafica del file

ripassiamo

cosa buona e giusta

quindi il tipo mi identifica

filtrando per tipo mi fa vedere

tutti quei file che afferiscono a quel tipo, quindi mi fa vedere

tutti i file di tipo oggetto comune

perfetto, però noi sappiamo

che c'è anche la T-chiave

che invece tipizza

cioè ci dice questo record

a chi afferisce

quindi poi dopo ogni

tipologia di file sa come interpretare

questo AT chiave

se li dì di un paziente, se li dì di un movimento

di magazzino eccetera

in questo caso è il campo

codice del nostro plugin

quindi faccio

AND AT chiave uguale

Cisarelle V ah, è il locale devo andare

questo è la Sardegna

qui sul db locale stavo lavorando

quindi qua dentro

l'isra.lv

eccolo qua

il nome del file che ho caricato, il jar

questa è l'anagrafica del file

ok

in ultimo

il campo a td è l'identificativo dell'attach con cui vado

se l star from c underscore attach where a td uguale col blob e poi il blob semplicemente me lo posso anche scaricare.

Se il DB mi assiste.

Ho bloccato tutto.

Non capisco sta maschera che mi continua a rompere scato

quindi temp.jar

quindi Asd.jar Allora va.

Ok?

Ok, grazie.

Prego.

Allora, qua su tipo l'abbiamo superato questo qui.

Allora, il tipo è classe, che è quello standard, che è quello che vi ho appena mostrato.

Quindi, semplicemente, tipo classe vuol dire che gli fornite una classe Java, che sarà contenuta

all'interno del jar che fate l'upload. C'è però pure classe interna, questo è un particolare tipo

di plugin, che non serve una cippa, vabbè. Comunque cui classe interna vuol dire che la classe Java

non la caricherete come jar

quindi non vi uscirà fuori il bottoncino per fare l'upload

ma il path class

che indicate qua

viene recuperato nel class path

dell'applicativo

quindi banalmente

classe interna perché? perché comunque

quella classe sarà dentro i vostri progetti da workspace

quindi sarà dentro psgri progetti di workspace, quindi sarà dentro

psglib, cianc, acquisti, gbf reporting,

ok, sarà lì dentro.

Ok, quindi questa è la differenza.

Classe vuol dire che lo prende da un jar,

classe interna lo prende dal classpath,

quindi a che serve?

Allora,

L'unico caso in cui serve è se si vuole rilasciare una classe, ma quella classe, si rilascia una classe a livello di prodotto, quindi a livello di un progetto normale classico.

Però poi la si vuole attivare e far funzionare soltanto su uno specifico cliente, quindi poi si dà, quindi questo dico lato nostro, non lato vostro.

Quindi lato nostro facciamo perché dice ok, solo sul singolo cliente va a configurare poi l'oggetto comune puntando a quella classe e quindi chi avrà quell'oggetto comune li funzionerà.

ci sta ma non è stato mai utilizzato non è stato mai messo in produzione

comunque serve per gestire che cosa?

il caricamento

di deploy

la distribuzione in generale di case store

quindi jks

generalmente ad esempio allo scopo

di fare dei trastore

voi sapete che ci sta su java

la system properties

trastore, case store

javasystem Trastore, Keystore, Java System.

Questo, SSL, Trastore, Trastore, Keystore, ok?

Che serve per caricare i certificati all'interno della Java Virtual Machine.

Quindi che cosa è possibile fare tramite questo tipo oggetto comune?

Praticamente andate,

qua vi uscita fuori la store pass, la key pass,

l'alias del che store, eccetera.

Quando andrete a fare l'upload, fare, l'alias del questore eccetera, quando andrete a fare

l'upload, farete l'upload di un jks, oppure potete fare anche l'upload di certificati singoli

e in quel caso poi lui genera il questore in automatico, però sinceramente è una cosa

che io aborro, io dico i trastore si caricano dentro l'HCert di Java,

quindi uno fa l'upload dei certificati con Ketool, ok? E via, è buono.

che tool ok e via e bon script script invece vi permette di implementare uno script rino quindi è un plugin di tipo script rino un esempio di utilizzo dei plugin di tipo script

mi sa che proprio gli alias che abbiamo visto stamattina, perché se voi fate questo...

Scusate un secondo, secondo scusate...

guardon quindi qua possiamo mettere script e quando andiamo in gestione possiamo scrivere

il nostro script ci sono dei contesti in cui gli scripterino vengono utilizzati plugin tipo

script e uno è quello proprio degli alias che abbiamo visto oggi infatti se io vado su anagrafiche configurazioni criteri di alias

però non qua perché sto lavorando in localhost

localhost

cavalletti questo avvio comunque vi ricordate che quando abbiamo fatto

il criterio di alias c'era

tipo ricerca accorpamento

quando selezionavamo accorpamento usciva fuori un campettino

un lookup dove ci diceva

condizione javascript

quindi lì è un lookup sulla si oggetti comuni per dirci ok indicami

qual è il plugin di tipo script che devo eseguire per valutare il criterio di accorpamento quindi anagrafiche

configurazione, criteri di alias

questa persona ad esempio quello che sia

accorpamento ecc eccolo qua, vedete?

Quindi mi permette di creare dei plugin che in realtà contengono uno script e quello script puoi agganciarlo quindi ad alcune funzionalità dell'applicativo.

Questa è una, un'altra la vediamo quando vediamo web service, c'è anche lì la possibilità di agganciare uno script

un plugin di tipo script

fine

non c'è altro sui oggetti comuni

ci sono domande?

La differenza tra classe e classe interna qual era?

La classe e classe interna è che praticamente classe interna invece lo metti proprio nei progettini del tuo workspace che c'è adesso, quindi PSG Libo o anche Sianc.

C'è la classe che poi indichi.

Se metti classe interna, qui su path classe, devi indicare una classe che è qua dentro dentro e dentro ai tuoi progetti normali

ok quindi poi andremo a caricare nessun già e di farlo in quel caso quindi per quello di

con un po tempo che trova un plugin questo genere nel nostro caso può avere un senso perché magari

lasci lasci la classe java a livello di prodotto però poi lasci l'attivazione

come dire di quella classe

alla configurazione sul singolo

progetto dell'oggetto comune

quindi quella classe

installata su un altro cliente

non fa nulla, su un altro cliente

dove è configurato l'oggetto comune

tipo classe interna ed invoca quella classe

allora si attiva

ecco è configurato l'oggetto comune tipo classe interna ed invoca quella classe, allora si attiva se no, non ha senso

non ha altri sensi

tanto vale che

o rilasci il tuo software normalmente come tutte le altre cose

oppure lo fai tipo classe

e quindi rilasci

il jar

quindi potrei dare esempio magari banalmente

il mio Caesar Login Validator invece di farlo come già

lo potevo mettere dentro Sianc

e qua negli oggetti comuni

avrei fatto esattamente la stessa configurazione

eccetto per

avrei fatto la stessa identica configurazione

eccetto qua per la tipo

dovrei aver indicato classe interna

tipologia classe sarebbe rimasta la stessa

pat classe lo stesso e qui gestione non avrai caricato nulla

ok

ok Ok.

Va bene.

Allora, se è tutto chiaro sugli oggetti comuni, non ci sono domande,

passiamo a vedere la nuova generazione, SGI. SGI lo conoscete probabilmente già, è un framework definito dall'OSGI Alliance.

I plugin SGI, questo è importante, sono anche denominati bundle.

Bundle, plugin, stessa roba.

bundle, plugin stessa roba

ed è possibile installarli tramite un menu dedicato

che sta sotto configurazione avvianzata

o sg i manager

rispetto agli oggetti comuni

come vi dicevo si tratta di uno standard estremamente diffuso

quindi è più

tutta la gestione di oggetti comuni

home made, è proprietaria, fatta in casa, come gestione dei plugin, invece con SGI ci affidiamo a uno standard ben consolidato.

Inoltre non richiede il riavvio dell'applicazione.

In generale un bundle, poi vediamo il ciclo di vita di un bundle, un bundle si carica, si installa, parte e funziona.

Punto. Questo è l'obiettivo di SGI. di un bundle, un bundle si carica, si installa, parte e funziona, punto

questo è l'obiettivo di OSGI

ok?

però potrebbero essere

alcuni bundle, quindi più che altro

in generale non serve raviare

OSGI non ha necessità di raviare

l'applicazione, a meno che

dipende ovviamente da quello che mettete nel vostro bundle

alla fine un bundle è in una scatola vuota

dove mettete il vostro codice

se nel codice voi fate cose

che richiedono poi un riavvio

che ne so, vi caricate una variabile

mettete una variabile all'interno delle system set properties

non lo so

faccio anche fatica a immaginarmelo

comunque se fate qualcosa di particolare per cui richiede il riavvio

dovete riavviare

se no, di base, un bundle non haiede il riavvio, dovete riavviare, se no di base un bundle non

ha bisogno di riavvio.

Senza degli oggetti comuni inoltre non è necessario, questo è importante, l'implementazione

di particolari interfacce o la dichiarazione preventiva della tipologia di plugin. Quindi

non è come gli oggetti comuni che quando creo l'oggetto comune devo dirgli che cos'è questo? Ah, un login validator, è ricerca remota, è

un delegate web service, è un agent plugin, non glielo devo dire, non lo devo dichiarare.

Ogni bundle infatti al suo interno espone una classe activator che si occupa di gestire

quindi una classe di OSGI

che si occupa di gestire

il proprio processo di start and stop

il plugin potrà implementare

in questa classe quanto necessario

per interagire con il resto del sistema

tramite opportune chiamate la classe

che poi vedremo, SGI framework

quindi che vuol dire?

praticamente tutto delega in mano al

bundle il bandola questa classe che una classe standard è un bando l'activator una classe

standard che deve implementare che devono implementare tutti i bandoli sgi che ci espone

due metodi start and stop siamo noi nella mente non è come nell'oggetto comune che l'oggetto

come quando creiamo un oggetto comune dobbiamo dire questo oggetto comune, quando creiamo l'oggetto comune dobbiamo dire

questo oggetto comune è un login validator,

questo oggetto comune è un plugin,

un agent plugin,

oppure questo oggetto comune è un controller,

prendendo l'esempio che sta qui,

questo oggetto comune dobbiamo dire che è un controller plugin.

No.

Il bundle partirà,

verrà invocato il metodo di start,

ed è il bundle stesso che si registra come controller.

Ok? Bene.

Allo stop è il bundle stesso che si registra come controller.

Se qua dentro c'era un plugin, il bundle si registrava come plugin, quindi tutto quanto è contenuto e delegato all'interno del bundle.

la classe SGI framework espone diversi metodi per la registrazione quindi ne troveremo uno per i bin

uno per gli agent

uno per i listener

uno per le query

uno diversi

però quelli base ad esempio

eccoli qua

quelli base sono appunto

quello per registrare un controller

registrare un bin, registrare una query

registrare un agent, quindi fate esempio

con questi quattro metodi

potete fare

tutto quello che abbiamo detto

tutto quello che abbiamo detto negli esercizi

giovedì e venerdì lo potete fare tramite

bundle SG

anzi mi è voluta adesso in mente l'idea

adesso vi faccio vedere un attimo la struttura base di un bundle

però

potrebbe unire jauf

stavo pensando quello

vediamo domani quando facciamo Jauf.

Potremo fare le due cose, quindi fare in bundle quello che abbiamo, quelle di esercizi di domani.

Ok, quindi questi sono, vediamo, le sgfremwork, tutte le classi di metodi che ci hanno per interagire insomma con il sistema.

Ma questa classe è anche importante,

io non so se adesso voi,

prima domanda,

c'è qualcuno che non sa proprio nulla di SGI in generale?

Solo per sapere.

Io non l'ho messo in titta, se è sincero.

Ok, allora spieghiamo tutto.

Allora, all'interno di SGI,

intanto ve la leggo,

poi dopo lo capiamo meglio quando facciamo un bundle di esempio.

All'interno di questo SGI c'è anche la dichiarazione della boot delegation, cioè una lista di package che risiedono nei progetti standard, quindi non in plugin, ma sono comunque visibili dal bundle.

L'esempio è Log4j, Axis, Dom4j, Jackson? Tutta una serie di librerie che solitamente sono tutte dentro

jbf libraries. Allora proviamo a vedere un attimo come si crea un plugin. Qua nelle slide viene

spiegato anche quello che dovete fare passo passo, sono sei passi quindi abbastanza easy. Ok?

Adesso facciamo un plugin base così magari capiamo meglio anche questa cosa qui della boot

delegation. Quindi passi questi, senza che li vedete, facciamo live. Oggi è una giornata, scusate un secondo.

questa è la televendita

intanto gli rimane ancora poco

c'è il registro delle opposizioni

pure sui cellulari, vedo l'ora

allora

facciamoci il nostro bundle

il nostro bellissimo

spettacolare bundle, new header, qua dovete cercare plugin

plugin project is, Caesar bundle, questo è il nome del progetto

OSGI Framework, dovete specificare

standard, tanto è tutto nelle slide, comunque standard

next

qui dovete specificarli l'identificativo univoco del vostro bundle

la versione, quindi un po' come il version name che abbiamo visto noi

ovviamente

fatto in casa insomma sugli oggetti comuni, vabbè 1.0.0 ci va bene, un nome più mnemonico,

lì invece dovrebbe essere una cosa un po' più tecnica, solitamente i dnm combaciano,

e poi il path dove volete creare la vostra classe activator.

Generate in activator e java class that control the plugins lifecycle.

Va bene anche Caesar bundle, anzi, facciamo Caesar.bundle.activator.

Finish.

un bundle, di fatto il cuore del bundle sono due cose

l'activator che come dicevamo

espone metodi start e stop

dove dovremo andare a gestire

il life cycle del bundle

cosa fare nello start, cosa fare nello stop

il manifest

il manifest è la cosa più importante di un bundle che poi lo

rende tale che ci abbiamo nel manifesto informazioni queste qui che ci siamo appena

detti libri la versione eccetera va bene le dependencies questo è importante. Cioè OSGI in generale permette di rendere modulare il nostro software,

per cui io magari faccio degli esempi.

Ad esempio, io potrei avere un bundle che mi gestisce l'anagrafica dei comuni, un altro bundle che mi gestisce l'anagrafica dei comuni.

dei pazienti. Quindi faccio due bundle distinti, uno si occupa solo dell'anagrafica dei comuni,

uno solo dell'anagrafica dei pazienti. In qualche modo però il paziente ha bisogno

per poter funzionare del bundle dei comuni. Perché? Perché il paziente dovrà inserire

un comune di nascita, un comune di residenza, un comune di domicilio.

Quindi ho due bundle che hanno una dipendenza tra loro.

Quindi quello che ti permette di indicare OSGA è questo, di indicare in questa maschera qui, in dependencies, un required bundle.

Quindi a fronte di tutti i bundle che hai, in questo caso nel mio workspace,

ti dice selezionami il bundle da cui dipende.

Ma non solo questo, una volta che tu gli dici dipende dal bundle X, in realtà se il nostro

bundle dei comuni ha 5, 6, 7, 8 package, io gli posso dire, sì ma guarda di tutto il bundle

dei comuni a me mi serve solo un pezzettino solo questo package quindi su required plugin vi dite i plugin da cui dipendete se ne avete

alcune se ne avete importi package vi dite quali package specifici vi servono

ok questo è importante perché poi

all'interno del vostro bundle

quindi un activator o altre classi che creerete qui all'interno del vostro bundle

potrete vedere solo i package che sono dichiarati su imported

se un package non è dichiarato su imported

non lo vedete

vi da errore, insomma qua faccio activator dichiarato si importe non lo vedete

vi da errore insomma qua faccio activator faccio faccio

logger log4j

contro l'uno vedete non me lo riconosce proprio se voglio creare un logger

ricordate il logger era

private static final logger

log4j

non me lo fa vedere proprio

io mi sposto ad esempio

all'interno del nostro bin corso

dentro scrivo

logger e guardate quanti me ne fa vedere

forgapashlog4j, quello che mi serve

guardate come mi fa di tutto

quindi questo è importante

i bundle sono dei piccoli mondi

ok?

è importante anche se già il concetto

che i bundle sono incapsulati

quindi tutto ciò che avviene

in un bundle vive muore nel bundle non non va a non può sfasciare le cose che fanno altri

bundle ok quindi un bundle non riesce ad influenzare meno di cosa specifica

che fa il programmatore, ma di base

un bundle non può influenzare il mondo esterno,

il mondo esterno non può influenzare il bundle.

Siamo?

Ok, nel caso avessimo importato

come required plugin,

quello dei comuni,

diamo anche poi a specificare

tutti i pacchetti da importare

o comunque i default almeno?

No, devi comunque dichiararlo, ma ti dirò di più, il plugin dei comuni, e questo lo troviamo qui su build, no, su runtime,

il plugin dei comuni da parte sua deve esportare i suoi package

quindi da una parte

il plugin tuo del paziente deve dire quali

vuole importare dai comuni, ma dall'altra parte

quelli che potrà importare sono solo

quelli che il plugin dei bundle decide

di esportare, perché il plugin dei bundle

potrebbe dire, il bundle dei

comuni potrebbe dire io ho 10 package

ma fuori al mondo esterno ne faccio

vedere due

ok?

questo è chiaro

poi sto parlando di tutta roba

poi adesso ve lo spiego perché appunto serve per capire

insomma fanno overview di tutto

poi appunto OSGI è standardissimo

quindi documentazione

ne troviamo

documentazione ne troviamo a Iosa, OSGI.org,

e poi è sempre mondo Eclipse.

Anche Eclipse, infatti, Eclipse è basato su OSGI.

Eclipse si basa su OSGI, lui stesso è costruito su OSGI,

ed è un framework, una cosa importante è questo, OSGI è lo standard, poi ci sono diverse implementazioni, nel caso di Eclipse mi pare che sia Equinox.

si è bloccato tutto quindi se già è lo standard

poi l'implementazione

scusate un secondo Ok, dicevamo.

Quindi, OSGI è lo standard, adesso ho piantato il mio Eclipse,

però poi l'implementazione vera e propria del framework

ce ne sono diverse,

ad esempio

nel caso di Eclipse e Equinox,

nel caso nostro di Aries è Felix,

OSGI Felix.

Un caso

il funzionamento è identico semplicemente come dire chi la ciccia insomma è implementata da ecco

qua le pace felix community effort implement di osgi frame work and service platform and

and in interesting sgi a rileti tecnologi standard apache license ok poi dopo c'è equinox

non lei

non lei fatica Eclipse

se mi ricordavo

un'altra implementazione

insomma tutto

se andate su Apache Ferex

avete tutte la documentazione necessaria

ok

ok ok ok

d'accordo?

ora, perché vi spiegavo questa cosa qui

delle dipendenze, dell'import package eccetera

perché di base, di default

e questo è voluto

ok

OSGI funziona

solo tra bundle cioè il mio bundle dei pazienti potrà importare i package solo di altri bundle.

Stop. Fine.

fine ok

però in realtà sappiamo bene

che noi nella nostra ad esempio

se noi vogliamo dichiarare

un

anche facendo l'esempio questo qua che dicevamo

del logger no?

ma rimaniamo magari su questo esempio che è più semplice

se io voglio vedere il logger

il logger io ce l'ho

log4j, sta caricato dentro il progetto

jbf libraries come faccio a vederlo? jbf libraries non è un plugin Il logger. Il logger io ce l'ho, Log4j. Sta caricato dentro il progetto JBF Libraries.

Come faccio a vederlo?

JBF Libraries non è un plugin.

Non essendo un bundle JBF Libraries,

io non potrei importarlo.

Non posso.

Non posso importarlo.

Perché posso importare solo package dei bundle.

Per queste situazioni qui,

OSGI ci aiuta con il concetto di boot delegation che dicevo qui,

cioè nella classe OSGI framework che vi dicevo prima, è la classe che si occupa di far partire, adesso quello vediamo, c'è un metodo start che fa partire il nostro framework SGI, che è anche Felix, Framework Factory, Orgapash Felix, fa partire il framework, il compito SJ framework. Quando lo fa partire, tra le cose che gli specifica c'è, ecco qua, questa properties boot delegation, che altro non è.

è che, tadaaa, una lista di package.

Ok?

Questa lista di package sono i package che i nostri plugin, i nostri bundle, potranno

importare a prescindere che questi bundle s siano all'interno di un bundle.

Quindi ad esempio il nostro log4j, tornando all'esempio, eccolo qua, è indichiarato qui nella boot delegation.

Quindi sarà visibile come import package dal nostro bundle anche se log4j non è all'interno di un bundle.

Quindi questo lo usiamo per cosa? Per far vedere ai bundle tutte quante le librerie che stanno dentro JBF Libraries, ma anche per farli vedere i package dei nostri progetti, quindi Sianc, PSGlib, ok?

Vedete c'è anche da qualche parte ITN, ok?

Perché altrimenti se io volessi all'interno del mio activator vedere una classe che sta dentro Sianc

non potrei

grazie alla boot delegation posso

ad esempio

facciamo un esempio così concludiamo

con log4j

io vado qua

abbiamo detto che sul mio activator in questo momento

se scrivo log

niente, c'è niente

nulla tutto morto ok aspetta era quello hogger

tutto morto mi importa java util login logger che mi fate solo questo ok

che cosa faccio imported package add

org.apash blog4j, me lo importo

e qua adesso vedete, ce l'ho log4j

però badate bene

questo log4j io adesso lo posso vedere

perché ho dichiarato si importi il package

ma l'unico motivo per cui lo posso vedere

è perché ho dichiarato poi la boot delegation

cioè non esiste un bundle che me lo sta esponendo

di conseguenza adesso faccio vedere

ad esempio io provo adesso ad esportare questo bundle

lo esporto

poi faccio vedere come si eso adesso ad esportare questo bundle o esporto facciate come

si esporta comunque lo esporto mi da errore io vado a vedere l'errore di compilazione

mi dice vabbè parte il syntax error sbagliato a scoprire

scusate adesso lo sistema

per eroguer uguale in all ok via di questo è stato esporto

logger punto get logger mi deve dare errore quando le cose devono dare errore funzionano

ma come funziona?

come è stata l'informatica?

è brutta l'informatica

allora

vabbè

ok, mistero della fede

con altri percorso

doveva dare errore

perché doveva dare errore?

perché si doveva accorgere

che log4j non è un package che è rilasciato da un bundle.

Ed è giusto così, perché non esiste un bundle che ha questo log4j.

Però a runtime, quindi quando il nostro bundle partirà, log4j lo avrà, grazie alla boot delegation, che li farà vedere magicamente questo package.

Quindi quello che bisogna fare, ed è scritto nelle slide, è che tutti i package che non sono importati da un bundle,

devono essere dichiarati come optional.

Questo servirebbe proprio per evitare l'errore di compilazione che adesso non so perché non me l'ha dato

quindi per dirgli guarda

lo so che a livello di compilazione non

ti arrabbi

però tu non ti preoccupare

perché poi quando il bundle lo deployerò

all'interno di

all'interno di Arias

il package sarà visibile

grazie alla boot delegation

chiaro? il package sarà visibile grazie alla boot delegation.

Fuo chiaro?

Sì.

Fine di un package, di una struttura base. Quindi per creare un plugin step by step,

creare un plugin project, metterli come osgi framework standard definire il proprio

activator

le tab dependencies dovete dichiarare almeno queste questi tre package java x serv, java.x.servlet, java.x.servlet.http, java.x.servlet.gsp.

Ok? Quindi, java.x.servlet.http, gsp e base.

Questi sono minimi, a prescindere da quello che dovete fare.

e tutti questi package dovete, come dicevo, dichiarare opzionali,

così qui, aggiungete,

quindi fate tasto destro

properties

optional

e rimuovete anche la versione

ops, opzionali

opzionali

salvate, ctrl s

e qua Salvate, controllo S.

Fine.

Questa è la cosa proprio base, base, base. poi come funziona il giro?

facciamo un activator molto

sciocco

per esempio

sulla start fa

sisout, println

sono partito

sono fermo.

La start scrive questo, sono partito, la stop scrive sono fermo.

Ok, cosa devo fare quindi?

ho fatto il mio package, vado qui export deployable plugin and fragment, questo

oeste concina qui, col connettore

la salvate

in qualche parte.

My handle.

Ok, esportato.

E quindi poi qual è il prossimo step?

configurazione avanzate

OSGI manager

carica un nuovo bundle ok

non servirà il nome, giustamente serve la cartella

ok, quindi ho detto ma è bundle jar, quello me l'ho messo come cartella

mi ha messo questo plugin, mi ha deployato

ok

selezionate

eccolo qua si star bundle quindi è installato ma non attivo ora io vado qui mi

pulisco i log

Ok.

Ripulisco.

E che caspiterina.

Avvia. Sono partito.

Vedete?

Sono partito. Adesso faccio stop.

Sono fermo

ok

oppure possiamo insomma

una volta di stoppato possiamo avviarlo una volta avviato possiamo stopparlo una

volta stoppato possiamo anche disinstallarlo tutto molto easy veloce senza ravvio rapido indolore

ok

nel caso di un controller poi dove potremmo definire il mapping allora perfetto nel caso

del controllo o qualcosa qualunque cosa in generale,

sta sempre tutto dentro OSGI framework.

Quindi su questa classe qui avete tutta una serie di metodi,

controllo, per fare una register di qualcosa.

Quindi se cercate register poi ci avete qualunque.

Per i controller avete register dynamic mapping,

quindi potete fare nel vostro activator in soldoni

OSGI framework,

magari prima dobbiamo sempre, come sempre,

abbiamo detto, dichiararlo come package,

altrimenti vediamo il piffero,

quindi PSGX SGI, dichiararlo come package altrimenti vediamo il piffero quindi per seggi ex sgi

o gi ai framework punto register ci avete dynamic contro le dinamiche mapping cross.giframework.register,

c'è la dynamic mapping,

dove praticamente in un metodo è racchiuso quello che fate normalmente sul properties.

Quindi qua va messo mapping.do,

la classe del controller e il path del bin

ok?

questo vi varrebbe a quelle due righe dove facevamo mapping

uguale controller e poi bin.controller uguale bin

per registrare solo un bin

utile per i bin di dettaglio

questo

il bin lo state dichiarando già qui

register

bin

il path del bin

e poi avete anche

per registrare la query

sgiframework.registerquery

ok?

Ovviamente l'XML del bin?

Non serve

ci pensa lui

basta soltanto la classe del bin

ok

poi vabbè c'è pensa lui basta soltanto la classe del bin

poi c'è ossia già il framework register agent cosa importante è questa però al prescindere della registrazione è questa

una volta che voi registrate dovete sempre fare

l'equivalente ossiagi framework un register

il fatto register bin e qua fate un register del bin che avete registrato

qua sopra questa cosa un register che ne so dynamic

mapping di qua avete registrato il mapping mapping.du e qua fate il register di

mapping.du

ecco a fate la registra di mappi in punto du altrimenti rimango quando uno fa start stop start stop stop si creano potere situazioni sporche ovviamente ok per cui voi registrate

deregistrate meno di quanto registrate può succedere con un caso un caso in che le gente bisogna registrare qualsiasi cosa registrare

tutto tutto tutto tutto ovvio che quando uno fa lo stop la comunque la gente qua è sempre la classe

cioè sempre che sulla si agent la gente ce lo dovete andare a scrivere sulla facendo una in

su db come abbiamo visto insomma ovvio che se qua io ho una riga sulla si agent,

che punta la mia classe che sta su un bundle,

e il bundle lo stop,

l'agent non funziona più.

Però è giusto così.

C'è altre domande?

Ok.

Allora, facciamo l'ultima parte che ancora si rilaccia ai plugin, poi pausa e poi al ritorno affrontiamo la parte di web service ABF.

Questa è una parte di 5 minuti, è solo un attimo per rendervi consapevoli di questo.

Areas è in grado di delegare a terzi il processo di autenticazione utente.

Quindi ad oggi il nostro login è username e password, in Sardegna è così, però ve lo dico come vari eventuali, ok?

Però volendo quella pagina di login la si può delegare in toto

o ad un server led app ad un sistema sso quindi l'autenticazione non la fa più areas

la fa un sistema terzo l'implementazione di queste logiche nel

l'integrazione avviene tramite oggetto comune infatti avevamo visto che tra gli oggetti comuni

che possiamo andare a pubblicare ce ne sono due che sono open sso per l'esso ed è l'ed up per

l'ed up poi c'è questo led up sso che integrazione led up più sso quindi è il mostro combinato tra le

due cose ok però questo è stato fatto solo una volta in tutta Italia in 15 16 anni quindi,

però va beh, cioè per fare una combo delle due cose, solitamente o SSO o LEDAP, oggi molti stanno

spostandosi sulle SSO, quindi uno dovrebbe definire un plugin OpenSSO o un plugin LADAP dove al suo interno gestisce le sue logiche con cui si integra,

che ne so, come se è un LADAP si farà delle query sull'Active Directory,

per esempio, delle query LADAP sull'Active Directory,

se è un SSO farà delle redirect al servizio,

all'identity provider che mi gestisce l'SSO.

Quindi, in questo caso, il JAR dovrà contenere una classe,

quindi il nostro entry point,

sarà una classe che implementa un'interfaccia il ledapp manager,

come vi facevo vedere prima,

per l'ledead App oppure

external login per l'SSO.

La cosa importante, quindi adesso noi che lo vediamo anche perché

ce l'abbiamo nell'Head App con un SSO con cui fa una prova, però

al netto dell'implementazione tecnica, quello che bisogna sapere è questo.

Una volta che voi il plugin lo pubblicate

lo pubblicate normalmente

quindi censendolo

e andando a caricare

a fare l'upload del jar

ok

poi dovete andare

dovete attivarlo

e si attiva qui

su configurazione

sistemi

parametri installazione

sistema questo è in localhost, quindi non ci fate caso tutto quello che leggete che è un db sporco.

Login, eccolo qua, qua c'è un voi aprite, potete scegliere un plug-dran

di oggetti comuni che sono stati dichiarati come LED app o come SSO.

Scopa con... Fabio?

perso il docente se ha avuto problemi di con la connessione applicazioni per

tim che fantastico ha buttato fuori brutalmente

perché mi doveva chiedere

così, perché era scaduto

devo indicare

un OTP code

un codice OTP

che mi aveva sul cellulare per fare la login

ogni sette giorni

erano scaduti sette giorni

quindi non è che ho aspettato che finiva la riunione

perché no, ha buttato fuori

vi condivido erano scaduti sette giorni quindi non è che ha aspettato che finiva la riunione perché no, ha buttato fuori

vi condivido

quindi dicevo

quindi qua indicate qual è l'oggetto comune

che gestisce la vostra

integrazione ad esempio l'edapp.

E anche qui al solito serve un bel riavvio per prendere la modifica.

Poi, per ampliare un po' il discorso, al di là della implementazione dell'oggetto comune,

se attivate un plugin di tipo l'edapp, è possibile poi dargli due informazioni ulteriori.

La prima è se il login deve essere esclusivo tramite LDAP.

Che significa?

Se il login è esclusivo, quando l'autenticazione, quando l'utente inserirà un username e una password,

quelle saranno le credenziali del suo LDAP, del suo utente LDAP.

Quindi poi verranno passate queste credenziali messe in maschera al vostro oggetto comune

che si integrerà, si collegherà al server Active Directory, ad esempio,

verificherà che l'username e la password sono corrette,

se sono corrette dà l'ok alla login.

Fine.

Se il login è esclusivo, questo è l'unico modo con cui loggarsi. Quindi se il server

ledapp risponde picche, l'utente non si logga. Se invece il login è non esclusivo, quello che succede è questo.

Prima viene comunque interrogato il server ledapp con quelle credenziali. Se il server ledapp risponde picche,

Arias in automatico riutilizza quelle credenziali per verificare se sono delle credenziali Arias,

quindi la login tradizionale, che noi chiamiamo anche login nativa, quella standard,

quindi fa un doppio tentativo.

Se il login viene marcato come esclusivo invece è solo login tramite l'edapp

allora ha senso anche questo parametro

autenticazione nativa

questo parametro qui ci fa una bella dual list

sono un ambiente di localhost

quindi ignorate le bracco palline a città

Ci fa una bella dual list con tutti gli utenti censiti a sistema disponibili e io di questi utenti qui sposto a destra gli utenti che nonostante la login e l'edapp esclusiva possono bypassare l'edapp, quindi continueranno a loggarsi con le credenziali di Arias.

di Arias. L'esempio classico è magari gli specialisti, perché i specialisti che lavorano sul cliente, generalmente, anche se ci sono alcuni clienti che lo fanno, generalmente però

non sono censiti sull'LDAP del cliente, e quindi quegli utenti vengono messi come qui

sulla lista d'autenticazione nativa.

Badate bene che un utente solo da servizi,

vi ricordate quel flag che vi dicevo, utente solo da servizi,

quando si crea l'utente, aggira sempre l'LDAP,

non passa mai per l'LDAP, perché è un utente da servizi, non è un utente reale.

Ok?

Ok. ok? ok

ok

allora, ci sono domande?

ok

allora, facciamo una nostra bella pausa

ci ribecchiamo qui 16.05

anzi 16.03

così riattacchiamo le 16.05 e continuiamo con il web service.

A dopo ragazzi!

A dopo!

A dopo!

A dopo!

A dopo!

A dopo!

A dopo!

A dopo! A dopo! A dopo! A dopo! A dopo! A dopo!

A dopo! Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie. 82, 52.

Eccoci.

Presente.

Yes.

Aspettiamo un pochettino e iniziamo.

Intanto qua mi preparo. Grazie. Grazie.

Io ci sono, no?

Sì, sì.

Ok, ok, allora proietto.

Ok, allora proietto.

Allora, quindi come dicevamo parliamo dei servizi web service.

Allora, Ares è un sistema, come diciamo, aperto e permette l'accesso a tutti i suoi bin, quindi qualsiasi bin noi definiamo, anche quello corso, esami, eccetera, che abbiamo fatto in esercizio, quindi bin che incapsula in logica di business, insomma, questo lo abbiamo curato, tramite opportuni web service sono di tipo SOP RPC, che è implementato tramite la libreria PashAxis,

in cui si chiama l'unico metodo call che prende come parametro una string XML e restituisce una string XML.

I servizi effettua il parsing della string e input esegua il comando specificato. Che significa? Allora, tutti i servizi, o meglio, tutte le modalità con cui si può accedere e interagire con i nostri BIN, hanno un unico endpoint. Quindi, a prescindere

che io voglia interagire con i comuni, con i pazienti, con i soggetti. Il servizio ha sempre lo stesso endpoint, ma soprattutto il tipo di messaggio è standard,

è sempre lo stesso.

Lo vediamo, un esempio.

Quindi fondamentalmente, se io vado a vedere il VSDL di che abbiamo abbiamo qui

Un po' sull'ambiente di formazione, d'accordo?

Il servizio ha un solo metodo call.

Qui dentro noi ci passiamo un XML, opportunamente formattato, poi vediamo come,

che rappresenta il servizio che di fatti voglio invocare, quindi il bin con cui voglio interagire, l'operazione che voglio fare con quel bin, le proprietà che

voglio impostare su quel bin e via dicendo. Ed è sempre questo. In output allo stesso

modo riceverò un output, un XML, anche questo.

quello standard che mi torna ad esempio,

se io ad esempio voglio inserire un nuovo bin,

in input, in output avrò un XML che mi rappresenta

lo stato finale del mio bin che è stato salvato.

Quindi, ad esempio,

questa è una chiamata al web service per fare una open session, una login.

Ovviamente io prima di poter invocare un qualsiasi servizio web,

dovrò prima autenticarmi.

E quindi il servizio di autenticazione, il lato web service swap,

quindi il servizio con cui apro una sessione di invocazione di servizi web service si chiama open session.

Questo è un esempio di XML che mi rappresenta il servizio di open session.

Quindi utente, password, opzionalmente le informazioni sulla terna

e sulla data di lavoro, cioè la data di login

tu questo XML inserito all'interno di un envelope sop

diventa quindi questo

zoom

ok, quindi abbiamo qui tutta la questione, questa è la parte del nostro sop envelope, questo è il body, vedete qua c'è l'operazione call, l'operazione call noi gli spariamo quell'XML, quale? Esattamente quello che abbiamo visto nella slide prima, quindi l'open session ovviamente depurata, insomma,

encodata in maniera opportuna di tutti quelli che sono i tag XML all'interno.

Quindi, vedete la differenza?

Quindi, parentesi angolosa, open session, chiusa parentesi angolosa,

quindi il tag open session diventa where than, greater than.

where then greater than ok

tutto racchiuso nell'unico metodo call

se io devo inviare un altro servizio web service

il messaggio sarà esattamente lo stesso

la di quello che cambierà sarà il contenuto

di questa parte qui dell'xml

ok

il resto è sempre lo stesso

sempre che invoco il metodo call

ok Il resto è sempre che invoco il metodo call.

All'interno di Arias, quindi, in realtà, tramite quel metodo call,

quell'unico metodo, quell'unico punto di accesso che è il mio metodo call,

posso effettuare tutte le operazioni per l'accesso in modalità crad ai nostri bin ai nostri query ok io quindi potrò tramite quell'unico metodo call creare prendendo il

l'esempio del nostro esercizio di giovedì scorso, potrò creare un corso, potrò recuperare

una lista di corsi, potrò recuperare un singolo corso, modificare un corso, inserire, cancellare

un corso. Per fare tutte queste operazioni si individuano, e posso invocare tramite il metodo call, 5 operazioni principali.

La prima l'abbiamo già detta, o meno anticipata, è il servizio di open session, quindi io gli sparo un XML al metodo call dove in input gli mando i dati di autenticazione.

se l'autenticazione avviene con successo in output riceverò un seed

cioè un token

ok, un token di autenticazione

che dovrò poi spendere

vediamo come, nelle successive chiamate

poi, vabbè, omologo dell'open session

ci sarà poi il servizio di closed session

che invece di aprile si occupa di chiudere la sessione

nel mezzo io

potrò fare o un servizio di find cosa fa si occupa di eseguire una classe di query quindi di farmi

una ricerca un po come se io sono una maschera di ricerca del corso clicco mette i filtri clicco

tasto ricerca ottengo il risultato di ricerca ecco simila con l'operazione che fa l'utente la possiamo fare tramite web service. Quindi in

input gli do i filtri e in output ottengo il risultato di ricerca della query. Servizio di

get si occupa di caricare un singolo bin, quindi l'equivalente di quando l'utente prende in

gestione un record da un risultato di ricerca, quindi quando va in edit.

In input è possibile quindi indicare l'identificativo del record, l'id, e in output cosa otterrò?

La lista completa delle proprietà del bin.

Quindi riceverò un XML che mi serializza praticamente il bin, tutte le sue proprietà e tutti i suoi valori.

praticamente il bin, tutte le sue proprietà e tutti i suoi valori. Se io voglio invece inserire o aggiornare un singolo bin, in input invoco il servizio di set e in input li passerò la lista

delle proprietà che voglio valorizzare sul bin. In output otterrò che cosa? Sempre come quello

come per il servizio get, in output otterrò il bin serializzato, insomma, con tutte le proprietà che sono state

valorizzate. Se sono

in inserimento, quindi non ho in input

specificato un identificativo,

allora in output otterrò anche l'identificativo

dell'id, insomma,

che è stato associato al bin,

supponendo che ad esempio sia una sequence.

Ok?

Ci siamo? Vedete che questi qua,

vabbè, open session, cloud session no

ma find, get e set

sono praticamente una trasposizione

di quello che abbiamo visto con il service manager

quando abbiamo fatto il wizard

sul service manager abbiamo visto che abbiamo

il service manager.find

abbiamo visto che abbiamo il service manager.find

punto get object, e abbiamo visto che ci sta anche il service manager save, questo sarebbe il save, ok?

Ok, nota bene, è possibile ottenere uno stab di tutti i servizi tramite il menu configurazione avanzata e alt web service,

però questo lo vediamo dopo, prima un servizio ce lo facciamo a manina.

Quindi, ovviamente però, adesso dobbiamo vedere due parti, da una parte dobbiamo vedere

un esempio, come si fa un servizio web service, come si invoca un servizio web service

in Ares. E questo lo ved suo aiutandoci con sop

we ok però potete usare anche qualsiasi altro idee anche con postman mi pare che si possono

fare i servizi sop non solo resta usiamo sop we in questo caso e qui vediamo un attimo l'invocazione

però poi vediamo anche la configurazione che bisogna fare, perché in realtà non è che io posso interagire potenzialmente con tutti gli oggetti di Arias, però in realtà con quali oggetti, chi, quando e perché, anche questi sono oggetti di configurazione, quindi poi vediamo come si configurano. a bagnarci i piedi per vedere come funziona un servizio.

Ecco qua.

Allora, questo

è un progettino che mi sono creato su SoPui,

punta all'ambiente sempre di formazione.

Quindi che succede?

Questo è il mio servizio web service

metodo call xml

che accetta un xml in input

e qui dentro, tra il tag xml

io ci metto

l'xml relativo al mio servizio

ad esempio si inizia con il servizio

abbiamo detto di open session

quindi voglio invocare il servizio di open session

per crea aprire una sessione web service.

Eccolo qua.

Ora qui ho utilizzato il C-Data, ok?

Invece di fare come è fatta nelle slide, che qua loro fanno l'escape di tutti quanti i tag dell'XML,

lower than, greater than, eccetera.

Banalmente lasciate così com'è, però mettete tutto in wrap a intorno a un cdata,

così lo fregate ed è più pulito, più semplice.

Quindi qua io li passo i miei dati minimi, che sono questi,

che sono la username e password dell'open session, e qua poi lo capiamo dopo quando vediamo la configurazione

l'entità applicativa collegata a quest'utente.

Eseguo.

In output che cosa ottengo?

In output ottengo informazioni dell'utente con cui effettivamente è stato logato.

Questo utente ha una terna di default e quindi in automatico mi ha selezionato questa azienda, questo ufficio e questo ruolo.

Ma quella cosa che mi interessa è questa, il session ID.

Vedete, mi ha staccato questo session ID.

Che ci faccio? Questo è l'identificativo di questa sessione applicativa

che è stata aperta

adesso

quindi adesso che l'open session è stata aperta

prendo quest'altro esempio che mi sono creato

che è l'invocazione di un servizio di get

quindi che cosa fa il servizio di get?

mi torna i dati di un oggetto

a partire dal suo identificativo.

E come è fatto il servizio di get?

Semplicemente questo.

get,

un tag object name dove va specificato

il path del nostro bin,

ad esempio qua voglio ottenere i comuni,

quindi comuni bin, ad esempio qua voglio ottenere i comuni, quindi comuni bin e poi la lista delle nostre chiavi primarie, in questo caso il comune, come quasi tutti i bin, ha una sola proprietà

che è chiave primaria, che è id comune e questo è il valore che passo. Il session id che ho ottenuto prima dall'open session va inserito qui dentro, su session id, come attributo del tag input.

Ora lo eseguo, con id comune mi dà un errore che dice che non è stato individuato alcun record, non esiste nessun comune con quell'id.

Adesso ce ne prendiamo uno. attendere prego si ricollega ok questo qui ad esempio prendo

San Francesco Alcampo

questo è l'id

lo metto qui come d'indicato comune

eseguo

tata

vedete

ottengo in output

la serializzazione del mio comune bin

quindi mi dice che

allargo eh

mi dice che ho una proprietà che si chiama

idcomune, che è una chiave, questo è il valore, ho un codice istat, una stringa, la sua virgoletta,

visibilità è obbligatoria, mi dice addirittura anche la visibilità, e mi torno. La visibilità

in base alla profilatura dell'utente con cui ho fatto la login, l'open session. E mi dice

i valori, insomma, camp proprietà per proprietà. Se ci sono dei dettagli, come in questo caso

ci sono le ASL collegate, mi fa vedere anche i dettagli. Quindi c'è la lista di dettaglio

ASL collegate che contiene una sola istanza in questo caso di ASL comuni bin

la cui proprietà sono

comune e ASL

ok

tutto chiaro finora?

sì

perfetto

ok

quindi questi insomma sono

questo è un assaggio per vedere

abbiamo fatto un servizio di open session

abbiamo fatto una get

ora

facciamo un passo indietro e vediamo un attimo

perché sono uscito a fare questa chiamata

in realtà c'è un indietro una configurazione

non è che la posso fare a prescindere

allora In realtà c'è dietro una configurazione, non è che la posso fare a prescindere.

Allora, per poter utilizzare un servizio l'utente che apre la sessione, open session, dovrà essere opportunamente abilitazioni si basano sul concetto di entità applicativa, che rappresenta in questo caso il sistema che vuole integrarsi con Ares, in questo caso perché abbiamo visto l'entità applicativa,

abbiamo usato anche come altro DB, per l'associazione dei file, insomma si può usare per diverse cose.

In questo caso rappresenta lo scopo di entità applicativa nell'ambito di web service e quello

di rappresentare il sistema terzo che si deve integrare.

Gli step completi da seguire sono quindi la creazione di un'entità applicativa, definizione del messaggio sul demo nei tiposi web service, quindi dobbiamo definire il messaggio che effettivamente vogliamo permettere di essere seguito e poi associare all'entità il messaggio appena creato.

Vediamo, primo step abbiamo detto creare l'entità applicativa.

Quindi, chiedo un po' di roba qui.

ok come administrator

meglio

admin formazione

sistema

no, sistema demoni entità applicative

creiamo entità applicative.

Creiamo entità applicativa.

Form.app, vista programmatore.

Qua possiamo lasciare anche tipo database, non ci interessa. Informazione.

Informa.

Poi, definire il messaggio sul demo nel tipo C-Web Service.

Per adesso lo lasciamo da parte.

Questa è la definita, abbiamo definito l'entità applicativa, quindi alla fine è solo un codice di iscrizione. sul demoni il tipo si web service e qua abbiamo per adesso lo lasciamo da parte questa questa è

la definita abbiamo definito l'entità applicativa quindi alla fine è solo un codice di iscrizione

nulla di più andiamo su sistema demoni demoni cerchiamo il demoni di tipo si web service

ovviamente si chiama proprio si web ok un demoni tipo si web service ovviamente si chiama proprio si web ok un demoni tipo si web service questo in

realtà ok giusto per allarciarci a quando aveva fatto il corso sui demoni è un tipo di demone

segna posto nel senso che se andiamo sulla nostra tabella vi la ricordate la stà la si demone tipo

La nostra tabella, vi la ricordate, la si demone tipo, ci elenca tutti i tipi di demoni, non ha una classe demone, quindi il demone in realtà non la istanzia, cioè è solo un segnaposto, è solo un modo per dire, ok, per dire che sono attivi, quando si attiva il demone, si dice che sono attivi i server web service,

i messaggi web service, solo di segnaposto.

Se non attiviamo il demone di tipo se web service, i demoni non funzionano, scusate,

i servizi web non funzionano, ok?

È solo di segnaposto. Ok? Il suo disegno a posto.

Poi andiamo sul tab messaggi e qui dobbiamo censire tutti i messaggi, per adesso tutti, questa è una di queste, diciamo, è l'anagrafica dei messaggi web service che possiamo accettare dall'esterno.

Cioè in realtà sia dall'esterno che all'interno.

Per adesso concentriamoci dall'esterno, cioè che ci invocano.

Ok? Per adesso concentriamoci su questo. Quindi qua dobbiamo censire l'anagrafico e tutti i possibili messaggi che vogliamo potenzialmente

ricevere dall'esterno.

Come si fa?

Si seleziona l'oggetto, quindi ad esempio...

Se è comune ce l'ho messo...

provincia.

Contiene... provincia contiene

lo possiamo fare, facciamo su...

Corso non ci interessa Scusate un secondo

Un secondo Grazie a tutti. Scusatemi.

Ok.

Dicevamo, quindi dobbiamo trovare il nostro oggetto.

Allora, abbiamo un po' un oggetto che...

Un po' più...

Il paziente c'è

tiene

a forse non trovavo perché sono solo per la percentuale, quindi riproviamo.

Ah, perché ho messo la percentuale, ok.

Ad esempio definiamoci che vogliamo permettere dall'esterno di poter effettuare una ricerca di una provincia, l'inserimento di una provincia, eccetera, eccetera.

Gli oggetti qui sono due, perché?

Perché in un caso è il bin, parliamo sempre di modello, però in un caso parliamo del bin,

in un caso parliamo della query, che quindi rispetto alle slide che vi facevo vedere,

è la query, questa qui per i servizi di find, quindi per cercare,

il bin per i servizi di get and set.

Cominciamo con get and set.

Qua gli dico qual è l'evento che voglio gestire, tra tutti i possibili.

Ok.

poi li vediamo tutti, intanto incominciamo con quelli che abbiamo visto, quindi dico che è, voglio gestire la get, e qua poi li do un codice e una descrizione, quindi get prov servizio per get di una provincia.

poi faccio la stessa cosa però per il set quindi è che prov servizio per

una provincia che dico che l'evento è set.

Quindi qua ho solo inserito la possibilità da fuori di fare questo set e get sulle province.

Step 3, occorre associare adesso a quell'entità

che abbiamo creato prima, il messaggio che abbiamo appena creato.

Quindi vado su Entità,

seleziona,

gli associo al demo nella mia entità form up

esco

ecco qua form up

ok

adesso su questa entità

clicco, seleziono, vedete che mi fa? Mi fa andare a una dual list per i messaggi di input, poi parliamo degli output.

Per i messaggi di input mi fa vedere questa tutta la lista dei messaggi che ho censito prima.

prima. Tra tutti quelli disponibili che sono stati censiti come messaggi, quale vuoi abilitare?

E quindi qua troviamo il getProv, setProv che abbiamo appena creato. Quindi li seleziono e li porto a destra. Fine.

Ok?

Sulla domanda?

No.

Ok.

Ok. ok l'ultima cosa però l'ultimo step è associare però la nostra entità applicativa l'utente

perché noi non è che facciamo login con l'entità applicativa ok noi lavoriamo

login la facciamo indicandogli una username ed una password. Quindi username e password ci serve per l'autenticazione.

L'entità diciamo per cosa è abilitato quest'utente a fare in virtù dell'utilizzo di questa entità applicativa.

Quindi bisogna associarli.

Tab utenti, però vedo niente perché

aspettate, annulla...

...

...

...

...

...

...

... era timido prima

che cosa succede

dai su era timido prima. Che cosa succede?

Dai su.

Ok.

Allora, prendi al mio utente che si chiama,

prendo sempre questo utente,

questo è un underscore gbf,

username uguale corso underscore gbf,

lo porto a destra,

esci,

autocommittante,

non me vuole far uscire esco da qua

conferma ed esci

a posto

proviamo e vediamo che succede

allora innanzitutto qui

mi crea una nuova sessione

però con la mia entità applicativa

mi sono già dimenticato

che era

form underscore ap form underscore ap, mi pare, form underscore ap.

Sembra che gli è piaciuto, quindi era lei.

Adesso vediamo se funziona.

Innanzitutto vediamo, vedete?

ha funzionato, si

vedete adesso io ho creato una sessione applicativa

quindi con form up

ho preso questo session id

l'ho messo qui di nuovo sulla mia

get dei comuni, l'ho eseguita

vedete che mi da errore, mi dice serverdemon non applica

abilitato l'entità applicativa formap. No, però aspetto, dovete un altro messaggio, formap.

A meno che non è forviante. Ok, comunque diciamo che get comuni non me la deve far fare. Facciamo

una prima prova a vedere se funziona la get delle province, ok? Quindi get comuni non me la deve far

fare perché non l'ho abilitata, mentre get set province sì.

Quindi proviamo intanto a crearci un messaggio di get di una provincia.

E qui entra in gioco quello che scrivevo nella slide come nota bene, cioè come faccio a sapere com'è il messaggio web service per le province? Lo standard è sempre questo, però può essere un po' complicato.

Il messaggio di GET non tanto, è abbastanza banale, sono queste righe.

Il messaggio di SET adesso lo possiamo vedere, è un pochettino più arzicocolato,

quindi un po' più noioso da impararsi.

Quindi con questo ci aiuta il punto di menu configurazione avanzate help web service.

Come funziona?

Qui dobbiamo indicarvi l'oggetto con cui vogliamo interfacciarci, quindi nel nostro caso abbiamo detto che sono le province.

Contiene. contiene

e che cavolo ho fatto inizio con

contiene

eccolo qua

poi dice che tipo di richiesta vuoi?

set o get?

iniziamo con get

iniziamo con set anzi

set, crea

eccolo qua vedete vi fa già

andandosi a leggere

l'xml, le proprietà eccetera

vi fa già

il stab

dell'xml che dovete passare come input

quindi adesso io vado su sop qui

mi clono ad esempio questa richiesta,

mi creo una set province e qui in input, cancello e ci passo questo qui.

XML perché sta sito qua sopra, quindi input seed set, ok?

Quindi qua su seed session id ci devo mettere il mio session id innanzitutto.

Poi incominciamo. Il di provincia, non mi ricordo se c'è una sequence, fatemi vedere un attimo se è una sequence.

Mi pare di sì.

grafiche base province

nuovo

no, l'identificativo provincia lo devo mettere io, va benissimo

non c'è problema, quindi l'identificativo provincia non è una sequence

quindi ci mettiamo che ne so, 9, 9, 9, 9, 9, 6, 9.

Odice istat, ma non è anche lo stesso, quanto è un numero.

Sistema, provincia di test, sigla, e basta, tanto l'identific via, data inizio validità è obbligatorio e quindi ci metto 0101.1970. Vediamo un po' che succede, io mando adesso questo servizio, vedete questo è bello, l'utente ha funzionato, l'utente però non è abilitato alla gestione della provietà desk-prov.

Perché? Perché vi ricordate che era uno degli esercizi che avevamo fatto insieme sulla profilatura.

Avevamo reso la descrizione non editabile.

Quindi questa profilatura ovviamente non viene applicata sulla maschera web ma anche da servizi.

Quindi da profilatura configurabile mi devo riabilitare.

Mi devo riabilitare, anzi direttamente come...

Tanto qui sono già come admin.

Anzi, lo facciamo prima come profilatura configurabile così lo sistemo per gli altri utenti e non diamo problemi e noie alle altri giorni di formazione.

Quindi qui su province, base, province, configura, configura, Campi.

Non editabile.

Editabile.

Vediamo se il default basta.

Lo rimando.

È andato.

Ora però mi dà errore sul codice che ho messo perché dice che il codice massimo 3 e ha in realtà ho messo 6 con il codice istat

3, 9, 9, 9, 9, ok non lo sapevo, cosa ci sta massimo 3, ok, perfetto, l'ha inserito,

in output vi fornisce insomma il risultato finale, ok?

Tutto chiaro?

Sì. Sì.

Quindi get comuni in effetti non ha funzionato,

ed è giusto così perché non sono abilitato a fare la get dei comuni,

però la sette delle province sì.

In realtà sono abilitato, abbiamo detto, anche a fare la get,

quindi mi clono questa richiesta e proviamo anche la get.

E anche qui vi potete aiutare sempre con l'helper quindi qui mettete

get crea e vi crea lo stab della get

voglio recuperarmi la stessa provincia che ho inserito.

Abbiamo messo 3 volte 9.

1, 2, 3, 4, 5, 6.

La sessione.

Qua il session ID bisogna rimetterli.

La sessione nel frattempo.

La ricreiamo.

C'è un dollaro

un dollaro di troppo?

ok, grande

ok

perfetto

ok, abbiamo ottenuto in output

quindi la stessa cosa, quindi tutte le proprietà

complete che sono

relegate all'IT della provincia, quindi

xxx, provincia di test e così via dicendo

ok, d'accordo?

ok, domanda sulla sessione

ha una scadenza sua?

o dobbiamo sempre ricordarci di fare

il closed session?

ha una scadenza sua

però è bene

fare sempre comunque la closed session

poi la scadenza, qual è? Mi

pare che 30 minuti, però dopo quando vediamo il codice lo vediamo meglio, però mi pare

che sia 30 minuti. Altro? Ok. Ora, altra informazione

quindi avete, insomma, concetto che vi deve rimanere

come fare i messaggi, eccetera

insomma, vi potete aiutare con l'help web service

quindi, come dire, abbastanza semplice

quindi, come strutturate

l'XML

gli envelope del messaggio SOP

quindi questo unico messaggio

call in cui dovete poi mettere

all'interno di un C-DATO o comunque con le dovute

escape l'XML di input

e in output la call retard

e voi ottenete sempre un cdata con l'xml di output.

I messaggi che però potete difare, gli oggetti, più che messaggi, parliamo di oggetti con cui voi potete effettivamente interagire,

sono stabiliti da configurazione, e l'abbiamo vista.

Quindi si creano prime messaggi possibili, potenziali, e poi si dice, questo messaggio lo abilito all'entità X,

quest'altro messaggio lo permetto di essere eseguito da quest'altra entità Y, e così via dicendo.

Detto questo, però, io ho detto che è un sistema aperto, insomma tutti gli oggetti che sono su Ares possono essere raggiunti dall'esterno,

raggiunti dall'esterno, però in realtà è potenzialmente.

Perché potenzialmente? Perché qui dentro, quando io vado a definire i messaggi,

quando faccio questo lookup oggetto, questo che trovo qui, non sono tutti i possibili bin in realtà che ho su Arias. Cioè, tutti i possibilibini su Arias possono essere eseguiti tramite web service?

sì, ma li posso effettivamente

configurare tutti? no

quale posso configurare?

devono essere censiti

all'interno di un elenco

di oggetti pubblici sono chiamati

quindi

questa lista qui

va a fare una query su una tabella

che si chiama la metto qua dentro,

from C, oggetti pubblici, o con underscore, non mi ricordo, oggetti pubblici.

pubblici. Quindi supponendo ad esempio che vogliamo esporre il nostro corso, per poterlo avere, devo andare a censire qui dentro. Ti do un nome, vi do una descrizione, quello che sia,

vi dico se di tipo bin o ffind, se è una query,

e poi vi dico il path della mia classe.

Questo è per fare un controllo lato sviluppo,

quindi il laboratorio sviluppo crea il bin,

però poi se vuole rendere effettivamente quel bin usufruibile

tramite

web service dovrà censirlo all'interno

dei soggetti pubblici, a livello di codice non deve

fare niente, il bin in quanto

tale, e anche la query in quanto tale

è già pronta per essere

usata tramite web service, è un modo per

dire ok, aspetta perché magari

i bin sono tanti, non tutti hanno un senso

e quindi qua ci si censiscono solo i bin sono tanti, non tutti hanno un senso,

e quindi qua ci si censiscono solo i bin che si vogliono esporre.

A quel punto quello che mettiamo su questi oggetti pubblici, poi torniamo a quello che dicevamo prima, lo possiamo andare ad agganciare qui, creare il messaggio, eccetera, eccetera.

ok

dentro con la tabella

il censimento si fa sempre tramite

interfaccia web o direttamente

mindset

si esatto lo puoi fare sempre come

volendo anche col monitor sviluppatori

oppure si

fai prima in questo caso a fare

oggetti

pubblici, eccolo qua

quindi lo puoi inserire qui

aiutandoti con l'interfaccia web oppure

fai direttamente un insert che va benissimo

la cosa importante poi ovviamente

vedete so, due informazioni in croce

la cosa importante

poi dopo lo devi sportare come modifica

il db, esempio tramite liquid base

o quello che è

ok poi dopo lo devi portare come modifica al db esempio tramite liquibase o quello che è

ok volendo si può anche non c'è mai sport diciamo il cat 7 eccetera del bin all'interno di un bundle o è sconsigliato? Bella domanda. Vediamolo, vediamolo, non lo so, vediamolo. Penso di sì,

penso di sì, lo vediamo. Vediamo adesso che apriamo un po' il codice. Lo vediamo. Altra domanda?

Adesso quando vediamo il codice lo vediamo, diamiamo uno sguardo. Però prima di andare sul codice buttiamoci giù un po' di tabelle.

Allora, aggetti pubblici l'abbiamo appena detta.

Abbiamo la select star from c underscore demone message.

Ok.

Sì, demone message qui dentro.

sì, demone message qui dentro eccolo qua, troviamo la lista dei messaggi

definiti, ok?

che abbiamo definito, ad esempio qua il setget delle province

ok? quindi l'anagrafica dei messaggi

demone message, poi abbiamo

start from, sì

demone poi abbiamo star from si

ci pensa Ci pensa? Lo recuperiamo così.

Allora, eravamo qui.

Entità.

Nostra entità.

Vediamo un'entità. Message. nostra entità, demon entità,

message,

controller,

main object,

entità dettaglio bin demoni,

Sì, entità demone.

Sì, entità demone.

Questa è l'associazione tra il demone e l'entità.

Quindi qua, form app abbiamo visto.

Però quell'altra cosa che volevo è anche la lista dei messaggi disponibili in input.

Eccola qui.

disponibili in input, eccola qui demon, entità message persist

è questa, oh eccola qua la tabella, vedete come i BIN alla fine

parlano, ci parlano

eccola qua, questa qui è la tabella invece dove abilito a partire da una

entità il messaggio, tra cui censiti dentro la sitemone message. entità demone legame messaggi

all'entità

la mettiamo insieme

riportiamo qui ma l'avevamo già vista

c'è anche la tabella dell'entità.

From si entità app.

Ok.

Va bene. a posto

quindi b fatto

vediamo l'autocodice come viene gestito

il tutto

allora abbiamo detto che l'entry point è uno solo

che è questo qui, questo jbf service

questo entry point

abbiamo anche detto che appunto

è la libreria che sottende

questa gestione dei messaggi SOP è Apache Axis

quindi nel PSG, facciamoci proprio il giro lungo lungo lungo

dentro il PSG X initializer viene dichiarata la classe java tramite axis, viene dichiarata qual è la classe java che risponde all'endpoint jbf service.

Ed è dichiarata questa classe qui, default web service.

Questa classe ha un metodo che è call, perché è il metodo che di fatto è esposto tramite web service, questo call.

Lo troviamo qua dentro.

Che fa il call? Abbiamo detto che riceve un XML.

Vabbè, internamente fa internal call.

Ed ecco qua.

Quindi tutto quanto, tutti i messaggi web service,

Web service passano qua dentro su default web service, tutti, qualsiasi, tutti i messaggi sopra.

Qui fa tutta una serie di controlli, però va bene, alla fine della fiera, quello che ci interessa è che, eccolo qua, invoca il parsing dell'xml, lo trasforma quindi in una string xml,

lo trasforma in un document, questo cos'è? DOM4j?

Sì, un document DOM4j per poterlo poi navigare, e con il document invoca questo metodo call.

E qua, finalmente adesso fa la ciccia.

E qua finalmente adesso fa la ciccia e dice sul document va a recuperarsi l'input element, a partire dall'input element si prende i nodi, eccolo qua, e poi alla fine si tira fuori l'operation name lui va a ricercarlo presso nemmo cioè

tt anzi no questo qui questo qui dovrebbe essere presciò di aspettare attimo e sto avendo il dubbio Sì, anche perché il primo è il root. Sì, sì, operation name. Questo è questo.

Grazie.

Questo qua, get.

Ok.

Poi operation name incomincia a chiedersi che cos'è.

Quindi c'è stato un altro po', eh, quello tag ping.

Vediamo che farà.

Farà magari di rispondere a Pong.

Infatti, si risponde Pong.

Quindi questo è per pingare i servizi web service, ok?

Ci sono anche altri, eh, servizi, nonostra quelli che abbiamo detto, però concentriamoci adesso

su quelli, ad esempio, open session, quindi se l'operaion name è open session, che farà?

Ecco, invoca il metodo open session e dentro dice, ok, mi recupero l'user, la password,

quindi poi andrò a verificare se la user ha password combaciano

eccetera eccetera

quindi fa l'open session

plugin service

i plugin li vediamo dopo

ma anzi no

li possiamo anche

li possiamo anche

vediamo dopo

vediamo la fine

quindi andiamo sull'else

sull'else si dice

sull'else perché l'else?

perché l'else richiede

una sessione, ok?

quindi devo avere l'utente logato

quindi se hai una close session

farà la close session

puoi anche cambiare la password

dell'utente

arriviamo tag find

che farà il tag find?

invoca il metodo find e qui dentro

si recupera qual è la query

che deve essere eseguita

alla fin fine si recupera i filtri

eccetera, alla fin fine farà

udite udite

e ci arriviamo eh

prima o poi

ci arriviamo

eccolo qua, service manager find

ok?

se io prendo ad esempio il tag set

la set

qua che farà? si parla dell'ex tui si parser xml

tutto quanto la bla bla bla bla bla bla che cosa farà un certo punto set properties

to binder quindi sette valori dei tag sul binder quindi si è creato un binder già

quindi qualche parte qui c'è obtain binder, eccolo qua

vedete?

service manager, get object

alla fine torniamo sempre alla roba del service manager

poi qua dice se il campo chiave

è null, quindi se in fase di sette

non gli ho passato una chiave primaria

allora fa il get object con null, vi ricordate?

altrimenti lo fa con la chiave

e quindi in un caso è un bin vuoto

in un caso è il bin cheoto in un caso il bin che viene

recuperato ad adb poi una volta preso il binder ci setta le proprietà set properties su binder e poi

in ultimo service manager save

andiamo avanti

magari questi altri qui minori

li vediamo così al volo

intanto get

che farà?

stessa cosa, si prende la lista delle chiavi

abbiamo detto e poi con la lista delle chiavi

get of service manager

get object

ok, ora prima di vedere gli altri tipi di servizi

per esempio per rispondere alla domanda di Federico

la sessione

viene gestita

c'è un timeout

un timeout.

Un timeout che può essere personalizzato tramite application properties.

Questa qui è la soluzione che va a interrogare l'application properties.

Quindi significa che uno volendo può prendere questa chiave, andare sull'application properties e scrivere uguale a 30.000 secondi.

No, 30 anzi, questa è già fa per mille.

Si fa per mille, quindi in secondi.

30 secondi.

Però al netto di questa personalizzazione che si può fare sull'application properties se sull'application properties

è vuoto il timeout mette 0

vediamo un po' che succede quando è 0

gettimeout

chi lo chiama

WebServiceSessionLifecycle, timeout, 0, va bene, poi i callers, run, se è maggiore di 0, se è uguale a 0, ah no, niente, non c'è un default, mi sbagliavo.

Non c'è un default, quindi se non lo specifichi, se non lo indichi, ha valore della durata della sessione HTTP.

Perché comunque dopo qui, lato Tomcat, comunque viene aperta una sessione HTTP, quindi direi il default di solito è 45 minuti sul Tomcat.

Quindi dipende quello che c'è in sito sul web XML del Tomcat, la risposta è quella

quindi il default è 45 minuti

solitamente

a meno che uno appunto

sull'application property specifica questo timeout

in questo caso viene ammazzata prima

ok?

ok

poi non mi ricordo

c'era anche un'altra domanda

che dovevo vedere sul codice, mi pare

si, sarà

possibile utilizzare una pagina

esatto, esatto

vediamo ad esempio sulla get

che cosa fa?

sulla get lui va a prendersi

l'object name, quindi il nome

del mio bin

questo object service name lo mette in una mappa, vediamo un po' ObjectName, quindi il nome del mio bin.

Questo ObjectServiceName lo mette in una mappa, vediamo un po' che ci fa.

RealPath.getObject.

E poi lo chiamiamo, manda GetObject.

Però allora sì, perché poi dopo che fa il service manager get object cosa fa?

Invoca service get object, che è un default service, il metodo get object è qui dentro con l'object ref,

create object,

eccolo qua cosa fa?

va a cercare

se il bin

che è stato, la prima cosa che fa è vedere

se il bin

quindi questo è anche il service manager

la logica sta a livello di service manager

quindi la risposta è sì per questo

quindi va a vedere se

è registrato su SGI

è stato fatto un register bin

quello che avevamo visto sull'activator

di un oggetto con questo path

se sì

se sì

apposto

se no, se quindi bin class è ancora null

allora fa un class for name

quindi di conseguenza lo prende da

i progetti standard

dal class path

ok

ok

quindi vabbè

pre-taccio anche uno sguardo sui altri servizi

quindi sent, find, get

in realtà un altro servizio importante

che adesso ve lo raggiungo in slide

viene fatto poco a essere sinceri

però comunque rientra nei servizi

che potete fare

è il delete

perché di delete si fanno sempre pochi

però c'è il tag

c'è il tag

il servizio di

il libro

per cancellare un bin

i miei limi

significativo del record

alto alto è un po' più piccolo

la delete che cosa farà?

farà appunto la cancellazione

vediamo un attimo che cosa

ci restituisce in output secondo me farà ununto la cancellazione vediamo un attimo che cosa ci restituisce in output

quindi delete prende in input

nome dell'oggetto va bene ma sicuramente anche la lista

l'id

l'id

case infatti eccolo qua case e in output quindi cancello il binder

il manager di lip

e Grazie. ecco qua a tua data è la mia operazione

comunque seguita correttamente

quindi ci rimanda insomma

un hack

per dire

un K

identifica vivo del record

questa è la delete

poi andando a vedere un altro po' di altri messaggi

dicevamo

quindi ping open session

plugin lo vediamo dopo

close session, change password,

cambiare la password dell'utente, tank find, abbiamo detto di fare una ricerca, info, adquery Ad query info to document vi dirò la verità

secondo solo, interrompo un attimo la condivisione

tanto tra i vari documenti che poi

sono disponibili dati dal progetto Sardegna

c'è anche ovviamente documentazioni tecniche

tra cui le documentazioni dei web service

quindi piuttosto che fare

reverse andarsi a leggere il codice,

mi vado a recuperare il documento tecnico dei web service. allora

e con divido Ricondivido.

Quindi, info, servizio info, consente di ottenere le informazioni di un oggetto, elenco proprietà, tipo e dimensione delle proprietà, abilitazione dell'utente, inserimento. Una chiamata di esempio è questa, input info, il nome dell'oggetto.

Ah, ok, quindi per ottenere ad esempio la profilatura.

Quindi ci dice, per quell'utente che ha fatto l'open session,

i campi che sono obbligatori, quelli che sono editabili, eccetera.

Poi abbiamo il servizio lookup, consente di accendere alle informazioni una tabella tramite il suo lookup.

Quindi riceve in input il nome del lookup, la chiave e la list fields e in output ottieni i campi richiesti.

Questo sarebbe l'equivalente di quella chiamata, vi ricordate che l'ho fatta vedere, del lookupmanager.get.

del lookup manager punto get quindi qua potevo specificare ad esempio il codice del lookup il mio id e qua il codi il campo censito sulla lookup field che volevo ottenere quindi se volevo magari

ottenere la descrizione cioè amministrativa

Desk. Quindi sarebbe l'equivalente di invocare questa API.

Servizio info, servizio get, l'abbiamo detto, servizio di set, servizio di group.

Questo è interessante perché praticamente non è altro che un wrap di tanti servizi.

Supponiamo che noi dobbiamo fare 100 inserimenti, quindi 100 set.

che noi dobbiamo fare 100 inserimenti quindi 100 set invece di fare 100 messaggi di set diversi si possono raggruppare tutti in un unico tag group quindi si fa tag group poi vedete messaggio 1

messaggio 2 messaggio 3 così via dicendo e poi dopo lui le seguono alla volta credo di essermi

perso la condivisione video. Solo a me capita?

No, a tutti.

No, neanche io.

Mannaggia i pescetti, mannaggia.

Ok, ho ricondiviso, rincominciamo da capo.

Aspetta.

Ok, adesso vedete?

Sì, sì, grazie. Ok, quindi dicevo.

Ok, grazie.

Allora, dicevo, ho detto,

il servizio e l'Ucap.

Quindi in input riceve il nome del lookup, la chiave e il campo che vogliamo ottenere dal lookup. Questo dicevo è l'equivalente di quando noi facevamo lookupmanager.get, ricordate che poi qua dicevo il nome del lookup, ad esempio, sa comune, quale passavo l'IB del record e poi gli dicevo

guarda dammi, a fronte

dell'IB trovami la descrizione.

È l'equivalente di fare questa chiamata ma tramite

web service.

Poi, dicevo

che c'è la servizio info,

in input gli passate

il nome del bin

e in output vi dice quel bin, la visibil, innanzitutto l'elenco delle proprietà e per ogni proprietà che tipo è e la visibilità, quindi in base all'utente con cui siete loggati vi dice per questo utente questo campo obbligatorio, questo è modificabile, questo è nascosto.

Sarebbe tipo registro metadata, report metadata.

Ottimo, sì, bravo.

Però fruibile per la macchina, insomma.

Servizio get, l'abbiamo detto.

Servizio set, l'abbiamo detto.

Servizio group, dicevo, è praticamente un raccoglitore di chiamate quindi invece di fare

se devo fare 100 chiamate invece di fare 100 chiamate separate una due tre posso raggrupparle

tutte quindi fare un'unica chiamata web service con dentro le mie 100 set ad esempio quindi qua

faccio semplicemente vedete messaggio 1 messaggio 2 messaggio 3 e il tutto racchiuso in un tag group.

Il tag group può avere anche l'open session contestuale, quindi posso fare anche, se la prima chiamata è un open session, lui fa l'open session,

in session e poi riusa quella session sui vari messaggi dopo.

E poi faccio la close session.

Se si è deciso di utilizzare il servizio contestuale, si deve obbligatoriamente specificare in

prima posizione il servizio d'apertura della sessione.

Fine.

Non ci sono altri servizi.

Poi dopo, ovviamente, su alcuni servizi, ad esempio sul set ci sono poi magari

delle opzioni in più. Vi ricordate infatti quando vi dicevo sul paziente BIN che il paziente

BIN aveva quell'interfaccia web service context per ricevere il service context,

quello che permetteva di ricevere il service context a partire da qualsiasi service manager,

ma anche da un service manager che è eseguito nell'ambito dei servizi.

Quindi, sul servizio di set, abbiamo, andiamo all'indice, va?

Sempre mi prendo quello dei pazienti

però come dici però non lo fa vedere dove Grazie. ok

ok

ok

potete mettere

dei

in realtà anche il servizio di find

comunque c'è delle sorte di parametri

ok che potete mettere in coda

questi parametri servono per poter

cambiare un qualche comportamento

questo comportamento poi ovviamente deve essere

gestito

però ad esempio se noi prendiamo qua il servizio di set

e quindi qua il servizio di set

ed è qua servizio di set che cosa fa abbiamo detto che crea che

Crea il service context, perché farà un service manager save.

Guardate qua, dopo che fa.

Set force modified properties into context.

Che fa?

Si va a leggere quei parameter e i parameter li va a sbattere nel context.

In maniera che, quindi qua per dirvi che potete passare qua qualsiasi cosa,

param è nome, valore, codice valore.

Quindi qua ci potete mettere,

l'esempio di Ieri facevamo l'esempio dell'appercase

apperchei cognome

in modo da insomma poi gestirselo

sul bio che aveva gestito quello che mettete su parameters alcune cose sono gestito ovviamente

tipo quello che ha scritto qui su force set Properties, però in generale è per andare ad aggiungere delle prezise, dei parametri al nostro servizio.

Ok?

Ok, domanda riguardo alla group.

Sì. domanda riguardo alla gruppo detto che si possono fare comunque più chiamate

sempre all'interno la stessa chiamata

nel caso

vada errore la terza si prosegue

quarta, quinta, sesta o si blocca tutto

giustissimo

si può decidere

il default vediamo un po'

il default mi pare che è il primo

il primo che va in errore

blocca tutto quindi

viene roll beccato tutto

ok

però

eccolo qua

questo è il metodo del gruppo

se viene specificato

un attributo

skip errors

uguale s

questo attributo lo identifica sul nodo sul gruppo ok quindi se

fa praticamente per intenderci

group qui errors s così allora

ok, così allora

lui, se skip errors

prendo la connessione a prescindere su indicato

usano una transaction, ok

quindi se skip errors

fa, mi pare

ogni chiamata

vedi dopo lui qua cicla sulle varie chiamate

ogni chiamata lui commetta

qualcosa va in errore rollback Vedi, dopo lui qua cicla sulle varie chiamate. Ogni chiamata lui committa.

Qualcosa va in errore, rollback e va avanti alla prossima.

Quindi la ignora.

Quindi prima chiamata va ok, committa.

Seconda chiamata va in errore, fa rollback.

Va la terza chiamata, va ok, committa.

Ha committato la prima, la terza, la seconda no.

Altrimenti, se non c'è lo skip errors,

lui non commetta mai,

commetta soltanto alla fine e quindi la prima eccezione che gli torna

fa una bella eccezione e si ferma tutto.

Ok?

Ok.

Ok, mentre gli errori vengono per ogni chiamata in errore, anche in output poi risposta riceveremo l'errore associato.

Se fai con lo skip error sì, eccolo qua.

Ok, esatto.

Crea un errore per ognuna e quindi poi lo aggiunge, quindi quando si dà in output ti darà la chiamata 1, ti darà l'output corretto,

la chiamata 2 che è andata in errore ti darà l'output con l'errore, la chiamata 3 ti darà l'output completo, così via dicendo.

la chiamata 3 ti darà l'output completo così via dicendo

ok

ok

poi per terminare

dicevamo che

ricordate gli oggetti comuni

abbiamo detto che possiamo fare

web service delegate

quindi vuol dire che possiamo

pubblicare il nostro servizio SOP.

Delegate.

Il web service delegate.

Setti comuni.

Comuni. Ohi eccolo qua

per la login

va bene

questa è stata qui dentro

e le guide

ok si sta qua dentro

ok il default web service ad esempio il default web service,

ha questa chiamata che è add custom call service.

Quindi potete, come dire, questo è in generale per aggiungere,

per permettere di aggiungere dei servizi custom, ok? In generale.

Quindi vediamo un po', ad esempio, chi lo chiama.

C'è uno di contabilità, staging area, aggiungo il custom service struttura elettronica, registra un web service che si chiama così, staging area, e questa classe, che cosa fa questa classe?

Che cosa fa questa classe? Implementa custom call service interface che ha a sua volta un metodo call dove riceverà comeX Initializer, ed è un custom call service che si chiama Web Service Oggetti Comuni. anche lui scusate mi si è ok

scusate

mi è partito

l'assistente vocale

di Google

perché ho detto ok

quindi

questo è un web service

soggetti comuni

che implementa comunitari

comunque questo custom call service, quindi ha comunque un metodo call che espone, dove riceve un document.

A differenza di questo web service oggetti comuni è che fa semplicemente da passacarte, cioè acquisisce l'XML.

In questo XML va a leggersi un attributo che è l'id dell'oggetto comune.

Vediamo un attimo qua.

L'ho passato, l'ho visto.

Ho visto.

Mangi pescetti. Comune. l'ho passato l'ho visto ho visto mangi per scelti come le che per i gait

ho visto passare delle gate eccolo qua

eccolo qua infatti sarà così

quindi ho un attributo dove gli dico che cosa?

il codice dell'oggetto comune che ho censito

quindi qua

configurazioni avanzate

oggetti comuni

quindi avrò qui censito

un oggetto comune di tipo web service

delegate e qua l'ho chiamato Pippo, questo codice qui Pippo è quello che indicherò qui dentro.

Quindi che cosa fa il web service delegate?

Si fa recuperare l'id dell'oggetto comune, lo istanzia e poi su questo oggetto comune gli passa a sua volta

il documento

sempre sul metodo call

quindi dice ok, pensaci tu

e dammi in output

una risposta

e poi dopo la torna indietro

build response, output, ecc

ok? quindi questo è giusto per vedere anche

l'aggancio dei web service di tipo oggetto comune bene ok da mano visto che era possibile anche criptare

di eccipare poi il messaggio messaggi in grittura per gestore le trattazioni di riflessioni dei messaggi

risposte si però ad esserti proprio con esso lo vediamo

è un po qui qui va encrypt

però questo è per la

password

mi sa solo

ok

effettivamente è solo per la password

vediamo un po'

message encrypt

message encrypt, vediamo che ci fa

no sembra lo fa per tutto ho capito chi lo set, cioè set message encrypt

init, ah init, eccolo qua, quindi dentro PSGX inizialize inizializza questo encrypt

static restore provider Secondo me...

Guarda, ci voglio fare una prova, un giro di debug secondo me...

Non fa niente, cioè...

O meglio, va configurato qualcosa, di default non fa nulla. Grazie. infatti questo or non è valido ah eccolo

quindi se questa qui

quindi sempre tra quindi

quindi quali puoi specificare sull'application properties

certo che non esiste in nessuna parte del mondo questa cosa qui configurata comunque

potenzialmente sull'amp e sull'application

properties ci puoi mettere il path al tuo jks quindi supponiamo che sta sotto pt tomcat

my key.jks di un case store è configurato

Lui sì, utilizza quel GKS per fare la cifratura del...

quel case store per fare la cifratura dei messaggi.

100% che non esiste in nessuna parte del mondo.

Però sì, questo è il funzionamento.

Ok?

Ok.

Altre domande? Abbiamo cominciato il pomeriggio parlando del RECAP, abbiamo parlato degli oggetti comuni, abbiamo visto anche come se ne fa uno, di come gli oggetti comuni devono essere tipizzati in base a ogni tipologia, ha una propria interfaccia da implementare.

come si fa la struttura di un plugin OSGI di base, a differenza di oggetti comuni non devono essere tipizzati perché il bundle stesso che tramite la classe OSGI Framework si registra

e dichiara praticamente che fa.

Abbiamo visto come si fa un progetto OSGI di base, abbiamo parlato un attimo della potenzialità di sfruttare oggetti comuni anche per l'integrazione via LDAP e SSO,

e quindi abbiamo poi visto i parametri di installazione per poterlo attivare, e poi quello che stiamo vedendo adesso sono un web service ABF,

vedendo adesso insomma sono un web service ABF quindi abbiamo detto che hanno un unico endpoint sono di modalità SOAP implementata tramite AXIS e tramite quell'unico endpoint

è possibile inviare una serie di servizi come open session, find, get, set, delete e closed

session per interagire con gli oggetti di aria, soggetti che abbiamo visto devono essere

censiti sulla si oggetti pubblici,

devono essere poi configurati messaggi, legati all'entità e così via dicendo.

Quindi è risultata la fase di configurazione.

In più, abbiamo visto che è possibile ottenere degli stab ready to use

tramite il menu configurazione avanzate help web service.

Ok, fino adesso?

Mande?

Nulla.

Chiaro.

Perfect.

Allora,

vi diciamo che mancano soltanto queste due slide

e abbiamo finito,

perché qua poi parla delle modifiche al DB, ma è quello che ci siamo anticipato insieme un paio di giorni fa.

Qui, molto velocemente, fino adesso abbiamo visto la gestione degli eventi.

in input, cioè a noi ci chiamano,

da soppoi mi mando un messaggio.

Però in realtà ci sono anche i messaggi in output,

al contrario, cioè Arias genera dei messaggi in uscita

al verificarsi i determinati eventi.

Ad esempio, inserisco un nuovo paziente su Arias,

genero un evento, inteso come evento, non evento come abbiamo visto, no? Service manager before save, after save.

terzo che vuole essere informato sul fatto che è avvenuto l'inserimento di un

paziente perché magari quel paziente se

lo vuole inserire anche nella sua base

dati locale. Comunque con eventi

intendiamo sempre evento di modifica

dei dati quindi inserimento, modifica o

cancellazione di un oggetto su Arias

quindi inserimento, modifica, cancellazione

di un comune, di un paziente, di un soggetto, comunque anche qui di oggetti che sono censiti sulla SIO oggetti pubblici, su quella tabella di cui parlavamo prima.

vengono accodati all'interno di una tabella che si chiama sidemone message queue e conterranno il riferimento di un XML con i dati completi del bin oggetto dell'evento.

Quindi che succede in soldoni?

Io configuro che voglio mandare in uscita l'evento di inserimento di un nuovo paziente?

Perfetto.

Quando l'utente inserisce un paziente,

quello che farà Arias è serializzare su un XML il bin del paziente e andarlo a scrivere su questa tabella di coda, si dà un message queue.

Poi sarà compito il sistema terzo interrogare questa tabella, facendo un polling praticamente, in maniera da capire se ci sta un nuovo evento.

Ci sta, sì, si recupera l'XML, questo bin serializzato, e fa quello che deve fare.

L'accesso a questa tabella avviene generalmente in due modi, dal sistema test, intendo, è comunque un polling però il polling lo può avvenire in due modi o query a secco

cioè proprio fa la query

nel caso in cui il sistema ha accesso al db

fa una query qui

oppure anche qui a sua volta tramite un web service di input

cioè un web service di input

cioè il bin

che sta sopra di sitemone message queue

è un bin pubblico

e quindi si può fare in sopra

messaggi defined, get e ottenere i messaggi.

Vediamo però come configurarlo.

È la stessa maschera che abbiamo visto per quanto riguarda

quanto riguarda la configurazione dei messaggi, quindi uguale.

La differenza è che qua saranno messaggi di output e non di input.

Quindi sempre su configurazione, demoni, demoni,

prendo il demone di tipo C-Web Service,

messaggi, quindi lo dobbiamo scendere comunque qui. Ok?

Quindi, vediamo un attimo se il bin delle province,

se la maschera delle province fa uso degli service

province

province

quindi no

facciamo la prova proprio sul paziente.

Il paziente penso che sarà già configurato,

e infatti c'è

chietto inserimento, ok?

Vabbè, ad esempio, prendiamone uno che già esiste,

dai, il paziente.

Intanto vediamo, insomma, che cosa significa.

Quindi, si dovrà comunque indicare il bin.

Qua si mette un codice, una descrizione, quindi vogliamo generare in uscita

l'evento di inserimento del paziente, quindi specifico il bin del paziente, qui l'evento dico, cos'è?

Insert oppure update, questi due sono gli eventi che potete andare a mettere, ok?

Per l'uscita.

Quindi insert o update, in questo caso insert, poi tanto basta, poi ci torniamo su condizioni, oggetto comune e il resto.

Tanto ci basta per adesso.

Quindi si configura questo messaggio inteso come

una grafica, ok?

adesso poi al solito bisogna andare

sull'entità applicativa

ad esempio prendiamo sempre la nostra entità applicativa

a forma app

e sui messaggi di output

e li dico a portere da tutti gli eventi

tutti i messaggi che ho definito

voglio che

voglio che voglio

che

insert patient

eccolo l'ho visto

voglio che venga mandato in uscita

a disposizione del sistema

che risponde all'entità form up

questo messaggio

dopo lo porto a destra. Adesso ci arriviamo.

Intanto questa è la configurazione, quindi definire il messaggio, quindi bin ed evento,

quindi ho definito bin sync patient, evento insert, e qua lo associo alla mia entità applicativa formupup.

map. Adesso che succede? Io faccio l'inserimento di un nuovo paziente, paziente integrazione,

Ente integrazione.

Codice fiscale.

Ok, confermo. ok e poi vado su a vedere che succede sulla tabella cioè sono sistema terzo vado interrogare la tabella e demone message più

connessione persa

no ok filtro per la mia entità che abbiamo

detto qd entità, che abbiamo detto QD Entità Form Underscore AP.

E non c'è niente, perché non c'è niente?

Ho confermato qualcosa?

Vediamo un po', facciamo un po' il giro della... Chiediamoci un po' di maschere e facciamo il giro di configurazione.

Ricerca.

Web.

No.

No, diamo un'ent, no. No, demoni entità no.

Configurazione demoni, ricerca, web.

Ah, no, ok, lo so io perché.

Perché, perché, perché, perché.

So io perché. Perché, quindi, perché. So io perché.

Perché, quindi niente, bisogna parlarne.

Insert patient, insert paz.

Allora, anzi, per questo oggetto comune, per adesso lo sbianco, così per fare l'esempio.

poi dopo ci torniamo

conferma

è questo che mi ha dato problemi

per cui non ha scritto

quindi adesso rifaccio il giro

paziente

integrazione

questa volta la facciamo donna

conferma

ok secondo me perché solo cash

facciamo un esempio con un altro messaggio

un esempio con i comuni operati comuni

vizi

use service through

cavoletti

persona fisica vin cosa c'è? Cavoletti.

Persona fisica bin, cosa c'è?

Persona fisica bin sembra che potremmo usarlo.

Proviamo la persona fisica bin, proviamo a fare quindi un evento di... Sul bin dei soggetti, inserimento,

insert,

conferma,

qui la stava sull'entità,

e alla mia entità li metto messaggio di output, Qui adesso va sull'entità.

E alla mia entità li metto messaggio di output, insert soggetto.

Ok, proviamo ad inserirci un soggetto. No, no, che sta facando, che è successo?

si è andato così col dì, però

Va bene, Siguldivilo per ha deciso di abbandonarci.

si aprono istanze di SQL Divino per

casone

ok

next start from

see demone message

ok ok Sì, demone, message.

Eh, più.

Si sta duplicando.

Non so se vedete il casino che sta succedendo sul mio PC.

Sì, forse è il caso di Killar è un sequel di vero.

Forse è un po' zitto.

Sì, ma non ce la faccio neanche perché non mi fa fare nulla.

Ma che roba.

No, niente, non risponde più. Secondo che...

Allora, un secondo, intanto interrompo la condivisione, se no...

Sto a far vedere...

Eh no, non ce l'cio fatima anche la niente mamma mia questa è buona

approfitto della breve interruzione spero breve

per

farvi gli auguri di buona Pasqua

perché io domani e martedì sono in ferie

quindi

poi mi recupererò le lezioni

alla prima giornata disponibile

auguri che naturalmente considerate estesi

alle vostre amiglie grazie mille auguri che naturalmente considerate stesi dalle vostre domini

grazie mille auguri anche a te maio a tutti i ragazzi

grazie a tutti

buona pasqua

anche io domani non ci sarò comunque martedì ritorno

ok

allora

connessioni.

Proviamo.

Io invece ne approfitto per fare una domanda.

Una volta letto il messaggio

dobbiamo anche marcarlo come letto

c'è dalla coda, dalla riga

insomma

nella tabella

o viene in automatico in qualche modo

no, devi marcarlo tu

esattamente, c'è un flag

adesso se riusciamo

Sembra che risponde adesso, vediamo un po' se non si duplica altre 17 volte.

Ok, adesso ricondivido ancora.

Ricondivido ancora.

E va.

Siamo al message queue where Qd

entità uguale

form

e e mi sta sorgendo il dubbio che serve ilvio, una volta fatta la configurazione messaggino

uscita.

Daemon, daemon, emlistener, questa è una cosa che non mi ricordo.

Vediamo subito però, load, eh sì, eccolo qua, che stupido.

Load event, read configuration message, quindi sì, server ravvio, ecco l'opposto, ecco perché non funziona.

Lui si carica gli eventi quando viene istanziato, e lui viene istanziato sulla init del psgx initializer.

Ok, quindi niente, non possiamo in realtà vedere, vabbè lo vediamo, poi magari vi spiego un attimo il volo di M1 e PMListiner che cos'è. Lo vediamo quindi su un messaggio che già esiste.

Comunque, questo è sempre un messaggio che è stato...

Questo è il messaggio, quindi sarebbe quello che troviamo sull'anagrafica dei messaggi.

Questo è un messaggio di inserimento assenza, quindi roba di HR.

In virtù di questo inserimento assenza è stato generato, quindi questo è'evento la riga dell'evento a cui associato un qd chiave con questo qd xml questo qd xml è il riferimento

ad un file su sulla si attaccia file URTD

questo però questi ovviamente vengono puliti ogni tanto

quindi niente

facciamo allora

quindi insomma quel riferimento

ad un XML che trovate sulla set touch file

quindi ad un file che si trova sulla set touch file

ora i messaggi una volta

dopo un po' vengono cancellati ovviamente

i blob però

quindi possiamo trovare magari uno che

esiste in base al tipo hai hai

hai hai hai

hai

hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai

hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai

hai

hai hai hai hai hai hai hai hai hai hai

hai

hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai hai non No, giusto.

Anche il DB sta già in... ecco, mi ristanto.

Ok.

Ok, ne prendo esempio uno.

Prendo uno a caso, non so, sperando di trovarlo

murale della favola

mi piaceva farvelo vedere

comunque

bisogna trovare un XML vero

comunque fondamentalmente

quello che va a finire in XML

sarebbe la serializzazione sempre del bin,

quindi sarebbe l'equivalente di questo, ad esempio, per le province.

Questo qui troverò.

Quindi per il paziente avremmo trovato sia punto paziente, paziente bin,

e poi qua, il paziente, cognome paziente, nome paziente.

Esattamente questo serializzato all'interno di un attach che è poi collegato

alla sita

e qui ci sta lo stato di cui parlavi tu

quindi n non letto

e

non letto e

immagino è letto

non so che perché è però è letto

ok?

va bene?

ok tra l'altro c'è anche esplorato che ha però è letto, ok? Executed forse. Va bene? Ok.

Tra l'altro c'è anche esplorato che ha

Workflow a che fare con

questa cosa.

Allora Workflow non c'è a che fare,

però Workflow può

fare un service manager save.

Quindi magari

questo qui è l'utente del demone,

questo è l'utente di profilatura

del demone

quindi magari poi il demone del workflow

nel suo operazione ha fatto un service manager save

quindi quel service manager save

l'ha fatto impersonificando

l'utente workflow e quindi qui

trovi utenti di inserimento, così

Sì.

Yes.

Ragazzi, questo poi per finire, però, vorrei vedere un attimo sul codice,

così poi concludiamo.

Anche per spiegare perché adesso non ha funzionato la configurazione.

Perché tutto questo ambaradam degli eventi è gestito da questo oggetto

che si chiama demone.pm.listener.

E lui che cosa fa?

Una delle prime cose

appena viene istanziato

quando parte l'applicativo

è una delle prime cose

è proprio quella di caricarsi

la lista degli eventi

quindi la configurazione

che sono state fatte

quindi quello che ci siamo fatti

quindi non funziona

perché ovviamente

bisognerà avviare adesso

per fargli prendere il fatto

che deve generare degli eventi

per la nostra

nuova entità applicativa in uscita

lui che cosa fa?

si aggancia e crea un listener

allegato al persistent manager

quindi quel listener che avevamo visto prima

e

ad esempio dopo la store

anzi, sì, dopo la store

quindi quando la store è completata

va a vedere se

il

messaggio

get even catch

va a vedere se

il bin

che sta processando

è tra quelli

che lui si è caricato inizialmente

è tra quelli dove è stato configurato un messaggio di

uscita e se si poi incomincia insomma a fare a fare dovrebbe fare la scrittura hanno ecco

qua after manager stai scusate in after and after manager st, va a vedere l'evento, se di insert, genera coda evento, ok?

E qua dentro va a scrivere genera coda sulla nostra tabella, eventualmente, si demone message

q

eccolo qua

tramite il bin demone message q

ok

classe demone pm listener

ok

non è nulla di trascendentale

l'unica cosa importante è questa

in realtà l'evento che noi creiamo

qui sui messaggi, adesso quindi torniamo a quello che ho saltato prima, è questo.

perché di base, allora se l'oggetto comune non è stato indicato, ok, vuol dire che tutti gli inserimenti del paziente vengono inviati in uscita, se in specifico un oggetto comune

fa riferimento praticamente ad un oggetto comune di tipo, tornando alla

nostra maschera di oggi

di tipo

daemon event catch

dove praticamente

ci fa implementare tramite un'interfaccia

ci fa implementare una classe

dove dobbiamo dire

dove ci viene passato in input

l'oggetto che dovrebbe

generare un messaggio in uscita

e noi possiamo fare tutte le nostre valutazioni e dire

ah sì, questo oggetto

lo voglio effettivamente sparare fuori

o non voglio e quindi tornare un true false

quindi fa da

da veto insomma

se il demone event catch torna true allora

il demone pm listener prosegue

nella suo lavoro

e va a fare l'inserimento

sulla demone message queue

altrimenti ignora inferimento sulla demone message queue. Altrimenti ignora.

Infatti qui,

demone pmlistener,

after manager save, qui dentro,

quando fa genera codevento,

vedete, la prima cosa che fa è questa.

Vedere se è stato definito un event catch,

e se sì,

e se sì,

ok, e se sì e se sì ok invoca questa interfaccia

che messaggi

ecco qua

e chiede al demon event catch

invoca questo metodo event catch

se gli torna

true

fa tutta una cosa

event catch

demon event

seconda demon event

ecco qua

valuta oggetto comune

ecco istanza

l'oggetto comune

e poi niente

si aspetta che torni un booleano

in base al risultato quindi torna il risultato dell'event catch

se l'event catch gli ha tornato ok

vuol dire che avrà generato uno o più liste di messaggi

qua perché ragiona a lista?

perché in realtà la definizione del messaggio è una

però poi il mio messaggio lo posso abilitare a più entità

applicative se io lo abilito ad esempio il mio messaggio di inserimento paziente a tre entità

applicative in output su asidemone message q ci scrivo tre record per lo stesso messaggio ok

Ok?

Tutto qui.

Non mi voglio tediare oltre, perché danno qua.

Tutto chiaro? Domande?

Bastanza chiaro.

Tutto chiaro tutto chiaro ok

perfetto

va bene

non c'è altro da dire

adesso vi carico anche queste

slide

e questa parte è finita

poi domani cominceremo

a parlare, torneremo

a lavorare un po' sul codice, faremo

delle maschere

JAWF, perché chi non ci sarà non è un problema

perché tanto

il servizio di registrazione

i code snippet anche per JAWF

sono sempre sul documento

e poi gli esercizi sono sempre gli stessi esercizi

che abbiamo fatto l'altra volta, soltanto rivisti

in chiave JAWF

d'accordo?

va bene grazie ragazzi, buona serata in chiave JAUF d'accordo?

va bene ok

grazie ragazzi, buona serata

buona Pasqua di nuovo e ci becchiamo

settimana prossima

ciao a tutti

ciao ragazzi

ciao Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.

Grazie a tutti. Grazie a tutti. Grazie a tutti.